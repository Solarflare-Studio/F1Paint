<!DOCTYPE html>
<html lang="en">
    <link rel="stylesheet" href="./sfPaint.css">
    <link rel="stylesheet" href="./iframeAR.css">   <!-- used by inline iframe ar page -->

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no" />

        <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
        <link rel="manifest" href="./site.webmanifest">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>F1 PaintShop</title> 
        <script>
            const loadtime = new Date();    // used to determine how fast we've loaded the page
        </script>
        <script src="//cdn.8thwall.com/web/iframe/iframe.js"></script>
        <!-- <script src="./js/modifiers.min.js"></script> -->

<!-- loading the bare minimum style for background body -->
        <style>
            body {

                background-color: var(--introPageCol);

                padding: 0;
                margin: 0;
                width: auto;
                height: auto;
                overflow: none;
                font-family: "F1PaintShopFont";

                
                font-family: "F1PaintShopBoldFont";
                font-size: var(--rootFontSize);
                font-weight: 700;

                animation: fadeInAnimation ease 0.5s;
                animation-iteration-count: 1;
                animation-fill-mode: forwards;
                }
                @keyframes fadeInAnimation {
                0% {
                    opacity: 0;
                }
                100% {
                    opacity: 1;
                }
            }
            .progress-bar {
                width: 50%;
                height: 20px;
                background-color: rgb(161, 148, 148);
                border-radius: 25px;
                position: relative;
                margin: 50px auto;
            }
            #progress {
                height: 100%;
                border-radius: 25px;
                background-color: rgb(22, 198, 22);
                width: 0;
                position: absolute;
                top: 0;
                left: 0;
            }
            #progress2 {
                height: 100%;
                border-radius: 25px;
                background-color: green;
                width: 0;
                position: absolute;
                top: 0;
                left: 0;
            }
        </style>
        <style>
            @font-face {
                font-family: "F1PaintShopFont";
                src: url('./assets/fonts/Formula1-Display-Regular.otf') format("truetype");
                font-weight: normal;
                font-style: normal;
            }

            @font-face {
                font-family: "F1PaintShopBoldFont";
                src: url('./assets/fonts/Formula1-Display-Bold.otf') format("truetype");	
                font-weight: bold;
                font-style: normal;
                    
            }
        </style>
    </head>
    <body onload='setTimeout( onloaded,1000)'>
        <div id="intropages">
            <div class="introblock">
                <div id="splashblock" class="splashblock">
                    <div class="hcentre">
                        <div>F1 PaintShop</div><br>
                        <div>Loading ...</div><br>
                        <div id="loadingindicatorblock">
                            <img id="loadingindicatorimage" src="./assets/loadingindicator.gif" />
                        </div>
                        <div class="progress-bar">
                            <div id="progress"></div>
                          </div>                        
                    </div>       
                </div>
                <div id="welcomeblock" class="splashblock fadedout">
                    <div class="hcentre">
                        <div>Welcome to F1 PaintShop</div><br>
                        <div class="fontNormal">You will be presented with your own F1 Car to customize.</div><br>
<!--                        <div onclick="switchModel(false);">car</div><div onclick="switchModel(true);">helmet</div>  -->
                        <div class="buttonpanel">
                            <div id="introokbutton" class="introbutton hidden" onclick="introNextPage(1);">Ok</div>
                            <div id="introcarbutton" class="introbutton" onclick="switchModel(false);introNextPage(1);">Car</div>
                            <div id="introhelmetbutton" class="introbutton" onclick="switchModel(true);introNextPage(1);">Helmet</div>
                        </div>
                    </div>
                </div>
                <div id="tut1block" class="splashblock fadedout helpboxbottom">
                    <div id="tut1interior" class="hcentre fontNormal">
                        <div>Above is the 3D area which shows your car straight from the engineers.</div><br>
                        <div>You can touch and drag the 3D panel to look around the car.</div><br>
                        <div class="buttonpanel">
                            <div class="introbutton" onclick="introNextPage(2);">Next</div>
                        </div>
                    </div>
                </div>
                <div id="tut2block" class="splashblock fadedout helpboxtop">
                    <div class="hcentre fontNormal">
                        <div>Below is where you can choose your different patterns and colour selections.</div><br>
                        <div>Simply choose your options and press Next for more livery selections.</div><br>
                        <div class="buttonpanel">
                            <div class="introbutton" onclick="introNextPage(3);">Let's go!</div>
                                </div>
                            </div>
                        </div> 
                    </div>
                </div>
                <div class="container fadedout" id="container" style="transition:opacity 0.7s;">
                    <div id="minmax" class="minmax" onclick="onMinMax();"><i class="gg-chevron-double-right"></i></div>
                    <div class="palette_tools disabledUserEvents" id="palette_tools">
                        <div id="guicontainer">
                            <div id="guitabs" class="f1patterns">
                                <div class="f1colourrow guiBGcolour">
                                    <div class="guitabpadder"></div>
                                    <div id="f1patterntab" class="f1tabs f1tabTone1 f1tabActive" onclick="onPatternsTab()">PATTERN</div>
                                    <div id="f1colourtab" class="f1tabs f1tabTone2" onclick="onColoursTab()">PAINT</div>
                                    <div id="f1tagtab" class="f1tabs f1tabTone3" onclick="onTagTab()">TAG</div>
                                    <div id="f1decalstab" class="f1tabs f1tabTone4" onclick="onDecalTab()">SPONSOR</div>
                                    <div class="guitabpadder"></div>
                                </div>
                            </div> 
                        </div>              
                        <div id="toolscontainer">
                            <div id="toolsexpanded">
                            
                                <div id="patternsPanel" class="f1patterns">
                                    <div id="layer1patterns_ins" class="layerPatternsContainer scrollbox"></div>

                                    <div id="patternColours" class="f1patterncolours hidden">
                                        <div>
                                            <div class="channelblock">BASE PAINT
                                                <div id="basepaintbutton" class="paintButtons" onclick="onChangePaint(0);"></div>
                                            </div>
                                            <div id="flexpair" class="flexpair">
                                                <div class="channelblock paintlayout">PRIMARY PAINT
                                                    <div id="primarypaintbutton" class="paintButtons" onclick="onChangePaint(1);"></div>
                                                </div>  
                                                <div class="channelblock paintlayout">SECONDARY PAINT
                                                    <div id="secondarypaintbutton" class="paintButtons" onclick="onChangePaint(2);"></div>
                                                </div>  
                                            </div>
                                        </div>
                                        <div id="redspacer" class="redspacer"></div>
                                        <div id="presetandrandomblock" class="flexpair heightx3">
                                            <div class="preset">
                                                <div>PRESET PAINT</div>
                                                <div class="randomandpreset" onclick="onPreselectedPage();">
                                                    <img width='auto' height='100%' src="./assets/inapp/preselectedpaint.png"/>
                                                </div>
                                            </div>
                                            <div class="preset">
                                            <div>RANDOM PAINT</div>
                                                <div class="randomandpreset" onclick="onRandomPaint();">
                                                    <img width='auto' height='100%' src="./assets/inapp/randompaint.png"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- may or may not be having preset colour thumbs to choose from
                                    <div id="paintpresetsblock" class="f1patterncolours hidden">
                                        pick a colour set
                                        <div id="layerPresets_ins" class="layerPresetsContainer scrollbox">
                                            <div class="patternContainer"><div class="pattern" patternid="4001" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4002" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4003" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4004" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4005" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4006" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4007" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                            <div class="patternContainer"><div class="pattern" patternid="4008" onclick="onPresetPicked(this)" style="background-image: url('./patterns/presets/preset1.jpg');"></div></div>
                                        </div>
                                    </div>
                                    -->
                                    <div id="paintachannelblock" class="f1patterncolours hidden">
                                        <div id="whichchanneltext">WHICH CHANNEL</div>
                                        <div>
                                            <div id="colourPickerContainer" class="colourscontainer">
                                                <div style="height:15px"></div>
                                                <div id="coloursample" class="coloursample"></div>
                                                <div id="coloursexpanded_2" class="coloursexpanded_2">
                                                    <div class="centreddiv">
                                                        <div class="colourWheelPicker" id="colourWheelPicker"></div>
                                                    </div>
                                                </div>
                                            </div>     
                                        </div>
                                        <div id="glosstypeblock">
                                            <div class="flex3">
                                                <div id="glossbutton" class="introbutton" onclick="onMaterialbutton(0);">GLOSS</div>
                                                <div id="mattebutton" class="introbutton" onclick="onMaterialbutton(1);">MATTE</div>
                                                <div id="metallicbutton" class="introbutton" onclick="onMaterialbutton(2);">METALLIC</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="tagblock">
                                        <div id="gettagblockheight">
                                            <div style="width:100%;">
                                                <div class="evenflex">
                                                    <div>Enter your 2 character tag</div>

                                                    <label id="taginputcontainer" class="input disabledButton">
                                                        <input id="taginput" class="tagInput__field" type="text" placeholder="F1" maxlength=2 />
                                                    </label>
                                                </div>
                                            </div>

                                            <div id="tagColours" class="f1patterncolours">
                                                <div>
                                                    <div id="flexpair" class="flexpair">
                                                        <div class="channelblock paintlayout">TAG COLOUR
                                                            <div id="tagpaintbutton" class="paintButtons" onclick="onChangePaint(4);"></div>
                                                        </div>  
                                                        <div class="channelblock paintlayout">STYLE COLOUR
                                                            <div id="tagstylepaintbutton" class="paintButtons" onclick="onChangePaint(3);"></div>
                                                        </div>  
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="channelblock">Choose a tag style</div>
                                        </div>
                                        <div id="layer2tags_ins" class="layerTagsContainer scrollbox"></div>
                                        <div id="paintatagblock" class="f1patterncolours hidden">
                                            <div id="whichchanneltext">WHICH CHANNEL</div>
                                            <div>
                                                <div id="tagcolourPickerContainer" class="colourscontainer">
                                                    <div style="height:15px"></div>
                                                    <div id="tagcoloursexpanded_2" class="coloursexpanded_2">
                                                        <div class="centreddiv">
                                                            <div class="colourWheelPicker" id="colourWheelPicker"></div>
                                                        </div>
                                                    </div>
                                                </div>     
                                            </div>
                                        </div>                            
                                    </div>
                                    <div id="decalblock" class="hidden">
                                        <div id="getdecalblockheight">
                                            <div id="decalColours" class="f1patterncolours">
                                                <div>
                                                    <div class="channelblock">DECAL COLOUR
                                                        <div id="decalpaintbutton" class="paintButtons" onclick="onChangePaint(5);"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="channelblock">Choose a decal</div>
                                        </div>
                                        <div id="layer3decals_ins" class="layerDecalsContainer scrollbox"></div>
                                        <div id="paintdecalblock" class="f1patterncolours hidden">
                                            <div id="whichchanneltext">WHICH CHANNEL</div>
                                            <div>
                                                <div id="decalcolourPickerContainer" class="colourscontainer">
                                                    <div style="height:15px"></div>
                                                    <div id="decalcoloursexpanded_2" class="coloursexpanded_2">
                                                        <div class="centreddiv">
                                                            <div class="colourWheelPicker" id="colourWheelPicker"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="finalPage" class="hidden">
                                    <div class="hcentre">
                                        <div>Congratulations!</div><br>
                                        <div>Now you can see your livery in AR!</div><br>
                                        <div>Press Back to change your livery or Confirm to proceed with your Livery!</div><br>
                                    </div>   
                                </div>
                                <div id="progressbarPage" class="hidden">
                                    <div class="hcentre">
                                        <div>processing...</div>
                                        <div class="progress-bar">
                                            <div id="progress2"></div>
                                        </div>
                                    </div>   
                                </div>
                                <div id="launchARPage" class="hidden">
                                    <div class="hcentre">
                                        <div>Your paint job is ready!</div><br>
                                        <div>Press the Launch AR button!</div><br>
                                    </div>   
                                </div>
                                <!-- main back next buttons -->

                                
                                <div id="backornextblock" class="splashblock backornextblock">
                                    <div class="buttonpanel flexpair">
                                        <div id="backbutton" class="introbutton mainButtons disabledButton" onclick="backNextPage(-1);">BACK</div>
                                        <div id="nextbutton" class="introbutton mainButtons nextButton" onclick="backNextPage(1);">NEXT</div>
                                        <div id="launchbutton" class="introbutton mainButtons confirmButton hidden"><a id="launchbuttonlink" target="_blank" href="www.mapflaps.com">LAUNCH AR</a></div>
                                        <div id="confirmbutton" class="introbutton mainButtons confirmButton hidden" onclick="onConfirm();">CONFIRM</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div id="canvas-positioner">
                        <div id="canvas-container"></div> <!-- this is where I append the webGL3D canvas -->
                    </div>
                    <!-- burger menu -->
                    <div id='burgermenu'><img src='./assets/inapp/burger_icon.png'  style='width: 100%;height: 100%;'></div>
                    <!-- AR iframe -->
                    <div id="ARpage" class="hidden">
                        <div id="inline-ar" class="hidden">
                            <button id="startBtn" onClick="startAR()">
                                <img src="./assets/inline/start-ar-banner.svg">
                            </button>
                            <img id="poweredByLogo" src="./assets/inline/poweredby8thwall.svg">
                            <div id="iframeControls">
                                <button id="stopBtn" onClick="stopAR()">
                                    <div id="stopImg"></div>
                                </button>
                            </div>
                            <iframe
                                id="my-iframe"
                                allow="camera;gyroscope;accelerometer;magnetometer;xr-spatial-tracking;microphone;">
                            </iframe>
                        </div>
                        <!-- ive just repeated the back menu here as a hack to go over iFrame AR -->
                        <!--
                        <div id="backornextblockAR" class="backornextblock splashblock" style="z-index:99;bottom:5em;">
                            <div class="buttonpanel flexpair">
                                <div id="backbuttonAR" class="introbutton mainButtons" onclick="backNextPage(-1);">BACK</div>
                            </div>
                        </div>  
                        -->
                    </div>
                </div>

                <!-- cover screen -->
                <div id="faderblock" class="fader" style="z-index:4;">
                    <div class="rotatemsg">Please rotate your device to Portrait.</div>
                </div>

<!-- cookie warning
    <div onclick="document.getElementById('popupboxconfirm').style.display='none';" id="popupboxconfirm"><div class="popuptexttext">F1 Livery Designer uses cookies to improve your experience. See our <a target="_blank" href="https://www.f1.uk/privacy-policy/">privacy policy</a>, or continue browsing to accept our use of cookies.<img style="top: 8px; right: 12px; position: absolute;" src="./assets/closecross.png"></div></div>
-->

        </div>
        <div id="versionid" onclick="onConsole(0)">version</div>
        <div id="console" class="hidden">
            <div class="console">
                <div class="console_button expandbutton" onclick="expandDropdown('toneexpander');">Tone</div>
                <div class="console_button shrunk expander" id="toneexpander">
                    <div id="c_tonemappingSliderTxt" class="slidertxt">toneMapping</div>
                    <input type="range" min="1" max="50" value="23" class="slider" id="c_tonemappingSlider">
                    <select id="c_tonemap" name="tonemap">
                        <option value="linear">Linear</option>
                        <option value="cineon">Cineon</option>
                        <option value="aces">ACES</option>
                    </select>
                </div>
                <div class="console_button">
                    <div id="c_envStrengthSliderTxt" class="slidertxt">envStrength</div>
                    <input type="range" min="1" max="150" value="50" class="slider" id="c_envStrengthSlider">
                    <select id="c_envstrength" name="envstrength">
                        <option value="car">Car</option>
                        <option value="carstatic">Car static</option>
                        <option value="garage">Garage</option>
                      </select>                    
                </div>
                <div class="console_button expandbutton" onclick="expandDropdown('lightexpander');">Lights</div>
                <div class="console_button shrunk expander" id="lightexpander">
                    <div id="c_lightsSliderTxt" class="slidertxt">spots</div>
                    <input type="range" min="0" max="35" value="10" class="slider" id="c_lightsSlider">
                    <div id="c_lightsASliderTxt" class="slidertxt">ambient</div>
                    <input type="range" min="0" max="40" value="10" class="slider" id="c_lightsASlider">
                    <div id="c_lightsDSliderTxt" class="slidertxt">directional</div>
                    <input type="range" min="0" max="45" value="10" class="slider" id="c_lightsDSlider">
                </div>

                <div class="console_button expandbutton" onclick="expandDropdown('sfxexpander');">SFX</div>
                <div class="console_button shrunk expander" id="sfxexpander">
                    <div id="c_sfxRibbonSliderTxt" class="slidertxt">ribbon bloom</div>
                    <input type="range" min="0" max="300" value="6" class="slider" id="c_sfxRibbonSlider">

                    <div id="c_sfxSliderTxt" class="slidertxt">bloom</div>
                    <input type="range" min="0" max="25" value="6" class="slider" id="c_sfxSlider">
<!--                
                    <div class="console_button">
                        <label for="specialFXpipe_input"> specialFXpipe</label><br>
                        <input  class="introbutton" onclick="onConsole(1)" type="checkbox" id="specialFXpipe_input" name="check" checked>
                    </div>
-->                    
                    <div class="console_button">
                        <label for="ribbon_input"> xtras</label><br>
                        <input  class="introbutton" onclick="onConsole(2)" type="checkbox" id="ribbon_input" name="check" checked>
                        <input  class="introbutton" onclick="onConsole(4)" type="checkbox" id="ribbonGlow_input" name="check" checked>
                        <!-- <input  class="introbutton" onclick="onConsole(3)" type="button" id="ribbon_generate" name="rib" checked> -->

                        <div class="console_button">
                            <select id="c_bend" name="c_bend">
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                            </select>
                            <select id="c_bendmodcon" name="c_bendmodcon">
                                <option value=-1>LEFT</option>
                                <option value=1>RIGHT</option>
                                <option value=0>NONE</option>
                                <option value=1>X</option>
                                <option value=2>Y</option>
                                <option value=4>Z</option>
                            </select>

                            <div id="c_bendFSliderTxt" class="slidertxt">force</div>
                            <input type="range" min="-200" max="200" value="50" class="slider" id="c_bendFSlider">
                            <div id="c_bendPSliderTxt" class="slidertxt">pos</div>
                            <input type="range" min="0" max="100" value="0" class="slider" id="c_bendPSlider">
                            <div id="c_bendASliderTxt" class="slidertxt">angle</div>
                            <input type="range" min="0" max="360" value="10" class="slider" id="c_bendASlider">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>