/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={1446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var i=n(2717),r=n(7658),o=n(4079),a=function(){function e(){this.crc32=new o.Crc32}return e.prototype.update=function(e){(0,r.isEmptyData)(e)||this.crc32.update((0,r.convertToBuffer)(e))},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,(0,r.numToUint8)(this.crc32.digest())]}))}))},e.prototype.reset=function(){this.crc32=new o.Crc32},e}();t.AwsCrc32=a},4079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var i=n(2717),r=n(7658);t.crc32=function(e){return(new o).update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var r=i.__values(e),o=r.next();!o.done;o=r.next()){var s=o.value;this.checksum=this.checksum>>>8^a[255&(this.checksum^s)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=o;var a=(0,r.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),s=n(1446);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return s.AwsCrc32}})},2717:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},1099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32c=void 0;var i=n(6908),r=n(7658),o=n(9040),a=function(){function e(){this.crc32c=new o.Crc32c}return e.prototype.update=function(e){(0,r.isEmptyData)(e)||this.crc32c.update((0,r.convertToBuffer)(e))},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,(0,r.numToUint8)(this.crc32c.digest())]}))}))},e.prototype.reset=function(){this.crc32c=new o.Crc32c},e}();t.AwsCrc32c=a},9040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32c=t.Crc32c=t.crc32c=void 0;var i=n(6908),r=n(7658);t.crc32c=function(e){return(new o).update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var r=i.__values(e),o=r.next();!o.done;o=r.next()){var s=o.value;this.checksum=this.checksum>>>8^a[255&(this.checksum^s)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32c=o;var a=(0,r.uint32ArrayFrom)([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),s=n(1099);Object.defineProperty(t,"AwsCrc32c",{enumerable:!0,get:function(){return s.AwsCrc32c}})},6908:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},8260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,i=t.getRandomValues,r=t.subtle;return n.map((function(e){return r[e]})).concat(i).every((function(e){return"function"==typeof e}))}return!1}},87:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1980);i.__exportStar(n(8260),t),i.__exportStar(n(6665),t),i.__exportStar(n(5470),t),i.__exportStar(n(969),t),i.__exportStar(n(5287),t)},1980:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},1830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_1=t.SHA_1_HMAC_ALGO=t.SHA_1_HASH=void 0,t.SHA_1_HASH={name:"SHA-1"},t.SHA_1_HMAC_ALGO={name:"HMAC",hash:t.SHA_1_HASH},t.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])},8192:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha1=void 0;var i=n(9860),r=n(3849),o=n(21),a=n(87),s=n(6495),c=n(7658),l=function(){function e(e){if((0,o.supportsWebCrypto)((0,s.locateWindow)()))this.hash=new r.Sha1(e);else{if(!(0,a.isMsWindow)((0,s.locateWindow)()))throw new Error("SHA1 not supported");this.hash=new i.Sha1(e)}}return e.prototype.update=function(e,t){this.hash.update((0,c.convertToBuffer)(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();t.Sha1=l},9860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha1=void 0;var i=n(5091),r=n(1830),o=n(2084),a=n(6495),s=function(){function e(e){this.secret=e,this.reset()}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(c(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e.prototype.reset=function(){var e;this.secret?(this.operation=(e=this.secret,new Promise((function(t,n){var i=(0,a.locateWindow)().msCrypto.subtle.importKey("raw",c(e),r.SHA_1_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}}))).then((function(e){return(0,a.locateWindow)().msCrypto.subtle.sign(r.SHA_1_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,a.locateWindow)().msCrypto.subtle.digest("SHA-1"))},e}();function c(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha1=s},7960:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha1=t.Ie11Sha1=void 0,n(4275).__exportStar(n(8192),t);var i=n(9860);Object.defineProperty(t,"Ie11Sha1",{enumerable:!0,get:function(){return i.Sha1}});var r=n(3849);Object.defineProperty(t,"WebCryptoSha1",{enumerable:!0,get:function(){return r.Sha1}})},5091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},3849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha1=void 0;var i=n(2084),r=n(5091),o=n(1830),a=n(6495),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){(0,a.locateWindow)().crypto.subtle.importKey("raw",c(e),o.SHA_1_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!(0,r.isEmptyData)(e)){var t=c(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,a.locateWindow)().crypto.subtle.sign(o.SHA_1_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,r.isEmptyData)(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_1):Promise.resolve().then((function(){return(0,a.locateWindow)().crypto.subtle.digest(o.SHA_1_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function c(e){return"string"==typeof e?(0,i.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha1=s},4275:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},7333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},2769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(3479),r=n(8889),o=n(1938),a=n(21),s=n(87),c=n(6495),l=n(7658),u=function(){function e(e){(0,a.supportsWebCrypto)((0,c.locateWindow)())?this.hash=new r.Sha256(e):(0,s.isMsWindow)((0,c.locateWindow)())?this.hash=new i.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update((0,l.convertToBuffer)(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();t.Sha256=u},3479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(8036),r=n(7333),o=n(2084),a=n(6495),s=function(){function e(e){this.secret=e,this.reset()}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(c(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e.prototype.reset=function(){var e;this.secret?(this.operation=(e=this.secret,new Promise((function(t,n){var i=(0,a.locateWindow)().msCrypto.subtle.importKey("raw",c(e),r.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}}))).then((function(e){return(0,a.locateWindow)().msCrypto.subtle.sign(r.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,a.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();function c(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=s},7643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,n(5789).__exportStar(n(2769),t);var i=n(3479);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return i.Sha256}});var r=n(8889);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return r.Sha256}})},8036:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},8889:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(7658),r=n(7333),o=n(6495),a=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!(0,i.isEmptyData)(e)){var t=(0,i.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,o.locateWindow)().crypto.subtle.sign(r.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,i.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,o.locateWindow)().crypto.subtle.digest(r.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,i.convertToBuffer)(e.secret),r.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))},e}();t.Sha256=a},5789:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var i=n(9945),r=function(){function e(){this.state=Int32Array.from(i.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>i.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(var r=this.bufferLength;r<i.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<i.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(i.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(i.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(i.DIGEST_LENGTH);for(r=0;r<8;r++)o[4*r]=this.state[r]>>>24&255,o[4*r+1]=this.state[r]>>>16&255,o[4*r+2]=this.state[r]>>>8&255,o[4*r+3]=this.state[r]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=0;d<i.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var h=this.temp[d-2],p=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,m=((h=this.temp[d-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(m+this.temp[d-16]|0)}var f=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&c^~s&l)|0)+(u+(i.KEY[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&o^r&o)|0;u=l,l=c,c=s,s=a+f|0,a=o,o=r,r=n,n=f+g|0}t[0]+=n,t[1]+=r,t[2]+=o,t[3]+=a,t[4]+=s,t[5]+=c,t[6]+=l,t[7]+=u},e}();t.RawSha256=r},9945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3541).__exportStar(n(5430),t)},5430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(3541),r=n(9945),o=n(914),a=n(7658),s=function(){function e(e){this.secret=e,this.hash=new o.RawSha256,this.reset()}return e.prototype.update=function(e){if(!(0,a.isEmptyData)(e)&&!this.error)try{this.hash.update((0,a.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new o.RawSha256,this.secret){this.outer=new o.RawSha256;var e=function(e){var t=(0,a.convertToBuffer)(e);if(t.byteLength>r.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(r.BLOCK_SIZE);return i.set(t),i}(this.secret),t=new Uint8Array(r.BLOCK_SIZE);t.set(e);for(var n=0;n<r.BLOCK_SIZE;n++)e[n]^=54,t[n]^=92;for(this.hash.update(e),this.outer.update(t),n=0;n<e.byteLength;n++)e[n]=0}},e}();t.Sha256=s},3541:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},21:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(7840).__exportStar(n(7787),t)},7787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var i=n(7840),r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function a(e){return e&&r.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&a(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=a,t.supportsZeroByteGCM=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:if(!a(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},7840:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>p,__values:()=>m,__read:()=>f,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>x,__asyncValues:()=>w,__makeTemplateObject:()=>S,__importStar:()=>E,__importDefault:()=>_,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>P});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},1106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=n(2084),r="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:i.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?r(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},7658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var i=n(1106);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return i.convertToBuffer}});var r=n(4304);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var o=n(2174);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var a=n(1558);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return a.uint32ArrayFrom}})},4304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},2174:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},1558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}},6029:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var i=n(4618),r=n(8493),o=n(360),a=n(1721),s=n(8370);class c extends o.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,r.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.a3)(t,c.getEndpointParameterInstructions()));const o=e.concat(this.middlewareStack),{logger:s}=t,l={logger:s,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:a.Zu,outputFilterSensitiveLog:a.ZO},{requestHandler:u}=t;return o.resolve((e=>u.handle(e.request,n||{})),l)}serialize(e,t){return(0,s.Eb)(e,t)}deserialize(e,t){return(0,s.$M)(e,t)}}},376:(e,t,n)=>{"use strict";n.d(t,{n:()=>c});var i=n(4618),r=n(8493),o=n(360),a=n(1721),s=n(8370);class c extends o.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,r.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.a3)(t,c.getEndpointParameterInstructions()));const o=e.concat(this.middlewareStack),{logger:s}=t,l={logger:s,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:a.N,outputFilterSensitiveLog:a.NH},{requestHandler:u}=t;return o.resolve((e=>u.handle(e.request,n||{})),l)}serialize(e,t){return(0,s.US)(e,t)}deserialize(e,t){return(0,s.BX)(e,t)}}},4519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AmbiguousRoleResolutionType:()=>K.Bz,CognitoIdentity:()=>be,CognitoIdentityClient:()=>q,CognitoIdentityProviderFilterSensitiveLog:()=>K.b6,CognitoIdentityServiceException:()=>Ee.b,ConcurrentModificationException:()=>K.qJ,CreateIdentityPoolCommand:()=>X,CreateIdentityPoolInputFilterSensitiveLog:()=>K.fK,CredentialsFilterSensitiveLog:()=>K.z$,DeleteIdentitiesCommand:()=>Z,DeleteIdentitiesInputFilterSensitiveLog:()=>K.RH,DeleteIdentitiesResponseFilterSensitiveLog:()=>K.E3,DeleteIdentityPoolCommand:()=>J,DeleteIdentityPoolInputFilterSensitiveLog:()=>K.x6,DescribeIdentityCommand:()=>Q,DescribeIdentityInputFilterSensitiveLog:()=>K.Su,DescribeIdentityPoolCommand:()=>ee,DescribeIdentityPoolInputFilterSensitiveLog:()=>K.U9,DeveloperUserAlreadyRegisteredException:()=>K.wc,ErrorCode:()=>K.jK,ExternalServiceException:()=>K.Xd,GetCredentialsForIdentityCommand:()=>te.L,GetCredentialsForIdentityInputFilterSensitiveLog:()=>K.Zu,GetCredentialsForIdentityResponseFilterSensitiveLog:()=>K.ZO,GetIdCommand:()=>ne.n,GetIdInputFilterSensitiveLog:()=>K.N,GetIdResponseFilterSensitiveLog:()=>K.NH,GetIdentityPoolRolesCommand:()=>ie,GetIdentityPoolRolesInputFilterSensitiveLog:()=>K.Gd,GetIdentityPoolRolesResponseFilterSensitiveLog:()=>K.hP,GetOpenIdTokenCommand:()=>re,GetOpenIdTokenForDeveloperIdentityCommand:()=>oe,GetOpenIdTokenForDeveloperIdentityInputFilterSensitiveLog:()=>K.CV,GetOpenIdTokenForDeveloperIdentityResponseFilterSensitiveLog:()=>K.Fr,GetOpenIdTokenInputFilterSensitiveLog:()=>K.km,GetOpenIdTokenResponseFilterSensitiveLog:()=>K.ep,GetPrincipalTagAttributeMapCommand:()=>ae,GetPrincipalTagAttributeMapInputFilterSensitiveLog:()=>K.IY,GetPrincipalTagAttributeMapResponseFilterSensitiveLog:()=>K.R$,IdentityDescriptionFilterSensitiveLog:()=>K._J,IdentityPoolFilterSensitiveLog:()=>K.k9,IdentityPoolShortDescriptionFilterSensitiveLog:()=>K.Wj,InternalErrorException:()=>K.Bj,InvalidIdentityPoolConfigurationException:()=>K.sC,InvalidParameterException:()=>K.L7,LimitExceededException:()=>K.ss,ListIdentitiesCommand:()=>se,ListIdentitiesInputFilterSensitiveLog:()=>K.yg,ListIdentitiesResponseFilterSensitiveLog:()=>K.fe,ListIdentityPoolsCommand:()=>ce,ListIdentityPoolsInputFilterSensitiveLog:()=>K.FM,ListIdentityPoolsResponseFilterSensitiveLog:()=>K.aZ,ListTagsForResourceCommand:()=>le,ListTagsForResourceInputFilterSensitiveLog:()=>K.bS,ListTagsForResourceResponseFilterSensitiveLog:()=>K.iO,LookupDeveloperIdentityCommand:()=>ue,LookupDeveloperIdentityInputFilterSensitiveLog:()=>K.Ay,LookupDeveloperIdentityResponseFilterSensitiveLog:()=>K.Wk,MappingRuleFilterSensitiveLog:()=>K.GL,MappingRuleMatchType:()=>K.wg,MergeDeveloperIdentitiesCommand:()=>de,MergeDeveloperIdentitiesInputFilterSensitiveLog:()=>K.bg,MergeDeveloperIdentitiesResponseFilterSensitiveLog:()=>K.mx,NotAuthorizedException:()=>K.Sy,ResourceConflictException:()=>K.b7,ResourceNotFoundException:()=>K.P$,RoleMappingFilterSensitiveLog:()=>K.i0,RoleMappingType:()=>K.UK,RulesConfigurationTypeFilterSensitiveLog:()=>K.p_,SetIdentityPoolRolesCommand:()=>he,SetIdentityPoolRolesInputFilterSensitiveLog:()=>K.OV,SetPrincipalTagAttributeMapCommand:()=>pe,SetPrincipalTagAttributeMapInputFilterSensitiveLog:()=>K.OL,SetPrincipalTagAttributeMapResponseFilterSensitiveLog:()=>K.wq,TagResourceCommand:()=>me,TagResourceInputFilterSensitiveLog:()=>K.I3,TagResourceResponseFilterSensitiveLog:()=>K.tw,TooManyRequestsException:()=>K.wT,UnlinkDeveloperIdentityCommand:()=>fe,UnlinkDeveloperIdentityInputFilterSensitiveLog:()=>K._1,UnlinkIdentityCommand:()=>ge,UnlinkIdentityInputFilterSensitiveLog:()=>K.fg,UnprocessedIdentityIdFilterSensitiveLog:()=>K.z2,UntagResourceCommand:()=>ye,UntagResourceInputFilterSensitiveLog:()=>K.xF,UntagResourceResponseFilterSensitiveLog:()=>K.VX,UpdateIdentityPoolCommand:()=>ve,paginateListIdentityPools:()=>Se});var i=n(8876),r=n(7085),o=n(4618),a=n(6848),s=n(2831),c=n(1769),l=n(9196),u=n(7463),d=n(6835),h=n(360);var p=n(7643),m=n(6582),f=n(871),g=n(6524),y=n(2677),v=n(7915),b=n(6795),x=n(7849),w=n(2498),S=n(6521),E=n(1729);const _="required",C="fn",P="argv",M="ref",T="PartitionResult",A="tree",I="error",R="endpoint",k={[_]:!1,type:"String"},L={[_]:!0,default:!1,type:"Boolean"},N={[M]:"Endpoint"},B={[C]:"booleanEquals",[P]:[{[M]:"UseFIPS"},!0]},D={[C]:"booleanEquals",[P]:[{[M]:"UseDualStack"},!0]},O={},F={[C]:"booleanEquals",[P]:[!0,{[C]:"getAttr",[P]:[{[M]:T},"supportsFIPS"]}]},z={[C]:"booleanEquals",[P]:[!0,{[C]:"getAttr",[P]:[{[M]:T},"supportsDualStack"]}]},U=[N],H=[B],j=[D],G={version:"1.0",parameters:{Region:k,UseDualStack:L,UseFIPS:L,Endpoint:k},rules:[{conditions:[{[C]:"aws.partition",[P]:[{[M]:"Region"}],assign:T}],type:A,rules:[{conditions:[{[C]:"isSet",[P]:U},{[C]:"parseURL",[P]:U,assign:"url"}],type:A,rules:[{conditions:H,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:I},{type:A,rules:[{conditions:j,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:I},{endpoint:{url:N,properties:O,headers:O},type:R}]}]},{conditions:[B,D],type:A,rules:[{conditions:[F,z],type:A,rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},type:R}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:I}]},{conditions:H,type:A,rules:[{conditions:[F],type:A,rules:[{type:A,rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},type:R}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:I}]},{conditions:j,type:A,rules:[{conditions:[z],type:A,rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},type:R}]},{error:"DualStack is enabled but this partition does not support DualStack",type:I}]},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},type:R}]}]},V=(e,t={})=>(0,E.B1)(G,{endpointParams:e,logger:t.logger});var W=n(2971);class q extends h.KU{constructor(e){const t=(n=(e=>{const t=(0,W.j)(e),n=()=>t().then(h.jv),r=(e=>({apiVersion:"2014-06-30",base64Decoder:e?.base64Decoder??x.G,base64Encoder:e?.base64Encoder??x.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??V,logger:e?.logger??new h.vk,serviceId:e?.serviceId??"Cognito Identity",urlParser:e?.urlParser??b.e,utf8Decoder:e?.utf8Decoder??w.$,utf8Encoder:e?.utf8Encoder??S.G}))(e);return{...r,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??g.W,credentialDefaultProvider:e?.credentialDefaultProvider??(e=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,v.f)({serviceId:r.serviceId,clientVersion:"3.271.0"}),maxAttempts:e?.maxAttempts??y.J,region:e?.region??(0,f.n)("Region is missing"),requestHandler:e?.requestHandler??new m.B(n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||y.CA),sha256:e?.sha256??p.Sha256,streamCollector:e?.streamCollector??m.C,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(i.JY)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(i.Fh))}})(e),{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"});var n;const E=(0,i.Xb)(t),_=(0,o.uW)(E),C=(0,l.BC)(_),P=(0,a.S8)(C),M=(0,u.A$)(P),T=(0,d.er)(M);super(T),this.config=T,this.middlewareStack.use((0,l.NQ)(this.config)),this.middlewareStack.use((0,r.VG)(this.config)),this.middlewareStack.use((0,a.G2)(this.config)),this.middlewareStack.use((0,s.cV)(this.config)),this.middlewareStack.use((0,c.eV)(this.config)),this.middlewareStack.use((0,d.XJ)(this.config))}destroy(){super.destroy()}}var Y=n(8493),K=n(1721),$=n(8370);class X extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,X.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"CreateIdentityPoolCommand",inputFilterSensitiveLog:K.fK,outputFilterSensitiveLog:K.k9},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.uD)(e,t)}deserialize(e,t){return(0,$.iy)(e,t)}}class Z extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,Z.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"DeleteIdentitiesCommand",inputFilterSensitiveLog:K.RH,outputFilterSensitiveLog:K.E3},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.h9)(e,t)}deserialize(e,t){return(0,$.$g)(e,t)}}class J extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,J.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"DeleteIdentityPoolCommand",inputFilterSensitiveLog:K.x6,outputFilterSensitiveLog:e=>e},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.WJ)(e,t)}deserialize(e,t){return(0,$.NF)(e,t)}}class Q extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,Q.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"DescribeIdentityCommand",inputFilterSensitiveLog:K.Su,outputFilterSensitiveLog:K._J},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.d7)(e,t)}deserialize(e,t){return(0,$.t4)(e,t)}}class ee extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ee.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"DescribeIdentityPoolCommand",inputFilterSensitiveLog:K.U9,outputFilterSensitiveLog:K.k9},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.C4)(e,t)}deserialize(e,t){return(0,$.u0)(e,t)}}var te=n(6029),ne=n(376);class ie extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ie.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"GetIdentityPoolRolesCommand",inputFilterSensitiveLog:K.Gd,outputFilterSensitiveLog:K.hP},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.mf)(e,t)}deserialize(e,t){return(0,$.ID)(e,t)}}class re extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,re.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"GetOpenIdTokenCommand",inputFilterSensitiveLog:K.km,outputFilterSensitiveLog:K.ep},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.vc)(e,t)}deserialize(e,t){return(0,$.Gg)(e,t)}}class oe extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,oe.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"GetOpenIdTokenForDeveloperIdentityCommand",inputFilterSensitiveLog:K.CV,outputFilterSensitiveLog:K.Fr},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.Yt)(e,t)}deserialize(e,t){return(0,$.Mi)(e,t)}}class ae extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ae.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"GetPrincipalTagAttributeMapCommand",inputFilterSensitiveLog:K.IY,outputFilterSensitiveLog:K.R$},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.oi)(e,t)}deserialize(e,t){return(0,$.bA)(e,t)}}class se extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,se.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"ListIdentitiesCommand",inputFilterSensitiveLog:K.yg,outputFilterSensitiveLog:K.fe},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.V9)(e,t)}deserialize(e,t){return(0,$.v$)(e,t)}}class ce extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ce.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"ListIdentityPoolsCommand",inputFilterSensitiveLog:K.FM,outputFilterSensitiveLog:K.aZ},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.s7)(e,t)}deserialize(e,t){return(0,$.oW)(e,t)}}class le extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,le.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:K.bS,outputFilterSensitiveLog:K.iO},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.$D)(e,t)}deserialize(e,t){return(0,$.Om)(e,t)}}class ue extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ue.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"LookupDeveloperIdentityCommand",inputFilterSensitiveLog:K.Ay,outputFilterSensitiveLog:K.Wk},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.xy)(e,t)}deserialize(e,t){return(0,$.N9)(e,t)}}class de extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,de.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"MergeDeveloperIdentitiesCommand",inputFilterSensitiveLog:K.bg,outputFilterSensitiveLog:K.mx},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.sw)(e,t)}deserialize(e,t){return(0,$.eb)(e,t)}}class he extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,he.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"SetIdentityPoolRolesCommand",inputFilterSensitiveLog:K.OV,outputFilterSensitiveLog:e=>e},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.j6)(e,t)}deserialize(e,t){return(0,$.FT)(e,t)}}class pe extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,pe.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"SetPrincipalTagAttributeMapCommand",inputFilterSensitiveLog:K.OL,outputFilterSensitiveLog:K.wq},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.Kk)(e,t)}deserialize(e,t){return(0,$.R3)(e,t)}}class me extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,me.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:K.I3,outputFilterSensitiveLog:K.tw},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.A9)(e,t)}deserialize(e,t){return(0,$.xz)(e,t)}}class fe extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,fe.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"UnlinkDeveloperIdentityCommand",inputFilterSensitiveLog:K._1,outputFilterSensitiveLog:e=>e},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.sd)(e,t)}deserialize(e,t){return(0,$.nK)(e,t)}}class ge extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ge.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"UnlinkIdentityCommand",inputFilterSensitiveLog:K.fg,outputFilterSensitiveLog:e=>e},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.my)(e,t)}deserialize(e,t){return(0,$.pI)(e,t)}}class ye extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ye.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:K.xF,outputFilterSensitiveLog:K.VX},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.qW)(e,t)}deserialize(e,t){return(0,$.PU)(e,t)}}class ve extends h.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,Y.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.a3)(t,ve.getEndpointParameterInstructions())),this.middlewareStack.use((0,u.yt)(t));const i=e.concat(this.middlewareStack),{logger:r}=t,a={logger:r,clientName:"CognitoIdentityClient",commandName:"UpdateIdentityPoolCommand",inputFilterSensitiveLog:K.k9,outputFilterSensitiveLog:K.k9},{requestHandler:s}=t;return i.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(0,$.xm)(e,t)}deserialize(e,t){return(0,$.hT)(e,t)}}class be extends q{createIdentityPool(e,t,n){const i=new X(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteIdentities(e,t,n){const i=new Z(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteIdentityPool(e,t,n){const i=new J(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeIdentity(e,t,n){const i=new Q(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeIdentityPool(e,t,n){const i=new ee(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getCredentialsForIdentity(e,t,n){const i=new te.L(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getId(e,t,n){const i=new ne.n(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getIdentityPoolRoles(e,t,n){const i=new ie(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getOpenIdToken(e,t,n){const i=new re(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getOpenIdTokenForDeveloperIdentity(e,t,n){const i=new oe(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getPrincipalTagAttributeMap(e,t,n){const i=new ae(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listIdentities(e,t,n){const i=new se(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listIdentityPools(e,t,n){const i=new ce(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listTagsForResource(e,t,n){const i=new le(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}lookupDeveloperIdentity(e,t,n){const i=new ue(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}mergeDeveloperIdentities(e,t,n){const i=new de(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}setIdentityPoolRoles(e,t,n){const i=new he(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}setPrincipalTagAttributeMap(e,t,n){const i=new pe(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}tagResource(e,t,n){const i=new me(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}unlinkDeveloperIdentity(e,t,n){const i=new fe(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}unlinkIdentity(e,t,n){const i=new ge(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}untagResource(e,t,n){const i=new ye(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}updateIdentityPool(e,t,n){const i=new ve(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}}const xe=async(e,t,...n)=>await e.send(new ce(t),...n),we=async(e,t,...n)=>await e.listIdentityPools(t,...n);async function*Se(e,t,...n){let i,r=e.startingToken||void 0,o=!0;for(;o;){if(t.NextToken=r,t.MaxResults=e.pageSize,e.client instanceof be)i=await we(e.client,t,...n);else{if(!(e.client instanceof q))throw new Error("Invalid client, expected CognitoIdentity | CognitoIdentityClient");i=await xe(e.client,t,...n)}yield i;const a=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===a)}}var Ee=n(7332)},7332:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var i=n(360);class r extends i.sI{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}},1721:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>i,Bj:()=>c,L7:()=>l,ss:()=>u,Sy:()=>d,b7:()=>h,wT:()=>p,jK:()=>r,P$:()=>m,Xd:()=>f,sC:()=>g,wg:()=>o,UK:()=>a,wc:()=>y,qJ:()=>v,b6:()=>b,fK:()=>x,k9:()=>w,RH:()=>S,z2:()=>E,E3:()=>_,x6:()=>C,Su:()=>P,_J:()=>M,U9:()=>T,Zu:()=>A,z$:()=>I,ZO:()=>R,N:()=>k,NH:()=>L,Gd:()=>N,GL:()=>B,p_:()=>D,i0:()=>O,hP:()=>F,km:()=>z,ep:()=>U,CV:()=>H,Fr:()=>j,IY:()=>G,R$:()=>V,yg:()=>W,fe:()=>q,FM:()=>Y,Wj:()=>K,aZ:()=>$,bS:()=>X,iO:()=>Z,Ay:()=>J,Wk:()=>Q,bg:()=>ee,mx:()=>te,OV:()=>ne,OL:()=>ie,wq:()=>re,I3:()=>oe,tw:()=>ae,_1:()=>se,fg:()=>ce,xF:()=>le,VX:()=>ue});var i,r,o,a,s=n(7332);!function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(i||(i={}));class c extends s.b{constructor(e){super({name:"InternalErrorException",$fault:"server",...e}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,c.prototype)}}class l extends s.b{constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,l.prototype)}}class u extends s.b{constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,u.prototype)}}class d extends s.b{constructor(e){super({name:"NotAuthorizedException",$fault:"client",...e}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,d.prototype)}}class h extends s.b{constructor(e){super({name:"ResourceConflictException",$fault:"client",...e}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,h.prototype)}}class p extends s.b{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,p.prototype)}}!function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(r||(r={}));class m extends s.b{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,m.prototype)}}class f extends s.b{constructor(e){super({name:"ExternalServiceException",$fault:"client",...e}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,f.prototype)}}class g extends s.b{constructor(e){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...e}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,g.prototype)}}!function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(o||(o={})),function(e){e.RULES="Rules",e.TOKEN="Token"}(a||(a={}));class y extends s.b{constructor(e){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...e}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,y.prototype)}}class v extends s.b{constructor(e){super({name:"ConcurrentModificationException",$fault:"client",...e}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,v.prototype)}}const b=e=>({...e}),x=e=>({...e}),w=e=>({...e}),S=e=>({...e}),E=e=>({...e}),_=e=>({...e}),C=e=>({...e}),P=e=>({...e}),M=e=>({...e}),T=e=>({...e}),A=e=>({...e}),I=e=>({...e}),R=e=>({...e}),k=e=>({...e}),L=e=>({...e}),N=e=>({...e}),B=e=>({...e}),D=e=>({...e}),O=e=>({...e}),F=e=>({...e}),z=e=>({...e}),U=e=>({...e}),H=e=>({...e}),j=e=>({...e}),G=e=>({...e}),V=e=>({...e}),W=e=>({...e}),q=e=>({...e}),Y=e=>({...e}),K=e=>({...e}),$=e=>({...e}),X=e=>({...e}),Z=e=>({...e}),J=e=>({...e}),Q=e=>({...e}),ee=e=>({...e}),te=e=>({...e}),ne=e=>({...e}),ie=e=>({...e}),re=e=>({...e}),oe=e=>({...e}),ae=e=>({...e}),se=e=>({...e}),ce=e=>({...e}),le=e=>({...e}),ue=e=>({...e})},8370:(e,t,n)=>{"use strict";n.d(t,{uD:()=>s,h9:()=>c,WJ:()=>l,d7:()=>u,C4:()=>d,Eb:()=>h,US:()=>p,mf:()=>m,vc:()=>f,Yt:()=>g,oi:()=>y,V9:()=>v,s7:()=>b,$D:()=>x,xy:()=>w,sw:()=>S,j6:()=>E,Kk:()=>_,A9:()=>C,sd:()=>P,my:()=>M,qW:()=>T,xm:()=>A,iy:()=>I,$g:()=>k,NF:()=>N,t4:()=>D,u0:()=>F,$M:()=>U,BX:()=>j,ID:()=>V,Gg:()=>q,Mi:()=>K,bA:()=>X,v$:()=>J,oW:()=>ee,Om:()=>ne,N9:()=>re,eb:()=>ae,FT:()=>ce,R3:()=>ue,xz:()=>he,nK:()=>me,pI:()=>ge,PU:()=>ve,hT:()=>xe});var i=n(8589),r=n(360),o=n(7332),a=n(1721);const s=async(e,t)=>{let n;return n=JSON.stringify(Ne(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.CreateIdentityPool"},"/",void 0,n)},c=async(e,t)=>{let n;return n=JSON.stringify(Be(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DeleteIdentities"},"/",void 0,n)},l=async(e,t)=>{let n;return n=JSON.stringify(De(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DeleteIdentityPool"},"/",void 0,n)},u=async(e,t)=>{let n;return n=JSON.stringify(Oe(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DescribeIdentity"},"/",void 0,n)},d=async(e,t)=>{let n;return n=JSON.stringify(Fe(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DescribeIdentityPool"},"/",void 0,n)},h=async(e,t)=>{let n;return n=JSON.stringify(ze(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},"/",void 0,n)},p=async(e,t)=>{let n;return n=JSON.stringify(He(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},"/",void 0,n)},m=async(e,t)=>{let n;return n=JSON.stringify(Ue(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetIdentityPoolRoles"},"/",void 0,n)},f=async(e,t)=>{let n;return n=JSON.stringify(Ge(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetOpenIdToken"},"/",void 0,n)},g=async(e,t)=>{let n;return n=JSON.stringify(je(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetOpenIdTokenForDeveloperIdentity"},"/",void 0,n)},y=async(e,t)=>{let n;return n=JSON.stringify(Ve(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetPrincipalTagAttributeMap"},"/",void 0,n)},v=async(e,t)=>{let n;return n=JSON.stringify(Xe(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListIdentities"},"/",void 0,n)},b=async(e,t)=>{let n;return n=JSON.stringify(Ze(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListIdentityPools"},"/",void 0,n)},x=async(e,t)=>{let n;return n=JSON.stringify(Je(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListTagsForResource"},"/",void 0,n)},w=async(e,t)=>{let n;return n=JSON.stringify(tt(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.LookupDeveloperIdentity"},"/",void 0,n)},S=async(e,t)=>{let n;return n=JSON.stringify(it(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.MergeDeveloperIdentities"},"/",void 0,n)},E=async(e,t)=>{let n;return n=JSON.stringify(ut(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.SetIdentityPoolRoles"},"/",void 0,n)},_=async(e,t)=>{let n;return n=JSON.stringify(dt(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.SetPrincipalTagAttributeMap"},"/",void 0,n)},C=async(e,t)=>{let n;return n=JSON.stringify(ht(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.TagResource"},"/",void 0,n)},P=async(e,t)=>{let n;return n=JSON.stringify(pt(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UnlinkDeveloperIdentity"},"/",void 0,n)},M=async(e,t)=>{let n;return n=JSON.stringify(mt(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UnlinkIdentity"},"/",void 0,n)},T=async(e,t)=>{let n;return n=JSON.stringify(ft(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UntagResource"},"/",void 0,n)},A=async(e,t)=>{let n;return n=JSON.stringify(qe(e,t)),ln(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UpdateIdentityPool"},"/",void 0,n)},I=async(e,t)=>{if(e.statusCode>=300)return R(e,t);const n=await un(e.body,t);let i={};i=Rt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},R=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Te(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},k=async(e,t)=>{if(e.statusCode>=300)return L(e,t);const n=await un(e.body,t);let i={};i=bt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},L=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},N=async(e,t)=>{if(e.statusCode>=300)return B(e,t);await cn(e.body,t);const n={$metadata:sn(e)};return Promise.resolve(n)},B=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},D=async(e,t)=>{if(e.statusCode>=300)return O(e,t);const n=await un(e.body,t);let i={};i=It(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},O=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},F=async(e,t)=>{if(e.statusCode>=300)return z(e,t);const n=await un(e.body,t);let i={};i=Rt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},z=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},U=async(e,t)=>{if(e.statusCode>=300)return H(e,t);const n=await un(e.body,t);let i={};i=Et(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},H=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await _e(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Pe(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},j=async(e,t)=>{if(e.statusCode>=300)return G(e,t);const n=await un(e.body,t);let i={};i=Ct(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},G=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await _e(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Te(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},V=async(e,t)=>{if(e.statusCode>=300)return W(e,t);const n=await un(e.body,t);let i={};i=_t(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},W=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},q=async(e,t)=>{if(e.statusCode>=300)return Y(e,t);const n=await un(e.body,t);let i={};i=Mt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},Y=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await _e(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},K=async(e,t)=>{if(e.statusCode>=300)return $(e,t);const n=await un(e.body,t);let i={};i=Pt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},$=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Ee(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},X=async(e,t)=>{if(e.statusCode>=300)return Z(e,t);const n=await un(e.body,t);let i={};i=Tt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},Z=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},J=async(e,t)=>{if(e.statusCode>=300)return Q(e,t);const n=await un(e.body,t);let i={};i=zt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},Q=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ee=async(e,t)=>{if(e.statusCode>=300)return te(e,t);const n=await un(e.body,t);let i={};i=Ut(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},te=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ne=async(e,t)=>{if(e.statusCode>=300)return ie(e,t);const n=await un(e.body,t);let i={};i=Ht(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},ie=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},re=async(e,t)=>{if(e.statusCode>=300)return oe(e,t);const n=await un(e.body,t);let i={};i=Gt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},oe=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ae=async(e,t)=>{if(e.statusCode>=300)return se(e,t);const n=await un(e.body,t);let i={};i=Wt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},se=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ce=async(e,t)=>{if(e.statusCode>=300)return le(e,t);await cn(e.body,t);const n={$metadata:sn(e)};return Promise.resolve(n)},le=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Se(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ue=async(e,t)=>{if(e.statusCode>=300)return de(e,t);const n=await un(e.body,t);let i={};i=tn(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},de=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},he=async(e,t)=>{if(e.statusCode>=300)return pe(e,t);const n=await un(e.body,t);let i={};i=nn(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},pe=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},me=async(e,t)=>{if(e.statusCode>=300)return fe(e,t);await cn(e.body,t);const n={$metadata:sn(e)};return Promise.resolve(n)},fe=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ge=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);await cn(e.body,t);const n={$metadata:sn(e)};return Promise.resolve(n)},ye=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await _e(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},ve=async(e,t)=>{if(e.statusCode>=300)return be(e,t);const n=await un(e.body,t);let i={};i=an(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},be=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},xe=async(e,t)=>{if(e.statusCode>=300)return we(e,t);const n=await un(e.body,t);let i={};i=Rt(n,t);const r={$metadata:sn(e),...i};return Promise.resolve(r)},we=async(e,t)=>{const n={...e,body:await dn(e.body,t)},i=hn(e,n.body);switch(i){case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Se(n,t);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ce(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Me(n,t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Te(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Ae(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Ie(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Re(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ke(n,t);default:const a=n.body;(0,r.oR)({output:e,parsedBody:a,exceptionCtor:o.b,errorCode:i})}},Se=async(e,t)=>{const n=e.body,i=yt(n,t),o=new a.qJ({$metadata:sn(e),...i});return(0,r.to)(o,n)},Ee=async(e,t)=>{const n=e.body,i=xt(n,t),o=new a.wc({$metadata:sn(e),...i});return(0,r.to)(o,n)},_e=async(e,t)=>{const n=e.body,i=St(n,t),o=new a.Xd({$metadata:sn(e),...i});return(0,r.to)(o,n)},Ce=async(e,t)=>{const n=e.body,i=Bt(n,t),o=new a.Bj({$metadata:sn(e),...i});return(0,r.to)(o,n)},Pe=async(e,t)=>{const n=e.body,i=Dt(n,t),o=new a.sC({$metadata:sn(e),...i});return(0,r.to)(o,n)},Me=async(e,t)=>{const n=e.body,i=Ot(n,t),o=new a.L7({$metadata:sn(e),...i});return(0,r.to)(o,n)},Te=async(e,t)=>{const n=e.body,i=Ft(n,t),o=new a.ss({$metadata:sn(e),...i});return(0,r.to)(o,n)},Ae=async(e,t)=>{const n=e.body,i=qt(n,t),o=new a.Sy({$metadata:sn(e),...i});return(0,r.to)(o,n)},Ie=async(e,t)=>{const n=e.body,i=$t(n,t),o=new a.b7({$metadata:sn(e),...i});return(0,r.to)(o,n)},Re=async(e,t)=>{const n=e.body,i=Xt(n,t),o=new a.P$({$metadata:sn(e),...i});return(0,r.to)(o,n)},ke=async(e,t)=>{const n=e.body,i=rn(n,t),o=new a.wT({$metadata:sn(e),...i});return(0,r.to)(o,n)},Le=(e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>({...null!=e.ClientId&&{ClientId:e.ClientId},...null!=e.ProviderName&&{ProviderName:e.ProviderName},...null!=e.ServerSideTokenCheck&&{ServerSideTokenCheck:e.ServerSideTokenCheck}}))(e))),Ne=(e,t)=>({...null!=e.AllowClassicFlow&&{AllowClassicFlow:e.AllowClassicFlow},...null!=e.AllowUnauthenticatedIdentities&&{AllowUnauthenticatedIdentities:e.AllowUnauthenticatedIdentities},...null!=e.CognitoIdentityProviders&&{CognitoIdentityProviders:Le(e.CognitoIdentityProviders)},...null!=e.DeveloperProviderName&&{DeveloperProviderName:e.DeveloperProviderName},...null!=e.IdentityPoolName&&{IdentityPoolName:e.IdentityPoolName},...null!=e.IdentityPoolTags&&{IdentityPoolTags:Ke(e.IdentityPoolTags,t)},...null!=e.OpenIdConnectProviderARNs&&{OpenIdConnectProviderARNs:rt(e.OpenIdConnectProviderARNs,t)},...null!=e.SamlProviderARNs&&{SamlProviderARNs:lt(e.SamlProviderARNs,t)},...null!=e.SupportedLoginProviders&&{SupportedLoginProviders:$e(e.SupportedLoginProviders,t)}}),Be=(e,t)=>({...null!=e.IdentityIdsToDelete&&{IdentityIdsToDelete:We(e.IdentityIdsToDelete,t)}}),De=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}}),Oe=(e,t)=>({...null!=e.IdentityId&&{IdentityId:e.IdentityId}}),Fe=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}}),ze=(e,t)=>({...null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn},...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.Logins&&{Logins:et(e.Logins,t)}}),Ue=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}}),He=(e,t)=>({...null!=e.AccountId&&{AccountId:e.AccountId},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.Logins&&{Logins:et(e.Logins,t)}}),je=(e,t)=>({...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.Logins&&{Logins:et(e.Logins,t)},...null!=e.PrincipalTags&&{PrincipalTags:ot(e.PrincipalTags,t)},...null!=e.TokenDuration&&{TokenDuration:e.TokenDuration}}),Ge=(e,t)=>({...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.Logins&&{Logins:et(e.Logins,t)}}),Ve=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.IdentityProviderName&&{IdentityProviderName:e.IdentityProviderName}}),We=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),qe=(e,t)=>({...null!=e.AllowClassicFlow&&{AllowClassicFlow:e.AllowClassicFlow},...null!=e.AllowUnauthenticatedIdentities&&{AllowUnauthenticatedIdentities:e.AllowUnauthenticatedIdentities},...null!=e.CognitoIdentityProviders&&{CognitoIdentityProviders:Le(e.CognitoIdentityProviders)},...null!=e.DeveloperProviderName&&{DeveloperProviderName:e.DeveloperProviderName},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.IdentityPoolName&&{IdentityPoolName:e.IdentityPoolName},...null!=e.IdentityPoolTags&&{IdentityPoolTags:Ke(e.IdentityPoolTags,t)},...null!=e.OpenIdConnectProviderARNs&&{OpenIdConnectProviderARNs:rt(e.OpenIdConnectProviderARNs,t)},...null!=e.SamlProviderARNs&&{SamlProviderARNs:lt(e.SamlProviderARNs,t)},...null!=e.SupportedLoginProviders&&{SupportedLoginProviders:$e(e.SupportedLoginProviders,t)}}),Ye=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),Ke=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=n),e)),{}),$e=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=n),e)),{}),Xe=(e,t)=>({...null!=e.HideDisabled&&{HideDisabled:e.HideDisabled},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.MaxResults&&{MaxResults:e.MaxResults},...null!=e.NextToken&&{NextToken:e.NextToken}}),Ze=(e,t)=>({...null!=e.MaxResults&&{MaxResults:e.MaxResults},...null!=e.NextToken&&{NextToken:e.NextToken}}),Je=(e,t)=>({...null!=e.ResourceArn&&{ResourceArn:e.ResourceArn}}),Qe=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),et=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=n),e)),{}),tt=(e,t)=>({...null!=e.DeveloperUserIdentifier&&{DeveloperUserIdentifier:e.DeveloperUserIdentifier},...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.MaxResults&&{MaxResults:e.MaxResults},...null!=e.NextToken&&{NextToken:e.NextToken}}),nt=(e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>({...null!=e.Claim&&{Claim:e.Claim},...null!=e.MatchType&&{MatchType:e.MatchType},...null!=e.RoleARN&&{RoleARN:e.RoleARN},...null!=e.Value&&{Value:e.Value}}))(e))),it=(e,t)=>({...null!=e.DestinationUserIdentifier&&{DestinationUserIdentifier:e.DestinationUserIdentifier},...null!=e.DeveloperProviderName&&{DeveloperProviderName:e.DeveloperProviderName},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.SourceUserIdentifier&&{SourceUserIdentifier:e.SourceUserIdentifier}}),rt=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),ot=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=n),e)),{}),at=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>(null===i||(e[n]=((e,t)=>({...null!=e.AmbiguousRoleResolution&&{AmbiguousRoleResolution:e.AmbiguousRoleResolution},...null!=e.RulesConfiguration&&{RulesConfiguration:ct(e.RulesConfiguration,t)},...null!=e.Type&&{Type:e.Type}}))(i,t)),e)),{}),st=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=n),e)),{}),ct=(e,t)=>({...null!=e.Rules&&{Rules:nt(e.Rules)}}),lt=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),ut=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.RoleMappings&&{RoleMappings:at(e.RoleMappings,t)},...null!=e.Roles&&{Roles:st(e.Roles)}}),dt=(e,t)=>({...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId},...null!=e.IdentityProviderName&&{IdentityProviderName:e.IdentityProviderName},...null!=e.PrincipalTags&&{PrincipalTags:ot(e.PrincipalTags,t)},...null!=e.UseDefaults&&{UseDefaults:e.UseDefaults}}),ht=(e,t)=>({...null!=e.ResourceArn&&{ResourceArn:e.ResourceArn},...null!=e.Tags&&{Tags:Ke(e.Tags,t)}}),pt=(e,t)=>({...null!=e.DeveloperProviderName&&{DeveloperProviderName:e.DeveloperProviderName},...null!=e.DeveloperUserIdentifier&&{DeveloperUserIdentifier:e.DeveloperUserIdentifier},...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}}),mt=(e,t)=>({...null!=e.IdentityId&&{IdentityId:e.IdentityId},...null!=e.Logins&&{Logins:et(e.Logins,t)},...null!=e.LoginsToRemove&&{LoginsToRemove:Qe(e.LoginsToRemove)}}),ft=(e,t)=>({...null!=e.ResourceArn&&{ResourceArn:e.ResourceArn},...null!=e.TagKeys&&{TagKeys:Ye(e.TagKeys)}}),gt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:((e,t)=>({ClientId:(0,r.pY)(e.ClientId),ProviderName:(0,r.pY)(e.ProviderName),ServerSideTokenCheck:(0,r.zE)(e.ServerSideTokenCheck)}))(e))),yt=(e,t)=>({message:(0,r.pY)(e.message)}),vt=(e,t)=>({AccessKeyId:(0,r.pY)(e.AccessKeyId),Expiration:null!=e.Expiration?(0,r.CE)((0,r.KX)((0,r.Fx)(e.Expiration))):void 0,SecretKey:(0,r.pY)(e.SecretKey),SessionToken:(0,r.pY)(e.SessionToken)}),bt=(e,t)=>({UnprocessedIdentityIds:null!=e.UnprocessedIdentityIds?on(e.UnprocessedIdentityIds,t):void 0}),xt=(e,t)=>({message:(0,r.pY)(e.message)}),wt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:(0,r.pY)(e))),St=(e,t)=>({message:(0,r.pY)(e.message)}),Et=(e,t)=>({Credentials:null!=e.Credentials?vt(e.Credentials):void 0,IdentityId:(0,r.pY)(e.IdentityId)}),_t=(e,t)=>({IdentityPoolId:(0,r.pY)(e.IdentityPoolId),RoleMappings:null!=e.RoleMappings?Zt(e.RoleMappings,t):void 0,Roles:null!=e.Roles?Jt(e.Roles,t):void 0}),Ct=(e,t)=>({IdentityId:(0,r.pY)(e.IdentityId)}),Pt=(e,t)=>({IdentityId:(0,r.pY)(e.IdentityId),Token:(0,r.pY)(e.Token)}),Mt=(e,t)=>({IdentityId:(0,r.pY)(e.IdentityId),Token:(0,r.pY)(e.Token)}),Tt=(e,t)=>({IdentityPoolId:(0,r.pY)(e.IdentityPoolId),IdentityProviderName:(0,r.pY)(e.IdentityProviderName),PrincipalTags:null!=e.PrincipalTags?Kt(e.PrincipalTags,t):void 0,UseDefaults:(0,r.zE)(e.UseDefaults)}),At=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:It(e,t))),It=(e,t)=>({CreationDate:null!=e.CreationDate?(0,r.CE)((0,r.KX)((0,r.Fx)(e.CreationDate))):void 0,IdentityId:(0,r.pY)(e.IdentityId),LastModifiedDate:null!=e.LastModifiedDate?(0,r.CE)((0,r.KX)((0,r.Fx)(e.LastModifiedDate))):void 0,Logins:null!=e.Logins?jt(e.Logins,t):void 0}),Rt=(e,t)=>({AllowClassicFlow:(0,r.zE)(e.AllowClassicFlow),AllowUnauthenticatedIdentities:(0,r.zE)(e.AllowUnauthenticatedIdentities),CognitoIdentityProviders:null!=e.CognitoIdentityProviders?gt(e.CognitoIdentityProviders):void 0,DeveloperProviderName:(0,r.pY)(e.DeveloperProviderName),IdentityPoolId:(0,r.pY)(e.IdentityPoolId),IdentityPoolName:(0,r.pY)(e.IdentityPoolName),IdentityPoolTags:null!=e.IdentityPoolTags?Lt(e.IdentityPoolTags,t):void 0,OpenIdConnectProviderARNs:null!=e.OpenIdConnectProviderARNs?Yt(e.OpenIdConnectProviderARNs,t):void 0,SamlProviderARNs:null!=e.SamlProviderARNs?en(e.SamlProviderARNs,t):void 0,SupportedLoginProviders:null!=e.SupportedLoginProviders?Nt(e.SupportedLoginProviders,t):void 0}),kt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:((e,t)=>({IdentityPoolId:(0,r.pY)(e.IdentityPoolId),IdentityPoolName:(0,r.pY)(e.IdentityPoolName)}))(e))),Lt=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=(0,r.pY)(n)),e)),{}),Nt=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=(0,r.pY)(n)),e)),{}),Bt=(e,t)=>({message:(0,r.pY)(e.message)}),Dt=(e,t)=>({message:(0,r.pY)(e.message)}),Ot=(e,t)=>({message:(0,r.pY)(e.message)}),Ft=(e,t)=>({message:(0,r.pY)(e.message)}),zt=(e,t)=>({Identities:null!=e.Identities?At(e.Identities,t):void 0,IdentityPoolId:(0,r.pY)(e.IdentityPoolId),NextToken:(0,r.pY)(e.NextToken)}),Ut=(e,t)=>({IdentityPools:null!=e.IdentityPools?kt(e.IdentityPools):void 0,NextToken:(0,r.pY)(e.NextToken)}),Ht=(e,t)=>({Tags:null!=e.Tags?Lt(e.Tags,t):void 0}),jt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:(0,r.pY)(e))),Gt=(e,t)=>({DeveloperUserIdentifierList:null!=e.DeveloperUserIdentifierList?wt(e.DeveloperUserIdentifierList):void 0,IdentityId:(0,r.pY)(e.IdentityId),NextToken:(0,r.pY)(e.NextToken)}),Vt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:((e,t)=>({Claim:(0,r.pY)(e.Claim),MatchType:(0,r.pY)(e.MatchType),RoleARN:(0,r.pY)(e.RoleARN),Value:(0,r.pY)(e.Value)}))(e))),Wt=(e,t)=>({IdentityId:(0,r.pY)(e.IdentityId)}),qt=(e,t)=>({message:(0,r.pY)(e.message)}),Yt=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:(0,r.pY)(e))),Kt=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=(0,r.pY)(n)),e)),{}),$t=(e,t)=>({message:(0,r.pY)(e.message)}),Xt=(e,t)=>({message:(0,r.pY)(e.message)}),Zt=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>(null===i||(e[n]=((e,t)=>({AmbiguousRoleResolution:(0,r.pY)(e.AmbiguousRoleResolution),RulesConfiguration:null!=e.RulesConfiguration?Qt(e.RulesConfiguration,t):void 0,Type:(0,r.pY)(e.Type)}))(i,t)),e)),{}),Jt=(e,t)=>Object.entries(e).reduce(((e,[t,n])=>(null===n||(e[t]=(0,r.pY)(n)),e)),{}),Qt=(e,t)=>({Rules:null!=e.Rules?Vt(e.Rules):void 0}),en=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:(0,r.pY)(e))),tn=(e,t)=>({IdentityPoolId:(0,r.pY)(e.IdentityPoolId),IdentityProviderName:(0,r.pY)(e.IdentityProviderName),PrincipalTags:null!=e.PrincipalTags?Kt(e.PrincipalTags,t):void 0,UseDefaults:(0,r.zE)(e.UseDefaults)}),nn=(e,t)=>({}),rn=(e,t)=>({message:(0,r.pY)(e.message)}),on=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>null===e?null:((e,t)=>({ErrorCode:(0,r.pY)(e.ErrorCode),IdentityId:(0,r.pY)(e.IdentityId)}))(e))),an=(e,t)=>({}),sn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),cn=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),ln=async(e,t,n,r,o)=>{const{hostname:a,protocol:s="https",port:c,path:l}=await e.endpoint(),u={protocol:s,hostname:a,port:c,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+n:l+n,headers:t};return void 0!==r&&(u.hostname=r),void 0!==o&&(u.body=o),new i.aW(u)},un=(e,t)=>((e,t)=>cn(e,t).then((e=>t.utf8Encoder(e))))(e,t).then((e=>e.length?JSON.parse(e):{})),dn=async(e,t)=>{const n=await un(e,t);return n.message=n.message??n.Message,n},hn=(e,t)=>{const n=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(r=e.headers,"x-amzn-errortype",Object.keys(r).find((e=>e.toLowerCase()==="x-amzn-errortype".toLowerCase())));var r;return void 0!==i?n(e.headers[i]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):void 0}},8904:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbortIncompleteMultipartUploadFilterSensitiveLog:()=>fe,AbortMultipartUploadCommand:()=>Oc,AbortMultipartUploadOutputFilterSensitiveLog:()=>ge,AbortMultipartUploadRequestFilterSensitiveLog:()=>ye,AccelerateConfigurationFilterSensitiveLog:()=>ve,AccessControlPolicyFilterSensitiveLog:()=>Se,AccessControlTranslationFilterSensitiveLog:()=>Ee,AnalyticsAndOperatorFilterSensitiveLog:()=>dt,AnalyticsConfigurationFilterSensitiveLog:()=>yt,AnalyticsExportDestinationFilterSensitiveLog:()=>mt,AnalyticsFilter:()=>x,AnalyticsFilterFilterSensitiveLog:()=>ht,AnalyticsS3BucketDestinationFilterSensitiveLog:()=>pt,AnalyticsS3ExportFileFormat:()=>w,ArchiveStatus:()=>J,BucketAccelerateStatus:()=>o,BucketAlreadyExists:()=>le,BucketAlreadyOwnedByYou:()=>ue,BucketCannedACL:()=>y,BucketFilterSensitiveLog:()=>Gi,BucketLifecycleConfigurationFilterSensitiveLog:()=>gr,BucketLocationConstraint:()=>v,BucketLoggingStatusFilterSensitiveLog:()=>vr,BucketLogsPermission:()=>k,BucketVersioningStatus:()=>W,CORSConfigurationFilterSensitiveLog:()=>dr,CORSRuleFilterSensitiveLog:()=>xt,CSVInputFilterSensitiveLog:()=>ho,CSVOutputFilterSensitiveLog:()=>go,ChecksumAlgorithm:()=>d,ChecksumFilterSensitiveLog:()=>li,ChecksumMode:()=>K,CommonPrefixFilterSensitiveLog:()=>Wi,CompleteMultipartUploadCommand:()=>Wc,CompleteMultipartUploadOutputFilterSensitiveLog:()=>_e,CompleteMultipartUploadRequestFilterSensitiveLog:()=>Me,CompletedMultipartUploadFilterSensitiveLog:()=>Pe,CompletedPartFilterSensitiveLog:()=>Ce,CompressionType:()=>qr,ConditionFilterSensitiveLog:()=>ei,ContinuationEventFilterSensitiveLog:()=>So,CopyObjectCommand:()=>qc,CopyObjectOutputFilterSensitiveLog:()=>Ae,CopyObjectRequestFilterSensitiveLog:()=>Ie,CopyObjectResultFilterSensitiveLog:()=>Te,CopyPartResultFilterSensitiveLog:()=>Do,CreateBucketCommand:()=>Kc,CreateBucketConfigurationFilterSensitiveLog:()=>ke,CreateBucketOutputFilterSensitiveLog:()=>Re,CreateBucketRequestFilterSensitiveLog:()=>Le,CreateMultipartUploadCommand:()=>$c,CreateMultipartUploadOutputFilterSensitiveLog:()=>Ne,CreateMultipartUploadRequestFilterSensitiveLog:()=>Be,DefaultRetentionFilterSensitiveLog:()=>yi,DeleteBucketAnalyticsConfigurationCommand:()=>Xc,DeleteBucketAnalyticsConfigurationRequestFilterSensitiveLog:()=>Oe,DeleteBucketCommand:()=>Zc,DeleteBucketCorsCommand:()=>Jc,DeleteBucketCorsRequestFilterSensitiveLog:()=>Fe,DeleteBucketEncryptionCommand:()=>Qc,DeleteBucketEncryptionRequestFilterSensitiveLog:()=>ze,DeleteBucketIntelligentTieringConfigurationCommand:()=>el,DeleteBucketIntelligentTieringConfigurationRequestFilterSensitiveLog:()=>Ue,DeleteBucketInventoryConfigurationCommand:()=>tl,DeleteBucketInventoryConfigurationRequestFilterSensitiveLog:()=>He,DeleteBucketLifecycleCommand:()=>nl,DeleteBucketLifecycleRequestFilterSensitiveLog:()=>je,DeleteBucketMetricsConfigurationCommand:()=>il,DeleteBucketMetricsConfigurationRequestFilterSensitiveLog:()=>Ge,DeleteBucketOwnershipControlsCommand:()=>rl,DeleteBucketOwnershipControlsRequestFilterSensitiveLog:()=>Ve,DeleteBucketPolicyCommand:()=>ol,DeleteBucketPolicyRequestFilterSensitiveLog:()=>We,DeleteBucketReplicationCommand:()=>al,DeleteBucketReplicationRequestFilterSensitiveLog:()=>qe,DeleteBucketRequestFilterSensitiveLog:()=>De,DeleteBucketTaggingCommand:()=>sl,DeleteBucketTaggingRequestFilterSensitiveLog:()=>Ye,DeleteBucketWebsiteCommand:()=>cl,DeleteBucketWebsiteRequestFilterSensitiveLog:()=>Ke,DeleteFilterSensitiveLog:()=>tt,DeleteMarkerEntryFilterSensitiveLog:()=>tr,DeleteMarkerReplicationFilterSensitiveLog:()=>An,DeleteMarkerReplicationStatus:()=>B,DeleteObjectCommand:()=>ll,DeleteObjectOutputFilterSensitiveLog:()=>$e,DeleteObjectRequestFilterSensitiveLog:()=>Xe,DeleteObjectTaggingCommand:()=>Ml,DeleteObjectTaggingOutputFilterSensitiveLog:()=>it,DeleteObjectTaggingRequestFilterSensitiveLog:()=>rt,DeleteObjectsCommand:()=>Pl,DeleteObjectsOutputFilterSensitiveLog:()=>Qe,DeleteObjectsRequestFilterSensitiveLog:()=>nt,DeletePublicAccessBlockCommand:()=>Tl,DeletePublicAccessBlockRequestFilterSensitiveLog:()=>ot,DeletedObjectFilterSensitiveLog:()=>Ze,DestinationFilterSensitiveLog:()=>Nn,EncodingType:()=>Q,EncryptionConfigurationFilterSensitiveLog:()=>In,EncryptionFilterSensitiveLog:()=>so,EndEventFilterSensitiveLog:()=>Eo,ErrorDocumentFilterSensitiveLog:()=>Zn,EventBridgeConfigurationFilterSensitiveLog:()=>hn,ExistingObjectReplicationFilterSensitiveLog:()=>Bn,ExistingObjectReplicationStatus:()=>F,ExpirationStatus:()=>R,ExpressionType:()=>Wr,FileHeaderInfo:()=>Yr,FilterRuleFilterSensitiveLog:()=>pn,FilterRuleName:()=>N,GetBucketAccelerateConfigurationCommand:()=>Al,GetBucketAccelerateConfigurationOutputFilterSensitiveLog:()=>at,GetBucketAccelerateConfigurationRequestFilterSensitiveLog:()=>st,GetBucketAclCommand:()=>Il,GetBucketAclOutputFilterSensitiveLog:()=>ct,GetBucketAclRequestFilterSensitiveLog:()=>lt,GetBucketAnalyticsConfigurationCommand:()=>Rl,GetBucketAnalyticsConfigurationOutputFilterSensitiveLog:()=>vt,GetBucketAnalyticsConfigurationRequestFilterSensitiveLog:()=>bt,GetBucketCorsCommand:()=>kl,GetBucketCorsOutputFilterSensitiveLog:()=>wt,GetBucketCorsRequestFilterSensitiveLog:()=>St,GetBucketEncryptionCommand:()=>Ll,GetBucketEncryptionOutputFilterSensitiveLog:()=>Pt,GetBucketEncryptionRequestFilterSensitiveLog:()=>Mt,GetBucketIntelligentTieringConfigurationCommand:()=>Nl,GetBucketIntelligentTieringConfigurationOutputFilterSensitiveLog:()=>kt,GetBucketIntelligentTieringConfigurationRequestFilterSensitiveLog:()=>Lt,GetBucketInventoryConfigurationCommand:()=>Bl,GetBucketInventoryConfigurationOutputFilterSensitiveLog:()=>jt,GetBucketInventoryConfigurationRequestFilterSensitiveLog:()=>Gt,GetBucketLifecycleConfigurationCommand:()=>Dl,GetBucketLifecycleConfigurationOutputFilterSensitiveLog:()=>Zt,GetBucketLifecycleConfigurationRequestFilterSensitiveLog:()=>Jt,GetBucketLocationCommand:()=>Ol,GetBucketLocationOutputFilterSensitiveLog:()=>Qt,GetBucketLocationRequestFilterSensitiveLog:()=>en,GetBucketLoggingCommand:()=>Fl,GetBucketLoggingOutputFilterSensitiveLog:()=>rn,GetBucketLoggingRequestFilterSensitiveLog:()=>on,GetBucketMetricsConfigurationCommand:()=>zl,GetBucketMetricsConfigurationOutputFilterSensitiveLog:()=>ln,GetBucketMetricsConfigurationRequestFilterSensitiveLog:()=>un,GetBucketNotificationConfigurationCommand:()=>Ul,GetBucketNotificationConfigurationRequestFilterSensitiveLog:()=>dn,GetBucketOwnershipControlsCommand:()=>Hl,GetBucketOwnershipControlsOutputFilterSensitiveLog:()=>Sn,GetBucketOwnershipControlsRequestFilterSensitiveLog:()=>En,GetBucketPolicyCommand:()=>jl,GetBucketPolicyOutputFilterSensitiveLog:()=>_n,GetBucketPolicyRequestFilterSensitiveLog:()=>Cn,GetBucketPolicyStatusCommand:()=>Gl,GetBucketPolicyStatusOutputFilterSensitiveLog:()=>Mn,GetBucketPolicyStatusRequestFilterSensitiveLog:()=>Tn,GetBucketReplicationCommand:()=>Vl,GetBucketReplicationOutputFilterSensitiveLog:()=>Gn,GetBucketReplicationRequestFilterSensitiveLog:()=>Vn,GetBucketRequestPaymentCommand:()=>Wl,GetBucketRequestPaymentOutputFilterSensitiveLog:()=>Wn,GetBucketRequestPaymentRequestFilterSensitiveLog:()=>qn,GetBucketTaggingCommand:()=>ql,GetBucketTaggingOutputFilterSensitiveLog:()=>Yn,GetBucketTaggingRequestFilterSensitiveLog:()=>Kn,GetBucketVersioningCommand:()=>Yl,GetBucketVersioningOutputFilterSensitiveLog:()=>$n,GetBucketVersioningRequestFilterSensitiveLog:()=>Xn,GetBucketWebsiteCommand:()=>Kl,GetBucketWebsiteOutputFilterSensitiveLog:()=>ii,GetBucketWebsiteRequestFilterSensitiveLog:()=>ri,GetObjectAclCommand:()=>$l,GetObjectAclOutputFilterSensitiveLog:()=>si,GetObjectAclRequestFilterSensitiveLog:()=>ci,GetObjectAttributesCommand:()=>Xl,GetObjectAttributesOutputFilterSensitiveLog:()=>hi,GetObjectAttributesPartsFilterSensitiveLog:()=>di,GetObjectAttributesRequestFilterSensitiveLog:()=>pi,GetObjectCommand:()=>Zl,GetObjectLegalHoldCommand:()=>Jl,GetObjectLegalHoldOutputFilterSensitiveLog:()=>fi,GetObjectLegalHoldRequestFilterSensitiveLog:()=>gi,GetObjectLockConfigurationCommand:()=>Ql,GetObjectLockConfigurationOutputFilterSensitiveLog:()=>xi,GetObjectLockConfigurationRequestFilterSensitiveLog:()=>wi,GetObjectOutputFilterSensitiveLog:()=>oi,GetObjectRequestFilterSensitiveLog:()=>ai,GetObjectRetentionCommand:()=>eu,GetObjectRetentionOutputFilterSensitiveLog:()=>Ei,GetObjectRetentionRequestFilterSensitiveLog:()=>_i,GetObjectTaggingCommand:()=>tu,GetObjectTaggingOutputFilterSensitiveLog:()=>Ci,GetObjectTaggingRequestFilterSensitiveLog:()=>Pi,GetObjectTorrentCommand:()=>nu,GetObjectTorrentOutputFilterSensitiveLog:()=>Mi,GetObjectTorrentRequestFilterSensitiveLog:()=>Ti,GetPublicAccessBlockCommand:()=>iu,GetPublicAccessBlockOutputFilterSensitiveLog:()=>Ii,GetPublicAccessBlockRequestFilterSensitiveLog:()=>Ri,GlacierJobParametersFilterSensitiveLog:()=>ao,GrantFilterSensitiveLog:()=>xe,GranteeFilterSensitiveLog:()=>be,HeadBucketCommand:()=>ru,HeadBucketRequestFilterSensitiveLog:()=>ki,HeadObjectCommand:()=>ou,HeadObjectOutputFilterSensitiveLog:()=>Li,HeadObjectRequestFilterSensitiveLog:()=>Ni,IndexDocumentFilterSensitiveLog:()=>Jn,InitiatorFilterSensitiveLog:()=>qi,InputSerializationFilterSensitiveLog:()=>fo,IntelligentTieringAccessTier:()=>_,IntelligentTieringAndOperatorFilterSensitiveLog:()=>Tt,IntelligentTieringConfigurationFilterSensitiveLog:()=>Rt,IntelligentTieringFilterFilterSensitiveLog:()=>At,IntelligentTieringStatus:()=>E,InvalidObjectState:()=>de,InventoryConfigurationFilterSensitiveLog:()=>Ht,InventoryDestinationFilterSensitiveLog:()=>Ft,InventoryEncryptionFilterSensitiveLog:()=>Dt,InventoryFilterFilterSensitiveLog:()=>zt,InventoryFormat:()=>C,InventoryFrequency:()=>T,InventoryIncludedObjectVersions:()=>P,InventoryOptionalField:()=>M,InventoryS3BucketDestinationFilterSensitiveLog:()=>Ot,InventoryScheduleFilterSensitiveLog:()=>Ut,JSONInputFilterSensitiveLog:()=>po,JSONOutputFilterSensitiveLog:()=>yo,JSONType:()=>Kr,LambdaFunctionConfigurationFilterSensitiveLog:()=>gn,LifecycleExpirationFilterSensitiveLog:()=>Vt,LifecycleRuleAndOperatorFilterSensitiveLog:()=>Wt,LifecycleRuleFilter:()=>A,LifecycleRuleFilterFilterSensitiveLog:()=>qt,LifecycleRuleFilterSensitiveLog:()=>Xt,ListBucketAnalyticsConfigurationsCommand:()=>au,ListBucketAnalyticsConfigurationsOutputFilterSensitiveLog:()=>Bi,ListBucketAnalyticsConfigurationsRequestFilterSensitiveLog:()=>Di,ListBucketIntelligentTieringConfigurationsCommand:()=>su,ListBucketIntelligentTieringConfigurationsOutputFilterSensitiveLog:()=>Oi,ListBucketIntelligentTieringConfigurationsRequestFilterSensitiveLog:()=>Fi,ListBucketInventoryConfigurationsCommand:()=>cu,ListBucketInventoryConfigurationsOutputFilterSensitiveLog:()=>zi,ListBucketInventoryConfigurationsRequestFilterSensitiveLog:()=>Ui,ListBucketMetricsConfigurationsCommand:()=>lu,ListBucketMetricsConfigurationsOutputFilterSensitiveLog:()=>Hi,ListBucketMetricsConfigurationsRequestFilterSensitiveLog:()=>ji,ListBucketsCommand:()=>uu,ListBucketsOutputFilterSensitiveLog:()=>Vi,ListMultipartUploadsCommand:()=>du,ListMultipartUploadsOutputFilterSensitiveLog:()=>Ki,ListMultipartUploadsRequestFilterSensitiveLog:()=>$i,ListObjectVersionsCommand:()=>mu,ListObjectVersionsOutputFilterSensitiveLog:()=>ir,ListObjectVersionsRequestFilterSensitiveLog:()=>rr,ListObjectsCommand:()=>hu,ListObjectsOutputFilterSensitiveLog:()=>Zi,ListObjectsRequestFilterSensitiveLog:()=>Ji,ListObjectsV2Command:()=>pu,ListObjectsV2OutputFilterSensitiveLog:()=>Qi,ListObjectsV2RequestFilterSensitiveLog:()=>er,ListPartsCommand:()=>fu,ListPartsOutputFilterSensitiveLog:()=>ar,ListPartsRequestFilterSensitiveLog:()=>sr,LoggingEnabledFilterSensitiveLog:()=>nn,MFADelete:()=>ne,MFADeleteStatus:()=>V,MetadataDirective:()=>h,MetadataEntryFilterSensitiveLog:()=>co,MetricsAndOperatorFilterSensitiveLog:()=>an,MetricsConfigurationFilterSensitiveLog:()=>cn,MetricsFilter:()=>L,MetricsFilterFilterSensitiveLog:()=>sn,MetricsFilterSensitiveLog:()=>kn,MetricsStatus:()=>D,MultipartUploadFilterSensitiveLog:()=>Yi,NoSuchBucket:()=>me,NoSuchKey:()=>he,NoSuchUpload:()=>se,NoncurrentVersionExpirationFilterSensitiveLog:()=>Yt,NoncurrentVersionTransitionFilterSensitiveLog:()=>Kt,NotFound:()=>pe,NotificationConfigurationFilterFilterSensitiveLog:()=>fn,NotificationConfigurationFilterSensitiveLog:()=>bn,ObjectAlreadyInActiveTierError:()=>Qr,ObjectAttributes:()=>$,ObjectCannedACL:()=>u,ObjectIdentifierFilterSensitiveLog:()=>et,ObjectLockConfigurationFilterSensitiveLog:()=>bi,ObjectLockEnabled:()=>X,ObjectLockLegalHoldFilterSensitiveLog:()=>mi,ObjectLockLegalHoldStatus:()=>p,ObjectLockMode:()=>m,ObjectLockRetentionFilterSensitiveLog:()=>Si,ObjectLockRetentionMode:()=>Z,ObjectLockRuleFilterSensitiveLog:()=>vi,ObjectNotInActiveTierError:()=>ce,ObjectOwnership:()=>b,ObjectPartFilterSensitiveLog:()=>ui,ObjectStorageClass:()=>ee,ObjectVersionFilterSensitiveLog:()=>nr,ObjectVersionStorageClass:()=>te,OutputLocationFilterSensitiveLog:()=>uo,OutputSerializationFilterSensitiveLog:()=>vo,OwnerFilterSensitiveLog:()=>we,OwnerOverride:()=>c,OwnershipControlsFilterSensitiveLog:()=>wn,OwnershipControlsRuleFilterSensitiveLog:()=>xn,ParquetInputFilterSensitiveLog:()=>mo,PartFilterSensitiveLog:()=>or,Payer:()=>G,Permission:()=>s,PolicyStatusFilterSensitiveLog:()=>Pn,ProgressEventFilterSensitiveLog:()=>Co,ProgressFilterSensitiveLog:()=>_o,Protocol:()=>q,PublicAccessBlockConfigurationFilterSensitiveLog:()=>Ai,PutBucketAccelerateConfigurationCommand:()=>gu,PutBucketAccelerateConfigurationRequestFilterSensitiveLog:()=>cr,PutBucketAclCommand:()=>yu,PutBucketAclRequestFilterSensitiveLog:()=>lr,PutBucketAnalyticsConfigurationCommand:()=>vu,PutBucketAnalyticsConfigurationRequestFilterSensitiveLog:()=>ur,PutBucketCorsCommand:()=>bu,PutBucketCorsRequestFilterSensitiveLog:()=>hr,PutBucketEncryptionCommand:()=>xu,PutBucketEncryptionRequestFilterSensitiveLog:()=>pr,PutBucketIntelligentTieringConfigurationCommand:()=>wu,PutBucketIntelligentTieringConfigurationRequestFilterSensitiveLog:()=>mr,PutBucketInventoryConfigurationCommand:()=>Su,PutBucketInventoryConfigurationRequestFilterSensitiveLog:()=>fr,PutBucketLifecycleConfigurationCommand:()=>Eu,PutBucketLifecycleConfigurationRequestFilterSensitiveLog:()=>yr,PutBucketLoggingCommand:()=>_u,PutBucketLoggingRequestFilterSensitiveLog:()=>br,PutBucketMetricsConfigurationCommand:()=>Cu,PutBucketMetricsConfigurationRequestFilterSensitiveLog:()=>xr,PutBucketNotificationConfigurationCommand:()=>Pu,PutBucketNotificationConfigurationRequestFilterSensitiveLog:()=>wr,PutBucketOwnershipControlsCommand:()=>Mu,PutBucketOwnershipControlsRequestFilterSensitiveLog:()=>Sr,PutBucketPolicyCommand:()=>Tu,PutBucketPolicyRequestFilterSensitiveLog:()=>Er,PutBucketReplicationCommand:()=>Au,PutBucketReplicationRequestFilterSensitiveLog:()=>_r,PutBucketRequestPaymentCommand:()=>Iu,PutBucketRequestPaymentRequestFilterSensitiveLog:()=>Pr,PutBucketTaggingCommand:()=>Ru,PutBucketTaggingRequestFilterSensitiveLog:()=>Tr,PutBucketVersioningCommand:()=>ku,PutBucketVersioningRequestFilterSensitiveLog:()=>Ir,PutBucketWebsiteCommand:()=>Lu,PutBucketWebsiteRequestFilterSensitiveLog:()=>kr,PutObjectAclCommand:()=>Nu,PutObjectAclOutputFilterSensitiveLog:()=>Br,PutObjectAclRequestFilterSensitiveLog:()=>Dr,PutObjectCommand:()=>Bu,PutObjectLegalHoldCommand:()=>Du,PutObjectLegalHoldOutputFilterSensitiveLog:()=>Or,PutObjectLegalHoldRequestFilterSensitiveLog:()=>Fr,PutObjectLockConfigurationCommand:()=>Ou,PutObjectLockConfigurationOutputFilterSensitiveLog:()=>zr,PutObjectLockConfigurationRequestFilterSensitiveLog:()=>Ur,PutObjectOutputFilterSensitiveLog:()=>Lr,PutObjectRequestFilterSensitiveLog:()=>Nr,PutObjectRetentionCommand:()=>Fu,PutObjectRetentionOutputFilterSensitiveLog:()=>eo,PutObjectRetentionRequestFilterSensitiveLog:()=>to,PutObjectTaggingCommand:()=>zu,PutObjectTaggingOutputFilterSensitiveLog:()=>no,PutObjectTaggingRequestFilterSensitiveLog:()=>io,PutPublicAccessBlockCommand:()=>Uu,PutPublicAccessBlockRequestFilterSensitiveLog:()=>ro,QueueConfigurationFilterSensitiveLog:()=>yn,QuoteFields:()=>$r,RecordsEventFilterSensitiveLog:()=>Po,RedirectAllRequestsToFilterSensitiveLog:()=>Qn,RedirectFilterSensitiveLog:()=>ti,ReplicaModificationsFilterSensitiveLog:()=>Fn,ReplicaModificationsStatus:()=>U,ReplicationConfigurationFilterSensitiveLog:()=>jn,ReplicationRuleAndOperatorFilterSensitiveLog:()=>Dn,ReplicationRuleFilter:()=>z,ReplicationRuleFilterFilterSensitiveLog:()=>On,ReplicationRuleFilterSensitiveLog:()=>Hn,ReplicationRuleStatus:()=>j,ReplicationStatus:()=>Y,ReplicationTimeFilterSensitiveLog:()=>Ln,ReplicationTimeStatus:()=>O,ReplicationTimeValueFilterSensitiveLog:()=>Rn,RequestCharged:()=>i,RequestPayer:()=>r,RequestPaymentConfigurationFilterSensitiveLog:()=>Cr,RequestProgressFilterSensitiveLog:()=>Ro,RestoreObjectCommand:()=>Hu,RestoreObjectOutputFilterSensitiveLog:()=>oo,RestoreObjectRequestFilterSensitiveLog:()=>wo,RestoreRequestFilterSensitiveLog:()=>xo,RestoreRequestType:()=>Xr,RoutingRuleFilterSensitiveLog:()=>ni,S3:()=>Km,S3Client:()=>Ym,S3KeyFilterFilterSensitiveLog:()=>mn,S3LocationFilterSensitiveLog:()=>lo,S3ServiceException:()=>ae,SSEKMSFilterSensitiveLog:()=>Nt,SSES3FilterSensitiveLog:()=>Bt,ScanRangeFilterSensitiveLog:()=>ko,SelectObjectContentCommand:()=>ju,SelectObjectContentEventStream:()=>Zr,SelectObjectContentEventStreamFilterSensitiveLog:()=>Ao,SelectObjectContentOutputFilterSensitiveLog:()=>Io,SelectObjectContentRequestFilterSensitiveLog:()=>Lo,SelectParametersFilterSensitiveLog:()=>bo,ServerSideEncryption:()=>l,ServerSideEncryptionByDefaultFilterSensitiveLog:()=>Et,ServerSideEncryptionConfigurationFilterSensitiveLog:()=>Ct,ServerSideEncryptionRuleFilterSensitiveLog:()=>_t,SourceSelectionCriteriaFilterSensitiveLog:()=>Un,SseKmsEncryptedObjectsFilterSensitiveLog:()=>zn,SseKmsEncryptedObjectsStatus:()=>H,StatsEventFilterSensitiveLog:()=>To,StatsFilterSensitiveLog:()=>Mo,StorageClass:()=>f,StorageClassAnalysisDataExportFilterSensitiveLog:()=>ft,StorageClassAnalysisFilterSensitiveLog:()=>gt,StorageClassAnalysisSchemaVersion:()=>S,TagFilterSensitiveLog:()=>ut,TaggingDirective:()=>g,TaggingFilterSensitiveLog:()=>Mr,TargetGrantFilterSensitiveLog:()=>tn,Tier:()=>Vr,TieringFilterSensitiveLog:()=>It,TopicConfigurationFilterSensitiveLog:()=>vn,TransitionFilterSensitiveLog:()=>$t,TransitionStorageClass:()=>I,Type:()=>a,UploadPartCommand:()=>Gu,UploadPartCopyCommand:()=>Vu,UploadPartCopyOutputFilterSensitiveLog:()=>Oo,UploadPartCopyRequestFilterSensitiveLog:()=>Fo,UploadPartOutputFilterSensitiveLog:()=>No,UploadPartRequestFilterSensitiveLog:()=>Bo,VersioningConfigurationFilterSensitiveLog:()=>Ar,WebsiteConfigurationFilterSensitiveLog:()=>Rr,WriteGetObjectResponseCommand:()=>Wu,WriteGetObjectResponseRequestFilterSensitiveLog:()=>zo,_ErrorFilterSensitiveLog:()=>Je,_ObjectFilterSensitiveLog:()=>Xi,paginateListObjectsV2:()=>Zm,paginateListParts:()=>ef,waitForBucketExists:()=>hf,waitForBucketNotExists:()=>ff,waitForObjectExists:()=>vf,waitForObjectNotExists:()=>wf,waitUntilBucketExists:()=>pf,waitUntilBucketNotExists:()=>gf,waitUntilObjectExists:()=>bf,waitUntilObjectNotExists:()=>Sf});var i,r,o,a,s,c,l,u,d,h,p,m,f,g,y,v,b,x,w,S,E,_,C,P,M,T,A,I,R,k,L,N,B,D,O,F,z,U,H,j,G,V,W,q,Y,K,$,X,Z,J,Q,ee,te,ne,ie=n(4618),re=n(8493),oe=n(360);class ae extends oe.sI{constructor(e){super(e),Object.setPrototypeOf(this,ae.prototype)}}!function(e){e.requester="requester"}(i||(i={})),function(e){e.requester="requester"}(r||(r={}));class se extends ae{constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,se.prototype)}}!function(e){e.Enabled="Enabled",e.Suspended="Suspended"}(o||(o={})),function(e){e.AmazonCustomerByEmail="AmazonCustomerByEmail",e.CanonicalUser="CanonicalUser",e.Group="Group"}(a||(a={})),function(e){e.FULL_CONTROL="FULL_CONTROL",e.READ="READ",e.READ_ACP="READ_ACP",e.WRITE="WRITE",e.WRITE_ACP="WRITE_ACP"}(s||(s={})),function(e){e.Destination="Destination"}(c||(c={})),function(e){e.AES256="AES256",e.aws_kms="aws:kms"}(l||(l={})),function(e){e.authenticated_read="authenticated-read",e.aws_exec_read="aws-exec-read",e.bucket_owner_full_control="bucket-owner-full-control",e.bucket_owner_read="bucket-owner-read",e.private="private",e.public_read="public-read",e.public_read_write="public-read-write"}(u||(u={})),function(e){e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"}(d||(d={})),function(e){e.COPY="COPY",e.REPLACE="REPLACE"}(h||(h={})),function(e){e.OFF="OFF",e.ON="ON"}(p||(p={})),function(e){e.COMPLIANCE="COMPLIANCE",e.GOVERNANCE="GOVERNANCE"}(m||(m={})),function(e){e.DEEP_ARCHIVE="DEEP_ARCHIVE",e.GLACIER="GLACIER",e.GLACIER_IR="GLACIER_IR",e.INTELLIGENT_TIERING="INTELLIGENT_TIERING",e.ONEZONE_IA="ONEZONE_IA",e.OUTPOSTS="OUTPOSTS",e.REDUCED_REDUNDANCY="REDUCED_REDUNDANCY",e.STANDARD="STANDARD",e.STANDARD_IA="STANDARD_IA"}(f||(f={})),function(e){e.COPY="COPY",e.REPLACE="REPLACE"}(g||(g={}));class ce extends ae{constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}class le extends ae{constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class ue extends ae{constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}!function(e){e.authenticated_read="authenticated-read",e.private="private",e.public_read="public-read",e.public_read_write="public-read-write"}(y||(y={})),function(e){e.EU="EU",e.af_south_1="af-south-1",e.ap_east_1="ap-east-1",e.ap_northeast_1="ap-northeast-1",e.ap_northeast_2="ap-northeast-2",e.ap_northeast_3="ap-northeast-3",e.ap_south_1="ap-south-1",e.ap_southeast_1="ap-southeast-1",e.ap_southeast_2="ap-southeast-2",e.ap_southeast_3="ap-southeast-3",e.ca_central_1="ca-central-1",e.cn_north_1="cn-north-1",e.cn_northwest_1="cn-northwest-1",e.eu_central_1="eu-central-1",e.eu_north_1="eu-north-1",e.eu_south_1="eu-south-1",e.eu_west_1="eu-west-1",e.eu_west_2="eu-west-2",e.eu_west_3="eu-west-3",e.me_south_1="me-south-1",e.sa_east_1="sa-east-1",e.us_east_2="us-east-2",e.us_gov_east_1="us-gov-east-1",e.us_gov_west_1="us-gov-west-1",e.us_west_1="us-west-1",e.us_west_2="us-west-2"}(v||(v={})),function(e){e.BucketOwnerEnforced="BucketOwnerEnforced",e.BucketOwnerPreferred="BucketOwnerPreferred",e.ObjectWriter="ObjectWriter"}(b||(b={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])}(x||(x={})),function(e){e.CSV="CSV"}(w||(w={})),function(e){e.V_1="V_1"}(S||(S={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(E||(E={})),function(e){e.ARCHIVE_ACCESS="ARCHIVE_ACCESS",e.DEEP_ARCHIVE_ACCESS="DEEP_ARCHIVE_ACCESS"}(_||(_={})),function(e){e.CSV="CSV",e.ORC="ORC",e.Parquet="Parquet"}(C||(C={})),function(e){e.All="All",e.Current="Current"}(P||(P={})),function(e){e.BucketKeyStatus="BucketKeyStatus",e.ChecksumAlgorithm="ChecksumAlgorithm",e.ETag="ETag",e.EncryptionStatus="EncryptionStatus",e.IntelligentTieringAccessTier="IntelligentTieringAccessTier",e.IsMultipartUploaded="IsMultipartUploaded",e.LastModifiedDate="LastModifiedDate",e.ObjectLockLegalHoldStatus="ObjectLockLegalHoldStatus",e.ObjectLockMode="ObjectLockMode",e.ObjectLockRetainUntilDate="ObjectLockRetainUntilDate",e.ReplicationStatus="ReplicationStatus",e.Size="Size",e.StorageClass="StorageClass"}(M||(M={})),function(e){e.Daily="Daily",e.Weekly="Weekly"}(T||(T={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.ObjectSizeGreaterThan?t.ObjectSizeGreaterThan(e.ObjectSizeGreaterThan):void 0!==e.ObjectSizeLessThan?t.ObjectSizeLessThan(e.ObjectSizeLessThan):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])}(A||(A={})),function(e){e.DEEP_ARCHIVE="DEEP_ARCHIVE",e.GLACIER="GLACIER",e.GLACIER_IR="GLACIER_IR",e.INTELLIGENT_TIERING="INTELLIGENT_TIERING",e.ONEZONE_IA="ONEZONE_IA",e.STANDARD_IA="STANDARD_IA"}(I||(I={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(R||(R={})),function(e){e.FULL_CONTROL="FULL_CONTROL",e.READ="READ",e.WRITE="WRITE"}(k||(k={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.AccessPointArn?t.AccessPointArn(e.AccessPointArn):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])}(L||(L={})),function(e){e.prefix="prefix",e.suffix="suffix"}(N||(N={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(B||(B={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(D||(D={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(O||(O={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(F||(F={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])}(z||(z={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(U||(U={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(H||(H={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(j||(j={})),function(e){e.BucketOwner="BucketOwner",e.Requester="Requester"}(G||(G={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(V||(V={})),function(e){e.Enabled="Enabled",e.Suspended="Suspended"}(W||(W={})),function(e){e.http="http",e.https="https"}(q||(q={})),function(e){e.COMPLETE="COMPLETE",e.FAILED="FAILED",e.PENDING="PENDING",e.REPLICA="REPLICA"}(Y||(Y={})),function(e){e.ENABLED="ENABLED"}(K||(K={}));class de extends ae{constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,de.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}}class he extends ae{constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}!function(e){e.CHECKSUM="Checksum",e.ETAG="ETag",e.OBJECT_PARTS="ObjectParts",e.OBJECT_SIZE="ObjectSize",e.STORAGE_CLASS="StorageClass"}($||($={})),function(e){e.Enabled="Enabled"}(X||(X={})),function(e){e.COMPLIANCE="COMPLIANCE",e.GOVERNANCE="GOVERNANCE"}(Z||(Z={}));class pe extends ae{constructor(e){super({name:"NotFound",$fault:"client",...e}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,pe.prototype)}}!function(e){e.ARCHIVE_ACCESS="ARCHIVE_ACCESS",e.DEEP_ARCHIVE_ACCESS="DEEP_ARCHIVE_ACCESS"}(J||(J={})),function(e){e.url="url"}(Q||(Q={})),function(e){e.DEEP_ARCHIVE="DEEP_ARCHIVE",e.GLACIER="GLACIER",e.GLACIER_IR="GLACIER_IR",e.INTELLIGENT_TIERING="INTELLIGENT_TIERING",e.ONEZONE_IA="ONEZONE_IA",e.OUTPOSTS="OUTPOSTS",e.REDUCED_REDUNDANCY="REDUCED_REDUNDANCY",e.STANDARD="STANDARD",e.STANDARD_IA="STANDARD_IA"}(ee||(ee={}));class me extends ae{constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}!function(e){e.STANDARD="STANDARD"}(te||(te={})),function(e){e.Disabled="Disabled",e.Enabled="Enabled"}(ne||(ne={}));const fe=e=>({...e}),ge=e=>({...e}),ye=e=>({...e}),ve=e=>({...e}),be=e=>({...e}),xe=e=>({...e}),we=e=>({...e}),Se=e=>({...e}),Ee=e=>({...e}),_e=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),Ce=e=>({...e}),Pe=e=>({...e}),Me=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),Te=e=>({...e}),Ae=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc}}),Ie=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc},...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:oe.oc}}),Re=e=>({...e}),ke=e=>({...e}),Le=e=>({...e}),Ne=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc}}),Be=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc},...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc}}),De=e=>({...e}),Oe=e=>({...e}),Fe=e=>({...e}),ze=e=>({...e}),Ue=e=>({...e}),He=e=>({...e}),je=e=>({...e}),Ge=e=>({...e}),Ve=e=>({...e}),We=e=>({...e}),qe=e=>({...e}),Ye=e=>({...e}),Ke=e=>({...e}),$e=e=>({...e}),Xe=e=>({...e}),Ze=e=>({...e}),Je=e=>({...e}),Qe=e=>({...e}),et=e=>({...e}),tt=e=>({...e}),nt=e=>({...e}),it=e=>({...e}),rt=e=>({...e}),ot=e=>({...e}),at=e=>({...e}),st=e=>({...e}),ct=e=>({...e}),lt=e=>({...e}),ut=e=>({...e}),dt=e=>({...e}),ht=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:ut(e.Tag)}:void 0!==e.And?{And:dt(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0,pt=e=>({...e}),mt=e=>({...e}),ft=e=>({...e}),gt=e=>({...e}),yt=e=>({...e,...e.Filter&&{Filter:ht(e.Filter)}}),vt=e=>({...e,...e.AnalyticsConfiguration&&{AnalyticsConfiguration:yt(e.AnalyticsConfiguration)}}),bt=e=>({...e}),xt=e=>({...e}),wt=e=>({...e}),St=e=>({...e}),Et=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:oe.oc}}),_t=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Et(e.ApplyServerSideEncryptionByDefault)}}),Ct=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>_t(e)))}}),Pt=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ct(e.ServerSideEncryptionConfiguration)}}),Mt=e=>({...e}),Tt=e=>({...e}),At=e=>({...e}),It=e=>({...e}),Rt=e=>({...e}),kt=e=>({...e}),Lt=e=>({...e}),Nt=e=>({...e,...e.KeyId&&{KeyId:oe.oc}}),Bt=e=>({...e}),Dt=e=>({...e,...e.SSEKMS&&{SSEKMS:Nt(e.SSEKMS)}}),Ot=e=>({...e,...e.Encryption&&{Encryption:Dt(e.Encryption)}}),Ft=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:Ot(e.S3BucketDestination)}}),zt=e=>({...e}),Ut=e=>({...e}),Ht=e=>({...e,...e.Destination&&{Destination:Ft(e.Destination)}}),jt=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:Ht(e.InventoryConfiguration)}}),Gt=e=>({...e}),Vt=e=>({...e}),Wt=e=>({...e}),qt=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:ut(e.Tag)}:void 0!==e.ObjectSizeGreaterThan?{ObjectSizeGreaterThan:e.ObjectSizeGreaterThan}:void 0!==e.ObjectSizeLessThan?{ObjectSizeLessThan:e.ObjectSizeLessThan}:void 0!==e.And?{And:Wt(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0,Yt=e=>({...e}),Kt=e=>({...e}),$t=e=>({...e}),Xt=e=>({...e,...e.Filter&&{Filter:qt(e.Filter)}}),Zt=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Xt(e)))}}),Jt=e=>({...e}),Qt=e=>({...e}),en=e=>({...e}),tn=e=>({...e}),nn=e=>({...e}),rn=e=>({...e}),on=e=>({...e}),an=e=>({...e}),sn=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:ut(e.Tag)}:void 0!==e.AccessPointArn?{AccessPointArn:e.AccessPointArn}:void 0!==e.And?{And:an(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0,cn=e=>({...e,...e.Filter&&{Filter:sn(e.Filter)}}),ln=e=>({...e,...e.MetricsConfiguration&&{MetricsConfiguration:cn(e.MetricsConfiguration)}}),un=e=>({...e}),dn=e=>({...e}),hn=e=>({...e}),pn=e=>({...e}),mn=e=>({...e}),fn=e=>({...e}),gn=e=>({...e}),yn=e=>({...e}),vn=e=>({...e}),bn=e=>({...e}),xn=e=>({...e}),wn=e=>({...e}),Sn=e=>({...e}),En=e=>({...e}),_n=e=>({...e}),Cn=e=>({...e}),Pn=e=>({...e}),Mn=e=>({...e}),Tn=e=>({...e}),An=e=>({...e}),In=e=>({...e}),Rn=e=>({...e}),kn=e=>({...e}),Ln=e=>({...e}),Nn=e=>({...e}),Bn=e=>({...e}),Dn=e=>({...e}),On=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:ut(e.Tag)}:void 0!==e.And?{And:Dn(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0,Fn=e=>({...e}),zn=e=>({...e}),Un=e=>({...e}),Hn=e=>({...e,...e.Filter&&{Filter:On(e.Filter)}}),jn=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Hn(e)))}}),Gn=e=>({...e,...e.ReplicationConfiguration&&{ReplicationConfiguration:jn(e.ReplicationConfiguration)}}),Vn=e=>({...e}),Wn=e=>({...e}),qn=e=>({...e}),Yn=e=>({...e}),Kn=e=>({...e}),$n=e=>({...e}),Xn=e=>({...e}),Zn=e=>({...e}),Jn=e=>({...e}),Qn=e=>({...e}),ei=e=>({...e}),ti=e=>({...e}),ni=e=>({...e}),ii=e=>({...e}),ri=e=>({...e}),oi=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),ai=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),si=e=>({...e}),ci=e=>({...e}),li=e=>({...e}),ui=e=>({...e}),di=e=>({...e}),hi=e=>({...e}),pi=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),mi=e=>({...e}),fi=e=>({...e}),gi=e=>({...e}),yi=e=>({...e}),vi=e=>({...e}),bi=e=>({...e}),xi=e=>({...e}),wi=e=>({...e}),Si=e=>({...e}),Ei=e=>({...e}),_i=e=>({...e}),Ci=e=>({...e}),Pi=e=>({...e}),Mi=e=>({...e}),Ti=e=>({...e}),Ai=e=>({...e}),Ii=e=>({...e}),Ri=e=>({...e}),ki=e=>({...e}),Li=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),Ni=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),Bi=e=>({...e,...e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((e=>yt(e)))}}),Di=e=>({...e}),Oi=e=>({...e}),Fi=e=>({...e}),zi=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((e=>Ht(e)))}}),Ui=e=>({...e}),Hi=e=>({...e,...e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((e=>cn(e)))}}),ji=e=>({...e}),Gi=e=>({...e}),Vi=e=>({...e}),Wi=e=>({...e}),qi=e=>({...e}),Yi=e=>({...e}),Ki=e=>({...e}),$i=e=>({...e}),Xi=e=>({...e}),Zi=e=>({...e}),Ji=e=>({...e}),Qi=e=>({...e}),er=e=>({...e}),tr=e=>({...e}),nr=e=>({...e}),ir=e=>({...e}),rr=e=>({...e}),or=e=>({...e}),ar=e=>({...e}),sr=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),cr=e=>({...e}),lr=e=>({...e}),ur=e=>({...e,...e.AnalyticsConfiguration&&{AnalyticsConfiguration:yt(e.AnalyticsConfiguration)}}),dr=e=>({...e}),hr=e=>({...e}),pr=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ct(e.ServerSideEncryptionConfiguration)}}),mr=e=>({...e}),fr=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:Ht(e.InventoryConfiguration)}}),gr=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Xt(e)))}}),yr=e=>({...e,...e.LifecycleConfiguration&&{LifecycleConfiguration:gr(e.LifecycleConfiguration)}}),vr=e=>({...e}),br=e=>({...e}),xr=e=>({...e,...e.MetricsConfiguration&&{MetricsConfiguration:cn(e.MetricsConfiguration)}}),wr=e=>({...e}),Sr=e=>({...e}),Er=e=>({...e}),_r=e=>({...e,...e.ReplicationConfiguration&&{ReplicationConfiguration:jn(e.ReplicationConfiguration)}}),Cr=e=>({...e}),Pr=e=>({...e}),Mr=e=>({...e}),Tr=e=>({...e}),Ar=e=>({...e}),Ir=e=>({...e}),Rr=e=>({...e}),kr=e=>({...e}),Lr=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc}}),Nr=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc},...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:oe.oc}}),Br=e=>({...e}),Dr=e=>({...e}),Or=e=>({...e}),Fr=e=>({...e}),zr=e=>({...e}),Ur=e=>({...e});var Hr=n(8589);class jr{constructor(e){this.value=e}toString(){return(""+this.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}}class Gr{constructor(e,t=[]){this.name=e,this.children=t,this.attributes={}}static of(e,t,n){const i=new Gr(e);return void 0!==t&&i.addChildNode(new jr(t)),void 0!==n&&i.withName(n),i}withName(e){return this.name=e,this}addAttribute(e,t){return this.attributes[e]=t,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}toString(){const e=Boolean(this.children.length);let t=`<${this.name}`;const n=this.attributes;for(const e of Object.keys(n)){const r=n[e];null!=r&&(t+=` ${e}="${i=""+r,i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}"`)}var i;return t+(e?`>${this.children.map((e=>e.toString())).join("")}</${this.name}>`:"/>")}}var Vr,Wr,qr,Yr,Kr,$r,Xr,Zr,Jr=n(6932);class Qr extends ae{constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,Qr.prototype)}}!function(e){e.Bulk="Bulk",e.Expedited="Expedited",e.Standard="Standard"}(Vr||(Vr={})),function(e){e.SQL="SQL"}(Wr||(Wr={})),function(e){e.BZIP2="BZIP2",e.GZIP="GZIP",e.NONE="NONE"}(qr||(qr={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(Yr||(Yr={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(Kr||(Kr={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}($r||($r={})),function(e){e.SELECT="SELECT"}(Xr||(Xr={})),function(e){e.visit=(e,t)=>void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])}(Zr||(Zr={}));const eo=e=>({...e}),to=e=>({...e}),no=e=>({...e}),io=e=>({...e}),ro=e=>({...e}),oo=e=>({...e}),ao=e=>({...e}),so=e=>({...e,...e.KMSKeyId&&{KMSKeyId:oe.oc}}),co=e=>({...e}),lo=e=>({...e,...e.Encryption&&{Encryption:so(e.Encryption)}}),uo=e=>({...e,...e.S3&&{S3:lo(e.S3)}}),ho=e=>({...e}),po=e=>({...e}),mo=e=>({...e}),fo=e=>({...e}),go=e=>({...e}),yo=e=>({...e}),vo=e=>({...e}),bo=e=>({...e}),xo=e=>({...e,...e.OutputLocation&&{OutputLocation:uo(e.OutputLocation)}}),wo=e=>({...e,...e.RestoreRequest&&{RestoreRequest:xo(e.RestoreRequest)}}),So=e=>({...e}),Eo=e=>({...e}),_o=e=>({...e}),Co=e=>({...e}),Po=e=>({...e}),Mo=e=>({...e}),To=e=>({...e}),Ao=e=>void 0!==e.Records?{Records:Po(e.Records)}:void 0!==e.Stats?{Stats:To(e.Stats)}:void 0!==e.Progress?{Progress:Co(e.Progress)}:void 0!==e.Cont?{Cont:So(e.Cont)}:void 0!==e.End?{End:Eo(e.End)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0,Io=e=>({...e,...e.Payload&&{Payload:"STREAMING_CONTENT"}}),Ro=e=>({...e}),ko=e=>({...e}),Lo=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),No=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),Bo=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc}}),Do=e=>({...e}),Oo=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),Fo=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:oe.oc},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:oe.oc}}),zo=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:oe.oc}}),Uo=oe.UI,Ho=async(e,t)=>{const n=Uo({}),i=(e.body,new le({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},jo=async(e,t)=>{const n=Uo({}),i=(e.body,new ue({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},Go=async(e,t)=>{const n=Uo({}),i=e.body;void 0!==i.AccessTier&&(n.AccessTier=(0,oe.pY)(i.AccessTier)),void 0!==i.StorageClass&&(n.StorageClass=(0,oe.pY)(i.StorageClass));const r=new de({$metadata:Ic(e),...n});return(0,oe.to)(r,e.body)},Vo=async(e,t)=>{const n=Uo({}),i=(e.body,new me({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},Wo=async(e,t)=>{const n=Uo({}),i=(e.body,new he({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},qo=async(e,t)=>{const n=Uo({}),i=(e.body,new se({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},Yo=async(e,t)=>{const n=Uo({}),i=(e.body,new pe({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},Ko=async(e,t)=>{const n=Uo({}),i=(e.body,new Qr({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},$o=async(e,t)=>{const n=Uo({}),i=(e.body,new ce({$metadata:Ic(e),...n}));return(0,oe.to)(i,e.body)},Xo=async(e,t)=>{const n={},i=await Nc(e.body,t);return Object.assign(n,Is(i,t)),n},Zo=async(e,t)=>{const n={},i=await Nc(e.body,t);return Object.assign(n,Ls(i,t)),n},Jo=async(e,t)=>{const n={},i=await Nc(e.body,t);return n.Details=cc(i,t),n},Qo=async(e,t)=>{const n={};return n.Payload=e.body,n},ea=async(e,t)=>{const n={},i=await Nc(e.body,t);return n.Details=Sc(i,t),n},ta=(e,t)=>{const n=new Gr("AccelerateConfiguration");if(null!=e.Status){const t=Gr.of("BucketAccelerateStatus",e.Status).withName("Status");n.addChildNode(t)}return n},na=(e,t)=>{const n=new Gr("AccessControlPolicy");if(null!=e.Grants){const i=ya(e.Grants,t),r=new Gr("AccessControlList");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}if(null!=e.Owner){const i=Va(e.Owner,t).withName("Owner");n.addChildNode(i)}return n},ia=(e,t)=>{const n=new Gr("AnalyticsConfiguration");if(null!=e.Id){const t=Gr.of("AnalyticsId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.Filter){const i=ra(e.Filter,t).withName("Filter");n.addChildNode(i)}if(null!=e.StorageClassAnalysis){const i=ps(e.StorageClassAnalysis,t).withName("StorageClassAnalysis");n.addChildNode(i)}return n},ra=(e,t)=>{const n=new Gr("AnalyticsFilter");return x.visit(e,{Prefix:e=>{const t=Gr.of("Prefix",e).withName("Prefix");n.addChildNode(t)},Tag:e=>{const i=fs(e,t).withName("Tag");n.addChildNode(i)},And:e=>{const i=((e,t)=>{const n=new Gr("AnalyticsAndOperator");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}return null!=e.Tags&&ys(e.Tags,t).map((e=>{e=e.withName("Tag"),n.addChildNode(e)})),n})(e,t).withName("And");n.addChildNode(i)},_:(e,t)=>{if(!(t instanceof Gr||t instanceof jr))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new Gr(e).addChildNode(t))}}),n},oa=(e,t)=>{const n=new Gr("BucketLifecycleConfiguration");return null!=e.Rules&&Aa(e.Rules,t).map((e=>{e=e.withName("Rule"),n.addChildNode(e)})),n},aa=(e,t)=>{const n=new Gr("BucketLoggingStatus");if(null!=e.LoggingEnabled){const i=Ia(e.LoggingEnabled,t).withName("LoggingEnabled");n.addChildNode(i)}return n},sa=(e,t)=>{const n=new Gr("CompletedMultipartUpload");return null!=e.Parts&&ca(e.Parts,t).map((e=>{e=e.withName("Part"),n.addChildNode(e)})),n},ca=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("CompletedPart");if(null!=e.ETag){const t=Gr.of("ETag",e.ETag).withName("ETag");n.addChildNode(t)}if(null!=e.ChecksumCRC32){const t=Gr.of("ChecksumCRC32",e.ChecksumCRC32).withName("ChecksumCRC32");n.addChildNode(t)}if(null!=e.ChecksumCRC32C){const t=Gr.of("ChecksumCRC32C",e.ChecksumCRC32C).withName("ChecksumCRC32C");n.addChildNode(t)}if(null!=e.ChecksumSHA1){const t=Gr.of("ChecksumSHA1",e.ChecksumSHA1).withName("ChecksumSHA1");n.addChildNode(t)}if(null!=e.ChecksumSHA256){const t=Gr.of("ChecksumSHA256",e.ChecksumSHA256).withName("ChecksumSHA256");n.addChildNode(t)}if(null!=e.PartNumber){const t=Gr.of("PartNumber",String(e.PartNumber)).withName("PartNumber");n.addChildNode(t)}return n})(e);return t.withName("member")})),la=(e,t)=>{const n=new Gr("CORSConfiguration");return null!=e.CORSRules&&ua(e.CORSRules,t).map((e=>{e=e.withName("CORSRule"),n.addChildNode(e)})),n},ua=(e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>{const n=new Gr("CORSRule");if(null!=e.ID){const t=Gr.of("ID",e.ID).withName("ID");n.addChildNode(t)}if(null!=e.AllowedHeaders){const t=((e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("AllowedHeader",e).withName("member"))))(e.AllowedHeaders);t.map((e=>{e=e.withName("AllowedHeader"),n.addChildNode(e)}))}if(null!=e.AllowedMethods){const t=((e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("AllowedMethod",e).withName("member"))))(e.AllowedMethods);t.map((e=>{e=e.withName("AllowedMethod"),n.addChildNode(e)}))}if(null!=e.AllowedOrigins){const t=((e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("AllowedOrigin",e).withName("member"))))(e.AllowedOrigins);t.map((e=>{e=e.withName("AllowedOrigin"),n.addChildNode(e)}))}if(null!=e.ExposeHeaders&&fa(e.ExposeHeaders,t).map((e=>{e=e.withName("ExposeHeader"),n.addChildNode(e)})),null!=e.MaxAgeSeconds){const t=Gr.of("MaxAgeSeconds",String(e.MaxAgeSeconds)).withName("MaxAgeSeconds");n.addChildNode(t)}return n})(e,t).withName("member"))),da=(e,t)=>{const n=new Gr("CreateBucketConfiguration");if(null!=e.LocationConstraint){const t=Gr.of("BucketLocationConstraint",e.LocationConstraint).withName("LocationConstraint");n.addChildNode(t)}return n},ha=(e,t)=>{const n=new Gr("Delete");if(null!=e.Objects&&Fa(e.Objects,t).map((e=>{e=e.withName("Object"),n.addChildNode(e)})),null!=e.Quiet){const t=Gr.of("Quiet",String(e.Quiet)).withName("Quiet");n.addChildNode(t)}return n},pa=(e,t)=>{const n=new Gr("EncryptionConfiguration");if(null!=e.ReplicaKmsKeyID){const t=Gr.of("ReplicaKmsKeyID",e.ReplicaKmsKeyID).withName("ReplicaKmsKeyID");n.addChildNode(t)}return n},ma=(e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("Event",e).withName("member"))),fa=(e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("ExposeHeader",e).withName("member"))),ga=(e,t)=>{const n=new Gr("Grantee");if(null!=e.DisplayName){const t=Gr.of("DisplayName",e.DisplayName).withName("DisplayName");n.addChildNode(t)}if(null!=e.EmailAddress){const t=Gr.of("EmailAddress",e.EmailAddress).withName("EmailAddress");n.addChildNode(t)}if(null!=e.ID){const t=Gr.of("ID",e.ID).withName("ID");n.addChildNode(t)}if(null!=e.URI){const t=Gr.of("URI",e.URI).withName("URI");n.addChildNode(t)}return null!=e.Type&&n.addAttribute("xsi:type",e.Type),n},ya=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("Grant");if(null!=e.Grantee){const t=ga(e.Grantee).withName("Grantee");t.addAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),n.addChildNode(t)}if(null!=e.Permission){const t=Gr.of("Permission",e.Permission).withName("Permission");n.addChildNode(t)}return n})(e);return t.withName("Grant")})),va=(e,t)=>{const n=new Gr("InputSerialization");if(null!=e.CSV){const t=((e,t)=>{const n=new Gr("CSVInput");if(null!=e.FileHeaderInfo){const t=Gr.of("FileHeaderInfo",e.FileHeaderInfo).withName("FileHeaderInfo");n.addChildNode(t)}if(null!=e.Comments){const t=Gr.of("Comments",e.Comments).withName("Comments");n.addChildNode(t)}if(null!=e.QuoteEscapeCharacter){const t=Gr.of("QuoteEscapeCharacter",e.QuoteEscapeCharacter).withName("QuoteEscapeCharacter");n.addChildNode(t)}if(null!=e.RecordDelimiter){const t=Gr.of("RecordDelimiter",e.RecordDelimiter).withName("RecordDelimiter");n.addChildNode(t)}if(null!=e.FieldDelimiter){const t=Gr.of("FieldDelimiter",e.FieldDelimiter).withName("FieldDelimiter");n.addChildNode(t)}if(null!=e.QuoteCharacter){const t=Gr.of("QuoteCharacter",e.QuoteCharacter).withName("QuoteCharacter");n.addChildNode(t)}if(null!=e.AllowQuotedRecordDelimiter){const t=Gr.of("AllowQuotedRecordDelimiter",String(e.AllowQuotedRecordDelimiter)).withName("AllowQuotedRecordDelimiter");n.addChildNode(t)}return n})(e.CSV).withName("CSV");n.addChildNode(t)}if(null!=e.CompressionType){const t=Gr.of("CompressionType",e.CompressionType).withName("CompressionType");n.addChildNode(t)}if(null!=e.JSON){const i=Ma(e.JSON,t).withName("JSON");n.addChildNode(i)}if(null!=e.Parquet){const i=Ya(e.Parquet,t).withName("Parquet");n.addChildNode(i)}return n},ba=(e,t)=>{const n=new Gr("IntelligentTieringConfiguration");if(null!=e.Id){const t=Gr.of("IntelligentTieringId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.Filter){const i=xa(e.Filter,t).withName("Filter");n.addChildNode(i)}if(null!=e.Status){const t=Gr.of("IntelligentTieringStatus",e.Status).withName("Status");n.addChildNode(t)}return null!=e.Tierings&&bs(e.Tierings,t).map((e=>{e=e.withName("Tiering"),n.addChildNode(e)})),n},xa=(e,t)=>{const n=new Gr("IntelligentTieringFilter");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Tag){const i=fs(e.Tag,t).withName("Tag");n.addChildNode(i)}if(null!=e.And){const i=((e,t)=>{const n=new Gr("IntelligentTieringAndOperator");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}return null!=e.Tags&&ys(e.Tags,t).map((e=>{e=e.withName("Tag"),n.addChildNode(e)})),n})(e.And,t).withName("And");n.addChildNode(i)}return n},wa=(e,t)=>{const n=new Gr("InventoryConfiguration");if(null!=e.Destination){const i=Sa(e.Destination,t).withName("Destination");n.addChildNode(i)}if(null!=e.IsEnabled){const t=Gr.of("IsEnabled",String(e.IsEnabled)).withName("IsEnabled");n.addChildNode(t)}if(null!=e.Filter){const i=Ea(e.Filter,t).withName("Filter");n.addChildNode(i)}if(null!=e.Id){const t=Gr.of("InventoryId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.IncludedObjectVersions){const t=Gr.of("InventoryIncludedObjectVersions",e.IncludedObjectVersions).withName("IncludedObjectVersions");n.addChildNode(t)}if(null!=e.OptionalFields){const i=_a(e.OptionalFields,t),r=new Gr("OptionalFields");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}if(null!=e.Schedule){const i=Pa(e.Schedule,t).withName("Schedule");n.addChildNode(i)}return n},Sa=(e,t)=>{const n=new Gr("InventoryDestination");if(null!=e.S3BucketDestination){const i=Ca(e.S3BucketDestination,t).withName("S3BucketDestination");n.addChildNode(i)}return n},Ea=(e,t)=>{const n=new Gr("InventoryFilter");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}return n},_a=(e,t)=>e.filter((e=>null!=e)).map((e=>Gr.of("InventoryOptionalField",e).withName("Field"))),Ca=(e,t)=>{const n=new Gr("InventoryS3BucketDestination");if(null!=e.AccountId){const t=Gr.of("AccountId",e.AccountId).withName("AccountId");n.addChildNode(t)}if(null!=e.Bucket){const t=Gr.of("BucketName",e.Bucket).withName("Bucket");n.addChildNode(t)}if(null!=e.Format){const t=Gr.of("InventoryFormat",e.Format).withName("Format");n.addChildNode(t)}if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Encryption){const i=((e,t)=>{const n=new Gr("InventoryEncryption");if(null!=e.SSES3){const i=hs(e.SSES3,t).withName("SSE-S3");n.addChildNode(i)}if(null!=e.SSEKMS){const i=us(e.SSEKMS,t).withName("SSE-KMS");n.addChildNode(i)}return n})(e.Encryption,t).withName("Encryption");n.addChildNode(i)}return n},Pa=(e,t)=>{const n=new Gr("InventorySchedule");if(null!=e.Frequency){const t=Gr.of("InventoryFrequency",e.Frequency).withName("Frequency");n.addChildNode(t)}return n},Ma=(e,t)=>{const n=new Gr("JSONInput");if(null!=e.Type){const t=Gr.of("JSONType",e.Type).withName("Type");n.addChildNode(t)}return n},Ta=(e,t)=>{const n=new Gr("LifecycleRuleFilter");return A.visit(e,{Prefix:e=>{const t=Gr.of("Prefix",e).withName("Prefix");n.addChildNode(t)},Tag:e=>{const i=fs(e,t).withName("Tag");n.addChildNode(i)},ObjectSizeGreaterThan:e=>{const t=Gr.of("ObjectSizeGreaterThanBytes",String(e)).withName("ObjectSizeGreaterThan");n.addChildNode(t)},ObjectSizeLessThan:e=>{const t=Gr.of("ObjectSizeLessThanBytes",String(e)).withName("ObjectSizeLessThan");n.addChildNode(t)},And:e=>{const i=((e,t)=>{const n=new Gr("LifecycleRuleAndOperator");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Tags&&ys(e.Tags,t).map((e=>{e=e.withName("Tag"),n.addChildNode(e)})),null!=e.ObjectSizeGreaterThan){const t=Gr.of("ObjectSizeGreaterThanBytes",String(e.ObjectSizeGreaterThan)).withName("ObjectSizeGreaterThan");n.addChildNode(t)}if(null!=e.ObjectSizeLessThan){const t=Gr.of("ObjectSizeLessThanBytes",String(e.ObjectSizeLessThan)).withName("ObjectSizeLessThan");n.addChildNode(t)}return n})(e,t).withName("And");n.addChildNode(i)},_:(e,t)=>{if(!(t instanceof Gr||t instanceof jr))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new Gr(e).addChildNode(t))}}),n},Aa=(e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>{const n=new Gr("LifecycleRule");if(null!=e.Expiration){const t=((e,t)=>{const n=new Gr("LifecycleExpiration");if(null!=e.Date){const t=Gr.of("Date",(e.Date.toISOString().split(".")[0]+"Z").toString()).withName("Date");n.addChildNode(t)}if(null!=e.Days){const t=Gr.of("Days",String(e.Days)).withName("Days");n.addChildNode(t)}if(null!=e.ExpiredObjectDeleteMarker){const t=Gr.of("ExpiredObjectDeleteMarker",String(e.ExpiredObjectDeleteMarker)).withName("ExpiredObjectDeleteMarker");n.addChildNode(t)}return n})(e.Expiration).withName("Expiration");n.addChildNode(t)}if(null!=e.ID){const t=Gr.of("ID",e.ID).withName("ID");n.addChildNode(t)}if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Filter){const i=Ta(e.Filter,t).withName("Filter");n.addChildNode(i)}if(null!=e.Status){const t=Gr.of("ExpirationStatus",e.Status).withName("Status");n.addChildNode(t)}if(null!=e.Transitions&&ws(e.Transitions,t).map((e=>{e=e.withName("Transition"),n.addChildNode(e)})),null!=e.NoncurrentVersionTransitions&&Ba(e.NoncurrentVersionTransitions,t).map((e=>{e=e.withName("NoncurrentVersionTransition"),n.addChildNode(e)})),null!=e.NoncurrentVersionExpiration){const i=Na(e.NoncurrentVersionExpiration,t).withName("NoncurrentVersionExpiration");n.addChildNode(i)}if(null!=e.AbortIncompleteMultipartUpload){const t=((e,t)=>{const n=new Gr("AbortIncompleteMultipartUpload");if(null!=e.DaysAfterInitiation){const t=Gr.of("DaysAfterInitiation",String(e.DaysAfterInitiation)).withName("DaysAfterInitiation");n.addChildNode(t)}return n})(e.AbortIncompleteMultipartUpload).withName("AbortIncompleteMultipartUpload");n.addChildNode(t)}return n})(e,t).withName("member"))),Ia=(e,t)=>{const n=new Gr("LoggingEnabled");if(null!=e.TargetBucket){const t=Gr.of("TargetBucket",e.TargetBucket).withName("TargetBucket");n.addChildNode(t)}if(null!=e.TargetGrants){const i=vs(e.TargetGrants,t),r=new Gr("TargetGrants");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}if(null!=e.TargetPrefix){const t=Gr.of("TargetPrefix",e.TargetPrefix).withName("TargetPrefix");n.addChildNode(t)}return n},Ra=(e,t)=>{const n=new Gr("Metrics");if(null!=e.Status){const t=Gr.of("MetricsStatus",e.Status).withName("Status");n.addChildNode(t)}if(null!=e.EventThreshold){const i=ts(e.EventThreshold,t).withName("EventThreshold");n.addChildNode(i)}return n},ka=(e,t)=>{const n=new Gr("MetricsConfiguration");if(null!=e.Id){const t=Gr.of("MetricsId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.Filter){const i=La(e.Filter,t).withName("Filter");n.addChildNode(i)}return n},La=(e,t)=>{const n=new Gr("MetricsFilter");return L.visit(e,{Prefix:e=>{const t=Gr.of("Prefix",e).withName("Prefix");n.addChildNode(t)},Tag:e=>{const i=fs(e,t).withName("Tag");n.addChildNode(i)},AccessPointArn:e=>{const t=Gr.of("AccessPointArn",e).withName("AccessPointArn");n.addChildNode(t)},And:e=>{const i=((e,t)=>{const n=new Gr("MetricsAndOperator");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Tags&&ys(e.Tags,t).map((e=>{e=e.withName("Tag"),n.addChildNode(e)})),null!=e.AccessPointArn){const t=Gr.of("AccessPointArn",e.AccessPointArn).withName("AccessPointArn");n.addChildNode(t)}return n})(e,t).withName("And");n.addChildNode(i)},_:(e,t)=>{if(!(t instanceof Gr||t instanceof jr))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new Gr(e).addChildNode(t))}}),n},Na=(e,t)=>{const n=new Gr("NoncurrentVersionExpiration");if(null!=e.NoncurrentDays){const t=Gr.of("Days",String(e.NoncurrentDays)).withName("NoncurrentDays");n.addChildNode(t)}if(null!=e.NewerNoncurrentVersions){const t=Gr.of("VersionCount",String(e.NewerNoncurrentVersions)).withName("NewerNoncurrentVersions");n.addChildNode(t)}return n},Ba=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("NoncurrentVersionTransition");if(null!=e.NoncurrentDays){const t=Gr.of("Days",String(e.NoncurrentDays)).withName("NoncurrentDays");n.addChildNode(t)}if(null!=e.StorageClass){const t=Gr.of("TransitionStorageClass",e.StorageClass).withName("StorageClass");n.addChildNode(t)}if(null!=e.NewerNoncurrentVersions){const t=Gr.of("VersionCount",String(e.NewerNoncurrentVersions)).withName("NewerNoncurrentVersions");n.addChildNode(t)}return n})(e);return t.withName("member")})),Da=(e,t)=>{const n=new Gr("NotificationConfiguration");if(null!=e.TopicConfigurations&&xs(e.TopicConfigurations,t).map((e=>{e=e.withName("TopicConfiguration"),n.addChildNode(e)})),null!=e.QueueConfigurations&&$a(e.QueueConfigurations,t).map((e=>{e=e.withName("QueueConfiguration"),n.addChildNode(e)})),null!=e.LambdaFunctionConfigurations&&((e,t)=>e.filter((e=>null!=e)).map((e=>{const n=((e,t)=>{const n=new Gr("LambdaFunctionConfiguration");if(null!=e.Id){const t=Gr.of("NotificationId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.LambdaFunctionArn){const t=Gr.of("LambdaFunctionArn",e.LambdaFunctionArn).withName("CloudFunction");n.addChildNode(t)}if(null!=e.Events&&ma(e.Events).map((e=>{e=e.withName("Event"),n.addChildNode(e)})),null!=e.Filter){const i=Oa(e.Filter,t).withName("Filter");n.addChildNode(i)}return n})(e,t);return n.withName("member")})))(e.LambdaFunctionConfigurations,t).map((e=>{e=e.withName("CloudFunctionConfiguration"),n.addChildNode(e)})),null!=e.EventBridgeConfiguration){const t=(e.EventBridgeConfiguration,new Gr("EventBridgeConfiguration")).withName("EventBridgeConfiguration");n.addChildNode(t)}return n},Oa=(e,t)=>{const n=new Gr("NotificationConfigurationFilter");if(null!=e.Key){const i=rs(e.Key,t).withName("S3Key");n.addChildNode(i)}return n},Fa=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("ObjectIdentifier");if(null!=e.Key){const t=Gr.of("ObjectKey",e.Key).withName("Key");n.addChildNode(t)}if(null!=e.VersionId){const t=Gr.of("ObjectVersionId",e.VersionId).withName("VersionId");n.addChildNode(t)}return n})(e);return t.withName("member")})),za=(e,t)=>{const n=new Gr("ObjectLockConfiguration");if(null!=e.ObjectLockEnabled){const t=Gr.of("ObjectLockEnabled",e.ObjectLockEnabled).withName("ObjectLockEnabled");n.addChildNode(t)}if(null!=e.Rule){const i=ja(e.Rule,t).withName("Rule");n.addChildNode(i)}return n},Ua=(e,t)=>{const n=new Gr("ObjectLockLegalHold");if(null!=e.Status){const t=Gr.of("ObjectLockLegalHoldStatus",e.Status).withName("Status");n.addChildNode(t)}return n},Ha=(e,t)=>{const n=new Gr("ObjectLockRetention");if(null!=e.Mode){const t=Gr.of("ObjectLockRetentionMode",e.Mode).withName("Mode");n.addChildNode(t)}if(null!=e.RetainUntilDate){const t=Gr.of("Date",(e.RetainUntilDate.toISOString().split(".")[0]+"Z").toString()).withName("RetainUntilDate");n.addChildNode(t)}return n},ja=(e,t)=>{const n=new Gr("ObjectLockRule");if(null!=e.DefaultRetention){const t=((e,t)=>{const n=new Gr("DefaultRetention");if(null!=e.Mode){const t=Gr.of("ObjectLockRetentionMode",e.Mode).withName("Mode");n.addChildNode(t)}if(null!=e.Days){const t=Gr.of("Days",String(e.Days)).withName("Days");n.addChildNode(t)}if(null!=e.Years){const t=Gr.of("Years",String(e.Years)).withName("Years");n.addChildNode(t)}return n})(e.DefaultRetention).withName("DefaultRetention");n.addChildNode(t)}return n},Ga=(e,t)=>{const n=new Gr("OutputSerialization");if(null!=e.CSV){const t=((e,t)=>{const n=new Gr("CSVOutput");if(null!=e.QuoteFields){const t=Gr.of("QuoteFields",e.QuoteFields).withName("QuoteFields");n.addChildNode(t)}if(null!=e.QuoteEscapeCharacter){const t=Gr.of("QuoteEscapeCharacter",e.QuoteEscapeCharacter).withName("QuoteEscapeCharacter");n.addChildNode(t)}if(null!=e.RecordDelimiter){const t=Gr.of("RecordDelimiter",e.RecordDelimiter).withName("RecordDelimiter");n.addChildNode(t)}if(null!=e.FieldDelimiter){const t=Gr.of("FieldDelimiter",e.FieldDelimiter).withName("FieldDelimiter");n.addChildNode(t)}if(null!=e.QuoteCharacter){const t=Gr.of("QuoteCharacter",e.QuoteCharacter).withName("QuoteCharacter");n.addChildNode(t)}return n})(e.CSV).withName("CSV");n.addChildNode(t)}if(null!=e.JSON){const t=((e,t)=>{const n=new Gr("JSONOutput");if(null!=e.RecordDelimiter){const t=Gr.of("RecordDelimiter",e.RecordDelimiter).withName("RecordDelimiter");n.addChildNode(t)}return n})(e.JSON).withName("JSON");n.addChildNode(t)}return n},Va=(e,t)=>{const n=new Gr("Owner");if(null!=e.DisplayName){const t=Gr.of("DisplayName",e.DisplayName).withName("DisplayName");n.addChildNode(t)}if(null!=e.ID){const t=Gr.of("ID",e.ID).withName("ID");n.addChildNode(t)}return n},Wa=(e,t)=>{const n=new Gr("OwnershipControls");return null!=e.Rules&&qa(e.Rules,t).map((e=>{e=e.withName("Rule"),n.addChildNode(e)})),n},qa=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("OwnershipControlsRule");if(null!=e.ObjectOwnership){const t=Gr.of("ObjectOwnership",e.ObjectOwnership).withName("ObjectOwnership");n.addChildNode(t)}return n})(e);return t.withName("member")})),Ya=(e,t)=>new Gr("ParquetInput"),Ka=(e,t)=>{const n=new Gr("PublicAccessBlockConfiguration");if(null!=e.BlockPublicAcls){const t=Gr.of("Setting",String(e.BlockPublicAcls)).withName("BlockPublicAcls");n.addChildNode(t)}if(null!=e.IgnorePublicAcls){const t=Gr.of("Setting",String(e.IgnorePublicAcls)).withName("IgnorePublicAcls");n.addChildNode(t)}if(null!=e.BlockPublicPolicy){const t=Gr.of("Setting",String(e.BlockPublicPolicy)).withName("BlockPublicPolicy");n.addChildNode(t)}if(null!=e.RestrictPublicBuckets){const t=Gr.of("Setting",String(e.RestrictPublicBuckets)).withName("RestrictPublicBuckets");n.addChildNode(t)}return n},$a=(e,t)=>e.filter((e=>null!=e)).map((e=>{const n=((e,t)=>{const n=new Gr("QueueConfiguration");if(null!=e.Id){const t=Gr.of("NotificationId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.QueueArn){const t=Gr.of("QueueArn",e.QueueArn).withName("Queue");n.addChildNode(t)}if(null!=e.Events&&ma(e.Events).map((e=>{e=e.withName("Event"),n.addChildNode(e)})),null!=e.Filter){const i=Oa(e.Filter,t).withName("Filter");n.addChildNode(i)}return n})(e,t);return n.withName("member")})),Xa=(e,t)=>{const n=new Gr("ReplicationConfiguration");if(null!=e.Role){const t=Gr.of("Role",e.Role).withName("Role");n.addChildNode(t)}return null!=e.Rules&&Qa(e.Rules,t).map((e=>{e=e.withName("Rule"),n.addChildNode(e)})),n},Za=(e,t)=>{const n=new Gr("ReplicationRule");if(null!=e.ID){const t=Gr.of("ID",e.ID).withName("ID");n.addChildNode(t)}if(null!=e.Priority){const t=Gr.of("Priority",String(e.Priority)).withName("Priority");n.addChildNode(t)}if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Filter){const i=Ja(e.Filter,t).withName("Filter");n.addChildNode(i)}if(null!=e.Status){const t=Gr.of("ReplicationRuleStatus",e.Status).withName("Status");n.addChildNode(t)}if(null!=e.SourceSelectionCriteria){const i=ls(e.SourceSelectionCriteria,t).withName("SourceSelectionCriteria");n.addChildNode(i)}if(null!=e.ExistingObjectReplication){const t=((e,t)=>{const n=new Gr("ExistingObjectReplication");if(null!=e.Status){const t=Gr.of("ExistingObjectReplicationStatus",e.Status).withName("Status");n.addChildNode(t)}return n})(e.ExistingObjectReplication).withName("ExistingObjectReplication");n.addChildNode(t)}if(null!=e.Destination){const i=((e,t)=>{const n=new Gr("Destination");if(null!=e.Bucket){const t=Gr.of("BucketName",e.Bucket).withName("Bucket");n.addChildNode(t)}if(null!=e.Account){const t=Gr.of("AccountId",e.Account).withName("Account");n.addChildNode(t)}if(null!=e.StorageClass){const t=Gr.of("StorageClass",e.StorageClass).withName("StorageClass");n.addChildNode(t)}if(null!=e.AccessControlTranslation){const t=((e,t)=>{const n=new Gr("AccessControlTranslation");if(null!=e.Owner){const t=Gr.of("OwnerOverride",e.Owner).withName("Owner");n.addChildNode(t)}return n})(e.AccessControlTranslation).withName("AccessControlTranslation");n.addChildNode(t)}if(null!=e.EncryptionConfiguration){const i=pa(e.EncryptionConfiguration,t).withName("EncryptionConfiguration");n.addChildNode(i)}if(null!=e.ReplicationTime){const i=es(e.ReplicationTime,t).withName("ReplicationTime");n.addChildNode(i)}if(null!=e.Metrics){const i=Ra(e.Metrics,t).withName("Metrics");n.addChildNode(i)}return n})(e.Destination,t).withName("Destination");n.addChildNode(i)}if(null!=e.DeleteMarkerReplication){const t=((e,t)=>{const n=new Gr("DeleteMarkerReplication");if(null!=e.Status){const t=Gr.of("DeleteMarkerReplicationStatus",e.Status).withName("Status");n.addChildNode(t)}return n})(e.DeleteMarkerReplication).withName("DeleteMarkerReplication");n.addChildNode(t)}return n},Ja=(e,t)=>{const n=new Gr("ReplicationRuleFilter");return z.visit(e,{Prefix:e=>{const t=Gr.of("Prefix",e).withName("Prefix");n.addChildNode(t)},Tag:e=>{const i=fs(e,t).withName("Tag");n.addChildNode(i)},And:e=>{const i=((e,t)=>{const n=new Gr("ReplicationRuleAndOperator");if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}return null!=e.Tags&&ys(e.Tags,t).map((e=>{e=e.withName("Tag"),n.addChildNode(e)})),n})(e,t).withName("And");n.addChildNode(i)},_:(e,t)=>{if(!(t instanceof Gr||t instanceof jr))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new Gr(e).addChildNode(t))}}),n},Qa=(e,t)=>e.filter((e=>null!=e)).map((e=>Za(e,t).withName("member"))),es=(e,t)=>{const n=new Gr("ReplicationTime");if(null!=e.Status){const t=Gr.of("ReplicationTimeStatus",e.Status).withName("Status");n.addChildNode(t)}if(null!=e.Time){const i=ts(e.Time,t).withName("Time");n.addChildNode(i)}return n},ts=(e,t)=>{const n=new Gr("ReplicationTimeValue");if(null!=e.Minutes){const t=Gr.of("Minutes",String(e.Minutes)).withName("Minutes");n.addChildNode(t)}return n},ns=(e,t)=>{const n=new Gr("RequestPaymentConfiguration");if(null!=e.Payer){const t=Gr.of("Payer",e.Payer).withName("Payer");n.addChildNode(t)}return n},is=(e,t)=>{const n=new Gr("RestoreRequest");if(null!=e.Days){const t=Gr.of("Days",String(e.Days)).withName("Days");n.addChildNode(t)}if(null!=e.GlacierJobParameters){const t=((e,t)=>{const n=new Gr("GlacierJobParameters");if(null!=e.Tier){const t=Gr.of("Tier",e.Tier).withName("Tier");n.addChildNode(t)}return n})(e.GlacierJobParameters).withName("GlacierJobParameters");n.addChildNode(t)}if(null!=e.Type){const t=Gr.of("RestoreRequestType",e.Type).withName("Type");n.addChildNode(t)}if(null!=e.Tier){const t=Gr.of("Tier",e.Tier).withName("Tier");n.addChildNode(t)}if(null!=e.Description){const t=Gr.of("Description",e.Description).withName("Description");n.addChildNode(t)}if(null!=e.SelectParameters){const i=as(e.SelectParameters,t).withName("SelectParameters");n.addChildNode(i)}if(null!=e.OutputLocation){const i=((e,t)=>{const n=new Gr("OutputLocation");if(null!=e.S3){const i=os(e.S3,t).withName("S3");n.addChildNode(i)}return n})(e.OutputLocation,t).withName("OutputLocation");n.addChildNode(i)}return n},rs=(e,t)=>{const n=new Gr("S3KeyFilter");return null!=e.FilterRules&&((e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("FilterRule");if(null!=e.Name){const t=Gr.of("FilterRuleName",e.Name).withName("Name");n.addChildNode(t)}if(null!=e.Value){const t=Gr.of("FilterRuleValue",e.Value).withName("Value");n.addChildNode(t)}return n})(e);return t.withName("member")})))(e.FilterRules).map((e=>{e=e.withName("FilterRule"),n.addChildNode(e)})),n},os=(e,t)=>{const n=new Gr("S3Location");if(null!=e.BucketName){const t=Gr.of("BucketName",e.BucketName).withName("BucketName");n.addChildNode(t)}if(null!=e.Prefix){const t=Gr.of("LocationPrefix",e.Prefix).withName("Prefix");n.addChildNode(t)}if(null!=e.Encryption){const t=((e,t)=>{const n=new Gr("Encryption");if(null!=e.EncryptionType){const t=Gr.of("ServerSideEncryption",e.EncryptionType).withName("EncryptionType");n.addChildNode(t)}if(null!=e.KMSKeyId){const t=Gr.of("SSEKMSKeyId",e.KMSKeyId).withName("KMSKeyId");n.addChildNode(t)}if(null!=e.KMSContext){const t=Gr.of("KMSContext",e.KMSContext).withName("KMSContext");n.addChildNode(t)}return n})(e.Encryption).withName("Encryption");n.addChildNode(t)}if(null!=e.CannedACL){const t=Gr.of("ObjectCannedACL",e.CannedACL).withName("CannedACL");n.addChildNode(t)}if(null!=e.AccessControlList){const i=ya(e.AccessControlList,t),r=new Gr("AccessControlList");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}if(null!=e.Tagging){const i=gs(e.Tagging,t).withName("Tagging");n.addChildNode(i)}if(null!=e.UserMetadata){const i=Ss(e.UserMetadata,t),r=new Gr("UserMetadata");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}if(null!=e.StorageClass){const t=Gr.of("StorageClass",e.StorageClass).withName("StorageClass");n.addChildNode(t)}return n},as=(e,t)=>{const n=new Gr("SelectParameters");if(null!=e.InputSerialization){const i=va(e.InputSerialization,t).withName("InputSerialization");n.addChildNode(i)}if(null!=e.ExpressionType){const t=Gr.of("ExpressionType",e.ExpressionType).withName("ExpressionType");n.addChildNode(t)}if(null!=e.Expression){const t=Gr.of("Expression",e.Expression).withName("Expression");n.addChildNode(t)}if(null!=e.OutputSerialization){const t=Ga(e.OutputSerialization).withName("OutputSerialization");n.addChildNode(t)}return n},ss=(e,t)=>{const n=new Gr("ServerSideEncryptionConfiguration");return null!=e.Rules&&cs(e.Rules,t).map((e=>{e=e.withName("Rule"),n.addChildNode(e)})),n},cs=(e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>{const n=new Gr("ServerSideEncryptionRule");if(null!=e.ApplyServerSideEncryptionByDefault){const t=((e,t)=>{const n=new Gr("ServerSideEncryptionByDefault");if(null!=e.SSEAlgorithm){const t=Gr.of("ServerSideEncryption",e.SSEAlgorithm).withName("SSEAlgorithm");n.addChildNode(t)}if(null!=e.KMSMasterKeyID){const t=Gr.of("SSEKMSKeyId",e.KMSMasterKeyID).withName("KMSMasterKeyID");n.addChildNode(t)}return n})(e.ApplyServerSideEncryptionByDefault).withName("ApplyServerSideEncryptionByDefault");n.addChildNode(t)}if(null!=e.BucketKeyEnabled){const t=Gr.of("BucketKeyEnabled",String(e.BucketKeyEnabled)).withName("BucketKeyEnabled");n.addChildNode(t)}return n})(e).withName("member"))),ls=(e,t)=>{const n=new Gr("SourceSelectionCriteria");if(null!=e.SseKmsEncryptedObjects){const i=ds(e.SseKmsEncryptedObjects,t).withName("SseKmsEncryptedObjects");n.addChildNode(i)}if(null!=e.ReplicaModifications){const t=((e,t)=>{const n=new Gr("ReplicaModifications");if(null!=e.Status){const t=Gr.of("ReplicaModificationsStatus",e.Status).withName("Status");n.addChildNode(t)}return n})(e.ReplicaModifications).withName("ReplicaModifications");n.addChildNode(t)}return n},us=(e,t)=>{const n=new Gr("SSE-KMS");if(null!=e.KeyId){const t=Gr.of("SSEKMSKeyId",e.KeyId).withName("KeyId");n.addChildNode(t)}return n},ds=(e,t)=>{const n=new Gr("SseKmsEncryptedObjects");if(null!=e.Status){const t=Gr.of("SseKmsEncryptedObjectsStatus",e.Status).withName("Status");n.addChildNode(t)}return n},hs=(e,t)=>new Gr("SSE-S3"),ps=(e,t)=>{const n=new Gr("StorageClassAnalysis");if(null!=e.DataExport){const i=ms(e.DataExport,t).withName("DataExport");n.addChildNode(i)}return n},ms=(e,t)=>{const n=new Gr("StorageClassAnalysisDataExport");if(null!=e.OutputSchemaVersion){const t=Gr.of("StorageClassAnalysisSchemaVersion",e.OutputSchemaVersion).withName("OutputSchemaVersion");n.addChildNode(t)}if(null!=e.Destination){const t=((e,t)=>{const n=new Gr("AnalyticsExportDestination");if(null!=e.S3BucketDestination){const t=((e,t)=>{const n=new Gr("AnalyticsS3BucketDestination");if(null!=e.Format){const t=Gr.of("AnalyticsS3ExportFileFormat",e.Format).withName("Format");n.addChildNode(t)}if(null!=e.BucketAccountId){const t=Gr.of("AccountId",e.BucketAccountId).withName("BucketAccountId");n.addChildNode(t)}if(null!=e.Bucket){const t=Gr.of("BucketName",e.Bucket).withName("Bucket");n.addChildNode(t)}if(null!=e.Prefix){const t=Gr.of("Prefix",e.Prefix).withName("Prefix");n.addChildNode(t)}return n})(e.S3BucketDestination).withName("S3BucketDestination");n.addChildNode(t)}return n})(e.Destination).withName("Destination");n.addChildNode(t)}return n},fs=(e,t)=>{const n=new Gr("Tag");if(null!=e.Key){const t=Gr.of("ObjectKey",e.Key).withName("Key");n.addChildNode(t)}if(null!=e.Value){const t=Gr.of("Value",e.Value).withName("Value");n.addChildNode(t)}return n},gs=(e,t)=>{const n=new Gr("Tagging");if(null!=e.TagSet){const i=ys(e.TagSet,t),r=new Gr("TagSet");i.map((e=>{r.addChildNode(e)})),n.addChildNode(r)}return n},ys=(e,t)=>e.filter((e=>null!=e)).map((e=>fs(e,t).withName("Tag"))),vs=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("TargetGrant");if(null!=e.Grantee){const t=ga(e.Grantee).withName("Grantee");t.addAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),n.addChildNode(t)}if(null!=e.Permission){const t=Gr.of("BucketLogsPermission",e.Permission).withName("Permission");n.addChildNode(t)}return n})(e);return t.withName("Grant")})),bs=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("Tiering");if(null!=e.Days){const t=Gr.of("IntelligentTieringDays",String(e.Days)).withName("Days");n.addChildNode(t)}if(null!=e.AccessTier){const t=Gr.of("IntelligentTieringAccessTier",e.AccessTier).withName("AccessTier");n.addChildNode(t)}return n})(e);return t.withName("member")})),xs=(e,t)=>e.filter((e=>null!=e)).map((e=>{const n=((e,t)=>{const n=new Gr("TopicConfiguration");if(null!=e.Id){const t=Gr.of("NotificationId",e.Id).withName("Id");n.addChildNode(t)}if(null!=e.TopicArn){const t=Gr.of("TopicArn",e.TopicArn).withName("Topic");n.addChildNode(t)}if(null!=e.Events&&ma(e.Events).map((e=>{e=e.withName("Event"),n.addChildNode(e)})),null!=e.Filter){const i=Oa(e.Filter,t).withName("Filter");n.addChildNode(i)}return n})(e,t);return n.withName("member")})),ws=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("Transition");if(null!=e.Date){const t=Gr.of("Date",(e.Date.toISOString().split(".")[0]+"Z").toString()).withName("Date");n.addChildNode(t)}if(null!=e.Days){const t=Gr.of("Days",String(e.Days)).withName("Days");n.addChildNode(t)}if(null!=e.StorageClass){const t=Gr.of("TransitionStorageClass",e.StorageClass).withName("StorageClass");n.addChildNode(t)}return n})(e);return t.withName("member")})),Ss=(e,t)=>e.filter((e=>null!=e)).map((e=>{const t=((e,t)=>{const n=new Gr("MetadataEntry");if(null!=e.Name){const t=Gr.of("MetadataKey",e.Name).withName("Name");n.addChildNode(t)}if(null!=e.Value){const t=Gr.of("MetadataValue",e.Value).withName("Value");n.addChildNode(t)}return n})(e);return t.withName("MetadataEntry")})),Es=(e,t)=>{const n=new Gr("VersioningConfiguration");if(null!=e.MFADelete){const t=Gr.of("MFADelete",e.MFADelete).withName("MfaDelete");n.addChildNode(t)}if(null!=e.Status){const t=Gr.of("BucketVersioningStatus",e.Status).withName("Status");n.addChildNode(t)}return n},_s=(e,t)=>{const n=new Gr("WebsiteConfiguration");if(null!=e.ErrorDocument){const t=((e,t)=>{const n=new Gr("ErrorDocument");if(null!=e.Key){const t=Gr.of("ObjectKey",e.Key).withName("Key");n.addChildNode(t)}return n})(e.ErrorDocument).withName("ErrorDocument");n.addChildNode(t)}if(null!=e.IndexDocument){const t=((e,t)=>{const n=new Gr("IndexDocument");if(null!=e.Suffix){const t=Gr.of("Suffix",e.Suffix).withName("Suffix");n.addChildNode(t)}return n})(e.IndexDocument).withName("IndexDocument");n.addChildNode(t)}if(null!=e.RedirectAllRequestsTo){const t=((e,t)=>{const n=new Gr("RedirectAllRequestsTo");if(null!=e.HostName){const t=Gr.of("HostName",e.HostName).withName("HostName");n.addChildNode(t)}if(null!=e.Protocol){const t=Gr.of("Protocol",e.Protocol).withName("Protocol");n.addChildNode(t)}return n})(e.RedirectAllRequestsTo).withName("RedirectAllRequestsTo");n.addChildNode(t)}if(null!=e.RoutingRules){const t=((e,t)=>e.filter((e=>null!=e)).map((e=>((e,t)=>{const n=new Gr("RoutingRule");if(null!=e.Condition){const t=((e,t)=>{const n=new Gr("Condition");if(null!=e.HttpErrorCodeReturnedEquals){const t=Gr.of("HttpErrorCodeReturnedEquals",e.HttpErrorCodeReturnedEquals).withName("HttpErrorCodeReturnedEquals");n.addChildNode(t)}if(null!=e.KeyPrefixEquals){const t=Gr.of("KeyPrefixEquals",e.KeyPrefixEquals).withName("KeyPrefixEquals");n.addChildNode(t)}return n})(e.Condition).withName("Condition");n.addChildNode(t)}if(null!=e.Redirect){const t=((e,t)=>{const n=new Gr("Redirect");if(null!=e.HostName){const t=Gr.of("HostName",e.HostName).withName("HostName");n.addChildNode(t)}if(null!=e.HttpRedirectCode){const t=Gr.of("HttpRedirectCode",e.HttpRedirectCode).withName("HttpRedirectCode");n.addChildNode(t)}if(null!=e.Protocol){const t=Gr.of("Protocol",e.Protocol).withName("Protocol");n.addChildNode(t)}if(null!=e.ReplaceKeyPrefixWith){const t=Gr.of("ReplaceKeyPrefixWith",e.ReplaceKeyPrefixWith).withName("ReplaceKeyPrefixWith");n.addChildNode(t)}if(null!=e.ReplaceKeyWith){const t=Gr.of("ReplaceKeyWith",e.ReplaceKeyWith).withName("ReplaceKeyWith");n.addChildNode(t)}return n})(e.Redirect).withName("Redirect");n.addChildNode(t)}return n})(e).withName("RoutingRule"))))(e.RoutingRules),i=new Gr("RoutingRules");t.map((e=>{i.addChildNode(e)})),n.addChildNode(i)}return n},Cs=(e,t)=>{const n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Tag?n.Tags=[]:void 0!==e.Tag&&(n.Tags=Pc((0,oe.L)(e.Tag),t)),n},Ps=(e,t)=>{const n={Id:void 0,Filter:void 0,StorageClassAnalysis:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),""===e.Filter||void 0!==e.Filter&&(n.Filter=Ms((0,oe.$I)(e.Filter),t)),void 0!==e.StorageClassAnalysis&&(n.StorageClassAnalysis=Ec(e.StorageClassAnalysis,t)),n},Ms=(e,t)=>void 0!==e.Prefix?{Prefix:(0,oe.pY)(e.Prefix)}:void 0!==e.Tag?{Tag:Cc(e.Tag,t)}:void 0!==e.And?{And:Cs(e.And,t)}:{$unknown:Object.entries(e)[0]},Ts=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))),As=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),n})(e))),Is=(e,t)=>({}),Rs=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={ID:void 0,AllowedHeaders:void 0,AllowedMethods:void 0,AllowedOrigins:void 0,ExposeHeaders:void 0,MaxAgeSeconds:void 0};return void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),""===e.AllowedHeader?n.AllowedHeaders=[]:void 0!==e.AllowedHeader&&(n.AllowedHeaders=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))))((0,oe.L)(e.AllowedHeader))),""===e.AllowedMethod?n.AllowedMethods=[]:void 0!==e.AllowedMethod&&(n.AllowedMethods=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))))((0,oe.L)(e.AllowedMethod))),""===e.AllowedOrigin?n.AllowedOrigins=[]:void 0!==e.AllowedOrigin&&(n.AllowedOrigins=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))))((0,oe.L)(e.AllowedOrigin))),""===e.ExposeHeader?n.ExposeHeaders=[]:void 0!==e.ExposeHeader&&(n.ExposeHeaders=Bs((0,oe.L)(e.ExposeHeader),t)),void 0!==e.MaxAgeSeconds&&(n.MaxAgeSeconds=(0,oe.AF)(e.MaxAgeSeconds)),n})(e,t))),ks=(e,t)=>{const n={ReplicaKmsKeyID:void 0};return void 0!==e.ReplicaKmsKeyID&&(n.ReplicaKmsKeyID=(0,oe.pY)(e.ReplicaKmsKeyID)),n},Ls=(e,t)=>({}),Ns=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))),Bs=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))),Ds=(e,t)=>{const n={DisplayName:void 0,EmailAddress:void 0,ID:void 0,URI:void 0,Type:void 0};return void 0!==e.DisplayName&&(n.DisplayName=(0,oe.pY)(e.DisplayName)),void 0!==e.EmailAddress&&(n.EmailAddress=(0,oe.pY)(e.EmailAddress)),void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),void 0!==e.URI&&(n.URI=(0,oe.pY)(e.URI)),void 0!==e["xsi:type"]&&(n.Type=(0,oe.pY)(e["xsi:type"])),n},Os=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=Ds(e.Grantee)),void 0!==e.Permission&&(n.Permission=(0,oe.pY)(e.Permission)),n})(e))),Fs=(e,t)=>{const n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),void 0!==e.DisplayName&&(n.DisplayName=(0,oe.pY)(e.DisplayName)),n},zs=(e,t)=>{const n={Id:void 0,Filter:void 0,Status:void 0,Tierings:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),void 0!==e.Filter&&(n.Filter=Us(e.Filter,t)),void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),""===e.Tiering?n.Tierings=[]:void 0!==e.Tiering&&(n.Tierings=Tc((0,oe.L)(e.Tiering),t)),n},Us=(e,t)=>{const n={Prefix:void 0,Tag:void 0,And:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),void 0!==e.Tag&&(n.Tag=Cc(e.Tag,t)),void 0!==e.And&&(n.And=((e,t)=>{const n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Tag?n.Tags=[]:void 0!==e.Tag&&(n.Tags=Pc((0,oe.L)(e.Tag),t)),n})(e.And,t)),n},Hs=(e,t)=>{const n={Destination:void 0,IsEnabled:void 0,Filter:void 0,Id:void 0,IncludedObjectVersions:void 0,OptionalFields:void 0,Schedule:void 0};return void 0!==e.Destination&&(n.Destination=js(e.Destination,t)),void 0!==e.IsEnabled&&(n.IsEnabled=(0,oe.gx)(e.IsEnabled)),void 0!==e.Filter&&(n.Filter=Gs(e.Filter,t)),void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),void 0!==e.IncludedObjectVersions&&(n.IncludedObjectVersions=(0,oe.pY)(e.IncludedObjectVersions)),""===e.OptionalFields?n.OptionalFields=[]:void 0!==e.OptionalFields&&void 0!==e.OptionalFields.Field&&(n.OptionalFields=Vs((0,oe.L)(e.OptionalFields.Field),t)),void 0!==e.Schedule&&(n.Schedule=qs(e.Schedule,t)),n},js=(e,t)=>{const n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=Ws(e.S3BucketDestination,t)),n},Gs=(e,t)=>{const n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),n},Vs=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(0,oe.pY)(e))),Ws=(e,t)=>{const n={AccountId:void 0,Bucket:void 0,Format:void 0,Prefix:void 0,Encryption:void 0};return void 0!==e.AccountId&&(n.AccountId=(0,oe.pY)(e.AccountId)),void 0!==e.Bucket&&(n.Bucket=(0,oe.pY)(e.Bucket)),void 0!==e.Format&&(n.Format=(0,oe.pY)(e.Format)),void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),void 0!==e.Encryption&&(n.Encryption=((e,t)=>{const n={SSES3:void 0,SSEKMS:void 0};return void 0!==e["SSE-S3"]&&(n.SSES3=wc(e["SSE-S3"],t)),void 0!==e["SSE-KMS"]&&(n.SSEKMS=bc(e["SSE-KMS"],t)),n})(e.Encryption,t)),n},qs=(e,t)=>{const n={Frequency:void 0};return void 0!==e.Frequency&&(n.Frequency=(0,oe.pY)(e.Frequency)),n},Ys=(e,t)=>{const n={Prefix:void 0,Tags:void 0,ObjectSizeGreaterThan:void 0,ObjectSizeLessThan:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Tag?n.Tags=[]:void 0!==e.Tag&&(n.Tags=Pc((0,oe.L)(e.Tag),t)),void 0!==e.ObjectSizeGreaterThan&&(n.ObjectSizeGreaterThan=(0,oe.NK)(e.ObjectSizeGreaterThan)),void 0!==e.ObjectSizeLessThan&&(n.ObjectSizeLessThan=(0,oe.NK)(e.ObjectSizeLessThan)),n},Ks=(e,t)=>void 0!==e.Prefix?{Prefix:(0,oe.pY)(e.Prefix)}:void 0!==e.Tag?{Tag:Cc(e.Tag,t)}:void 0!==e.ObjectSizeGreaterThan?{ObjectSizeGreaterThan:(0,oe.NK)(e.ObjectSizeGreaterThan)}:void 0!==e.ObjectSizeLessThan?{ObjectSizeLessThan:(0,oe.NK)(e.ObjectSizeLessThan)}:void 0!==e.And?{And:Ys(e.And,t)}:{$unknown:Object.entries(e)[0]},$s=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Expiration:void 0,ID:void 0,Prefix:void 0,Filter:void 0,Status:void 0,Transitions:void 0,NoncurrentVersionTransitions:void 0,NoncurrentVersionExpiration:void 0,AbortIncompleteMultipartUpload:void 0};return void 0!==e.Expiration&&(n.Expiration=((e,t)=>{const n={Date:void 0,Days:void 0,ExpiredObjectDeleteMarker:void 0};return void 0!==e.Date&&(n.Date=(0,oe.CE)((0,oe.aH)(e.Date))),void 0!==e.Days&&(n.Days=(0,oe.AF)(e.Days)),void 0!==e.ExpiredObjectDeleteMarker&&(n.ExpiredObjectDeleteMarker=(0,oe.gx)(e.ExpiredObjectDeleteMarker)),n})(e.Expiration)),void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Filter||void 0!==e.Filter&&(n.Filter=Ks((0,oe.$I)(e.Filter),t)),void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),""===e.Transition?n.Transitions=[]:void 0!==e.Transition&&(n.Transitions=Ac((0,oe.L)(e.Transition),t)),""===e.NoncurrentVersionTransition?n.NoncurrentVersionTransitions=[]:void 0!==e.NoncurrentVersionTransition&&(n.NoncurrentVersionTransitions=tc((0,oe.L)(e.NoncurrentVersionTransition),t)),void 0!==e.NoncurrentVersionExpiration&&(n.NoncurrentVersionExpiration=ec(e.NoncurrentVersionExpiration,t)),void 0!==e.AbortIncompleteMultipartUpload&&(n.AbortIncompleteMultipartUpload=((e,t)=>{const n={DaysAfterInitiation:void 0};return void 0!==e.DaysAfterInitiation&&(n.DaysAfterInitiation=(0,oe.AF)(e.DaysAfterInitiation)),n})(e.AbortIncompleteMultipartUpload)),n})(e,t))),Xs=(e,t)=>{const n={Status:void 0,EventThreshold:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),void 0!==e.EventThreshold&&(n.EventThreshold=mc(e.EventThreshold,t)),n},Zs=(e,t)=>{const n={Prefix:void 0,Tags:void 0,AccessPointArn:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Tag?n.Tags=[]:void 0!==e.Tag&&(n.Tags=Pc((0,oe.L)(e.Tag),t)),void 0!==e.AccessPointArn&&(n.AccessPointArn=(0,oe.pY)(e.AccessPointArn)),n},Js=(e,t)=>{const n={Id:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),""===e.Filter||void 0!==e.Filter&&(n.Filter=Qs((0,oe.$I)(e.Filter),t)),n},Qs=(e,t)=>void 0!==e.Prefix?{Prefix:(0,oe.pY)(e.Prefix)}:void 0!==e.Tag?{Tag:Cc(e.Tag,t)}:void 0!==e.AccessPointArn?{AccessPointArn:(0,oe.pY)(e.AccessPointArn)}:void 0!==e.And?{And:Zs(e.And,t)}:{$unknown:Object.entries(e)[0]},ec=(e,t)=>{const n={NoncurrentDays:void 0,NewerNoncurrentVersions:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=(0,oe.AF)(e.NoncurrentDays)),void 0!==e.NewerNoncurrentVersions&&(n.NewerNoncurrentVersions=(0,oe.AF)(e.NewerNoncurrentVersions)),n},tc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={NoncurrentDays:void 0,StorageClass:void 0,NewerNoncurrentVersions:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=(0,oe.AF)(e.NoncurrentDays)),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),void 0!==e.NewerNoncurrentVersions&&(n.NewerNoncurrentVersions=(0,oe.AF)(e.NewerNoncurrentVersions)),n})(e))),nc=(e,t)=>{const n={Key:void 0};return void 0!==e.S3Key&&(n.Key=gc(e.S3Key,t)),n},ic=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Key:void 0,LastModified:void 0,ETag:void 0,ChecksumAlgorithm:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),void 0!==e.ETag&&(n.ETag=(0,oe.pY)(e.ETag)),""===e.ChecksumAlgorithm?n.ChecksumAlgorithm=[]:void 0!==e.ChecksumAlgorithm&&(n.ChecksumAlgorithm=Ts((0,oe.L)(e.ChecksumAlgorithm))),void 0!==e.Size&&(n.Size=(0,oe.NK)(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),void 0!==e.Owner&&(n.Owner=oc(e.Owner,t)),n})(e,t))),rc=(e,t)=>{const n={DefaultRetention:void 0};return void 0!==e.DefaultRetention&&(n.DefaultRetention=((e,t)=>{const n={Mode:void 0,Days:void 0,Years:void 0};return void 0!==e.Mode&&(n.Mode=(0,oe.pY)(e.Mode)),void 0!==e.Days&&(n.Days=(0,oe.AF)(e.Days)),void 0!==e.Years&&(n.Years=(0,oe.AF)(e.Years)),n})(e.DefaultRetention)),n},oc=(e,t)=>{const n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=(0,oe.pY)(e.DisplayName)),void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),n},ac=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={ObjectOwnership:void 0};return void 0!==e.ObjectOwnership&&(n.ObjectOwnership=(0,oe.pY)(e.ObjectOwnership)),n})(e))),sc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={PartNumber:void 0,Size:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0};return void 0!==e.PartNumber&&(n.PartNumber=(0,oe.AF)(e.PartNumber)),void 0!==e.Size&&(n.Size=(0,oe.NK)(e.Size)),void 0!==e.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(e.ChecksumCRC32)),void 0!==e.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(e.ChecksumCRC32C)),void 0!==e.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(e.ChecksumSHA1)),void 0!==e.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(e.ChecksumSHA256)),n})(e))),cc=(e,t)=>{const n={BytesScanned:void 0,BytesProcessed:void 0,BytesReturned:void 0};return void 0!==e.BytesScanned&&(n.BytesScanned=(0,oe.NK)(e.BytesScanned)),void 0!==e.BytesProcessed&&(n.BytesProcessed=(0,oe.NK)(e.BytesProcessed)),void 0!==e.BytesReturned&&(n.BytesReturned=(0,oe.NK)(e.BytesReturned)),n},lc=(e,t)=>{const n={ID:void 0,Priority:void 0,Prefix:void 0,Filter:void 0,Status:void 0,SourceSelectionCriteria:void 0,ExistingObjectReplication:void 0,Destination:void 0,DeleteMarkerReplication:void 0};return void 0!==e.ID&&(n.ID=(0,oe.pY)(e.ID)),void 0!==e.Priority&&(n.Priority=(0,oe.AF)(e.Priority)),void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Filter||void 0!==e.Filter&&(n.Filter=dc((0,oe.$I)(e.Filter),t)),void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),void 0!==e.SourceSelectionCriteria&&(n.SourceSelectionCriteria=vc(e.SourceSelectionCriteria,t)),void 0!==e.ExistingObjectReplication&&(n.ExistingObjectReplication=((e,t)=>{const n={Status:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),n})(e.ExistingObjectReplication)),void 0!==e.Destination&&(n.Destination=((e,t)=>{const n={Bucket:void 0,Account:void 0,StorageClass:void 0,AccessControlTranslation:void 0,EncryptionConfiguration:void 0,ReplicationTime:void 0,Metrics:void 0};return void 0!==e.Bucket&&(n.Bucket=(0,oe.pY)(e.Bucket)),void 0!==e.Account&&(n.Account=(0,oe.pY)(e.Account)),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),void 0!==e.AccessControlTranslation&&(n.AccessControlTranslation=((e,t)=>{const n={Owner:void 0};return void 0!==e.Owner&&(n.Owner=(0,oe.pY)(e.Owner)),n})(e.AccessControlTranslation)),void 0!==e.EncryptionConfiguration&&(n.EncryptionConfiguration=ks(e.EncryptionConfiguration,t)),void 0!==e.ReplicationTime&&(n.ReplicationTime=pc(e.ReplicationTime,t)),void 0!==e.Metrics&&(n.Metrics=Xs(e.Metrics,t)),n})(e.Destination,t)),void 0!==e.DeleteMarkerReplication&&(n.DeleteMarkerReplication=((e,t)=>{const n={Status:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),n})(e.DeleteMarkerReplication)),n},uc=(e,t)=>{const n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),""===e.Tag?n.Tags=[]:void 0!==e.Tag&&(n.Tags=Pc((0,oe.L)(e.Tag),t)),n},dc=(e,t)=>void 0!==e.Prefix?{Prefix:(0,oe.pY)(e.Prefix)}:void 0!==e.Tag?{Tag:Cc(e.Tag,t)}:void 0!==e.And?{And:uc(e.And,t)}:{$unknown:Object.entries(e)[0]},hc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>lc(e,t))),pc=(e,t)=>{const n={Status:void 0,Time:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),void 0!==e.Time&&(n.Time=mc(e.Time,t)),n},mc=(e,t)=>{const n={Minutes:void 0};return void 0!==e.Minutes&&(n.Minutes=(0,oe.AF)(e.Minutes)),n},fc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Condition:void 0,Redirect:void 0};return void 0!==e.Condition&&(n.Condition=((e,t)=>{const n={HttpErrorCodeReturnedEquals:void 0,KeyPrefixEquals:void 0};return void 0!==e.HttpErrorCodeReturnedEquals&&(n.HttpErrorCodeReturnedEquals=(0,oe.pY)(e.HttpErrorCodeReturnedEquals)),void 0!==e.KeyPrefixEquals&&(n.KeyPrefixEquals=(0,oe.pY)(e.KeyPrefixEquals)),n})(e.Condition)),void 0!==e.Redirect&&(n.Redirect=((e,t)=>{const n={HostName:void 0,HttpRedirectCode:void 0,Protocol:void 0,ReplaceKeyPrefixWith:void 0,ReplaceKeyWith:void 0};return void 0!==e.HostName&&(n.HostName=(0,oe.pY)(e.HostName)),void 0!==e.HttpRedirectCode&&(n.HttpRedirectCode=(0,oe.pY)(e.HttpRedirectCode)),void 0!==e.Protocol&&(n.Protocol=(0,oe.pY)(e.Protocol)),void 0!==e.ReplaceKeyPrefixWith&&(n.ReplaceKeyPrefixWith=(0,oe.pY)(e.ReplaceKeyPrefixWith)),void 0!==e.ReplaceKeyWith&&(n.ReplaceKeyWith=(0,oe.pY)(e.ReplaceKeyWith)),n})(e.Redirect)),n})(e))),gc=(e,t)=>{const n={FilterRules:void 0};return""===e.FilterRule?n.FilterRules=[]:void 0!==e.FilterRule&&(n.FilterRules=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Name:void 0,Value:void 0};return void 0!==e.Name&&(n.Name=(0,oe.pY)(e.Name)),void 0!==e.Value&&(n.Value=(0,oe.pY)(e.Value)),n})(e))))((0,oe.L)(e.FilterRule))),n},yc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={ApplyServerSideEncryptionByDefault:void 0,BucketKeyEnabled:void 0};return void 0!==e.ApplyServerSideEncryptionByDefault&&(n.ApplyServerSideEncryptionByDefault=((e,t)=>{const n={SSEAlgorithm:void 0,KMSMasterKeyID:void 0};return void 0!==e.SSEAlgorithm&&(n.SSEAlgorithm=(0,oe.pY)(e.SSEAlgorithm)),void 0!==e.KMSMasterKeyID&&(n.KMSMasterKeyID=(0,oe.pY)(e.KMSMasterKeyID)),n})(e.ApplyServerSideEncryptionByDefault)),void 0!==e.BucketKeyEnabled&&(n.BucketKeyEnabled=(0,oe.gx)(e.BucketKeyEnabled)),n})(e))),vc=(e,t)=>{const n={SseKmsEncryptedObjects:void 0,ReplicaModifications:void 0};return void 0!==e.SseKmsEncryptedObjects&&(n.SseKmsEncryptedObjects=xc(e.SseKmsEncryptedObjects,t)),void 0!==e.ReplicaModifications&&(n.ReplicaModifications=((e,t)=>{const n={Status:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),n})(e.ReplicaModifications)),n},bc=(e,t)=>{const n={KeyId:void 0};return void 0!==e.KeyId&&(n.KeyId=(0,oe.pY)(e.KeyId)),n},xc=(e,t)=>{const n={Status:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),n},wc=(e,t)=>({}),Sc=(e,t)=>{const n={BytesScanned:void 0,BytesProcessed:void 0,BytesReturned:void 0};return void 0!==e.BytesScanned&&(n.BytesScanned=(0,oe.NK)(e.BytesScanned)),void 0!==e.BytesProcessed&&(n.BytesProcessed=(0,oe.NK)(e.BytesProcessed)),void 0!==e.BytesReturned&&(n.BytesReturned=(0,oe.NK)(e.BytesReturned)),n},Ec=(e,t)=>{const n={DataExport:void 0};return void 0!==e.DataExport&&(n.DataExport=_c(e.DataExport,t)),n},_c=(e,t)=>{const n={OutputSchemaVersion:void 0,Destination:void 0};return void 0!==e.OutputSchemaVersion&&(n.OutputSchemaVersion=(0,oe.pY)(e.OutputSchemaVersion)),void 0!==e.Destination&&(n.Destination=((e,t)=>{const n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=((e,t)=>{const n={Format:void 0,BucketAccountId:void 0,Bucket:void 0,Prefix:void 0};return void 0!==e.Format&&(n.Format=(0,oe.pY)(e.Format)),void 0!==e.BucketAccountId&&(n.BucketAccountId=(0,oe.pY)(e.BucketAccountId)),void 0!==e.Bucket&&(n.Bucket=(0,oe.pY)(e.Bucket)),void 0!==e.Prefix&&(n.Prefix=(0,oe.pY)(e.Prefix)),n})(e.S3BucketDestination)),n})(e.Destination)),n},Cc=(e,t)=>{const n={Key:void 0,Value:void 0};return void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.Value&&(n.Value=(0,oe.pY)(e.Value)),n},Pc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>Cc(e,t))),Mc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=Ds(e.Grantee)),void 0!==e.Permission&&(n.Permission=(0,oe.pY)(e.Permission)),n})(e))),Tc=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Days:void 0,AccessTier:void 0};return void 0!==e.Days&&(n.Days=(0,oe.AF)(e.Days)),void 0!==e.AccessTier&&(n.AccessTier=(0,oe.pY)(e.AccessTier)),n})(e))),Ac=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Date:void 0,Days:void 0,StorageClass:void 0};return void 0!==e.Date&&(n.Date=(0,oe.CE)((0,oe.aH)(e.Date))),void 0!==e.Days&&(n.Days=(0,oe.AF)(e.Days)),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),n})(e))),Ic=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Rc=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),kc=(e,t)=>Rc(e,t).then((e=>t.utf8Encoder(e))),Lc=e=>!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),Nc=(e,t)=>kc(e,t).then((e=>{if(e.length){const t=new Jr.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});t.addEntity("#xD","\r"),t.addEntity("#10","\n");const n=t.parse(e),i="#text",r=Object.keys(n)[0],o=n[r];return o[i]&&(o[r]=o[i],delete o[i]),(0,oe.sT)(o)}return{}})),Bc=async(e,t)=>{const n=await Nc(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},Dc=(e,t)=>void 0!==t?.Code?t.Code:404==e.statusCode?"NotFound":void 0;class Oc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Oc.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:ye,outputFilterSensitiveLog:ge},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"AbortMultipartUpload"],uploadId:[,(0,oe.CE)(e.UploadId,"UploadId")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await qo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}const Fc={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},zc=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Uc={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Hc=e=>({applyToStack:t=>{t.addRelativeTo((e=>t=>async n=>{const i=await t(n),{response:r}=i;if(!Hr.Zn.isInstance(r))return i;const{statusCode:o,body:a}=r;if(o<200||o>=300)return i;const s=await zc(a,e),c=await(l=s,u=e,zc(l,u).then((e=>u.utf8Encoder(e))));var l,u;if(0===s.length){const e=new Error("S3 aborted request");throw e.name="InternalError",e}return c&&c.match("<Error>")&&(r.statusCode=400),r.body=s,i})(e),Uc)}}),jc={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Gc={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Vc=e=>({applyToStack:t=>{var n;t.add((n=e,e=>async t=>{let i={...t.input};const r=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const e of r){const t=i[e.target];if(t){const r=ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):"string"==typeof t?n.utf8Decoder(t):new Uint8Array(t),o=n.base64Encoder(r),a=new n.md5;a.update(r),i={...i,[e.target]:o,[e.hash]:n.base64Encoder(await a.digest())}}}return e({...t,input:i})}),Gc)}});class Wc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Wc.getEndpointParameterInstructions())),this.middlewareStack.use(Hc(t)),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Me,outputFilterSensitiveLog:_e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"CompleteMultipartUpload"],uploadId:[,(0,oe.CE)(e.UploadId,"UploadId")]});let l,u;return void 0!==e.MultipartUpload&&(l=sa(e.MultipartUpload,t)),void 0!==e.MultipartUpload&&(u=sa(e.MultipartUpload,t),u=u.withName("CompleteMultipartUpload"),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"POST",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),Expiration:[,e.headers["x-amz-expiration"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Bucket&&(n.Bucket=(0,oe.pY)(i.Bucket)),void 0!==i.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(i.ChecksumCRC32)),void 0!==i.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(i.ChecksumCRC32C)),void 0!==i.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(i.ChecksumSHA1)),void 0!==i.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(i.ChecksumSHA256)),void 0!==i.ETag&&(n.ETag=(0,oe.pY)(i.ETag)),void 0!==i.Key&&(n.Key=(0,oe.pY)(i.Key)),void 0!==i.Location&&(n.Location=(0,oe.pY)(i.Location)),n})(e,t)}}class qc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,qc.getEndpointParameterInstructions())),this.middlewareStack.use(Hc(t)),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:Ie,outputFilterSensitiveLog:Ae},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-acl":e.ACL,"cache-control":e.CacheControl,"x-amz-checksum-algorithm":e.ChecksumAlgorithm,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-type":e.ContentType,"x-amz-copy-source":e.CopySource,"x-amz-copy-source-if-match":e.CopySourceIfMatch,"x-amz-copy-source-if-modified-since":[()=>Lc(e.CopySourceIfModifiedSince),()=>(0,oe._w)(e.CopySourceIfModifiedSince).toString()],"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch,"x-amz-copy-source-if-unmodified-since":[()=>Lc(e.CopySourceIfUnmodifiedSince),()=>(0,oe._w)(e.CopySourceIfUnmodifiedSince).toString()],expires:[()=>Lc(e.Expires),()=>(0,oe._w)(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-metadata-directive":e.MetadataDirective,"x-amz-tagging-directive":e.TaggingDirective,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>Lc(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm,"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey,"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>Lc(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner,...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,n)=>(t[`x-amz-meta-${n.toLowerCase()}`]=e.Metadata[n],t)),{})});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"CopyObject"]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await $o(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),Expiration:[,e.headers["x-amz-expiration"]],CopySourceVersionId:[,e.headers["x-amz-copy-source-version-id"]],VersionId:[,e.headers["x-amz-version-id"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.Wh)(await Nc(e.body,t));return n.CopyObjectResult=((e,t)=>{const n={ETag:void 0,LastModified:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0};return void 0!==e.ETag&&(n.ETag=(0,oe.pY)(e.ETag)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),void 0!==e.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(e.ChecksumCRC32)),void 0!==e.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(e.ChecksumCRC32C)),void 0!==e.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(e.ChecksumSHA1)),void 0!==e.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(e.ChecksumSHA256)),n})(i),n})(e,t)}}const Yc={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0};class Kc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{DisableAccessPoints:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){var i;this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Kc.getEndpointParameterInstructions())),this.middlewareStack.use((i=t,{applyToStack:e=>{var t;e.add((t=i,e=>async n=>{const{CreateBucketConfiguration:i}=n.input,r=await t.region();return i&&i.LocationConstraint||(n={...n,input:{...n.input,CreateBucketConfiguration:"us-east-1"===r?void 0:{LocationConstraint:r}}}),e(n)}),Yc)}}));const r=e.concat(this.middlewareStack),{logger:o}=t,a={logger:o,clientName:"S3Client",commandName:"CreateBucketCommand",inputFilterSensitiveLog:Le,outputFilterSensitiveLog:Re},{requestHandler:s}=t;return r.resolve((e=>s.handle(e.request,n||{})),a)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-acl":e.ACL,"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write":e.GrantWrite,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-bucket-object-lock-enabled":[()=>Lc(e.ObjectLockEnabledForBucket),()=>e.ObjectLockEnabledForBucket.toString()],"x-amz-object-ownership":e.ObjectOwnership});let s,c,l=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;return l=(0,oe.Is)(l,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),void 0!==e.CreateBucketConfiguration&&(s=da(e.CreateBucketConfiguration)),void 0!==e.CreateBucketConfiguration&&(c=da(e.CreateBucketConfiguration),s='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=c.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:l,body:s})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Ho(n,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await jo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),Location:[,e.headers.location]});return await Rc(e.body,t),n})(e,t)}}class $c extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,$c.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Be,outputFilterSensitiveLog:Ne},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-type":e.ContentType,expires:[()=>Lc(e.Expires),()=>(0,oe._w)(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>Lc(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>Lc(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-checksum-algorithm":e.ChecksumAlgorithm,...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,n)=>(t[`x-amz-meta-${n.toLowerCase()}`]=e.Metadata[n],t)),{})});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({uploads:[,""],"x-id":[,"CreateMultipartUpload"]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"POST",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),AbortDate:[()=>void 0!==e.headers["x-amz-abort-date"],()=>(0,oe.CE)((0,oe.oT)(e.headers["x-amz-abort-date"]))],AbortRuleId:[,e.headers["x-amz-abort-rule-id"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]],ChecksumAlgorithm:[,e.headers["x-amz-checksum-algorithm"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Bucket&&(n.Bucket=(0,oe.pY)(i.Bucket)),void 0!==i.Key&&(n.Key=(0,oe.pY)(i.Key)),void 0!==i.UploadId&&(n.UploadId=(0,oe.pY)(i.UploadId)),n})(e,t)}}class Xc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Xc.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Oe,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({analytics:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Zc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Zc.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketCommand",inputFilterSensitiveLog:De,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;return s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Jc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Jc.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketCorsCommand",inputFilterSensitiveLog:Fe,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({cors:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Qc extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Qc.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketEncryptionCommand",inputFilterSensitiveLog:ze,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({encryption:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class el extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,el.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Ue,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint();let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;a=(0,oe.Is)(a,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const s=Uo({"intelligent-tiering":[,""],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:{},path:a,query:s,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class tl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,tl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketInventoryConfigurationCommand",inputFilterSensitiveLog:He,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({inventory:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class nl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,nl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketLifecycleCommand",inputFilterSensitiveLog:je,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({lifecycle:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class il extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,il.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketMetricsConfigurationCommand",inputFilterSensitiveLog:Ge,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({metrics:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class rl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,rl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketOwnershipControlsCommand",inputFilterSensitiveLog:Ve,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({ownershipControls:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class ol extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ol.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketPolicyCommand",inputFilterSensitiveLog:We,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({policy:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class al extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,al.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketReplicationCommand",inputFilterSensitiveLog:qe,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({replication:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class sl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,sl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketTaggingCommand",inputFilterSensitiveLog:Ye,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({tagging:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class cl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,cl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteBucketWebsiteCommand",inputFilterSensitiveLog:Ke,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({website:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class ll extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ll.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Xe,outputFilterSensitiveLog:$e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-mfa":e.MFA,"x-amz-request-payer":e.RequestPayer,"x-amz-bypass-governance-retention":[()=>Lc(e.BypassGovernanceRetention),()=>e.BypassGovernanceRetention.toString()],"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"DeleteObject"],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),DeleteMarker:[()=>void 0!==e.headers["x-amz-delete-marker"],()=>(0,oe.gx)(e.headers["x-amz-delete-marker"])],VersionId:[,e.headers["x-amz-version-id"]],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}var ul,dl;!function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"}(ul||(ul={})),function(e){e.HEADER="header",e.TRAILER="trailer"}(dl||(dl={}));const hl=[ul.CRC32,ul.CRC32C,ul.SHA1,ul.SHA256],pl=[ul.CRC32,ul.CRC32C,ul.SHA1,ul.SHA256],ml=e=>e===ul.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var fl=n(323);const gl=e=>void 0!==e&&"string"!=typeof e&&!ArrayBuffer.isView(e)&&!(0,fl.e)(e);var yl=n(4079),vl=n(9040);const bl=(e,t)=>({[ul.MD5]:t.md5,[ul.CRC32]:yl.AwsCrc32,[ul.CRC32C]:vl.AwsCrc32c,[ul.SHA1]:t.sha1,[ul.SHA256]:t.sha256}[e]);var xl=n(916);const wl=(e,t)=>{const n=new e;return n.update((0,xl._)(t||"")),n.digest()},Sl=async(e,{streamHasher:t,checksumAlgorithmFn:n,base64Encoder:i})=>{const r=gl(e)?t(n,e):wl(n,e);return i(await r)},El=(e,t)=>n=>async i=>{if(!Hr.aW.isInstance(i.request))return n(i);const{request:r}=i,{body:o,headers:a}=r,{base64Encoder:s,streamHasher:c}=e,{input:l,requestChecksumRequired:u,requestAlgorithmMember:d}=t,h=((e,{requestChecksumRequired:t,requestAlgorithmMember:n})=>{if(!n||!e[n])return t?ul.MD5:void 0;const i=e[n];if(!hl.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${hl}.`);return i})(l,{requestChecksumRequired:u,requestAlgorithmMember:d});let p=o,m=a;if(h){const t=ml(h),n=bl(h,e);if(gl(o)){const{getAwsChunkedEncodingStream:i,bodyLengthChecker:r}=e;p=i(o,{base64Encoder:s,bodyLengthChecker:r,checksumLocationName:t,checksumAlgorithmFn:n,streamHasher:c}),m={...a,"content-encoding":a["content-encoding"]?`${a["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":a["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":t},delete m["content-length"]}else if(!((e,t)=>{const n=e.toLowerCase();for(const e of Object.keys(t))if(n===e.toLowerCase())return!0;return!1})(t,a)){const e=await wl(n,o);m={...a,[t]:s(e)}}}const f=await n({...i,request:{...r,headers:m,body:p}}),{requestValidationModeMember:g,responseAlgorithms:y}=t;return g&&"ENABLED"===l[g]&&(async(e,{config:t,responseAlgorithms:n})=>{const i=((e=[])=>{const t=[];for(const n of pl)e.includes(n)&&hl.includes(n)&&t.push(n);return t})(n),{body:r,headers:o}=e;for(const e of i){const n=ml(e),i=o[n];if(i){const o=bl(e,t),{streamHasher:a,base64Encoder:s}=t,c=await Sl(r,{streamHasher:a,checksumAlgorithmFn:o,base64Encoder:s});if(c===i)break;throw new Error(`Checksum mismatch: expected "${c}" but received "${i}" in response header "${n}".`)}}})(f.response,{config:e,responseAlgorithms:y}),f},_l={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Cl=(e,t)=>({applyToStack:n=>{n.add(El(e,t),_l)}});class Pl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Pl.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteObjectsCommand",inputFilterSensitiveLog:nt,outputFilterSensitiveLog:Qe},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-mfa":e.MFA,"x-amz-request-payer":e.RequestPayer,"x-amz-bypass-governance-retention":[()=>Lc(e.BypassGovernanceRetention),()=>e.BypassGovernanceRetention.toString()],"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({delete:[,""],"x-id":[,"DeleteObjects"]});let l,u;return void 0!==e.Delete&&(l=ha(e.Delete,t)),void 0!==e.Delete&&(u=ha(e.Delete,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"POST",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.Deleted?n.Deleted=[]:void 0!==i.Deleted&&(n.Deleted=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Key:void 0,VersionId:void 0,DeleteMarker:void 0,DeleteMarkerVersionId:void 0};return void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.VersionId&&(n.VersionId=(0,oe.pY)(e.VersionId)),void 0!==e.DeleteMarker&&(n.DeleteMarker=(0,oe.gx)(e.DeleteMarker)),void 0!==e.DeleteMarkerVersionId&&(n.DeleteMarkerVersionId=(0,oe.pY)(e.DeleteMarkerVersionId)),n})(e))))((0,oe.L)(i.Deleted))),""===i.Error?n.Errors=[]:void 0!==i.Error&&(n.Errors=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Key:void 0,VersionId:void 0,Code:void 0,Message:void 0};return void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.VersionId&&(n.VersionId=(0,oe.pY)(e.VersionId)),void 0!==e.Code&&(n.Code=(0,oe.pY)(e.Code)),void 0!==e.Message&&(n.Message=(0,oe.pY)(e.Message)),n})(e))))((0,oe.L)(i.Error))),n})(e,t)}}class Ml extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ml.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeleteObjectTaggingCommand",inputFilterSensitiveLog:rt,outputFilterSensitiveLog:it},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({tagging:[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),VersionId:[,e.headers["x-amz-version-id"]]});return await Rc(e.body,t),n})(e,t)}}class Tl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Tl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"DeletePublicAccessBlockCommand",inputFilterSensitiveLog:ot,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({publicAccessBlock:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"DELETE",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Al extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Al.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:st,outputFilterSensitiveLog:at},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({accelerate:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Status&&(n.Status=(0,oe.pY)(i.Status)),n})(e,t)}}class Il extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Il.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketAclCommand",inputFilterSensitiveLog:lt,outputFilterSensitiveLog:ct},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({acl:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.AccessControlList?n.Grants=[]:void 0!==i.AccessControlList&&void 0!==i.AccessControlList.Grant&&(n.Grants=Os((0,oe.L)(i.AccessControlList.Grant))),void 0!==i.Owner&&(n.Owner=oc(i.Owner,t)),n})(e,t)}}class Rl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Rl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:bt,outputFilterSensitiveLog:vt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({analytics:[,""],"x-id":[,"GetBucketAnalyticsConfiguration"],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.AnalyticsConfiguration=Ps(i,t),n})(e,t)}}class kl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,kl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketCorsCommand",inputFilterSensitiveLog:St,outputFilterSensitiveLog:wt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({cors:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.CORSRule?n.CORSRules=[]:void 0!==i.CORSRule&&(n.CORSRules=Rs((0,oe.L)(i.CORSRule),t)),n})(e,t)}}class Ll extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ll.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketEncryptionCommand",inputFilterSensitiveLog:Mt,outputFilterSensitiveLog:Pt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({encryption:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.ServerSideEncryptionConfiguration=((e,t)=>{const n={Rules:void 0};return""===e.Rule?n.Rules=[]:void 0!==e.Rule&&(n.Rules=yc((0,oe.L)(e.Rule),t)),n})(i,t),n})(e,t)}}class Nl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Nl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Lt,outputFilterSensitiveLog:kt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint();let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;a=(0,oe.Is)(a,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const s=Uo({"intelligent-tiering":[,""],"x-id":[,"GetBucketIntelligentTieringConfiguration"],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:{},path:a,query:s,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.IntelligentTieringConfiguration=zs(i,t),n})(e,t)}}class Bl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Bl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketInventoryConfigurationCommand",inputFilterSensitiveLog:Gt,outputFilterSensitiveLog:jt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({inventory:[,""],"x-id":[,"GetBucketInventoryConfiguration"],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.InventoryConfiguration=Hs(i,t),n})(e,t)}}class Dl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Dl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:Jt,outputFilterSensitiveLog:Zt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({lifecycle:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.Rule?n.Rules=[]:void 0!==i.Rule&&(n.Rules=$s((0,oe.L)(i.Rule),t)),n})(e,t)}}class Ol extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ol.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketLocationCommand",inputFilterSensitiveLog:en,outputFilterSensitiveLog:Qt},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({location:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.LocationConstraint&&(n.LocationConstraint=(0,oe.pY)(i.LocationConstraint)),n})(e,t)}}class Fl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Fl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketLoggingCommand",inputFilterSensitiveLog:on,outputFilterSensitiveLog:rn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({logging:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.LoggingEnabled&&(n.LoggingEnabled=((e,t)=>{const n={TargetBucket:void 0,TargetGrants:void 0,TargetPrefix:void 0};return void 0!==e.TargetBucket&&(n.TargetBucket=(0,oe.pY)(e.TargetBucket)),""===e.TargetGrants?n.TargetGrants=[]:void 0!==e.TargetGrants&&void 0!==e.TargetGrants.Grant&&(n.TargetGrants=Mc((0,oe.L)(e.TargetGrants.Grant),t)),void 0!==e.TargetPrefix&&(n.TargetPrefix=(0,oe.pY)(e.TargetPrefix)),n})(i.LoggingEnabled,t)),n})(e,t)}}class zl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,zl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketMetricsConfigurationCommand",inputFilterSensitiveLog:un,outputFilterSensitiveLog:ln},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({metrics:[,""],"x-id":[,"GetBucketMetricsConfiguration"],id:[,(0,oe.CE)(e.Id,"Id")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.MetricsConfiguration=Js(i,t),n})(e,t)}}class Ul extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ul.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketNotificationConfigurationCommand",inputFilterSensitiveLog:dn,outputFilterSensitiveLog:bn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({notification:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.EventBridgeConfiguration&&(n.EventBridgeConfiguration=(i.EventBridgeConfiguration,{})),""===i.CloudFunctionConfiguration?n.LambdaFunctionConfigurations=[]:void 0!==i.CloudFunctionConfiguration&&(n.LambdaFunctionConfigurations=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Id:void 0,LambdaFunctionArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),void 0!==e.CloudFunction&&(n.LambdaFunctionArn=(0,oe.pY)(e.CloudFunction)),""===e.Event?n.Events=[]:void 0!==e.Event&&(n.Events=Ns((0,oe.L)(e.Event))),void 0!==e.Filter&&(n.Filter=nc(e.Filter,t)),n})(e,t))))((0,oe.L)(i.CloudFunctionConfiguration),t)),""===i.QueueConfiguration?n.QueueConfigurations=[]:void 0!==i.QueueConfiguration&&(n.QueueConfigurations=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Id:void 0,QueueArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),void 0!==e.Queue&&(n.QueueArn=(0,oe.pY)(e.Queue)),""===e.Event?n.Events=[]:void 0!==e.Event&&(n.Events=Ns((0,oe.L)(e.Event))),void 0!==e.Filter&&(n.Filter=nc(e.Filter,t)),n})(e,t))))((0,oe.L)(i.QueueConfiguration),t)),""===i.TopicConfiguration?n.TopicConfigurations=[]:void 0!==i.TopicConfiguration&&(n.TopicConfigurations=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Id:void 0,TopicArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=(0,oe.pY)(e.Id)),void 0!==e.Topic&&(n.TopicArn=(0,oe.pY)(e.Topic)),""===e.Event?n.Events=[]:void 0!==e.Event&&(n.Events=Ns((0,oe.L)(e.Event))),void 0!==e.Filter&&(n.Filter=nc(e.Filter,t)),n})(e,t))))((0,oe.L)(i.TopicConfiguration),t)),n})(e,t)}}class Hl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Hl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketOwnershipControlsCommand",inputFilterSensitiveLog:En,outputFilterSensitiveLog:Sn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({ownershipControls:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.OwnershipControls=((e,t)=>{const n={Rules:void 0};return""===e.Rule?n.Rules=[]:void 0!==e.Rule&&(n.Rules=ac((0,oe.L)(e.Rule),t)),n})(i,t),n})(e,t)}}class jl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,jl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketPolicyCommand",inputFilterSensitiveLog:Cn,outputFilterSensitiveLog:_n},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({policy:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=await kc(e.body,t);return n.Policy=(0,oe.pY)(i),n})(e,t)}}class Gl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Gl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketPolicyStatusCommand",inputFilterSensitiveLog:Tn,outputFilterSensitiveLog:Mn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({policyStatus:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.PolicyStatus=((e,t)=>{const n={IsPublic:void 0};return void 0!==e.IsPublic&&(n.IsPublic=(0,oe.gx)(e.IsPublic)),n})(i),n})(e,t)}}class Vl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Vl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketReplicationCommand",inputFilterSensitiveLog:Vn,outputFilterSensitiveLog:Gn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({replication:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.ReplicationConfiguration=((e,t)=>{const n={Role:void 0,Rules:void 0};return void 0!==e.Role&&(n.Role=(0,oe.pY)(e.Role)),""===e.Rule?n.Rules=[]:void 0!==e.Rule&&(n.Rules=hc((0,oe.L)(e.Rule),t)),n})(i,t),n})(e,t)}}class Wl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Wl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketRequestPaymentCommand",inputFilterSensitiveLog:qn,outputFilterSensitiveLog:Wn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({requestPayment:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Payer&&(n.Payer=(0,oe.pY)(i.Payer)),n})(e,t)}}class ql extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ql.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketTaggingCommand",inputFilterSensitiveLog:Kn,outputFilterSensitiveLog:Yn},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({tagging:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.TagSet?n.TagSet=[]:void 0!==i.TagSet&&void 0!==i.TagSet.Tag&&(n.TagSet=Pc((0,oe.L)(i.TagSet.Tag),t)),n})(e,t)}}class Yl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Yl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketVersioningCommand",inputFilterSensitiveLog:Xn,outputFilterSensitiveLog:$n},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({versioning:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.MfaDelete&&(n.MFADelete=(0,oe.pY)(i.MfaDelete)),void 0!==i.Status&&(n.Status=(0,oe.pY)(i.Status)),n})(e,t)}}class Kl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Kl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetBucketWebsiteCommand",inputFilterSensitiveLog:ri,outputFilterSensitiveLog:ii},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({website:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.ErrorDocument&&(n.ErrorDocument=((e,t)=>{const n={Key:void 0};return void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),n})(i.ErrorDocument)),void 0!==i.IndexDocument&&(n.IndexDocument=((e,t)=>{const n={Suffix:void 0};return void 0!==e.Suffix&&(n.Suffix=(0,oe.pY)(e.Suffix)),n})(i.IndexDocument)),void 0!==i.RedirectAllRequestsTo&&(n.RedirectAllRequestsTo=((e,t)=>{const n={HostName:void 0,Protocol:void 0};return void 0!==e.HostName&&(n.HostName=(0,oe.pY)(e.HostName)),void 0!==e.Protocol&&(n.Protocol=(0,oe.pY)(e.Protocol)),n})(i.RedirectAllRequestsTo)),""===i.RoutingRules?n.RoutingRules=[]:void 0!==i.RoutingRules&&void 0!==i.RoutingRules.RoutingRule&&(n.RoutingRules=fc((0,oe.L)(i.RoutingRules.RoutingRule))),n})(e,t)}}class $l extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,$l.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectAclCommand",inputFilterSensitiveLog:ci,outputFilterSensitiveLog:si},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({acl:[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.AccessControlList?n.Grants=[]:void 0!==i.AccessControlList&&void 0!==i.AccessControlList.Grant&&(n.Grants=Os((0,oe.L)(i.AccessControlList.Grant))),void 0!==i.Owner&&(n.Owner=oc(i.Owner,t)),n})(e,t)}}class Xl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Xl.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectAttributesCommand",inputFilterSensitiveLog:pi,outputFilterSensitiveLog:hi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-max-parts":[()=>Lc(e.MaxParts),()=>e.MaxParts.toString()],"x-amz-part-number-marker":e.PartNumberMarker,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-object-attributes":[()=>Lc(e.ObjectAttributes),()=>(e.ObjectAttributes||[]).map((e=>e)).join(", ")]});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({attributes:[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),DeleteMarker:[()=>void 0!==e.headers["x-amz-delete-marker"],()=>(0,oe.gx)(e.headers["x-amz-delete-marker"])],LastModified:[()=>void 0!==e.headers["last-modified"],()=>(0,oe.CE)((0,oe.oT)(e.headers["last-modified"]))],VersionId:[,e.headers["x-amz-version-id"]],RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Checksum&&(n.Checksum=((e,t)=>{const n={ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0};return void 0!==e.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(e.ChecksumCRC32)),void 0!==e.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(e.ChecksumCRC32C)),void 0!==e.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(e.ChecksumSHA1)),void 0!==e.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(e.ChecksumSHA256)),n})(i.Checksum)),void 0!==i.ETag&&(n.ETag=(0,oe.pY)(i.ETag)),void 0!==i.ObjectParts&&(n.ObjectParts=((e,t)=>{const n={TotalPartsCount:void 0,PartNumberMarker:void 0,NextPartNumberMarker:void 0,MaxParts:void 0,IsTruncated:void 0,Parts:void 0};return void 0!==e.PartsCount&&(n.TotalPartsCount=(0,oe.AF)(e.PartsCount)),void 0!==e.PartNumberMarker&&(n.PartNumberMarker=(0,oe.pY)(e.PartNumberMarker)),void 0!==e.NextPartNumberMarker&&(n.NextPartNumberMarker=(0,oe.pY)(e.NextPartNumberMarker)),void 0!==e.MaxParts&&(n.MaxParts=(0,oe.AF)(e.MaxParts)),void 0!==e.IsTruncated&&(n.IsTruncated=(0,oe.gx)(e.IsTruncated)),""===e.Part?n.Parts=[]:void 0!==e.Part&&(n.Parts=sc((0,oe.L)(e.Part),t)),n})(i.ObjectParts,t)),void 0!==i.ObjectSize&&(n.ObjectSize=(0,oe.NK)(i.ObjectSize)),void 0!==i.StorageClass&&(n.StorageClass=(0,oe.pY)(i.StorageClass)),n})(e,t)}}class Zl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Zl.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t)),this.middlewareStack.use(Cl(t,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:ai,outputFilterSensitiveLog:oi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"if-match":e.IfMatch,"if-modified-since":[()=>Lc(e.IfModifiedSince),()=>(0,oe._w)(e.IfModifiedSince).toString()],"if-none-match":e.IfNoneMatch,"if-unmodified-since":[()=>Lc(e.IfUnmodifiedSince),()=>(0,oe._w)(e.IfUnmodifiedSince).toString()],range:e.Range,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-checksum-mode":e.ChecksumMode});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"GetObject"],"response-cache-control":[,e.ResponseCacheControl],"response-content-disposition":[,e.ResponseContentDisposition],"response-content-encoding":[,e.ResponseContentEncoding],"response-content-language":[,e.ResponseContentLanguage],"response-content-type":[,e.ResponseContentType],"response-expires":[()=>void 0!==e.ResponseExpires,()=>(0,oe._w)(e.ResponseExpires).toString()],versionId:[,e.VersionId],partNumber:[()=>void 0!==e.PartNumber,()=>e.PartNumber.toString()]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Go(n,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),DeleteMarker:[()=>void 0!==e.headers["x-amz-delete-marker"],()=>(0,oe.gx)(e.headers["x-amz-delete-marker"])],AcceptRanges:[,e.headers["accept-ranges"]],Expiration:[,e.headers["x-amz-expiration"]],Restore:[,e.headers["x-amz-restore"]],LastModified:[()=>void 0!==e.headers["last-modified"],()=>(0,oe.CE)((0,oe.oT)(e.headers["last-modified"]))],ContentLength:[()=>void 0!==e.headers["content-length"],()=>(0,oe.NK)(e.headers["content-length"])],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>void 0!==e.headers["x-amz-missing-meta"],()=>(0,oe.AF)(e.headers["x-amz-missing-meta"])],VersionId:[,e.headers["x-amz-version-id"]],CacheControl:[,e.headers["cache-control"]],ContentDisposition:[,e.headers["content-disposition"]],ContentEncoding:[,e.headers["content-encoding"]],ContentLanguage:[,e.headers["content-language"]],ContentRange:[,e.headers["content-range"]],ContentType:[,e.headers["content-type"]],Expires:[()=>void 0!==e.headers.expires,()=>(0,oe.CE)((0,oe.oT)(e.headers.expires))],WebsiteRedirectLocation:[,e.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,e.headers["x-amz-storage-class"]],RequestCharged:[,e.headers["x-amz-request-charged"]],ReplicationStatus:[,e.headers["x-amz-replication-status"]],PartsCount:[()=>void 0!==e.headers["x-amz-mp-parts-count"],()=>(0,oe.AF)(e.headers["x-amz-mp-parts-count"])],TagCount:[()=>void 0!==e.headers["x-amz-tagging-count"],()=>(0,oe.AF)(e.headers["x-amz-tagging-count"])],ObjectLockMode:[,e.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>void 0!==e.headers["x-amz-object-lock-retain-until-date"],()=>(0,oe.CE)((0,oe.aH)(e.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,e.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(e.headers).filter((e=>e.startsWith("x-amz-meta-"))).reduce(((t,n)=>(t[n.substring(11)]=e.headers[n],t)),{})]}),i=e.body;return t.sdkStreamMixin(i),n.Body=i,n})(e,t)}}class Jl extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Jl.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectLegalHoldCommand",inputFilterSensitiveLog:gi,outputFilterSensitiveLog:fi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"legal-hold":[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.LegalHold=((e,t)=>{const n={Status:void 0};return void 0!==e.Status&&(n.Status=(0,oe.pY)(e.Status)),n})(i),n})(e,t)}}class Ql extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ql.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectLockConfigurationCommand",inputFilterSensitiveLog:wi,outputFilterSensitiveLog:xi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({"object-lock":[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.ObjectLockConfiguration=((e,t)=>{const n={ObjectLockEnabled:void 0,Rule:void 0};return void 0!==e.ObjectLockEnabled&&(n.ObjectLockEnabled=(0,oe.pY)(e.ObjectLockEnabled)),void 0!==e.Rule&&(n.Rule=rc(e.Rule,t)),n})(i,t),n})(e,t)}}class eu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,eu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectRetentionCommand",inputFilterSensitiveLog:_i,outputFilterSensitiveLog:Ei},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({retention:[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.Retention=((e,t)=>{const n={Mode:void 0,RetainUntilDate:void 0};return void 0!==e.Mode&&(n.Mode=(0,oe.pY)(e.Mode)),void 0!==e.RetainUntilDate&&(n.RetainUntilDate=(0,oe.CE)((0,oe.aH)(e.RetainUntilDate))),n})(i),n})(e,t)}}class tu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,tu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectTaggingCommand",inputFilterSensitiveLog:Pi,outputFilterSensitiveLog:Ci},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-request-payer":e.RequestPayer});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({tagging:[,""],versionId:[,e.VersionId]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),VersionId:[,e.headers["x-amz-version-id"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.TagSet?n.TagSet=[]:void 0!==i.TagSet&&void 0!==i.TagSet.Tag&&(n.TagSet=Pc((0,oe.L)(i.TagSet.Tag),t)),n})(e,t)}}class nu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,nu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetObjectTorrentCommand",inputFilterSensitiveLog:Ti,outputFilterSensitiveLog:Mi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({torrent:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=e.body;return t.sdkStreamMixin(i),n.Body=i,n})(e,t)}}class iu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,iu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"GetPublicAccessBlockCommand",inputFilterSensitiveLog:Ri,outputFilterSensitiveLog:Ii},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({publicAccessBlock:[,""]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.Wh)(await Nc(e.body,t));return n.PublicAccessBlockConfiguration=((e,t)=>{const n={BlockPublicAcls:void 0,IgnorePublicAcls:void 0,BlockPublicPolicy:void 0,RestrictPublicBuckets:void 0};return void 0!==e.BlockPublicAcls&&(n.BlockPublicAcls=(0,oe.gx)(e.BlockPublicAcls)),void 0!==e.IgnorePublicAcls&&(n.IgnorePublicAcls=(0,oe.gx)(e.IgnorePublicAcls)),void 0!==e.BlockPublicPolicy&&(n.BlockPublicPolicy=(0,oe.gx)(e.BlockPublicPolicy)),void 0!==e.RestrictPublicBuckets&&(n.RestrictPublicBuckets=(0,oe.gx)(e.RestrictPublicBuckets)),n})(i),n})(e,t)}}class ru extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ru.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"HeadBucketCommand",inputFilterSensitiveLog:ki,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;return s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),new Hr.aW({protocol:i,hostname:n,port:r,method:"HEAD",headers:a,path:s,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NotFound":case"com.amazonaws.s3#NotFound":throw await Yo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class ou extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ou.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"HeadObjectCommand",inputFilterSensitiveLog:Ni,outputFilterSensitiveLog:Li},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"if-match":e.IfMatch,"if-modified-since":[()=>Lc(e.IfModifiedSince),()=>(0,oe._w)(e.IfModifiedSince).toString()],"if-none-match":e.IfNoneMatch,"if-unmodified-since":[()=>Lc(e.IfUnmodifiedSince),()=>(0,oe._w)(e.IfUnmodifiedSince).toString()],range:e.Range,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-checksum-mode":e.ChecksumMode});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({versionId:[,e.VersionId],partNumber:[()=>void 0!==e.PartNumber,()=>e.PartNumber.toString()]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"HEAD",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NotFound":case"com.amazonaws.s3#NotFound":throw await Yo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),DeleteMarker:[()=>void 0!==e.headers["x-amz-delete-marker"],()=>(0,oe.gx)(e.headers["x-amz-delete-marker"])],AcceptRanges:[,e.headers["accept-ranges"]],Expiration:[,e.headers["x-amz-expiration"]],Restore:[,e.headers["x-amz-restore"]],ArchiveStatus:[,e.headers["x-amz-archive-status"]],LastModified:[()=>void 0!==e.headers["last-modified"],()=>(0,oe.CE)((0,oe.oT)(e.headers["last-modified"]))],ContentLength:[()=>void 0!==e.headers["content-length"],()=>(0,oe.NK)(e.headers["content-length"])],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ETag:[,e.headers.etag],MissingMeta:[()=>void 0!==e.headers["x-amz-missing-meta"],()=>(0,oe.AF)(e.headers["x-amz-missing-meta"])],VersionId:[,e.headers["x-amz-version-id"]],CacheControl:[,e.headers["cache-control"]],ContentDisposition:[,e.headers["content-disposition"]],ContentEncoding:[,e.headers["content-encoding"]],ContentLanguage:[,e.headers["content-language"]],ContentType:[,e.headers["content-type"]],Expires:[()=>void 0!==e.headers.expires,()=>(0,oe.CE)((0,oe.oT)(e.headers.expires))],WebsiteRedirectLocation:[,e.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,e.headers["x-amz-storage-class"]],RequestCharged:[,e.headers["x-amz-request-charged"]],ReplicationStatus:[,e.headers["x-amz-replication-status"]],PartsCount:[()=>void 0!==e.headers["x-amz-mp-parts-count"],()=>(0,oe.AF)(e.headers["x-amz-mp-parts-count"])],ObjectLockMode:[,e.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>void 0!==e.headers["x-amz-object-lock-retain-until-date"],()=>(0,oe.CE)((0,oe.aH)(e.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,e.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(e.headers).filter((e=>e.startsWith("x-amz-meta-"))).reduce(((t,n)=>(t[n.substring(11)]=e.headers[n],t)),{})]});return await Rc(e.body,t),n})(e,t)}}class au extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,au.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListBucketAnalyticsConfigurationsCommand",inputFilterSensitiveLog:Di,outputFilterSensitiveLog:Bi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({analytics:[,""],"x-id":[,"ListBucketAnalyticsConfigurations"],"continuation-token":[,e.ContinuationToken]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.AnalyticsConfiguration?n.AnalyticsConfigurationList=[]:void 0!==i.AnalyticsConfiguration&&(n.AnalyticsConfigurationList=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>Ps(e,t))))((0,oe.L)(i.AnalyticsConfiguration),t)),void 0!==i.ContinuationToken&&(n.ContinuationToken=(0,oe.pY)(i.ContinuationToken)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.NextContinuationToken&&(n.NextContinuationToken=(0,oe.pY)(i.NextContinuationToken)),n})(e,t)}}class su extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,su.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListBucketIntelligentTieringConfigurationsCommand",inputFilterSensitiveLog:Fi,outputFilterSensitiveLog:Oi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint();let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;a=(0,oe.Is)(a,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const s=Uo({"intelligent-tiering":[,""],"x-id":[,"ListBucketIntelligentTieringConfigurations"],"continuation-token":[,e.ContinuationToken]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:{},path:a,query:s,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.ContinuationToken&&(n.ContinuationToken=(0,oe.pY)(i.ContinuationToken)),""===i.IntelligentTieringConfiguration?n.IntelligentTieringConfigurationList=[]:void 0!==i.IntelligentTieringConfiguration&&(n.IntelligentTieringConfigurationList=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>zs(e,t))))((0,oe.L)(i.IntelligentTieringConfiguration),t)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.NextContinuationToken&&(n.NextContinuationToken=(0,oe.pY)(i.NextContinuationToken)),n})(e,t)}}class cu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,cu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListBucketInventoryConfigurationsCommand",inputFilterSensitiveLog:Ui,outputFilterSensitiveLog:zi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({inventory:[,""],"x-id":[,"ListBucketInventoryConfigurations"],"continuation-token":[,e.ContinuationToken]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.ContinuationToken&&(n.ContinuationToken=(0,oe.pY)(i.ContinuationToken)),""===i.InventoryConfiguration?n.InventoryConfigurationList=[]:void 0!==i.InventoryConfiguration&&(n.InventoryConfigurationList=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>Hs(e,t))))((0,oe.L)(i.InventoryConfiguration),t)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.NextContinuationToken&&(n.NextContinuationToken=(0,oe.pY)(i.NextContinuationToken)),n})(e,t)}}class lu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,lu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListBucketMetricsConfigurationsCommand",inputFilterSensitiveLog:ji,outputFilterSensitiveLog:Hi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({metrics:[,""],"x-id":[,"ListBucketMetricsConfigurations"],"continuation-token":[,e.ContinuationToken]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.ContinuationToken&&(n.ContinuationToken=(0,oe.pY)(i.ContinuationToken)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),""===i.MetricsConfiguration?n.MetricsConfigurationList=[]:void 0!==i.MetricsConfiguration&&(n.MetricsConfigurationList=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>Js(e,t))))((0,oe.L)(i.MetricsConfiguration),t)),void 0!==i.NextContinuationToken&&(n.NextContinuationToken=(0,oe.pY)(i.NextContinuationToken)),n})(e,t)}}class uu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,uu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListBucketsCommand",inputFilterSensitiveLog:e=>e,outputFilterSensitiveLog:Vi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;let s;return s="",new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:{"content-type":"application/xml"},path:a,body:""})})(0,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.Buckets?n.Buckets=[]:void 0!==i.Buckets&&void 0!==i.Buckets.Bucket&&(n.Buckets=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Name:void 0,CreationDate:void 0};return void 0!==e.Name&&(n.Name=(0,oe.pY)(e.Name)),void 0!==e.CreationDate&&(n.CreationDate=(0,oe.CE)((0,oe.aH)(e.CreationDate))),n})(e))))((0,oe.L)(i.Buckets.Bucket))),void 0!==i.Owner&&(n.Owner=oc(i.Owner,t)),n})(e,t)}}class du extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,du.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListMultipartUploadsCommand",inputFilterSensitiveLog:$i,outputFilterSensitiveLog:Ki},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({uploads:[,""],delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],"key-marker":[,e.KeyMarker],"max-uploads":[()=>void 0!==e.MaxUploads,()=>e.MaxUploads.toString()],prefix:[,e.Prefix],"upload-id-marker":[,e.UploadIdMarker]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Bucket&&(n.Bucket=(0,oe.pY)(i.Bucket)),""===i.CommonPrefixes?n.CommonPrefixes=[]:void 0!==i.CommonPrefixes&&(n.CommonPrefixes=As((0,oe.L)(i.CommonPrefixes))),void 0!==i.Delimiter&&(n.Delimiter=(0,oe.pY)(i.Delimiter)),void 0!==i.EncodingType&&(n.EncodingType=(0,oe.pY)(i.EncodingType)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.KeyMarker&&(n.KeyMarker=(0,oe.pY)(i.KeyMarker)),void 0!==i.MaxUploads&&(n.MaxUploads=(0,oe.AF)(i.MaxUploads)),void 0!==i.NextKeyMarker&&(n.NextKeyMarker=(0,oe.pY)(i.NextKeyMarker)),void 0!==i.NextUploadIdMarker&&(n.NextUploadIdMarker=(0,oe.pY)(i.NextUploadIdMarker)),void 0!==i.Prefix&&(n.Prefix=(0,oe.pY)(i.Prefix)),void 0!==i.UploadIdMarker&&(n.UploadIdMarker=(0,oe.pY)(i.UploadIdMarker)),""===i.Upload?n.Uploads=[]:void 0!==i.Upload&&(n.Uploads=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={UploadId:void 0,Key:void 0,Initiated:void 0,StorageClass:void 0,Owner:void 0,Initiator:void 0,ChecksumAlgorithm:void 0};return void 0!==e.UploadId&&(n.UploadId=(0,oe.pY)(e.UploadId)),void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.Initiated&&(n.Initiated=(0,oe.CE)((0,oe.aH)(e.Initiated))),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),void 0!==e.Owner&&(n.Owner=oc(e.Owner,t)),void 0!==e.Initiator&&(n.Initiator=Fs(e.Initiator)),void 0!==e.ChecksumAlgorithm&&(n.ChecksumAlgorithm=(0,oe.pY)(e.ChecksumAlgorithm)),n})(e,t))))((0,oe.L)(i.Upload),t)),n})(e,t)}}class hu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,hu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Ji,outputFilterSensitiveLog:Zi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],marker:[,e.Marker],"max-keys":[()=>void 0!==e.MaxKeys,()=>e.MaxKeys.toString()],prefix:[,e.Prefix]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Vo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.CommonPrefixes?n.CommonPrefixes=[]:void 0!==i.CommonPrefixes&&(n.CommonPrefixes=As((0,oe.L)(i.CommonPrefixes))),""===i.Contents?n.Contents=[]:void 0!==i.Contents&&(n.Contents=ic((0,oe.L)(i.Contents),t)),void 0!==i.Delimiter&&(n.Delimiter=(0,oe.pY)(i.Delimiter)),void 0!==i.EncodingType&&(n.EncodingType=(0,oe.pY)(i.EncodingType)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.Marker&&(n.Marker=(0,oe.pY)(i.Marker)),void 0!==i.MaxKeys&&(n.MaxKeys=(0,oe.AF)(i.MaxKeys)),void 0!==i.Name&&(n.Name=(0,oe.pY)(i.Name)),void 0!==i.NextMarker&&(n.NextMarker=(0,oe.pY)(i.NextMarker)),void 0!==i.Prefix&&(n.Prefix=(0,oe.pY)(i.Prefix)),n})(e,t)}}class pu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,pu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:er,outputFilterSensitiveLog:Qi},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({"list-type":[,"2"],delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],"max-keys":[()=>void 0!==e.MaxKeys,()=>e.MaxKeys.toString()],prefix:[,e.Prefix],"continuation-token":[,e.ContinuationToken],"fetch-owner":[()=>void 0!==e.FetchOwner,()=>e.FetchOwner.toString()],"start-after":[,e.StartAfter]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Vo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.CommonPrefixes?n.CommonPrefixes=[]:void 0!==i.CommonPrefixes&&(n.CommonPrefixes=As((0,oe.L)(i.CommonPrefixes))),""===i.Contents?n.Contents=[]:void 0!==i.Contents&&(n.Contents=ic((0,oe.L)(i.Contents),t)),void 0!==i.ContinuationToken&&(n.ContinuationToken=(0,oe.pY)(i.ContinuationToken)),void 0!==i.Delimiter&&(n.Delimiter=(0,oe.pY)(i.Delimiter)),void 0!==i.EncodingType&&(n.EncodingType=(0,oe.pY)(i.EncodingType)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.KeyCount&&(n.KeyCount=(0,oe.AF)(i.KeyCount)),void 0!==i.MaxKeys&&(n.MaxKeys=(0,oe.AF)(i.MaxKeys)),void 0!==i.Name&&(n.Name=(0,oe.pY)(i.Name)),void 0!==i.NextContinuationToken&&(n.NextContinuationToken=(0,oe.pY)(i.NextContinuationToken)),void 0!==i.Prefix&&(n.Prefix=(0,oe.pY)(i.Prefix)),void 0!==i.StartAfter&&(n.StartAfter=(0,oe.pY)(i.StartAfter)),n})(e,t)}}class mu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,mu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListObjectVersionsCommand",inputFilterSensitiveLog:rr,outputFilterSensitiveLog:ir},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({versions:[,""],delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],"key-marker":[,e.KeyMarker],"max-keys":[()=>void 0!==e.MaxKeys,()=>e.MaxKeys.toString()],prefix:[,e.Prefix],"version-id-marker":[,e.VersionIdMarker]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return""===i.CommonPrefixes?n.CommonPrefixes=[]:void 0!==i.CommonPrefixes&&(n.CommonPrefixes=As((0,oe.L)(i.CommonPrefixes))),""===i.DeleteMarker?n.DeleteMarkers=[]:void 0!==i.DeleteMarker&&(n.DeleteMarkers=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={Owner:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0};return void 0!==e.Owner&&(n.Owner=oc(e.Owner,t)),void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.VersionId&&(n.VersionId=(0,oe.pY)(e.VersionId)),void 0!==e.IsLatest&&(n.IsLatest=(0,oe.gx)(e.IsLatest)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),n})(e,t))))((0,oe.L)(i.DeleteMarker),t)),void 0!==i.Delimiter&&(n.Delimiter=(0,oe.pY)(i.Delimiter)),void 0!==i.EncodingType&&(n.EncodingType=(0,oe.pY)(i.EncodingType)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.KeyMarker&&(n.KeyMarker=(0,oe.pY)(i.KeyMarker)),void 0!==i.MaxKeys&&(n.MaxKeys=(0,oe.AF)(i.MaxKeys)),void 0!==i.Name&&(n.Name=(0,oe.pY)(i.Name)),void 0!==i.NextKeyMarker&&(n.NextKeyMarker=(0,oe.pY)(i.NextKeyMarker)),void 0!==i.NextVersionIdMarker&&(n.NextVersionIdMarker=(0,oe.pY)(i.NextVersionIdMarker)),void 0!==i.Prefix&&(n.Prefix=(0,oe.pY)(i.Prefix)),void 0!==i.VersionIdMarker&&(n.VersionIdMarker=(0,oe.pY)(i.VersionIdMarker)),""===i.Version?n.Versions=[]:void 0!==i.Version&&(n.Versions=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={ETag:void 0,ChecksumAlgorithm:void 0,Size:void 0,StorageClass:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0,Owner:void 0};return void 0!==e.ETag&&(n.ETag=(0,oe.pY)(e.ETag)),""===e.ChecksumAlgorithm?n.ChecksumAlgorithm=[]:void 0!==e.ChecksumAlgorithm&&(n.ChecksumAlgorithm=Ts((0,oe.L)(e.ChecksumAlgorithm))),void 0!==e.Size&&(n.Size=(0,oe.NK)(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=(0,oe.pY)(e.StorageClass)),void 0!==e.Key&&(n.Key=(0,oe.pY)(e.Key)),void 0!==e.VersionId&&(n.VersionId=(0,oe.pY)(e.VersionId)),void 0!==e.IsLatest&&(n.IsLatest=(0,oe.gx)(e.IsLatest)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),void 0!==e.Owner&&(n.Owner=oc(e.Owner,t)),n})(e,t))))((0,oe.L)(i.Version),t)),n})(e,t)}}class fu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,fu.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:sr,outputFilterSensitiveLog:ar},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"ListParts"],"max-parts":[()=>void 0!==e.MaxParts,()=>e.MaxParts.toString()],"part-number-marker":[,e.PartNumberMarker],uploadId:[,(0,oe.CE)(e.UploadId,"UploadId")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"GET",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),AbortDate:[()=>void 0!==e.headers["x-amz-abort-date"],()=>(0,oe.CE)((0,oe.oT)(e.headers["x-amz-abort-date"]))],AbortRuleId:[,e.headers["x-amz-abort-rule-id"]],RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.CE)((0,oe.Wh)(await Nc(e.body,t)),"body");return void 0!==i.Bucket&&(n.Bucket=(0,oe.pY)(i.Bucket)),void 0!==i.ChecksumAlgorithm&&(n.ChecksumAlgorithm=(0,oe.pY)(i.ChecksumAlgorithm)),void 0!==i.Initiator&&(n.Initiator=Fs(i.Initiator)),void 0!==i.IsTruncated&&(n.IsTruncated=(0,oe.gx)(i.IsTruncated)),void 0!==i.Key&&(n.Key=(0,oe.pY)(i.Key)),void 0!==i.MaxParts&&(n.MaxParts=(0,oe.AF)(i.MaxParts)),void 0!==i.NextPartNumberMarker&&(n.NextPartNumberMarker=(0,oe.pY)(i.NextPartNumberMarker)),void 0!==i.Owner&&(n.Owner=oc(i.Owner,t)),void 0!==i.PartNumberMarker&&(n.PartNumberMarker=(0,oe.pY)(i.PartNumberMarker)),""===i.Part?n.Parts=[]:void 0!==i.Part&&(n.Parts=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0};return void 0!==e.PartNumber&&(n.PartNumber=(0,oe.AF)(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),void 0!==e.ETag&&(n.ETag=(0,oe.pY)(e.ETag)),void 0!==e.Size&&(n.Size=(0,oe.NK)(e.Size)),void 0!==e.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(e.ChecksumCRC32)),void 0!==e.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(e.ChecksumCRC32C)),void 0!==e.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(e.ChecksumSHA1)),void 0!==e.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(e.ChecksumSHA256)),n})(e))))((0,oe.L)(i.Part))),void 0!==i.StorageClass&&(n.StorageClass=(0,oe.pY)(i.StorageClass)),void 0!==i.UploadId&&(n.UploadId=(0,oe.pY)(i.UploadId)),n})(e,t)}}class gu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,gu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:cr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({accelerate:[,""]});let l,u;return void 0!==e.AccelerateConfiguration&&(l=ta(e.AccelerateConfiguration)),void 0!==e.AccelerateConfiguration&&(u=ta(e.AccelerateConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class yu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,yu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketAclCommand",inputFilterSensitiveLog:lr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-acl":e.ACL,"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write":e.GrantWrite,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({acl:[,""]});let l,u;return void 0!==e.AccessControlPolicy&&(l=na(e.AccessControlPolicy,t)),void 0!==e.AccessControlPolicy&&(u=na(e.AccessControlPolicy,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class vu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,vu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:ur,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({analytics:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});let l,u;return void 0!==e.AnalyticsConfiguration&&(l=ia(e.AnalyticsConfiguration,t)),void 0!==e.AnalyticsConfiguration&&(u=ia(e.AnalyticsConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class bu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,bu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketCorsCommand",inputFilterSensitiveLog:hr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({cors:[,""]});let l,u;return void 0!==e.CORSConfiguration&&(l=la(e.CORSConfiguration,t)),void 0!==e.CORSConfiguration&&(u=la(e.CORSConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class xu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,xu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketEncryptionCommand",inputFilterSensitiveLog:pr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({encryption:[,""]});let l,u;return void 0!==e.ServerSideEncryptionConfiguration&&(l=ss(e.ServerSideEncryptionConfiguration,t)),void 0!==e.ServerSideEncryptionConfiguration&&(u=ss(e.ServerSideEncryptionConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class wu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,wu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:mr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint();let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;a=(0,oe.Is)(a,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const s=Uo({"intelligent-tiering":[,""],id:[,(0,oe.CE)(e.Id,"Id")]});let c,l;return void 0!==e.IntelligentTieringConfiguration&&(c=ba(e.IntelligentTieringConfiguration,t)),void 0!==e.IntelligentTieringConfiguration&&(l=ba(e.IntelligentTieringConfiguration,t),c='<?xml version="1.0" encoding="UTF-8"?>',l.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),c+=l.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:{"content-type":"application/xml"},path:a,query:s,body:c})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Su extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Su.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketInventoryConfigurationCommand",inputFilterSensitiveLog:fr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({inventory:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});let l,u;return void 0!==e.InventoryConfiguration&&(l=wa(e.InventoryConfiguration,t)),void 0!==e.InventoryConfiguration&&(u=wa(e.InventoryConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Eu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Eu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:yr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({lifecycle:[,""]});let l,u;return void 0!==e.LifecycleConfiguration&&(l=oa(e.LifecycleConfiguration,t)),void 0!==e.LifecycleConfiguration&&(u=oa(e.LifecycleConfiguration,t),u=u.withName("LifecycleConfiguration"),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class _u extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,_u.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketLoggingCommand",inputFilterSensitiveLog:br,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({logging:[,""]});let l,u;return void 0!==e.BucketLoggingStatus&&(l=aa(e.BucketLoggingStatus,t)),void 0!==e.BucketLoggingStatus&&(u=aa(e.BucketLoggingStatus,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Cu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Cu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketMetricsConfigurationCommand",inputFilterSensitiveLog:xr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({metrics:[,""],id:[,(0,oe.CE)(e.Id,"Id")]});let l,u;return void 0!==e.MetricsConfiguration&&(l=ka(e.MetricsConfiguration,t)),void 0!==e.MetricsConfiguration&&(u=ka(e.MetricsConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Pu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Pu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketNotificationConfigurationCommand",inputFilterSensitiveLog:wr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-skip-destination-validation":[()=>Lc(e.SkipDestinationValidation),()=>e.SkipDestinationValidation.toString()]});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({notification:[,""]});let l,u;return void 0!==e.NotificationConfiguration&&(l=Da(e.NotificationConfiguration,t)),void 0!==e.NotificationConfiguration&&(u=Da(e.NotificationConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Mu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Mu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketOwnershipControlsCommand",inputFilterSensitiveLog:Sr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({ownershipControls:[,""]});let l,u;return void 0!==e.OwnershipControls&&(l=Wa(e.OwnershipControls,t)),void 0!==e.OwnershipControls&&(u=Wa(e.OwnershipControls,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Tu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Tu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketPolicyCommand",inputFilterSensitiveLog:Er,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"text/plain","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-confirm-remove-self-bucket-access":[()=>Lc(e.ConfirmRemoveSelfBucketAccess),()=>e.ConfirmRemoveSelfBucketAccess.toString()],"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({policy:[,""]});let l,u;return void 0!==e.Policy&&(l=e.Policy),void 0!==e.Policy&&(u=e.Policy,l=u),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Au extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Au.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketReplicationCommand",inputFilterSensitiveLog:_r,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-bucket-object-lock-token":e.Token,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({replication:[,""]});let l,u;return void 0!==e.ReplicationConfiguration&&(l=Xa(e.ReplicationConfiguration,t)),void 0!==e.ReplicationConfiguration&&(u=Xa(e.ReplicationConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Iu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Iu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketRequestPaymentCommand",inputFilterSensitiveLog:Pr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({requestPayment:[,""]});let l,u;return void 0!==e.RequestPaymentConfiguration&&(l=ns(e.RequestPaymentConfiguration)),void 0!==e.RequestPaymentConfiguration&&(u=ns(e.RequestPaymentConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Ru extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ru.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketTaggingCommand",inputFilterSensitiveLog:Tr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({tagging:[,""]});let l,u;return void 0!==e.Tagging&&(l=gs(e.Tagging,t)),void 0!==e.Tagging&&(u=gs(e.Tagging,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class ku extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ku.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketVersioningCommand",inputFilterSensitiveLog:Ir,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-mfa":e.MFA,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({versioning:[,""]});let l,u;return void 0!==e.VersioningConfiguration&&(l=Es(e.VersioningConfiguration)),void 0!==e.VersioningConfiguration&&(u=Es(e.VersioningConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Lu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Lu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutBucketWebsiteCommand",inputFilterSensitiveLog:kr,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({website:[,""]});let l,u;return void 0!==e.WebsiteConfiguration&&(l=_s(e.WebsiteConfiguration)),void 0!==e.WebsiteConfiguration&&(u=_s(e.WebsiteConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Nu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Nu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectAclCommand",inputFilterSensitiveLog:Dr,outputFilterSensitiveLog:Br},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-acl":e.ACL,"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write":e.GrantWrite,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({acl:[,""],versionId:[,e.VersionId]});let l,u;return void 0!==e.AccessControlPolicy&&(l=na(e.AccessControlPolicy,t)),void 0!==e.AccessControlPolicy&&(u=na(e.AccessControlPolicy,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wo(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class Bu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Bu.getEndpointParameterInstructions())),this.middlewareStack.use({applyToStack:e=>{e.add(((e,t)=>async n=>{const{request:i}=n;if(Hr.aW.isInstance(i)&&!i.headers["content-length"]){const e="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";"function"==typeof t?.logger?.warn?t.logger.warn(e):console.warn(e)}return e({...n})}),Fc)}}),this.middlewareStack.use(Vc(t)),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Nr,outputFilterSensitiveLog:Lr},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>Lc(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>Lc(e.Expires),()=>(0,oe._w)(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>Lc(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>Lc(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,n)=>(t[`x-amz-meta-${n.toLowerCase()}`]=e.Metadata[n],t)),{})});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"PutObject"]});let l,u;return void 0!==e.Body&&(l=e.Body),void 0!==e.Body&&(u=e.Body,l=u),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class Du extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Du.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectLegalHoldCommand",inputFilterSensitiveLog:Fr,outputFilterSensitiveLog:Or},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-request-payer":e.RequestPayer,"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"legal-hold":[,""],versionId:[,e.VersionId]});let l,u;return void 0!==e.LegalHold&&(l=Ua(e.LegalHold)),void 0!==e.LegalHold&&(u=Ua(e.LegalHold),u=u.withName("LegalHold"),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class Ou extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Ou.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectLockConfigurationCommand",inputFilterSensitiveLog:Ur,outputFilterSensitiveLog:zr},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-request-payer":e.RequestPayer,"x-amz-bucket-object-lock-token":e.Token,"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({"object-lock":[,""]});let l,u;return void 0!==e.ObjectLockConfiguration&&(l=za(e.ObjectLockConfiguration,t)),void 0!==e.ObjectLockConfiguration&&(u=za(e.ObjectLockConfiguration,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class Fu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Fu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectRetentionCommand",inputFilterSensitiveLog:to,outputFilterSensitiveLog:eo},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-request-payer":e.RequestPayer,"x-amz-bypass-governance-retention":[()=>Lc(e.BypassGovernanceRetention),()=>e.BypassGovernanceRetention.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({retention:[,""],versionId:[,e.VersionId]});let l,u;return void 0!==e.Retention&&(l=Ha(e.Retention)),void 0!==e.Retention&&(u=Ha(e.Retention),u=u.withName("Retention"),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class zu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,zu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:io,outputFilterSensitiveLog:no},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-request-payer":e.RequestPayer});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({tagging:[,""],versionId:[,e.VersionId]});let l,u;return void 0!==e.Tagging&&(l=gs(e.Tagging,t)),void 0!==e.Tagging&&(u=gs(e.Tagging,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),VersionId:[,e.headers["x-amz-version-id"]]});return await Rc(e.body,t),n})(e,t)}}class Uu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Uu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"PutPublicAccessBlockCommand",inputFilterSensitiveLog:ro,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1);const c=Uo({publicAccessBlock:[,""]});let l,u;return void 0!==e.PublicAccessBlockConfiguration&&(l=Ka(e.PublicAccessBlockConfiguration)),void 0!==e.PublicAccessBlockConfiguration&&(u=Ka(e.PublicAccessBlockConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}class Hu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Hu.getEndpointParameterInstructions())),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"RestoreObjectCommand",inputFilterSensitiveLog:wo,outputFilterSensitiveLog:oo},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-request-payer":e.RequestPayer,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({restore:[,""],"x-id":[,"RestoreObject"],versionId:[,e.VersionId]});let l,u;return void 0!==e.RestoreRequest&&(l=is(e.RestoreRequest,t)),void 0!==e.RestoreRequest&&(u=is(e.RestoreRequest,t),l='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=u.toString()),new Hr.aW({protocol:i,hostname:n,port:r,method:"POST",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body);switch(i){case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await Ko(n,t);default:const r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})}})(e,t);const n=Uo({$metadata:Ic(e),RequestCharged:[,e.headers["x-amz-request-charged"]],RestoreOutputPath:[,e.headers["x-amz-restore-output-path"]]});return await Rc(e.body,t),n})(e,t)}}class ju extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,ju.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"SelectObjectContentCommand",inputFilterSensitiveLog:Lo,outputFilterSensitiveLog:Io},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/xml","x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({select:[,""],"select-type":[,"2"],"x-id":[,"SelectObjectContent"]});let l;l='<?xml version="1.0" encoding="UTF-8"?>';const u=new Gr("SelectObjectContentRequest");if(u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),void 0!==e.Expression){const t=Gr.of("Expression",e.Expression).withName("Expression");u.addChildNode(t)}if(void 0!==e.ExpressionType){const t=Gr.of("ExpressionType",e.ExpressionType).withName("ExpressionType");u.addChildNode(t)}if(void 0!==e.InputSerialization){const n=va(e.InputSerialization,t).withName("InputSerialization");u.addChildNode(n)}if(void 0!==e.OutputSerialization){const t=Ga(e.OutputSerialization).withName("OutputSerialization");u.addChildNode(t)}if(void 0!==e.RequestProgress){const t=((e,t)=>{const n=new Gr("RequestProgress");if(null!=e.Enabled){const t=Gr.of("EnableRequestProgress",String(e.Enabled)).withName("Enabled");n.addChildNode(t)}return n})(e.RequestProgress).withName("RequestProgress");u.addChildNode(t)}if(void 0!==e.ScanRange){const t=((e,t)=>{const n=new Gr("ScanRange");if(null!=e.Start){const t=Gr.of("Start",String(e.Start)).withName("Start");n.addChildNode(t)}if(null!=e.End){const t=Gr.of("End",String(e.End)).withName("End");n.addChildNode(t)}return n})(e.ScanRange).withName("ScanRange");u.addChildNode(t)}return l+=u.toString(),new Hr.aW({protocol:i,hostname:n,port:r,method:"POST",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)}),i=e.body;return n.Payload=((e,t)=>t.eventStreamMarshaller.deserialize(e,(async n=>null!=n.Records?{Records:await Qo(n.Records,t)}:null!=n.Stats?{Stats:await ea(n.Stats,t)}:null!=n.Progress?{Progress:await Jo(n.Progress,t)}:null!=n.Cont?{Cont:await Xo(n.Cont,t)}:null!=n.End?{End:await Zo(n.End,t)}:{$unknown:e})))(i,t),n})(e,t)}}class Gu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Gu.getEndpointParameterInstructions())),this.middlewareStack.use(Vc(t)),this.middlewareStack.use(Cl(t,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Bo,outputFilterSensitiveLog:No},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"content-type":"application/octet-stream","content-length":[()=>Lc(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"UploadPart"],partNumber:[null!=(0,oe.CE)(e.PartNumber,"PartNumber"),()=>e.PartNumber.toString()],uploadId:[,(0,oe.CE)(e.UploadId,"UploadId")]});let l,u;return void 0!==e.Body&&(l=e.Body),void 0!==e.Body&&(u=e.Body,l=u),new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Rc(e.body,t),n})(e,t)}}class Vu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Vu.getEndpointParameterInstructions())),this.middlewareStack.use(Hc(t)),this.middlewareStack.use(Vc(t));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"UploadPartCopyCommand",inputFilterSensitiveLog:Fo,outputFilterSensitiveLog:Oo},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-copy-source":e.CopySource,"x-amz-copy-source-if-match":e.CopySourceIfMatch,"x-amz-copy-source-if-modified-since":[()=>Lc(e.CopySourceIfModifiedSince),()=>(0,oe._w)(e.CopySourceIfModifiedSince).toString()],"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch,"x-amz-copy-source-if-unmodified-since":[()=>Lc(e.CopySourceIfUnmodifiedSince),()=>(0,oe._w)(e.CopySourceIfUnmodifiedSince).toString()],"x-amz-copy-source-range":e.CopySourceRange,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm,"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey,"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner});let s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;s=(0,oe.Is)(s,e,"Bucket",(()=>e.Bucket),"{Bucket}",!1),s=(0,oe.Is)(s,e,"Key",(()=>e.Key),"{Key+}",!0);const c=Uo({"x-id":[,"UploadPartCopy"],partNumber:[null!=(0,oe.CE)(e.PartNumber,"PartNumber"),()=>e.PartNumber.toString()],uploadId:[,(0,oe.CE)(e.UploadId,"UploadId")]});return new Hr.aW({protocol:i,hostname:n,port:r,method:"PUT",headers:a,path:s,query:c,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e),CopySourceVersionId:[,e.headers["x-amz-copy-source-version-id"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"],()=>(0,oe.gx)(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]}),i=(0,oe.Wh)(await Nc(e.body,t));return n.CopyPartResult=((e,t)=>{const n={ETag:void 0,LastModified:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0};return void 0!==e.ETag&&(n.ETag=(0,oe.pY)(e.ETag)),void 0!==e.LastModified&&(n.LastModified=(0,oe.CE)((0,oe.aH)(e.LastModified))),void 0!==e.ChecksumCRC32&&(n.ChecksumCRC32=(0,oe.pY)(e.ChecksumCRC32)),void 0!==e.ChecksumCRC32C&&(n.ChecksumCRC32C=(0,oe.pY)(e.ChecksumCRC32C)),void 0!==e.ChecksumSHA1&&(n.ChecksumSHA1=(0,oe.pY)(e.ChecksumSHA1)),void 0!==e.ChecksumSHA256&&(n.ChecksumSHA256=(0,oe.pY)(e.ChecksumSHA256)),n})(i),n})(e,t)}}class Wu extends oe.mY{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseObjectLambdaEndpoint:{type:"staticContextParams",value:!0},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use((0,re.p2)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,ie.a3)(t,Wu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o={logger:r,clientName:"S3Client",commandName:"WriteGetObjectResponseCommand",inputFilterSensitiveLog:zo,outputFilterSensitiveLog:e=>e},{requestHandler:a}=t;return i.resolve((e=>a.handle(e.request,n||{})),o)}serialize(e,t){return(async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),a=Uo({},Lc,{"x-amz-content-sha256":"UNSIGNED-PAYLOAD","content-type":"application/octet-stream","x-amz-request-route":e.RequestRoute,"x-amz-request-token":e.RequestToken,"x-amz-fwd-status":[()=>Lc(e.StatusCode),()=>e.StatusCode.toString()],"x-amz-fwd-error-code":e.ErrorCode,"x-amz-fwd-error-message":e.ErrorMessage,"x-amz-fwd-header-accept-ranges":e.AcceptRanges,"x-amz-fwd-header-cache-control":e.CacheControl,"x-amz-fwd-header-content-disposition":e.ContentDisposition,"x-amz-fwd-header-content-encoding":e.ContentEncoding,"x-amz-fwd-header-content-language":e.ContentLanguage,"content-length":[()=>Lc(e.ContentLength),()=>e.ContentLength.toString()],"x-amz-fwd-header-content-range":e.ContentRange,"x-amz-fwd-header-content-type":e.ContentType,"x-amz-fwd-header-x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-fwd-header-x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-fwd-header-x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-fwd-header-x-amz-checksum-sha256":e.ChecksumSHA256,"x-amz-fwd-header-x-amz-delete-marker":[()=>Lc(e.DeleteMarker),()=>e.DeleteMarker.toString()],"x-amz-fwd-header-etag":e.ETag,"x-amz-fwd-header-expires":[()=>Lc(e.Expires),()=>(0,oe._w)(e.Expires).toString()],"x-amz-fwd-header-x-amz-expiration":e.Expiration,"x-amz-fwd-header-last-modified":[()=>Lc(e.LastModified),()=>(0,oe._w)(e.LastModified).toString()],"x-amz-fwd-header-x-amz-missing-meta":[()=>Lc(e.MissingMeta),()=>e.MissingMeta.toString()],"x-amz-fwd-header-x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-fwd-header-x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-fwd-header-x-amz-object-lock-retain-until-date":[()=>Lc(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-fwd-header-x-amz-mp-parts-count":[()=>Lc(e.PartsCount),()=>e.PartsCount.toString()],"x-amz-fwd-header-x-amz-replication-status":e.ReplicationStatus,"x-amz-fwd-header-x-amz-request-charged":e.RequestCharged,"x-amz-fwd-header-x-amz-restore":e.Restore,"x-amz-fwd-header-x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-fwd-header-x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-fwd-header-x-amz-storage-class":e.StorageClass,"x-amz-fwd-header-x-amz-tagging-count":[()=>Lc(e.TagCount),()=>e.TagCount.toString()],"x-amz-fwd-header-x-amz-version-id":e.VersionId,"x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled":[()=>Lc(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,n)=>(t[`x-amz-meta-${n.toLowerCase()}`]=e.Metadata[n],t)),{})}),s=`${o?.endsWith("/")?o.slice(0,-1):o||""}/WriteGetObjectResponse`,c=Uo({"x-id":[,"WriteGetObjectResponse"]});let l,u;void 0!==e.Body&&(l=e.Body),void 0!==e.Body&&(u=e.Body,l=u);let{hostname:d}=await t.endpoint();if(!0!==t.disableHostPrefix){if(d="{RequestRoute}."+d,void 0===e.RequestRoute)throw new Error("Empty value provided for input host prefix: RequestRoute.");if(d=d.replace("{RequestRoute}",e.RequestRoute),!(0,Hr.Lb)(d))throw new Error("ValidationError: prefixed hostname must be hostname compatible.")}return new Hr.aW({protocol:i,hostname:d,port:r,method:"POST",headers:a,path:s,query:c,body:l})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return(async(e,t)=>{const n={...e,body:await Bc(e.body,t)},i=Dc(e,n.body),r=n.body;(0,oe.oR)({output:e,parsedBody:r,exceptionCtor:ae,errorCode:i})})(e,t);const n=Uo({$metadata:Ic(e)});return await Rc(e.body,t),n})(e,t)}}var qu=n(8876),Yu=n(7085);const Ku={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};var $u=n(6848),Xu=n(2831),Zu=n(1769),Ju=n(9196),Qu=n(7463),ed=n(6835);var td,nd=n(7960),id=n(7643),rd=n(3538);class od{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(e));n>-1&&i>0;n--,i/=256)t[n]=i;return e<0&&ad(t),new od(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&ad(e),parseInt((0,rd.N)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function ad(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class sd{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){const t=[];for(const n of Object.keys(e)){const i=this.fromUtf8(n);t.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[n]))}const n=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let i=0;for(const e of t)n.set(e,i),i+=e.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":const r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(r.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);const c=new Uint8Array(s.buffer);return c.set(a,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(od.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!yd.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set((0,rd.H)(e.value.replace(/\-/g,"")),1),u}}parse(e){const t={};let n=0;for(;n<e.byteLength;){const i=e.getUint8(n++),r=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,i));switch(n+=i,e.getUint8(n++)){case 0:t[r]={type:cd,value:!0};break;case 1:t[r]={type:cd,value:!1};break;case 2:t[r]={type:ld,value:e.getInt8(n++)};break;case 3:t[r]={type:ud,value:e.getInt16(n,!1)},n+=2;break;case 4:t[r]={type:dd,value:e.getInt32(n,!1)},n+=4;break;case 5:t[r]={type:hd,value:new od(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const i=e.getUint16(n,!1);n+=2,t[r]={type:pd,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:const o=e.getUint16(n,!1);n+=2,t[r]={type:md,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o))},n+=o;break;case 8:t[r]={type:fd,value:new Date(new od(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const a=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[r]={type:gd,value:`${(0,rd.N)(a.subarray(0,4))}-${(0,rd.N)(a.subarray(4,6))}-${(0,rd.N)(a.subarray(6,8))}-${(0,rd.N)(a.subarray(8,10))}-${(0,rd.N)(a.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}}!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(td||(td={}));const cd="boolean",ld="byte",ud="short",dd="integer",hd="long",pd="binary",md="string",fd="timestamp",gd="uuid",yd=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class vd{constructor(e,t){this.headerMarshaller=new sd(e,t)}encode({headers:e,body:t}){const n=this.headerMarshaller.format(e),i=n.byteLength+t.byteLength+16,r=new Uint8Array(i),o=new DataView(r.buffer,r.byteOffset,r.byteLength),a=new yl.Crc32;return o.setUint32(0,i,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(r.subarray(0,8)).digest(),!1),r.set(n,12),r.set(t,n.byteLength+12),o.setUint32(i-4,a.update(r.subarray(8,i-4)).digest(),!1),r}decode(e){const{headers:t,body:n}=function({byteLength:e,byteOffset:t,buffer:n}){if(e<16)throw new Error("Provided message too short to accommodate event stream message overhead");const i=new DataView(n,t,e),r=i.getUint32(0,!1);if(e!==r)throw new Error("Reported message length does not match received message length");const o=i.getUint32(4,!1),a=i.getUint32(8,!1),s=i.getUint32(e-4,!1),c=(new yl.Crc32).update(new Uint8Array(n,t,8));if(a!==c.digest())throw new Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(n,t+8,e-12)),s!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${s}`);return{headers:new DataView(n,t+8+4,o),body:new Uint8Array(n,t+8+4+o,r-o-16)}}(e);return{headers:this.headerMarshaller.parse(t),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}}class bd{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new vd(e,t),this.utfEncoder=e}deserialize(e,t){const n=function(e){let t=0,n=0,i=null,r=null;const o=e=>{if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);t=e,n=4,i=new Uint8Array(e),new DataView(i.buffer).setUint32(0,e,!1)};return{[Symbol.asyncIterator]:async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:e,done:s}=await a.next();if(s){if(!t)return;if(t!==n)throw new Error("Truncated event message received.");return void(yield i)}const c=e.length;let l=0;for(;l<c;){if(!i){const t=c-l;r||(r=new Uint8Array(4));const i=Math.min(4-n,t);if(r.set(e.slice(l,l+i),n),n+=i,l+=i,n<4)break;o(new DataView(r.buffer).getUint32(0,!1)),r=null}const a=Math.min(t-n,c-l);i.set(e.slice(l,l+a),n),n+=a,l+=a,t&&t===n&&(yield i,i=null,t=0,n=0)}}}}}(e);var i,r;return i=n,r={eventStreamCodec:this.eventStreamCodec,deserializer:t,toUtf8:this.utfEncoder},{[Symbol.asyncIterator]:async function*(){for await(const e of i){const t=r.eventStreamCodec.decode(e),{value:n}=t.headers[":message-type"];if("error"===n){const e=new Error(t.headers[":error-message"].value||"UnknownError");throw e.name=t.headers[":error-code"].value,e}if("exception"===n){const e=t.headers[":exception-type"].value,n={[e]:t},i=await r.deserializer(n);if(i.$unknown){const n=new Error(r.toUtf8(t.body));throw n.name=e,n}throw i[e]}if("event"!==n)throw Error(`Unrecognizable event type: ${t.headers[":event-type"].value}`);{const e={[t.headers[":event-type"].value]:t},n=await r.deserializer(e);if(n.$unknown)continue;yield n}}}}}serialize(e,t){const n=this;return{[Symbol.asyncIterator]:async function*(){for await(const i of e){const e=n.eventStreamCodec.encode(t(i));yield e}yield new Uint8Array(0)}}}}class xd{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new bd({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){const n=wd(e)?(i=e,{[Symbol.asyncIterator]:async function*(){const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)return;yield n}}finally{e.releaseLock()}}}):e;var i;return this.universalMarshaller.deserialize(n,t)}serialize(e,t){const n=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){const{done:n,value:i}=await t.next();if(n)return e.close();e.enqueue(i)}})})(n):n}}const wd=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,Sd=e=>new xd(e);var Ed=n(6582);const _d=async function(e,t){const n=new e;return await function(e,t,n=1048576){return new Promise(((i,r)=>{const o=new FileReader;o.addEventListener("error",r),o.addEventListener("abort",r);const a=e.size;let s=0;function c(){s>=a?i():o.readAsArrayBuffer(e.slice(s,Math.min(a,s+n)))}o.addEventListener("load",(e=>{const n=e.target.result;t(new Uint8Array(n)),s+=n.byteLength,c()})),c()}))}(t,(e=>{n.update(e)})),n.digest()};var Cd=n(871),Pd=n(2498);const Md=[1732584193,4023233417,2562383102,271733878];class Td{constructor(){this.reset()}update(e){if(function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const t=function(e){return"string"==typeof e?(0,Pd.$)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(e);let n=0,{byteLength:i}=t;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),i--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:e,bufferLength:t,bytesHashed:n}=this,i=8*n;if(e.setUint8(this.bufferLength++,128),t%64>=56){for(let t=this.bufferLength;t<64;t++)e.setUint8(t,0);this.hashBuffer(),this.bufferLength=0}for(let t=this.bufferLength;t<56;t++)e.setUint8(t,0);e.setUint32(56,i>>>0,!0),e.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(16));for(let t=0;t<4;t++)e.setUint32(4*t,this.state[t],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:t}=this;let n=t[0],i=t[1],r=t[2],o=t[3];n=Id(n,i,r,o,e.getUint32(0,!0),7,3614090360),o=Id(o,n,i,r,e.getUint32(4,!0),12,3905402710),r=Id(r,o,n,i,e.getUint32(8,!0),17,606105819),i=Id(i,r,o,n,e.getUint32(12,!0),22,3250441966),n=Id(n,i,r,o,e.getUint32(16,!0),7,4118548399),o=Id(o,n,i,r,e.getUint32(20,!0),12,1200080426),r=Id(r,o,n,i,e.getUint32(24,!0),17,2821735955),i=Id(i,r,o,n,e.getUint32(28,!0),22,4249261313),n=Id(n,i,r,o,e.getUint32(32,!0),7,1770035416),o=Id(o,n,i,r,e.getUint32(36,!0),12,2336552879),r=Id(r,o,n,i,e.getUint32(40,!0),17,4294925233),i=Id(i,r,o,n,e.getUint32(44,!0),22,2304563134),n=Id(n,i,r,o,e.getUint32(48,!0),7,1804603682),o=Id(o,n,i,r,e.getUint32(52,!0),12,4254626195),r=Id(r,o,n,i,e.getUint32(56,!0),17,2792965006),i=Id(i,r,o,n,e.getUint32(60,!0),22,1236535329),n=Rd(n,i,r,o,e.getUint32(4,!0),5,4129170786),o=Rd(o,n,i,r,e.getUint32(24,!0),9,3225465664),r=Rd(r,o,n,i,e.getUint32(44,!0),14,643717713),i=Rd(i,r,o,n,e.getUint32(0,!0),20,3921069994),n=Rd(n,i,r,o,e.getUint32(20,!0),5,3593408605),o=Rd(o,n,i,r,e.getUint32(40,!0),9,38016083),r=Rd(r,o,n,i,e.getUint32(60,!0),14,3634488961),i=Rd(i,r,o,n,e.getUint32(16,!0),20,3889429448),n=Rd(n,i,r,o,e.getUint32(36,!0),5,568446438),o=Rd(o,n,i,r,e.getUint32(56,!0),9,3275163606),r=Rd(r,o,n,i,e.getUint32(12,!0),14,4107603335),i=Rd(i,r,o,n,e.getUint32(32,!0),20,1163531501),n=Rd(n,i,r,o,e.getUint32(52,!0),5,2850285829),o=Rd(o,n,i,r,e.getUint32(8,!0),9,4243563512),r=Rd(r,o,n,i,e.getUint32(28,!0),14,1735328473),i=Rd(i,r,o,n,e.getUint32(48,!0),20,2368359562),n=kd(n,i,r,o,e.getUint32(20,!0),4,4294588738),o=kd(o,n,i,r,e.getUint32(32,!0),11,2272392833),r=kd(r,o,n,i,e.getUint32(44,!0),16,1839030562),i=kd(i,r,o,n,e.getUint32(56,!0),23,4259657740),n=kd(n,i,r,o,e.getUint32(4,!0),4,2763975236),o=kd(o,n,i,r,e.getUint32(16,!0),11,1272893353),r=kd(r,o,n,i,e.getUint32(28,!0),16,4139469664),i=kd(i,r,o,n,e.getUint32(40,!0),23,3200236656),n=kd(n,i,r,o,e.getUint32(52,!0),4,681279174),o=kd(o,n,i,r,e.getUint32(0,!0),11,3936430074),r=kd(r,o,n,i,e.getUint32(12,!0),16,3572445317),i=kd(i,r,o,n,e.getUint32(24,!0),23,76029189),n=kd(n,i,r,o,e.getUint32(36,!0),4,3654602809),o=kd(o,n,i,r,e.getUint32(48,!0),11,3873151461),r=kd(r,o,n,i,e.getUint32(60,!0),16,530742520),i=kd(i,r,o,n,e.getUint32(8,!0),23,3299628645),n=Ld(n,i,r,o,e.getUint32(0,!0),6,4096336452),o=Ld(o,n,i,r,e.getUint32(28,!0),10,1126891415),r=Ld(r,o,n,i,e.getUint32(56,!0),15,2878612391),i=Ld(i,r,o,n,e.getUint32(20,!0),21,4237533241),n=Ld(n,i,r,o,e.getUint32(48,!0),6,1700485571),o=Ld(o,n,i,r,e.getUint32(12,!0),10,2399980690),r=Ld(r,o,n,i,e.getUint32(40,!0),15,4293915773),i=Ld(i,r,o,n,e.getUint32(4,!0),21,2240044497),n=Ld(n,i,r,o,e.getUint32(32,!0),6,1873313359),o=Ld(o,n,i,r,e.getUint32(60,!0),10,4264355552),r=Ld(r,o,n,i,e.getUint32(24,!0),15,2734768916),i=Ld(i,r,o,n,e.getUint32(52,!0),21,1309151649),n=Ld(n,i,r,o,e.getUint32(16,!0),6,4149444226),o=Ld(o,n,i,r,e.getUint32(44,!0),10,3174756917),r=Ld(r,o,n,i,e.getUint32(8,!0),15,718787259),i=Ld(i,r,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=i+t[1]&4294967295,t[2]=r+t[2]&4294967295,t[3]=o+t[3]&4294967295}reset(){this.state=Uint32Array.from(Md),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Ad(e,t,n,i,r,o){return((t=(t+e&4294967295)+(i+o&4294967295)&4294967295)<<r|t>>>32-r)+n&4294967295}function Id(e,t,n,i,r,o,a){return Ad(t&n|~t&i,e,t,r,o,a)}function Rd(e,t,n,i,r,o,a){return Ad(t&i|n&~i,e,t,r,o,a)}function kd(e,t,n,i,r,o,a){return Ad(t^n^i,e,t,r,o,a)}function Ld(e,t,n,i,r,o,a){return Ad(n^(t|~i),e,t,r,o,a)}var Nd=n(6524),Bd=n(2677);const Dd=(e,t)=>{const{base64Encoder:n,bodyLengthChecker:i,checksumAlgorithmFn:r,checksumLocationName:o,streamHasher:a}=t,s=void 0!==n&&void 0!==i&&void 0!==r&&void 0!==o&&void 0!==a,c=s?a(r,e):void 0,l=e.getReader();return new ReadableStream({async pull(e){const{value:t,done:r}=await l.read();if(r){if(e.enqueue("0\r\n"),s){const t=n(await c);e.enqueue(`${o}:${t}\r\n`),e.enqueue("\r\n")}e.close()}else e.enqueue(`${(i(t)||0).toString(16)}\r\n${t}\r\n`)}})};var Od=n(7849),Fd=n(6521);const zd="The stream has already been transformed.",Ud=e=>{if(!Hd(e)&&!jd(e))throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${e?.__proto__?.constructor?.name||e}`);let t=!1;const n=async()=>{if(t)throw new Error(zd);return t=!0,await(0,Ed.C)(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async e=>{const t=await n();if("base64"===e)return(0,Od.s)(t);if("hex"===e)return(0,rd.N)(t);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,Fd.G)(t);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(t);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(zd);if(t=!0,Hd(e))return(e=>{if("function"!=typeof e.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()})(e);if(jd(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Hd=e=>"function"==typeof Blob&&e instanceof Blob,jd=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream;var Gd=n(7915),Vd=n(2801);class Wd{constructor(e){this.sigv4Signer=new Vd.L1(e),this.signerOptions=e}async sign(e,t={}){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(e,t)}return this.sigv4Signer.sign(e,t)}async presign(e,t={}){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(e,t)}return this.sigv4Signer.presign(e,t)}getSigv4aSigner(){if(!this.sigv4aSigner){let e;try{if(e=n(4287).CrtSignerV4,"function"!=typeof e)throw new Error}catch(e){throw e.message=`${e.message}\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \nFor more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,e}this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}var qd=n(6795),Yd=n(1729);const Kd="required",$d="type",Xd="rules",Zd="conditions",Jd="fn",Qd="argv",eh="ref",th="assign",nh="url",ih="properties",rh="authSchemes",oh="signingRegion",ah="signingName",sh="disableDoubleEncoding",ch="headers",lh=!0,uh="tree",dh="isSet",hh="substring",ph="hardwareType",mh="regionPrefix",fh="abbaSuffix",gh="outpostId",yh="aws.partition",vh="stringEquals",bh="isValidHostLabel",xh="not",wh="error",Sh="parseURL",Eh="s3-outposts",_h="endpoint",Ch="booleanEquals",Ph="aws.parseArn",Mh="s3",Th="aws.isVirtualHostableS3Bucket",Ah="getAttr",Ih="name",Rh="Host override cannot be combined with Dualstack, FIPS, or S3 Accelerate",kh="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Lh="bucketArn",Nh="arnType",Bh="s3-object-lambda",Dh="accesspoint",Oh="accessPointName",Fh="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",zh="mrapPartition",Uh="outpostType",Hh="arnPrefix",jh="{url#scheme}://{url#authority}{url#path}",Gh="https://s3.{partitionResult#dnsSuffix}",Vh={[Kd]:!1,[$d]:"String"},Wh={[Kd]:!0,default:!1,[$d]:"Boolean"},qh={[Kd]:!1,[$d]:"Boolean"},Yh={[Jd]:dh,[Qd]:[{[eh]:"Bucket"}]},Kh={[eh]:"Bucket"},$h={[eh]:ph},Xh={[Zd]:[{[Jd]:xh,[Qd]:[{[Jd]:dh,[Qd]:[{[eh]:"Endpoint"}]}]}],[wh]:"Expected a endpoint to be specified but no endpoint was found",[$d]:wh},Zh={[Jd]:xh,[Qd]:[{[Jd]:dh,[Qd]:[{[eh]:"Endpoint"}]}]},Jh={[Jd]:dh,[Qd]:[{[eh]:"Endpoint"}]},Qh={[Jd]:Sh,[Qd]:[{[eh]:"Endpoint"}],[th]:"url"},ep={[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Eh,[sh]:!0}]},tp={},np={[eh]:"ForcePathStyle"},ip={[Zd]:[{[Jd]:"uriEncode",[Qd]:[Kh],[th]:"uri_encoded_bucket"}],[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Jh],[wh]:"Cannot set dual-stack in combination with a custom endpoint.",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:yh,[Qd]:[{[eh]:"Region"}],[th]:"partitionResult"}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"Accelerate"},!1]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[_h]:{[nh]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[_h]:{[nh]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[_h]:{[nh]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"us-east-1"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Jh,Qh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]}],[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"us-east-1"]}],[_h]:{[nh]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},{[_h]:{[nh]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]},{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},Zh,{[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]}],[_h]:{[nh]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h}]}]},{[wh]:"Path-style addressing cannot be used with S3 Accelerate",[$d]:wh}]}]},{[wh]:"A valid partition could not be determined",[$d]:wh}]}]},rp={[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!0]},op={[Jd]:Ch,[Qd]:[{[eh]:"Accelerate"},!1]},ap={[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!0]},sp={[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}]},cp={[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!0]},lp={[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Mh,[sh]:!0}]},up={[Jd]:Ch,[Qd]:[{[eh]:"UseGlobalEndpoint"},!1]},dp={[Jd]:Ch,[Qd]:[{[eh]:"UseDualStack"},!1]},hp={[Jd]:Ch,[Qd]:[{[eh]:"UseFIPS"},!1]},pp={[wh]:"A valid partition could not be determined",[$d]:wh},mp={[Zd]:[ap,{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[{[eh]:"partitionResult"},Ih]},"aws-cn"]}],[wh]:"Partition does not support FIPS",[$d]:wh},fp={[Jd]:Ch,[Qd]:[{[eh]:"Accelerate"},!0]},gp={[Zd]:[rp,ap,op,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},yp={[nh]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},vp={[Zd]:[dp,ap,op,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},bp={[nh]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},xp={[Zd]:[rp,hp,fp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},wp={[nh]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},Sp={[Zd]:[rp,hp,op,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},Ep={[nh]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},_p={[Zd]:[dp,hp,op,Jh,Qh,{[Jd]:Ch,[Qd]:[{[Jd]:Ah,[Qd]:[{[eh]:"url"},"isIp"]},!0]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},Cp={[Jd]:Ch,[Qd]:[{[Jd]:Ah,[Qd]:[{[eh]:"url"},"isIp"]},!0]},Pp={[eh]:"url"},Mp={[Zd]:[dp,hp,op,Jh,Qh,{[Jd]:Ch,[Qd]:[{[Jd]:Ah,[Qd]:[Pp,"isIp"]},!1]},{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},Tp={[Jd]:Ch,[Qd]:[{[Jd]:Ah,[Qd]:[Pp,"isIp"]},!1]},Ap={[nh]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[ih]:lp,[ch]:{}},Ip={[nh]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[ih]:lp,[ch]:{}},Rp={[_h]:Ip,[$d]:_h},kp={[Zd]:[dp,hp,fp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},Lp={[nh]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},Np={[Zd]:[dp,hp,op,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:kh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},Bp={[nh]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},Dp={[wh]:"Invalid region: region was not a valid DNS name.",[$d]:wh},Op={[eh]:Lh},Fp={[eh]:Nh},zp={[Jd]:Ah,[Qd]:[Op,"service"]},Up={[eh]:Oh},Hp={[Zd]:[rp],[wh]:"S3 Object Lambda does not support Dual-stack",[$d]:wh},jp={[Zd]:[fp],[wh]:"S3 Object Lambda does not support S3 Accelerate",[$d]:wh},Gp={[Zd]:[{[Jd]:dh,[Qd]:[{[eh]:"DisableAccessPoints"}]},{[Jd]:Ch,[Qd]:[{[eh]:"DisableAccessPoints"},!0]}],[wh]:"Access points are not supported for this operation",[$d]:wh},Vp={[Zd]:[{[Jd]:dh,[Qd]:[{[eh]:"UseArnRegion"}]},{[Jd]:Ch,[Qd]:[{[eh]:"UseArnRegion"},!1]},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"region"]},"{Region}"]}]}],[wh]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[$d]:wh},Wp={[Jd]:Ah,[Qd]:[{[eh]:"bucketPartition"},Ih]},qp={[Jd]:Ah,[Qd]:[Op,"accountId"]},Yp={[Zd]:[ap,{[Jd]:vh,[Qd]:[Wp,"aws-cn"]}],[wh]:"Partition does not support FIPS",[$d]:wh},Kp={[rh]:[{[Ih]:"sigv4",[oh]:"{bucketArn#region}",[ah]:Bh,[sh]:!0}]},$p={[wh]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[$d]:wh},Xp={[wh]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[$d]:wh},Zp={[wh]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[$d]:wh},Jp={[wh]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[$d]:wh},Qp={[wh]:"Could not load partition for ARN region `{bucketArn#region}`",[$d]:wh},em={[wh]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[$d]:wh},tm={[wh]:"Invalid ARN: bucket ARN is missing a region",[$d]:wh},nm={[wh]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[$d]:wh},im={[rh]:[{[Ih]:"sigv4",[oh]:"{bucketArn#region}",[ah]:Mh,[sh]:!0}]},rm={[rh]:[{[Ih]:"sigv4",[oh]:"{bucketArn#region}",[ah]:Eh,[sh]:!0}]},om={[eh]:"UseObjectLambdaEndpoint"},am={[rh]:[{[Ih]:"sigv4",[oh]:"{Region}",[ah]:Bh,[sh]:!0}]},sm={[Zd]:[ap,rp,Jh,Qh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:jh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},cm={[_h]:{[nh]:jh,[ih]:lp,[ch]:{}},[$d]:_h},lm={[nh]:jh,[ih]:lp,[ch]:{}},um={[Zd]:[ap,rp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},dm={[nh]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},hm={[Zd]:[ap,dp,Jh,Qh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:jh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},pm={[Zd]:[ap,dp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},mm={[nh]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},fm={[Zd]:[hp,rp,Jh,Qh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:jh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},gm={[Zd]:[hp,rp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},ym={[nh]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},vm={[Zd]:[hp,dp,Jh,Qh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:jh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},bm={[Zd]:[hp,dp,Zh,{[Jd]:vh,[Qd]:[{[eh]:"Region"},"aws-global"]}],[_h]:{[nh]:Gh,[ih]:{[rh]:[{[Ih]:"sigv4",[oh]:"us-east-1",[ah]:Mh,[sh]:!0}]},[ch]:{}},[$d]:_h},xm={[nh]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[ih]:lp,[ch]:{}},wm=[{[eh]:"Region"}],Sm=[{[Jd]:bh,[Qd]:[{[eh]:gh},!1]}],Em=[{[Jd]:vh,[Qd]:[{[eh]:mh},"beta"]}],_m=[Jh,Qh],Cm=[Yh],Pm=[{[Jd]:Ph,[Qd]:[Kh]}],Mm=[{[Jd]:yh,[Qd]:wm,[th]:"partitionResult"}],Tm=[{[Jd]:vh,[Qd]:[{[eh]:"Region"},"us-east-1"]}],Am=[{[Jd]:bh,[Qd]:[{[eh]:"Region"},!1]}],Im=[{[Jd]:vh,[Qd]:[Fp,Dh]}],Rm=[{[Jd]:Ah,[Qd]:[Op,"resourceId[1]"],[th]:Oh},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[Up,""]}]}],km=[rp],Lm=[fp],Nm=[{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"region"]},""]}]}],Bm=[{[Jd]:xh,[Qd]:[{[Jd]:dh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[2]"]}]}]}],Dm=[{[Jd]:yh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"region"]}],[th]:"bucketPartition"}],Om=[{[Jd]:vh,[Qd]:[Wp,{[Jd]:Ah,[Qd]:[{[eh]:"partitionResult"},Ih]}]}],Fm=[{[Jd]:bh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"region"]},!0]}],zm=[{[Jd]:bh,[Qd]:[qp,!1]}],Um=[{[Jd]:bh,[Qd]:[Up,!1]}],Hm=[ap],jm=[{[Jd]:bh,[Qd]:[{[eh]:"Region"},!0]}],Gm=[cm],Vm={version:"1.0",parameters:{Bucket:Vh,Region:Vh,UseFIPS:Wh,UseDualStack:Wh,Endpoint:Vh,ForcePathStyle:qh,Accelerate:Wh,UseGlobalEndpoint:Wh,UseObjectLambdaEndpoint:qh,DisableAccessPoints:qh,DisableMultiRegionAccessPoints:Wh,UseArnRegion:qh},[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:dh,[Qd]:wm}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[Yh,{[Jd]:hh,[Qd]:[Kh,49,50,lh],[th]:ph},{[Jd]:hh,[Qd]:[Kh,8,12,lh],[th]:mh},{[Jd]:hh,[Qd]:[Kh,0,7,lh],[th]:fh},{[Jd]:hh,[Qd]:[Kh,32,49,lh],[th]:gh},{[Jd]:yh,[Qd]:wm,[th]:"regionPartition"},{[Jd]:vh,[Qd]:[{[eh]:fh},"--op-s3"]}],[$d]:uh,[Xd]:[{[Zd]:Sm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[$h,"e"]}],[$d]:uh,[Xd]:[{[Zd]:Em,[$d]:uh,[Xd]:[Xh,{[Zd]:_m,endpoint:{[nh]:"https://{Bucket}.ec2.{url#authority}",[ih]:ep,[ch]:tp},[$d]:_h}]},{endpoint:{[nh]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ih]:ep,[ch]:tp},[$d]:_h}]},{[Zd]:[{[Jd]:vh,[Qd]:[$h,"o"]}],[$d]:uh,[Xd]:[{[Zd]:Em,[$d]:uh,[Xd]:[Xh,{[Zd]:_m,endpoint:{[nh]:"https://{Bucket}.op-{outpostId}.{url#authority}",[ih]:ep,[ch]:tp},[$d]:_h}]},{endpoint:{[nh]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ih]:ep,[ch]:tp},[$d]:_h}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[$d]:wh}]}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[$d]:wh}]},{[Zd]:Cm,[$d]:uh,[Xd]:[{[Zd]:[Jh,{[Jd]:xh,[Qd]:[{[Jd]:dh,[Qd]:[{[Jd]:Sh,[Qd]:[{[eh]:"Endpoint"}]}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:dh,[Qd]:[np]},{[Jd]:Ch,[Qd]:[np,lh]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Pm,error:"Path-style addressing cannot be used with ARN buckets",[$d]:wh},ip]}]},{[Zd]:[{[Jd]:Th,[Qd]:[Kh,!1]}],[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Am,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[mp,{[$d]:uh,[Xd]:[{[Zd]:[fp,ap],error:"Accelerate cannot be used with FIPS",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[fp,{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[{[eh]:"partitionResult"},Ih]},"aws-cn"]}],error:"S3 Accelerate cannot be used in this region",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[Jh,rp],error:Rh,[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[Jh,ap],error:Rh,[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[Jh,fp],error:Rh,[$d]:wh},{[$d]:uh,[Xd]:[gp,gp,{[Zd]:[rp,ap,op,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:yp,[$d]:_h}]},{[Zd]:[rp,ap,op,Zh,sp,up],endpoint:yp,[$d]:_h},vp,vp,{[Zd]:[dp,ap,op,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:bp,[$d]:_h}]},{[Zd]:[dp,ap,op,Zh,sp,up],endpoint:bp,[$d]:_h},xp,xp,{[Zd]:[rp,hp,fp,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:wp,[$d]:_h}]},{[Zd]:[rp,hp,fp,Zh,sp,up],endpoint:wp,[$d]:_h},Sp,Sp,{[Zd]:[rp,hp,op,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:Ep,[$d]:_h}]},{[Zd]:[rp,hp,op,Zh,sp,up],endpoint:Ep,[$d]:_h},_p,Mp,_p,Mp,{[Zd]:[dp,hp,op,Jh,Qh,Cp,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:Ap,[$d]:_h},{endpoint:Ap,[$d]:_h}]},{[Zd]:[dp,hp,op,Jh,Qh,Tp,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:Ip,[$d]:_h},Rp]},{[Zd]:[dp,hp,op,Jh,Qh,Cp,sp,up],endpoint:Ap,[$d]:_h},{[Zd]:[dp,hp,op,Jh,Qh,Tp,sp,up],endpoint:Ip,[$d]:_h},kp,kp,{[Zd]:[dp,hp,fp,Zh,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:Lp,[$d]:_h},{endpoint:Lp,[$d]:_h}]},{[Zd]:[dp,hp,fp,Zh,sp,up],endpoint:Lp,[$d]:_h},Np,Np,{[Zd]:[dp,hp,op,Zh,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:{[nh]:kh,[ih]:lp,[ch]:tp},[$d]:_h},{endpoint:Bp,[$d]:_h}]},{[Zd]:[dp,hp,op,Zh,sp,up],endpoint:Bp,[$d]:_h}]}]}]}]}]}]}]}]},Dp]}]},pp]},{[Zd]:[Jh,Qh,{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[Pp,"scheme"]},"http"]},{[Jd]:Th,[Qd]:[Kh,lh]},hp,dp,op],[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Am,[$d]:uh,[Xd]:[Rp]},Dp]}]},pp]},{[Zd]:[{[Jd]:Ph,[Qd]:[Kh],[th]:Lh}],[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[0]"],[th]:Nh},{[Jd]:xh,[Qd]:[{[Jd]:vh,[Qd]:[Fp,""]}]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[zp,Bh]}],[$d]:uh,[Xd]:[{[Zd]:Im,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Rm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Hp,{[$d]:uh,[Xd]:[jp,{[$d]:uh,[Xd]:[{[Zd]:Nm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Gp,{[$d]:uh,[Xd]:[{[Zd]:Bm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Vp,{[$d]:uh,[Xd]:[{[Zd]:Dm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Om,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Fm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[qp,""]}],error:"Invalid ARN: Missing account id",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:zm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Um,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Yp,{[$d]:uh,[Xd]:[{[Zd]:_m,endpoint:{[nh]:Fh,[ih]:Kp,[ch]:tp},[$d]:_h},{[Zd]:Hm,endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:Kp,[ch]:tp},[$d]:_h},{endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:Kp,[ch]:tp},[$d]:_h}]}]}]},$p]}]},Xp]}]}]},Zp]}]},Jp]}]},pp]}]},Qp]}]}]},em]}]}]},tm]}]}]}]},nm]}]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[$d]:wh}]},{[Zd]:Im,[$d]:uh,[Xd]:[{[Zd]:Rm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Nm,[$d]:uh,[Xd]:[{[Zd]:Im,[$d]:uh,[Xd]:[{[Zd]:Nm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Gp,{[$d]:uh,[Xd]:[{[Zd]:Bm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Vp,{[$d]:uh,[Xd]:[{[Zd]:Dm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[Wp,"{partitionResult#name}"]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Fm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[zp,Mh]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:zm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Um,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Lm,error:"Access Points do not support S3 Accelerate",[$d]:wh},{[$d]:uh,[Xd]:[Yp,{[$d]:uh,[Xd]:[{[Zd]:[rp,Jh],error:"DualStack cannot be combined with a Host override (PrivateLink)",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[ap,rp],endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:im,[ch]:tp},[$d]:_h},{[Zd]:[ap,dp],endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:im,[ch]:tp},[$d]:_h},{[Zd]:[hp,rp],endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:im,[ch]:tp},[$d]:_h},{[Zd]:[hp,dp,Jh,Qh],endpoint:{[nh]:Fh,[ih]:im,[ch]:tp},[$d]:_h},{[Zd]:[hp,dp],endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:im,[ch]:tp},[$d]:_h}]}]}]}]}]},$p]}]},Xp]}]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[$d]:wh}]}]},Zp]}]},Jp]}]},pp]}]},Qp]}]}]},em]}]}]},tm]}]},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:bh,[Qd]:[Up,lh]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:km,error:"S3 MRAP does not support dual-stack",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:Hm,error:"S3 MRAP does not support FIPS",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:Lm,error:"S3 MRAP does not support S3 Accelerate",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ch,[Qd]:[{[eh]:"DisableMultiRegionAccessPoints"},lh]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:yh,[Qd]:wm,[th]:zh}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[{[Jd]:Ah,[Qd]:[{[eh]:zh},Ih]},{[Jd]:Ah,[Qd]:[Op,"partition"]}]}],[$d]:uh,[Xd]:[{endpoint:{[nh]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[ih]:{[rh]:[{name:"sigv4a",signingRegionSet:["*"],[ah]:Mh,[sh]:lh}]},[ch]:tp},[$d]:_h}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[$d]:wh}]}]},{error:"{Region} was not a valid region",[$d]:wh}]}]}]}]}]}]},{error:"Invalid Access Point Name",[$d]:wh}]}]}]},nm]},{[Zd]:[{[Jd]:vh,[Qd]:[zp,Eh]}],[$d]:uh,[Xd]:[{[Zd]:km,error:"S3 Outposts does not support Dual-stack",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:Hm,error:"S3 Outposts does not support FIPS",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:Lm,error:"S3 Outposts does not support S3 Accelerate",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:dh,[Qd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[$d]:wh},{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[1]"],[th]:gh}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Sm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Vp,{[$d]:uh,[Xd]:[{[Zd]:Dm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Om,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:Fm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:zm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[2]"],[th]:Uh}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:Ah,[Qd]:[Op,"resourceId[3]"],[th]:Oh}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:[{[Jd]:vh,[Qd]:[{[eh]:Uh},Dh]}],[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:_m,endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[ih]:rm,[ch]:tp},[$d]:_h},{endpoint:{[nh]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ih]:rm,[ch]:tp},[$d]:_h}]}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[$d]:wh}]}]},{error:"Invalid ARN: expected an access point name",[$d]:wh}]}]},{error:"Invalid ARN: Expected a 4-component resource",[$d]:wh}]}]},Xp]}]},Zp]}]},Jp]}]},pp]}]},{error:"Could not load partition for ARN region {bucketArn#region}",[$d]:wh}]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[$d]:wh}]}]},{error:"Invalid ARN: The Outpost Id was not set",[$d]:wh}]}]}]}]}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[$d]:wh}]}]},{error:"Invalid ARN: No ARN type specified",[$d]:wh}]},{[Zd]:[{[Jd]:hh,[Qd]:[Kh,0,4,!1],[th]:Hh},{[Jd]:vh,[Qd]:[{[eh]:Hh},"arn:"]},{[Jd]:xh,[Qd]:[{[Jd]:dh,[Qd]:Pm}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[$d]:wh},ip]}]},{[Zd]:[{[Jd]:dh,[Qd]:[om]},{[Jd]:Ch,[Qd]:[om,lh]}],[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:jm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[Hp,{[$d]:uh,[Xd]:[jp,{[$d]:uh,[Xd]:[mp,{[$d]:uh,[Xd]:[{[Zd]:_m,endpoint:{[nh]:jh,[ih]:am,[ch]:tp},[$d]:_h},{[Zd]:Hm,endpoint:{[nh]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[ih]:am,[ch]:tp},[$d]:_h},{endpoint:{[nh]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[ih]:am,[ch]:tp},[$d]:_h}]}]}]}]}]},Dp]}]},pp]},{[Zd]:[{[Jd]:xh,[Qd]:Cm}],[$d]:uh,[Xd]:[{[Zd]:Mm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[{[Zd]:jm,[$d]:uh,[Xd]:[{[$d]:uh,[Xd]:[mp,{[$d]:uh,[Xd]:[sm,sm,{[Zd]:[ap,rp,Jh,Qh,sp,cp],[$d]:uh,[Xd]:Gm},{[Zd]:[ap,rp,Jh,Qh,sp,up],endpoint:lm,[$d]:_h},um,um,{[Zd]:[ap,rp,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:dm,[$d]:_h}]},{[Zd]:[ap,rp,Zh,sp,up],endpoint:dm,[$d]:_h},hm,hm,{[Zd]:[ap,dp,Jh,Qh,sp,cp],[$d]:uh,[Xd]:Gm},{[Zd]:[ap,dp,Jh,Qh,sp,up],endpoint:lm,[$d]:_h},pm,pm,{[Zd]:[ap,dp,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:mm,[$d]:_h}]},{[Zd]:[ap,dp,Zh,sp,up],endpoint:mm,[$d]:_h},fm,fm,{[Zd]:[hp,rp,Jh,Qh,sp,cp],[$d]:uh,[Xd]:Gm},{[Zd]:[hp,rp,Jh,Qh,sp,up],endpoint:lm,[$d]:_h},gm,gm,{[Zd]:[hp,rp,Zh,sp,cp],[$d]:uh,[Xd]:[{endpoint:ym,[$d]:_h}]},{[Zd]:[hp,rp,Zh,sp,up],endpoint:ym,[$d]:_h},vm,vm,{[Zd]:[hp,dp,Jh,Qh,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:lm,[$d]:_h},cm]},{[Zd]:[hp,dp,Jh,Qh,sp,up],endpoint:lm,[$d]:_h},bm,bm,{[Zd]:[hp,dp,Zh,sp,cp],[$d]:uh,[Xd]:[{[Zd]:Tm,endpoint:{[nh]:Gh,[ih]:lp,[ch]:tp},[$d]:_h},{endpoint:xm,[$d]:_h}]},{[Zd]:[hp,dp,Zh,sp,up],endpoint:xm,[$d]:_h}]}]}]},Dp]}]},pp]}]}]},{error:"A region must be set when sending requests to S3.",[$d]:wh}]}]},Wm=(e,t={})=>(0,Yd.B1)(Vm,{endpointParams:e,logger:t.logger});var qm=n(2971);class Ym extends oe.KU{constructor(e){const t=(n=(e=>{const t=(0,qm.j)(e),n=()=>t().then(oe.jv),i=(e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??Od.G,base64Encoder:e?.base64Encoder??Od.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Wm,logger:e?.logger??new oe.vk,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??Wd,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??qd.e,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Pd.$,utf8Encoder:e?.utf8Encoder??Fd.G}))(e);return{...i,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Nd.W,credentialDefaultProvider:e?.credentialDefaultProvider??(e=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Gd.f)({serviceId:i.serviceId,clientVersion:"3.271.0"}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Sd,getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??Dd,maxAttempts:e?.maxAttempts??Bd.J,md5:e?.md5??Td,region:e?.region??(0,Cd.n)("Region is missing"),requestHandler:e?.requestHandler??new Ed.B(n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||Bd.CA),sdkStreamMixin:e?.sdkStreamMixin??Ud,sha1:e?.sha1??nd.Sha1,sha256:e?.sha256??id.Sha256,streamCollector:e?.streamCollector??Ed.C,streamHasher:e?.streamHasher??_d,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(qu.JY)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(qu.Fh))}})(e),{...n,useFipsEndpoint:n.useFipsEndpoint??!1,useDualstackEndpoint:n.useDualstackEndpoint??!1,useAccelerateEndpoint:n.useAccelerateEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,disableMultiregionAccessPoints:n.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var n;const i=(0,qu.Xb)(t),r=(0,ie.uW)(i),o=(0,Ju.BC)(r),a=(0,$u.S8)(o),s=(c=(0,Qu.A$)(a),{...c,forcePathStyle:c.forcePathStyle??!1,useAccelerateEndpoint:c.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:c.disableMultiregionAccessPoints??!1});var c;const l=(e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}))((0,ed.er)(s));super(l),this.config=l,this.middlewareStack.use((0,Ju.NQ)(this.config)),this.middlewareStack.use((0,Yu.VG)(this.config)),this.middlewareStack.use((0,$u.G2)(this.config)),this.middlewareStack.use((0,Xu.cV)(this.config)),this.middlewareStack.use((0,Zu.eV)(this.config)),this.middlewareStack.use((0,Qu.yt)(this.config)),this.middlewareStack.use((this.config,{applyToStack:e=>{e.add((e=>async t=>{const{input:{Bucket:n}}=t;if("string"==typeof n&&!("string"==typeof(i=n)&&0===i.indexOf("arn:")&&i.split(":").length>=6)&&n.indexOf("/")>=0){const e=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw e.name="InvalidBucketName",e}var i;return e({...t})}),jc)}})),this.middlewareStack.use((e=>({applyToStack:t=>{t.add(function(e){return t=>async n=>{const{request:i}=n;return Hr.aW.isInstance(i)&&i.body&&"node"===e.runtime&&(i.headers={...i.headers,Expect:"100-continue"}),t({...n,request:i})}}(e),Ku)}}))(this.config)),this.middlewareStack.use((0,ed.XJ)(this.config))}destroy(){super.destroy()}}class Km extends Ym{abortMultipartUpload(e,t,n){const i=new Oc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}completeMultipartUpload(e,t,n){const i=new Wc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}copyObject(e,t,n){const i=new qc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createBucket(e,t,n){const i=new Kc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createMultipartUpload(e,t,n){const i=new $c(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucket(e,t,n){const i=new Zc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketAnalyticsConfiguration(e,t,n){const i=new Xc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketCors(e,t,n){const i=new Jc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketEncryption(e,t,n){const i=new Qc(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketIntelligentTieringConfiguration(e,t,n){const i=new el(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketInventoryConfiguration(e,t,n){const i=new tl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketLifecycle(e,t,n){const i=new nl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketMetricsConfiguration(e,t,n){const i=new il(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketOwnershipControls(e,t,n){const i=new rl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketPolicy(e,t,n){const i=new ol(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketReplication(e,t,n){const i=new al(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketTagging(e,t,n){const i=new sl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteBucketWebsite(e,t,n){const i=new cl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteObject(e,t,n){const i=new ll(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteObjects(e,t,n){const i=new Pl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteObjectTagging(e,t,n){const i=new Ml(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deletePublicAccessBlock(e,t,n){const i=new Tl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketAccelerateConfiguration(e,t,n){const i=new Al(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketAcl(e,t,n){const i=new Il(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketAnalyticsConfiguration(e,t,n){const i=new Rl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketCors(e,t,n){const i=new kl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketEncryption(e,t,n){const i=new Ll(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketIntelligentTieringConfiguration(e,t,n){const i=new Nl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketInventoryConfiguration(e,t,n){const i=new Bl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketLifecycleConfiguration(e,t,n){const i=new Dl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketLocation(e,t,n){const i=new Ol(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketLogging(e,t,n){const i=new Fl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketMetricsConfiguration(e,t,n){const i=new zl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketNotificationConfiguration(e,t,n){const i=new Ul(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketOwnershipControls(e,t,n){const i=new Hl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketPolicy(e,t,n){const i=new jl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketPolicyStatus(e,t,n){const i=new Gl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketReplication(e,t,n){const i=new Vl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketRequestPayment(e,t,n){const i=new Wl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketTagging(e,t,n){const i=new ql(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketVersioning(e,t,n){const i=new Yl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getBucketWebsite(e,t,n){const i=new Kl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObject(e,t,n){const i=new Zl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectAcl(e,t,n){const i=new $l(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectAttributes(e,t,n){const i=new Xl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectLegalHold(e,t,n){const i=new Jl(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectLockConfiguration(e,t,n){const i=new Ql(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectRetention(e,t,n){const i=new eu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectTagging(e,t,n){const i=new tu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getObjectTorrent(e,t,n){const i=new nu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getPublicAccessBlock(e,t,n){const i=new iu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}headBucket(e,t,n){const i=new ru(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}headObject(e,t,n){const i=new ou(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listBucketAnalyticsConfigurations(e,t,n){const i=new au(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listBucketIntelligentTieringConfigurations(e,t,n){const i=new su(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listBucketInventoryConfigurations(e,t,n){const i=new cu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listBucketMetricsConfigurations(e,t,n){const i=new lu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listBuckets(e,t,n){const i=new uu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listMultipartUploads(e,t,n){const i=new du(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listObjects(e,t,n){const i=new hu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listObjectsV2(e,t,n){const i=new pu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listObjectVersions(e,t,n){const i=new mu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listParts(e,t,n){const i=new fu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketAccelerateConfiguration(e,t,n){const i=new gu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketAcl(e,t,n){const i=new yu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketAnalyticsConfiguration(e,t,n){const i=new vu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketCors(e,t,n){const i=new bu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketEncryption(e,t,n){const i=new xu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketIntelligentTieringConfiguration(e,t,n){const i=new wu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketInventoryConfiguration(e,t,n){const i=new Su(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketLifecycleConfiguration(e,t,n){const i=new Eu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketLogging(e,t,n){const i=new _u(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketMetricsConfiguration(e,t,n){const i=new Cu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketNotificationConfiguration(e,t,n){const i=new Pu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketOwnershipControls(e,t,n){const i=new Mu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketPolicy(e,t,n){const i=new Tu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketReplication(e,t,n){const i=new Au(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketRequestPayment(e,t,n){const i=new Iu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketTagging(e,t,n){const i=new Ru(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketVersioning(e,t,n){const i=new ku(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putBucketWebsite(e,t,n){const i=new Lu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObject(e,t,n){const i=new Bu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObjectAcl(e,t,n){const i=new Nu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObjectLegalHold(e,t,n){const i=new Du(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObjectLockConfiguration(e,t,n){const i=new Ou(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObjectRetention(e,t,n){const i=new Fu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putObjectTagging(e,t,n){const i=new zu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putPublicAccessBlock(e,t,n){const i=new Uu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}restoreObject(e,t,n){const i=new Hu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}selectObjectContent(e,t,n){const i=new ju(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}uploadPart(e,t,n){const i=new Gu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}uploadPartCopy(e,t,n){const i=new Vu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}writeGetObjectResponse(e,t,n){const i=new Wu(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof n)return this.send(i,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}}const $m=async(e,t,...n)=>await e.send(new pu(t),...n),Xm=async(e,t,...n)=>await e.listObjectsV2(t,...n);async function*Zm(e,t,...n){let i,r=e.startingToken||void 0,o=!0;for(;o;){if(t.ContinuationToken=r,t.MaxKeys=e.pageSize,e.client instanceof Km)i=await Xm(e.client,t,...n);else{if(!(e.client instanceof Ym))throw new Error("Invalid client, expected S3 | S3Client");i=await $m(e.client,t,...n)}yield i;const a=r;r=i.NextContinuationToken,o=!(!r||e.stopOnSameToken&&r===a)}}const Jm=async(e,t,...n)=>await e.send(new fu(t),...n),Qm=async(e,t,...n)=>await e.listParts(t,...n);async function*ef(e,t,...n){let i,r=e.startingToken||void 0,o=!0;for(;o;){if(t.PartNumberMarker=r,t.MaxParts=e.pageSize,e.client instanceof Km)i=await Qm(e.client,t,...n);else{if(!(e.client instanceof Ym))throw new Error("Invalid client, expected S3 | S3Client");i=await Jm(e.client,t,...n)}yield i;const a=r;r=i.NextPartNumberMarker,o=!(!r||e.stopOnSameToken&&r===a)}}const tf=e=>new Promise((t=>setTimeout(t,1e3*e))),nf={minDelay:2,maxDelay:120};var rf;!function(e){e.ABORTED="ABORTED",e.FAILURE="FAILURE",e.SUCCESS="SUCCESS",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT"}(rf||(rf={}));const of=e=>{if(e.state===rf.ABORTED){const t=new Error(`${JSON.stringify({...e,reason:"Request was aborted"})}`);throw t.name="AbortError",t}if(e.state===rf.TIMEOUT){const t=new Error(`${JSON.stringify({...e,reason:"Waiter has timed out"})}`);throw t.name="TimeoutError",t}if(e.state!==rf.SUCCESS)throw new Error(`${JSON.stringify({result:e})}`);return e},af=(e,t,n,i)=>i>n?t:sf(e,e*2**(i-1)),sf=(e,t)=>e+Math.random()*(t-e),cf=async({minDelay:e,maxDelay:t,maxWaitTime:n,abortController:i,client:r,abortSignal:o},a,s)=>{const{state:c,reason:l}=await s(r,a);if(c!==rf.RETRY)return{state:c,reason:l};let u=1;const d=Date.now()+1e3*n,h=Math.log(t/e)/Math.log(2)+1;for(;;){if(i?.signal?.aborted||o?.aborted)return{state:rf.ABORTED};const n=af(e,t,h,u);if(Date.now()+1e3*n>d)return{state:rf.TIMEOUT};await tf(n);const{state:c,reason:l}=await s(r,a);if(c!==rf.RETRY)return{state:c,reason:l};u+=1}},lf=async e=>new Promise((t=>{e.onabort=()=>t({state:rf.ABORTED})})),uf=async(e,t,n)=>{const i={...nf,...e};(e=>{if(e.maxWaitTime<1)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(e.minDelay<1)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(e.maxDelay<1)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(e.maxWaitTime<=e.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${e.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`);if(e.maxDelay<e.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${e.maxDelay}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`)})(i);const r=[cf(i,t,n)];return e.abortController&&r.push(lf(e.abortController.signal)),e.abortSignal&&r.push(lf(e.abortSignal)),Promise.race(r)},df=async(e,t)=>{let n;try{return n=await e.send(new ru(t)),{state:rf.SUCCESS,reason:n}}catch(e){if(n=e,e.name&&"NotFound"==e.name)return{state:rf.RETRY,reason:n}}return{state:rf.RETRY,reason:n}},hf=async(e,t)=>uf({minDelay:5,maxDelay:120,...e},t,df),pf=async(e,t)=>{const n=await uf({minDelay:5,maxDelay:120,...e},t,df);return of(n)},mf=async(e,t)=>{let n;try{n=await e.send(new ru(t))}catch(e){if(n=e,e.name&&"NotFound"==e.name)return{state:rf.SUCCESS,reason:n}}return{state:rf.RETRY,reason:n}},ff=async(e,t)=>uf({minDelay:5,maxDelay:120,...e},t,mf),gf=async(e,t)=>{const n=await uf({minDelay:5,maxDelay:120,...e},t,mf);return of(n)},yf=async(e,t)=>{let n;try{return n=await e.send(new ou(t)),{state:rf.SUCCESS,reason:n}}catch(e){if(n=e,e.name&&"NotFound"==e.name)return{state:rf.RETRY,reason:n}}return{state:rf.RETRY,reason:n}},vf=async(e,t)=>uf({minDelay:5,maxDelay:120,...e},t,yf),bf=async(e,t)=>{const n=await uf({minDelay:5,maxDelay:120,...e},t,yf);return of(n)},xf=async(e,t)=>{let n;try{n=await e.send(new ou(t))}catch(e){if(n=e,e.name&&"NotFound"==e.name)return{state:rf.SUCCESS,reason:n}}return{state:rf.RETRY,reason:n}},wf=async(e,t)=>uf({minDelay:5,maxDelay:120,...e},t,xf),Sf=async(e,t)=>{const n=await uf({minDelay:5,maxDelay:120,...e},t,xf);return of(n)}},8876:(e,t,n)=>{"use strict";var i;n.d(t,{JY:()=>r,Fh:()=>o,Xb:()=>c}),function(e){e.ENV="env",e.CONFIG="shared config entry"}(i||(i={}));const r=!1,o=!1,a=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),s=e=>a(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,c=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return s(t);const e=await t();return s(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!a(e)||("function"!=typeof n?Promise.resolve(!!n):n())}}}},1102:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromCognitoIdentity:()=>a,fromCognitoIdentityPool:()=>f});var i=n(6029),r=n(6037);function o(e){return Promise.all(Object.keys(e).reduce(((t,n)=>{const i=e[n];return"string"==typeof i?t.push([n,i]):t.push(i().then((e=>[n,e]))),t}),[])).then((e=>e.reduce(((e,[t,n])=>(e[t]=n,e)),{})))}function a(e){return async()=>{const{Credentials:{AccessKeyId:t=s(),Expiration:n,SecretKey:r=l(),SessionToken:a}=c()}=await e.client.send(new i.L({CustomRoleArn:e.customRoleArn,IdentityId:e.identityId,Logins:e.logins?await o(e.logins):void 0}));return{identityId:e.identityId,accessKeyId:t,secretAccessKey:r,sessionToken:a,expiration:n}}}function s(){throw new r.mV("Response from Amazon Cognito contained no access key ID")}function c(){throw new r.mV("Response from Amazon Cognito contained no credentials")}function l(){throw new r.mV("Response from Amazon Cognito contained no secret key")}var u=n(376);const d="IdentityIds";class h{constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",(t=>{const n=t.get(e);return new Promise((e=>{n.onerror=()=>e(null),n.onsuccess=()=>e(n.result?n.result.value:null)}))})).catch((()=>null))}removeItem(e){return this.withObjectStore("readwrite",(t=>{const n=t.delete(e);return new Promise(((e,t)=>{n.onerror=()=>t(n.error),n.onsuccess=()=>e()}))}))}setItem(e,t){return this.withObjectStore("readwrite",(n=>{const i=n.put({id:e,value:t});return new Promise(((e,t)=>{i.onerror=()=>t(i.error),i.onsuccess=()=>e()}))}))}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise(((t,n)=>{e.onsuccess=()=>{t(e.result)},e.onerror=()=>{n(e.error)},e.onblocked=()=>{n(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const t=e.result;t.onerror=()=>{n(new Error("Failed to create object store"))},t.createObjectStore(d,{keyPath:"id"})}}))}withObjectStore(e,t){return this.getDb().then((n=>{const i=n.transaction(d,e);return i.oncomplete=()=>n.close(),new Promise(((e,n)=>{i.onerror=()=>n(i.error),e(t(i.objectStore(d)))})).catch((e=>{throw n.close(),e}))}))}}const p=new class{constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,t){this.store[e]=t}};function m(){return"object"==typeof self&&self.indexedDB?new h:"object"==typeof window&&window.localStorage?window.localStorage:p}function f({accountId:e,cache:t=m(),client:n,customRoleArn:i,identityPoolId:r,logins:s,userIdentifier:c=(s&&0!==Object.keys(s).length?void 0:"ANONYMOUS")}){const l=c?`aws:cognito-identity-credentials:${r}:${c}`:void 0;let d=async()=>{let c=l&&await t.getItem(l);if(!c){const{IdentityId:i=g()}=await n.send(new u.n({AccountId:e,IdentityPoolId:r,Logins:s?await o(s):void 0}));c=i,l&&Promise.resolve(t.setItem(l,c)).catch((()=>{}))}return d=a({client:n,customRoleArn:i,logins:s,identityId:c}),d()};return()=>d().catch((async e=>{throw l&&Promise.resolve(t.removeItem(l)).catch((()=>{})),e}))}function g(){throw new r.mV("Response from Amazon Cognito contained no identity ID")}},6582:(e,t,n)=>{"use strict";n.d(t,{B:()=>a,C:()=>c});var i=n(8589),r=n(6528);function o(e=0){return new Promise(((t,n)=>{e&&setTimeout((()=>{const t=new Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",n(t)}),e)}))}class a{constructor(e){"function"==typeof e?this.configProvider=e().then((e=>e||{})):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout;if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let a=e.path;if(e.query){const t=function(e){const t=[];for(let n of Object.keys(e).sort()){const i=e[n];if(n=(0,r.i)(n),Array.isArray(i))for(let e=0,o=i.length;e<o;e++)t.push(`${n}=${(0,r.i)(i[e])}`);else{let e=n;(i||"string"==typeof i)&&(e+=`=${(0,r.i)(i)}`),t.push(e)}}return t.join("&")}(e.query);t&&(a+=`?${t}`)}const{port:s,method:c}=e,l=`${e.protocol}//${e.hostname}${s?`:${s}`:""}${a}`,u={body:"GET"===c||"HEAD"===c?void 0:e.body,headers:new Headers(e.headers),method:c};"undefined"!=typeof AbortController&&(u.signal=t);const d=new Request(l,u),h=[fetch(d).then((e=>{const t=e.headers,n={};for(const e of t.entries())n[e[0]]=e[1];return void 0!==e.body?{response:new i.Zn({headers:n,statusCode:e.status,body:e.body})}:e.blob().then((t=>({response:new i.Zn({headers:n,statusCode:e.status,body:t})})))})),o(n)];return t&&h.push(new Promise(((e,n)=>{t.onabort=()=>{const e=new Error("Request aborted");e.name="AbortError",n(e)}}))),Promise.race(h)}}var s=n(7849);const c=e=>"function"==typeof Blob&&e instanceof Blob?async function(e){const t=await function(e){return new Promise(((t,n)=>{const i=new FileReader;i.onloadend=()=>{if(2!==i.readyState)return n(new Error("Reader aborted too early"));const e=i.result??"",r=e.indexOf(","),o=r>-1?r+1:e.length;t(e.substring(o))},i.onabort=()=>n(new Error("Read aborted")),i.onerror=()=>n(i.error),i.readAsDataURL(e)}))}(e),n=(0,s.G)(t);return new Uint8Array(n)}(e):async function(e){let t=new Uint8Array(0);const n=e.getReader();let i=!1;for(;!i;){const{done:e,value:r}=await n.read();if(r){const e=t;t=new Uint8Array(e.length+r.length),t.set(e),t.set(r,e.length)}i=e}return t}(e)},871:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});const i=e=>()=>Promise.reject(e)},323:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});const i=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},7085:(e,t,n)=>{"use strict";n.d(t,{VG:()=>a});var i=n(8589);const r="content-length",o={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},a=e=>({applyToStack:t=>{var n;t.add((n=e.bodyLengthChecker,e=>async t=>{const o=t.request;if(i.aW.isInstance(o)){const{body:e,headers:t}=o;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(r))try{const t=n(e);o.headers={...o.headers,[r]:String(t)}}catch(e){}}return e({...t,request:o})}),o)}})},4618:(e,t,n)=>{"use strict";n.d(t,{a3:()=>u,uW:()=>p});var i=n(8493);const r=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,o=/(\d+\.){3}\d+/,a=/\.\./,s=(e,t,n)=>{const i=async()=>{const i=n[e]??n[t];return"function"==typeof i?i():i};return"endpoint"===e||"endpoint"===t?async()=>{const e=await i();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:i,path:r}=e;return`${t}//${n}${i?":"+i:""}${r}`}}return e}:i},c=async(e,t,n)=>{const i={},c=t?.getEndpointParameterInstructions?.()||{};for(const[t,r]of Object.entries(c))switch(r.type){case"staticContextParams":i[t]=r.value;break;case"contextParams":i[t]=e[r.name];break;case"clientContextParams":case"builtInParams":i[t]=await s(r.name,t,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(r))}return 0===Object.keys(c).length&&Object.assign(i,n),"s3"===String(n.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,n,i,r,o,a]=e.split(":"),s="arn"===t&&e.split(":").length>=6,c=5===[t,n,i,o,a].filter(Boolean).length;if(s&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return!!("arn"===t&&n&&i&&o&&a)})(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else n=t,(!r.test(n)||o.test(n)||a.test(n)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);var n;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(i),i},l={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:i.JK.name},u=(e,t)=>({applyToStack:n=>{n.addRelativeTo((({config:e,instructions:t})=>(n,i)=>async r=>{const o=await(async(e,t,n,i)=>{const r=await c(e,t,n);if("function"!=typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,i)})(r.input,{getEndpointParameterInstructions:()=>t},{...e},i);i.endpointV2=o,i.authSchemes=o.properties?.authSchemes;const a=i.authSchemes?.[0];return a&&(i.signing_region=a.signingRegion,i.signing_service=a.signingName),n({...r})})({config:e,instructions:t}),l)}});var d=n(7079),h=n(6795);const p=e=>{const t=e.tls??!0,{endpoint:n}=e,i=null!=n?async()=>(e=>"object"==typeof e?"url"in e?(0,h.e)(e.url):e:(0,h.e)(e))(await(0,d.$)(n)()):void 0,r=!!n;return{...e,endpoint:i,tls:t,isCustomEndpoint:r,useDualstackEndpoint:(0,d.$)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,d.$)(e.useFipsEndpoint??!1)}}},6848:(e,t,n)=>{"use strict";n.d(t,{S8:()=>r,G2:()=>a});var i=n(8589);function r(e){return e}const o={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},a=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{if(!i.aW.isInstance(n.request))return t(n);const{request:r}=n,{handlerProtocol:o=""}=e.requestHandler.metadata||{};return o.indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),t(n)})(e),o)}})},2831:(e,t,n)=>{"use strict";n.d(t,{cV:()=>r});const i={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},r=e=>({applyToStack:e=>{e.add(((e,t)=>async n=>{const i=await e(n),{clientName:r,commandName:o,logger:a,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:d}=l;if(!a)return i;if("function"==typeof a.info){const{$metadata:e,...t}=i.output;a.info({clientName:r,commandName:o,input:(u??s)(n.input),output:(d??c)(t),metadata:e})}return i}),i)}})},1769:(e,t,n)=>{"use strict";n.d(t,{eV:()=>o});var i=n(8589);const r={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},o=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{const{request:r}=n;if(!i.aW.isInstance(r)||"node"!==e.runtime||r.headers.hasOwnProperty("X-Amzn-Trace-Id"))return t(n);const o=process.env.AWS_LAMBDA_FUNCTION_NAME,a=process.env._X_AMZN_TRACE_ID,s=e=>"string"==typeof e&&e.length>0;return s(o)&&s(a)&&(r.headers["X-Amzn-Trace-Id"]=a),t({...n,request:r})})(e),r)}})},9196:(e,t,n)=>{"use strict";n.d(t,{NQ:()=>b,BC:()=>a});var i=n(2677),r=n(8589),o=n(7079);i.J;const a=e=>{const{retryStrategy:t}=e,n=(0,o.$)(e.maxAttempts??i.J);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await(0,o.$)(e.retryMode)()===i.Ul.ADAPTIVE?new i.AY(n):new i.Uz(n))}};i.CA;var s,c=n(8971),l=new Uint8Array(16);function u(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(l)}const d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h=function(e){return"string"==typeof e&&d.test(e)};for(var p=[],m=0;m<256;++m)p.push((m+256).toString(16).substr(1));const f=function(e,t,n){var i=(e=e||{}).random||(e.rng||u)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n}(i)},g=e=>{const t={errorType:y(e)},n=x(e.$response);return n&&(t.retryAfterHint=n),t},y=e=>(0,c.pK)(e)?"THROTTLING":(0,c.iH)(e)?"TRANSIENT":(0,c.o7)(e)?"SERVER_ERROR":"CLIENT_ERROR",v={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},b=e=>({applyToStack:t=>{t.add((e=>(t,n)=>async o=>{let a=await e.retryStrategy();const s=await e.maxAttempts();if(!(e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess)(a))return a=a,a?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",a.mode]]),a.retry(t,o);{a=a;let e=await a.acquireInitialRetryToken(n.partition_id),l=new Error,u=0,d=0;const{request:h}=o;for(r.aW.isInstance(h)&&(h.headers[i.lk]=f());;)try{r.aW.isInstance(h)&&(h.headers[i.r5]=`attempt=${u+1}; max=${s}`);const{response:n,output:c}=await t(o);return a.recordSuccess(e),c.$metadata.attempts=u+1,c.$metadata.totalRetryDelay=d,{response:n,output:c}}catch(t){const n=g(t);l=(c=t)instanceof Error?c:c instanceof Object?Object.assign(new Error,c):"string"==typeof c?new Error(c):new Error(`AWS SDK error wrapper for ${c}`);try{e=await a.refreshRetryTokenForRetry(e,n)}catch(e){throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=u+1,l.$metadata.totalRetryDelay=d,l}u=e.getRetryCount();const i=e.getRetryDelay();d+=i,await new Promise((e=>setTimeout(e,i)))}}var c})(e),v)}}),x=e=>{if(!r.Zn.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],i=Number(n);return Number.isNaN(i)?new Date(n):new Date(1e3*i)}},8493:(e,t,n)=>{"use strict";n.d(t,{p2:()=>o,JK:()=>r});const i={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},r={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function o(e,t,n){return{applyToStack:o=>{o.add(((e,t)=>(n,i)=>async i=>{const{response:r}=await n(i);try{return{response:r,output:await t(r,e)}}catch(e){throw Object.defineProperty(e,"$response",{value:r}),e}})(e,n),i),o.add(((e,t)=>(n,i)=>async r=>{const o=i.endpointV2?.url&&e.urlParser?async()=>e.urlParser(i.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const a=await t(r.input,{...e,endpoint:o});return n({...r,request:a})})(e,t),r)}}}},7463:(e,t,n)=>{"use strict";n.d(t,{yt:()=>p,A$:()=>a});var i=n(6037),r=n(2801),o=n(7079);const a=e=>{const t=e.credentials?s(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:a}=e;let c;return c=e.signer?(0,o.$)(e.signer):e.regionInfoProvider?()=>(0,o.$)(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([i,o])=>{const{signingRegion:s,signingService:c}=i;e.signingRegion=e.signingRegion||s||o,e.signingName=e.signingName||c||e.serviceId;const l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:n};return new(e.signerConstructor||r.L1)(l)})):async i=>{const s=(i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,o.$)(e.region)(),properties:{}},i)).signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||s,e.signingName=e.signingName||c||e.serviceId;const l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:n};return new(e.signerConstructor||r.L1)(l)},{...e,systemClockOffset:i,signingEscapePath:n,credentials:t,signer:c}},s=e=>"function"==typeof e?(0,i.HP)(e,(e=>void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5),(e=>void 0!==e.expiration)):(0,o.$)(e);var c=n(8589);const l=e=>new Date(Date.now()+e),u=(e,t)=>{const n=Date.parse(e);return((e,t)=>Math.abs(l(t).getTime()-e)>=3e5)(n,t)?n-Date.now():t},d=e=>c.Zn.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,h={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},p=e=>({applyToStack:t=>{t.addRelativeTo((e=>(t,n)=>async function(i){if(!c.aW.isInstance(i.request))return t(i);const r=n.endpointV2?.properties?.authSchemes?.[0],o="sigv4a"===r?.name?r?.signingRegionSet?.join(","):void 0,a=await e.signer(r),s=await t({...i,request:await a.sign(i.request,{signingDate:l(e.systemClockOffset),signingRegion:o||n.signing_region,signingService:n.signing_service})}).catch((t=>{const n=t.ServerTime??d(t.$response);throw n&&(e.systemClockOffset=u(n,e.systemClockOffset)),t})),h=d(s.response);return h&&(e.systemClockOffset=u(h,e.systemClockOffset)),s})(e),h)}})},6835:(e,t,n)=>{"use strict";function i(e){return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent}}n.d(t,{XJ:()=>u,er:()=>i});var r=n(8589);const o="user-agent",a="x-amz-user-agent",s=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,c=([e,t])=>{const n=e.indexOf("/"),i=e.substring(0,n);let r=e.substring(n+1);return"api"===i&&(r=r.toLowerCase()),[i,r,t].filter((e=>e&&e.length>0)).map((e=>e?.replace(s,"_"))).join("/")},l={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},u=e=>({applyToStack:t=>{var n;t.add((n=e,(e,t)=>async i=>{const{request:s}=i;if(!r.aW.isInstance(s))return e(i);const{headers:l}=s,u=t?.userAgent?.map(c)||[],d=(await n.defaultUserAgentProvider()).map(c),h=n?.customUserAgent?.map(c)||[],p=[...d,...u,...h].join(" "),m=[...d.filter((e=>e.startsWith("aws-sdk-"))),...h].join(" ");return"browser"!==n.runtime?(m&&(l[a]=l[a]?`${l[o]} ${m}`:m),l[o]=p):l[a]=p,e({...i,request:s})}),l)}})},6037:(e,t,n)=>{"use strict";n.d(t,{mV:()=>r,HP:()=>o});class i extends Error{constructor(e,t=!0){super(e),this.tryNextLink=t,this.name="ProviderError",Object.setPrototypeOf(this,i.prototype)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class r extends i{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="CredentialsProviderError",Object.setPrototypeOf(this,r.prototype)}}const o=(e,t,n)=>{let i,r,o,a=!1;const s=async()=>{r||(r=e());try{i=await r,o=!0,a=!1}finally{r=void 0}return i};return void 0===t?async e=>(o&&!e?.forceRefresh||(i=await s()),i):async e=>(o&&!e?.forceRefresh||(i=await s()),a?i:n&&!n(i)?(a=!0,i):t(i)?(await s(),i):i)}},8589:(e,t,n)=>{"use strict";var i,r;n.d(t,{aW:()=>o,Zn:()=>a,Lb:()=>s}),(r=i||(i={}))[r.HEADER=0]="HEADER",r[r.TRAILER=1]="TRAILER";class o{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){const e=new o({...this,headers:{...this.headers}});var t;return e.query&&(e.query=(t=e.query,Object.keys(t).reduce(((e,n)=>{const i=t[n];return{...e,[n]:Array.isArray(i)?[...i]:i}}),{}))),e}}class a{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}function s(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}},8971:(e,t,n)=>{"use strict";n.d(t,{o7:()=>l,pK:()=>s,iH:()=>c});const i=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],r=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],o=[500,502,503,504],a=["ECONNRESET","EPIPE","ETIMEDOUT"],s=e=>429===e.$metadata?.httpStatusCode||i.includes(e.name)||1==e.$retryable?.throttling,c=e=>r.includes(e.name)||a.includes(e?.code||"")||o.includes(e.$metadata?.httpStatusCode||0),l=e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!c(e)}return!1}},2801:(e,t,n)=>{"use strict";n.d(t,{L1:()=>T});var i=n(3538),r=n(7079),o=n(916);const a="X-Amz-Security-Token",s="authorization",c="X-Amz-Date".toLowerCase(),l=[s,c,"date"],u="X-Amz-Signature".toLowerCase(),d="x-amz-content-sha256",h=a.toLowerCase(),p={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},m=/^proxy-/,f=/^sec-/,g="AWS4-HMAC-SHA256-PAYLOAD",y={},v=[],b=(e,t,n)=>`${e}/${t}/${n}/aws4_request`,x=(e,t,n)=>{const i=new e(t);return i.update((0,o._)(n)),i.digest()},w=({headers:e},t,n)=>{const i={};for(const r of Object.keys(e).sort()){if(null==e[r])continue;const o=r.toLowerCase();(o in p||t?.has(o)||m.test(o)||f.test(o))&&(!n||n&&!n.has(o))||(i[o]=e[r].trim().replace(/\s+/g," "))}return i};var S=n(6528),E=n(323);const _=async({headers:e,body:t},n)=>{for(const t of Object.keys(e))if(t.toLowerCase()===d)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,E.e)(t)){const e=new n;return e.update((0,o._)(t)),(0,i.N)(await e.digest())}return"UNSIGNED-PAYLOAD"},C=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?P(t):void 0}),P=e=>Object.keys(e).reduce(((t,n)=>{const i=e[n];return{...t,[n]:Array.isArray(i)?[...i]:i}}),{}),M=e=>{e="function"==typeof e.clone?e.clone():C(e);for(const t of Object.keys(e.headers))l.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};class T{constructor({applyChecksum:e,credentials:t,region:n,service:i,sha256:o,uriEscapePath:a=!0}){this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,r.$)(n),this.credentialProvider=(0,r.$)(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:r,unhoistableHeaders:o,signableHeaders:s,signingRegion:c,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);const d=c??await this.regionProvider(),{longDate:h,shortDate:p}=A(n);if(i>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=b(p,d,l??this.service),f=((e,t={})=>{const{headers:n,query:i={}}="function"==typeof e.clone?e.clone():C(e);for(const e of Object.keys(n)){const r=e.toLowerCase();"x-amz-"!==r.slice(0,6)||t.unhoistableHeaders?.has(r)||(i[e]=n[e],delete n[e])}return{...e,headers:n,query:i}})(M(e),{unhoistableHeaders:o});u.sessionToken&&(f.query[a]=u.sessionToken),f.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",f.query["X-Amz-Credential"]=`${u.accessKeyId}/${m}`,f.query["X-Amz-Date"]=h,f.query["X-Amz-Expires"]=i.toString(10);const g=w(f,r,s);return f.query["X-Amz-SignedHeaders"]=I(g),f.query["X-Amz-Signature"]=await this.getSignature(h,m,this.getSigningKey(u,d,p,l),this.createCanonicalRequest(f,g,await _(e,this.sha256))),f}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:r,signingRegion:o,signingService:a}){const s=o??await this.regionProvider(),{shortDate:c,longDate:l}=A(n),u=b(c,s,a??this.service),d=await _({headers:{},body:t},this.sha256),h=new this.sha256;h.update(e);const p=(0,i.N)(await h.digest()),m=[g,l,u,r,p,d].join("\n");return this.signString(m,{signingDate:n,signingRegion:s,signingService:a})}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:r}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const s=n??await this.regionProvider(),{shortDate:c}=A(t),l=new this.sha256(await this.getSigningKey(a,s,c,r));return l.update((0,o._)(e)),(0,i.N)(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:r,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const l=r??await this.regionProvider(),u=M(e),{longDate:p,shortDate:m}=A(t),f=b(m,l,o??this.service);u.headers[c]=p,a.sessionToken&&(u.headers[h]=a.sessionToken);const g=await _(u,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1})(d,u.headers)&&this.applyChecksum&&(u.headers[d]=g);const y=w(u,i,n),v=await this.getSignature(p,f,this.getSigningKey(a,l,m,o),this.createCanonicalRequest(u,y,g));return u.headers[s]=`AWS4-HMAC-SHA256 Credential=${a.accessKeyId}/${f}, SignedHeaders=${I(y)}, Signature=${v}`,u}createCanonicalRequest(e,t,n){const i=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],n={};for(const i of Object.keys(e).sort()){if(i.toLowerCase()===u)continue;t.push(i);const r=e[i];"string"==typeof r?n[i]=`${(0,S.i)(i)}=${(0,S.i)(r)}`:Array.isArray(r)&&(n[i]=r.slice(0).sort().reduce(((e,t)=>e.concat([`${(0,S.i)(i)}=${(0,S.i)(t)}`])),[]).join("&"))}return t.map((e=>n[e])).filter((e=>e)).join("&")})(e)}\n${i.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${i.join(";")}\n${n}`}async createStringToSign(e,t,n){const r=new this.sha256;r.update((0,o._)(n));const a=await r.digest();return`AWS4-HMAC-SHA256\n${e}\n${t}\n${(0,i.N)(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const n of e.split("/"))0!==n?.length&&"."!==n&&(".."===n?t.pop():t.push(n));const n=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,t,n,r){const a=await this.createStringToSign(e,t,r),s=new this.sha256(await n);return s.update((0,o._)(a)),(0,i.N)(await s.digest())}getSigningKey(e,t,n,r){return(async(e,t,n,r,o)=>{const a=await x(e,t.secretAccessKey,t.accessKeyId),s=`${n}:${r}:${o}:${(0,i.N)(a)}:${t.sessionToken}`;if(s in y)return y[s];for(v.push(s);v.length>50;)delete y[v.shift()];let c=`AWS4${t.secretAccessKey}`;for(const t of[n,r,o,"aws4_request"])c=await x(e,c,t);return y[s]=c})(this.sha256,e,n,t,r||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const A=e=>{const t=(n=e,(e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e)(n).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var n;return{longDate:t,shortDate:t.slice(0,8)}},I=e=>Object.keys(e).sort().join(";")},360:(e,t,n)=>{"use strict";n.d(t,{KU:()=>s,mY:()=>c,vk:()=>i,oc:()=>l,sI:()=>$,_w:()=>I,to:()=>X,zE:()=>d,CE:()=>y,Fx:()=>h,Wh:()=>v,pY:()=>b,$I:()=>x,L:()=>ee,sT:()=>te,jv:()=>Q,UI:()=>ie,gx:()=>u,KX:()=>O,aH:()=>k,oT:()=>D,Is:()=>ae,AF:()=>_,NK:()=>E,oR:()=>Z});class i{trace(){}debug(){}info(){}warn(){}error(){}}const r=()=>{let e=[],t=[];const n=new Set,i=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n),s=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...s(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...s(e))})),t},c=(n=!1)=>{const i=[],r=[],c={};var l;return e.forEach((e=>{const t={...e,before:[],after:[]};t.name&&(c[t.name]=t),i.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};t.name&&(c[t.name]=t),r.push(t)})),r.forEach((e=>{if(e.toMiddleware){const t=c[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${e.name||"anonymous"} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(l=i,l.sort(((e,t)=>o[t.step]-o[e.step]||a[t.priority||"normal"]-a[e.priority||"normal"]))).map(s).reduce(((e,t)=>(e.push(...t),e)),[])},l={add:(t,i={})=>{const{name:r,override:o}=i,a={step:"initialize",priority:"normal",middleware:t,...i};if(r){if(n.has(r)){if(!o)throw new Error(`Duplicate middleware name '${r}'`);const t=e.findIndex((e=>e.name===r)),n=e[t];if(n.step!==a.step||n.priority!==a.priority)throw new Error(`"${r}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by same-name middleware with ${a.priority} priority in ${a.step} step.`);e.splice(t,1)}n.add(r)}e.push(a)},addRelativeTo:(e,i)=>{const{name:r,override:o}=i,a={middleware:e,...i};if(r){if(n.has(r)){if(!o)throw new Error(`Duplicate middleware name '${r}'`);const e=t.findIndex((e=>e.name===r)),n=t[e];if(n.toMiddleware!==a.toMiddleware||n.relation!==a.relation)throw new Error(`"${r}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by same-name middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(e,1)}n.add(r)}t.push(a)},clone:()=>i(r()),use:e=>{e.applyToStack(l)},remove:i=>"string"==typeof i?(i=>{let r=!1;const o=e=>!e.name||e.name!==i||(r=!0,n.delete(i),!1);return e=e.filter(o),t=t.filter(o),r})(i):(i=>{let r=!1;const o=e=>e.middleware!==i||(r=!0,e.name&&n.delete(e.name),!1);return e=e.filter(o),t=t.filter(o),r})(i),removeByTag:i=>{let r=!1;const o=e=>{const{tags:t,name:o}=e;return!t||!t.includes(i)||(o&&n.delete(o),r=!0,!1)};return e=e.filter(o),t=t.filter(o),r},concat:e=>{const t=i(r());return t.use(e),t},applyToStack:i,identify:()=>c(!0).map((e=>e.name+": "+(e.tags||[]).join(","))),resolve:(e,t)=>{for(const n of c().map((e=>e.middleware)).reverse())e=n(e,t);return e}};return l},o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1};class s{constructor(e){this.middlewareStack=r(),this.config=e}send(e,t,n){const i="function"!=typeof t?t:void 0,r="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,i);if(!r)return o(e).then((e=>e.output));o(e).then((e=>r(null,e.output)),(e=>r(e))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}class c{constructor(){this.middlewareStack=r()}}const l="***SensitiveInformation***",u=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},d=e=>{if(null!=e){if("number"==typeof e){if(0!==e&&1!==e||M.warn(P(`Expected boolean, got ${typeof e}: ${e}`)),0===e)return!1;if(1===e)return!0}if("string"==typeof e){const t=e.toLowerCase();if("false"!==t&&"true"!==t||M.warn(P(`Expected boolean, got ${typeof e}: ${e}`)),"false"===t)return!1;if("true"===t)return!0}if("boolean"==typeof e)return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},h=e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&M.warn(P(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},p=Math.ceil(2**127*(2-2**-23)),m=e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},f=(e,t)=>{const n=m(e);if(void 0!==n&&g(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},g=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},y=(e,t)=>{if(null==e){if(t)throw new TypeError(`Expected a non-null value for ${t}`);throw new TypeError("Expected a non-null value")}return e},v=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},b=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return M.warn(P(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},x=e=>{if(null==e)return;const t=v(e),n=Object.entries(t).filter((([,e])=>null!=e)).map((([e])=>e));if(0===n.length)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},w=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,S=e=>{const t=e.match(w);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},E=e=>m("string"==typeof e?S(e):e),_=e=>(e=>f(e,32))("string"==typeof e?S(e):e),C=e=>(e=>f(e,16))("string"==typeof e?S(e):e),P=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),M={warn:console.warn},T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),i=e.getUTCDay(),r=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,l=a<10?`0${a}`:`${a}`,u=s<10?`0${s}`:`${s}`;return`${T[i]}, ${r<10?`0${r}`:`${r}`} ${A[n]} ${t} ${c}:${l}:${u} GMT`}const R=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),k=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=R.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,i,r,o,a,s,c,l,u]=t,d=C(K(i)),h=W(r,"month",1,12),p=W(o,"day",1,31),m=F(d,h,p,{hours:a,minutes:s,seconds:c,fractionalMilliseconds:l});return"Z"!=u.toUpperCase()&&m.setTime(m.getTime()-Y(u)),m},L=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),N=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),B=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),D=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=L.exec(e);if(t){const[e,n,i,r,o,a,s,c]=t;return F(C(K(r)),H(i),W(n,"day",1,31),{hours:o,minutes:a,seconds:s,fractionalMilliseconds:c})}if(t=N.exec(e),t){const[e,n,i,r,o,a,s,c]=t;return U(F(z(r),H(i),W(n,"day",1,31),{hours:o,minutes:a,seconds:s,fractionalMilliseconds:c}))}if(t=B.exec(e),t){const[e,n,i,r,o,a,s,c]=t;return F(C(K(c)),H(n),W(i.trimLeft(),"day",1,31),{hours:r,minutes:o,seconds:a,fractionalMilliseconds:s})}throw new TypeError("Invalid RFC-7231 date-time value")},O=e=>{if(null==e)return;let t;if("number"==typeof e)t=e;else{if("string"!=typeof e)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");t=(e=>h("string"==typeof e?S(e):e))(e)}if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*t))},F=(e,t,n,i)=>{const r=t-1;return G(e,r,n),new Date(Date.UTC(e,r,n,W(i.hours,"hour",0,23),W(i.minutes,"minute",0,59),W(i.seconds,"seconds",0,60),q(i.fractionalMilliseconds)))},z=e=>{const t=(new Date).getUTCFullYear(),n=100*Math.floor(t/100)+C(K(e));return n<t?n+100:n},U=e=>e.getTime()-(new Date).getTime()>15768e8?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,H=e=>{const t=A.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},j=[31,28,31,30,31,30,31,31,30,31,30,31],G=(e,t,n)=>{let i=j[t];if(1===t&&V(e)&&(i=29),n>i)throw new TypeError(`Invalid day for ${A[t]} in ${e}: ${n}`)},V=e=>e%4==0&&(e%100!=0||e%400==0),W=(e,t,n,i)=>{const r=(e=>(e=>f(e,8))("string"==typeof e?S(e):e))(K(e));if(r<n||r>i)throw new TypeError(`${t} must be between ${n} and ${i}, inclusive`);return r},q=e=>null==e?0:1e3*(e=>(e=>{const t=h(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>p)throw new TypeError(`Expected 32-bit float, got ${e}`);return t})("string"==typeof e?S(e):e))("0."+e),Y=e=>{const t=e[0];let n=1;if("+"==t)n=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);n=-1}return n*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3},K=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class $ extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,$.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const X=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{null!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},Z=({output:e,parsedBody:t,exceptionCtor:n,errorCode:i})=>{const r=J(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,a=new n({name:t.code||t.Code||i||o||"UnknownError",$fault:"client",$metadata:r});throw X(a,t)},J=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Q=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},ee=e=>Array.isArray(e)?e:[e],te=e=>{for(const t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=te(e[t]));return e},ne=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};function ie(e,t,n){let i,r,o;if(void 0===t&&void 0===n)i={},o=e;else{if(i=e,"function"==typeof t)return r=t,o=n,re(i,r,o);o=t}for(const e of Object.keys(o)){if(!Array.isArray(o[e])){i[e]=o[e];continue}let[t,n]=o[e];if("function"==typeof n){let r;const o=void 0===t&&null!=(r=n()),a="function"==typeof t&&!!t(void 0)||"function"!=typeof t&&!!t;o?i[e]=r:a&&(i[e]=n())}else{const r=void 0===t&&null!=n,o="function"==typeof t&&!!t(n)||"function"!=typeof t&&!!t;(r||o)&&(i[e]=n)}}return i}ne.prototype=Object.create(String.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ne,String);const re=(e,t,n)=>ie(e,Object.entries(n).reduce(((e,[n,i])=>(Array.isArray(i)?e[n]=i:e[n]="function"==typeof i?[t,i()]:[t,i],e)),{}));function oe(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const ae=(e,t,n,i,r,o)=>{if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");{const t=i();if(t.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(r,o?t.split("/").map((e=>oe(e))).join("/"):oe(t))}return e}},6795:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});const i=e=>{if("string"==typeof e)return i(new URL(e));const{hostname:t,pathname:n,port:r,protocol:o,search:a}=e;let s;return a&&(s=function(e){const t={};if(e=e.replace(/^\?/,""))for(const n of e.split("&")){let[e,i=null]=n.split("=");e=decodeURIComponent(e),i&&(i=decodeURIComponent(i)),e in t?Array.isArray(t[e])?t[e].push(i):t[e]=[t[e],i]:t[e]=i}return t}(a)),{hostname:t,port:r?parseInt(r):void 0,protocol:o,path:n,query:s}}},7849:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,s:()=>a});const i={},r=new Array(64);for(let e=0,t="A".charCodeAt(0),n="Z".charCodeAt(0);e+t<=n;e++){const n=String.fromCharCode(e+t);i[n]=e,r[e]=n}for(let e=0,t="a".charCodeAt(0),n="z".charCodeAt(0);e+t<=n;e++){const n=String.fromCharCode(e+t),o=e+26;i[n]=o,r[o]=n}for(let e=0;e<10;e++){i[e.toString(10)]=e+52;const t=e.toString(10),n=e+52;i[t]=n,r[n]=t}i["+"]=62,r[62]="+",i["/"]=63,r[63]="/";const o=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;const n=new ArrayBuffer(t),r=new DataView(n);for(let t=0;t<e.length;t+=4){let n=0,o=0;for(let r=t,a=t+3;r<=a;r++)if("="!==e[r]){if(!(e[r]in i))throw new TypeError(`Invalid character ${e[r]} in base64 string.`);n|=i[e[r]]<<6*(a-r),o+=6}else n>>=6;const a=t/4*3;n>>=o%8;const s=Math.floor(o/8);for(let e=0;e<s;e++){const t=8*(s-e-1);r.setUint8(a+e,(n&255<<t)>>t)}}return new Uint8Array(n)};function a(e){let t="";for(let n=0;n<e.length;n+=3){let i=0,o=0;for(let t=n,r=Math.min(n+3,e.length);t<r;t++)i|=e[t]<<8*(r-t-1),o+=8;const a=Math.ceil(o/6);i<<=6*a-o;for(let e=1;e<=a;e++){const n=6*(a-e);t+=r[(i&63<<n)>>n]}t+="==".slice(0,4-a)}return t}},6524:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});const i=e=>{if("string"==typeof e){let t=e.length;for(let n=t-1;n>=0;n--){const i=e.charCodeAt(n);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&n--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error(`Body Length computation failed for ${e}`)}},2971:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var i=n(6037),r=n(1206),o=n.n(r);const a=["in-region","cross-region","mobile","standard","legacy"],s=({defaultsMode:e}={})=>(0,i.HP)((async()=>{const t="function"==typeof e?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(c()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${a.join(", ")}, got ${t}`)}})),c=()=>{const e=("undefined"!=typeof window&&window?.navigator?.userAgent?o().parse(window.navigator.userAgent):void 0)?.platform?.type;return"tablet"===e||"mobile"===e}},1729:(e,t,n)=>{"use strict";n.d(t,{B1:()=>G});var i={};n.r(i),n.d(i,{isVirtualHostableS3Bucket:()=>g,parseArn:()=>y,partition:()=>c});var r={};n.r(r),n.d(r,{aws:()=>i,booleanEquals:()=>v,getAttr:()=>b,isSet:()=>x,isValidHostLabel:()=>f,not:()=>w,parseURL:()=>P,stringEquals:()=>M,substring:()=>T,uriEncode:()=>A});const o=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}}],"version":"1.1"}'),{partitions:a}=o,s=a.find((e=>"aws"===e.id)),c=e=>{for(const t of a){const{regions:n,outputs:i}=t;for(const[t,r]of Object.entries(n))if(t===e)return{...i,...r}}for(const t of a){const{regionRegex:n,outputs:i}=t;if(new RegExp(n).test(e))return{...i}}if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},l="endpoints";function u(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${u(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(u).join(", ")})`:JSON.stringify(e,null,2)}class d extends Error{constructor(e){super(e),this.name="EndpointError"}}const h=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),p=e=>h.test(e)||e.startsWith("[")&&e.endsWith("]"),m=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),f=(e,t=!1)=>{if(!t)return m.test(e);const n=e.split(".");for(const e of n)if(!f(e))return!1;return!0},g=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!g(t))return!1;return!0}return!(!f(e)||e.length<3||e.length>63||e!==e.toLowerCase()||p(e))},y=e=>{const t=e.split(":");if(t.length<6)return null;const[n,i,r,o,a,...s]=t;return"arn"!==n||""===i||""===r||""===s[0]?null:{partition:i,service:r,region:o,accountId:a,resourceId:s[0].includes("/")?s[0].split("/"):s}},v=(e,t)=>e===t,b=(e,t)=>(e=>{const t=e.split("."),n=[];for(const i of t){const t=i.indexOf("[");if(-1!==t){if(i.indexOf("]")!==i.length-1)throw new d(`Path: '${e}' does not end with ']'`);const r=i.slice(t+1,-1);if(Number.isNaN(parseInt(r)))throw new d(`Invalid array index: '${r}' in path: '${e}'`);0!==t&&n.push(i.slice(0,t)),n.push(r)}else n.push(i)}return n})(t).reduce(((n,i)=>{if("object"!=typeof n)throw new d(`Index '${i}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(i)]:n[i]}),e),x=e=>null!=e,w=e=>!e;var S,E,_;!function(e){e.HEADER="header",e.QUERY="query"}(S||(S={})),function(e){e.AAAA="AAAA",e.A="A"}(E||(E={})),function(e){e.HTTP="http",e.HTTPS="https"}(_||(_={}));const C={[_.HTTP]:80,[_.HTTPS]:443},P=e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:i="",path:r="",query:o={}}=e,a=new URL(`${i}//${t}${n?`:${n}`:""}${r}`);return a.search=Object.entries(o).map((([e,t])=>`${e}=${t}`)).join("&"),a}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:i,hostname:r,pathname:o,protocol:a,search:s}=t;if(s)return null;const c=a.slice(0,-1);if(!Object.values(_).includes(c))return null;const l=p(r);return{scheme:c,authority:`${i}${n.includes(`${i}:${C[c]}`)||"string"==typeof e&&e.includes(`${i}:${C[c]}`)?`:${C[c]}`:""}`,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},M=(e,t)=>e===t,T=(e,t,n,i)=>t>=n||e.length<n?null:i?e.substring(e.length-n,e.length-t):e.substring(t,n),A=e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),I=(e,t)=>{const n=[],i={...t.endpointParams,...t.referenceRecord};let r=0;for(;r<e.length;){const t=e.indexOf("{",r);if(-1===t){n.push(e.slice(r));break}n.push(e.slice(r,t));const o=e.indexOf("}",t);if(-1===o){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(n.push(e.slice(t+1,o)),r=o+2);const a=e.substring(t+1,o);if(a.includes("#")){const[e,t]=a.split("#");n.push(b(i[e],t))}else n.push(i[a]);r=o+1}return n.join("")},R=(e,t,n)=>{if("string"==typeof e)return I(e,n);if(e.fn)return k(e,n);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,n);throw new d(`'${t}': ${String(e)} is not a string, function or reference.`)},k=({fn:e,argv:t},n)=>{const i=t.map((e=>["boolean","number"].includes(typeof e)?e:R(e,"arg",n)));return e.split(".").reduce(((e,t)=>e[t]),r)(...i)},L=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new d(`'${e}' is already defined in Reference Record.`);const i=k(t,n);return n.logger?.debug?.(l,`evaluateCondition: ${u(t)} = ${u(i)}`),{result:""===i||!!i,...null!=e&&{toAssign:{name:e,value:i}}}},N=(e=[],t)=>{const n={};for(const i of e){const{result:e,toAssign:r}=L(i,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};r&&(n[r.name]=r.value,t.logger?.debug?.(l,`assign: ${r.name} := ${u(r.value)}`))}return{result:!0,referenceRecord:n}},B=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>({...e,[n]:i.map((e=>{const i=R(e,"Header value entry",t);if("string"!=typeof i)throw new d(`Header '${n}' value '${i}' is not a string`);return i}))})),{}),D=(e,t)=>{if(Array.isArray(e))return e.map((e=>D(e,t)));switch(typeof e){case"string":return I(e,t);case"object":if(null===e)throw new d(`Unexpected endpoint property: ${e}`);return O(e,t);case"boolean":return e;default:throw new d("Unexpected endpoint property type: "+typeof e)}},O=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>({...e,[n]:D(i,t)})),{}),F=(e,t)=>{const n=R(e,"Endpoint URL",t);if("string"==typeof n)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new d("Endpoint URL must be a string, got "+typeof n)},z=(e,t)=>{const{conditions:n,endpoint:i}=e,{result:r,referenceRecord:o}=N(n,t);if(!r)return;const a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:s,properties:c,headers:d}=i;return t.logger?.debug?.(l,`Resolving endpoint from template: ${u(i)}`),{...null!=d&&{headers:B(d,a)},...null!=c&&{properties:O(c,a)},url:F(s,a)}},U=(e,t)=>{const{conditions:n,error:i}=e,{result:r,referenceRecord:o}=N(n,t);if(r)throw new d(R(i,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},H=(e,t)=>{const{conditions:n,rules:i}=e,{result:r,referenceRecord:o}=N(n,t);if(r)return j(i,{...t,referenceRecord:{...t.referenceRecord,...o}})},j=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=z(n,t);if(e)return e}else if("error"===n.type)U(n,t);else{if("tree"!==n.type)throw new d(`Unknown endpoint rule: ${n}`);{const e=H(n,t);if(e)return e}}throw new d("Rules evaluation failed")},G=(e,t)=>{const{endpointParams:n,logger:i}=t,{parameters:r,rules:o}=e;t.logger?.debug?.(l,`Initial EndpointParams: ${u(n)}`);const a=Object.entries(r).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(a.length>0)for(const[e,t]of a)n[e]=n[e]??t;const s=Object.entries(r).filter((([,e])=>e.required)).map((([e])=>e));for(const e of s)if(null==n[e])throw new d(`Missing required parameter: '${e}'`);const c=j(o,{endpointParams:n,logger:i,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{const e=new URL(t.endpointParams.Endpoint),{protocol:n,port:i}=e;c.url.protocol=n,c.url.port=i}catch(e){}return t.logger?.debug?.(l,`Resolved endpoint: ${u(c)}`),c}},3538:(e,t,n)=>{"use strict";n.d(t,{H:()=>o,N:()=>a});const i={},r={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),i[e]=t,r[t]=e}function o(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const i=e.slice(n,n+2).toLowerCase();if(!(i in r))throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`);t[n/2]=r[i]}return t}function a(e){let t="";for(let n=0;n<e.byteLength;n++)t+=i[e[n]];return t}},6495:(e,t,n)=>{"use strict";n.r(t),n.d(t,{locateWindow:()=>r});const i={};function r(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}},7079:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});const i=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t}},2677:(e,t,n)=>{"use strict";var i;n.d(t,{AY:()=>d,J:()=>r,CA:()=>o,lk:()=>c,r5:()=>l,Ul:()=>i,Uz:()=>u}),function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(i||(i={}));const r=3,o="STANDARD";var a=n(8971);class s{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),(0,a.pK)(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const c="amz-sdk-invocation-id",l="amz-sdk-request";class u{constructor(e){this.maxAttemptsProvider=e,this.mode=i.STANDARD,this.retryToken=((e,t,n,i)=>{const r=e,o=i?.retryCost??5,a=i?.timeoutRetryCost??10,s=i?.retryBackoffStrategy??(()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})();let c,l=e,u=Math.min(2e4,t),d=n??0;const h=e=>"TRANSIENT"===e?a:o,p=e=>h(e)<=l;return{getRetryCount:()=>d,getRetryDelay:()=>u,getLastRetryCost:()=>c,hasRetryTokens:p,getRetryTokenCount:e=>{const t=e.errorType;if(!p(t))throw new Error("No retry token available");const n=h(t),i="THROTTLING"===t?500:100;s.setDelayBase(i);const r=s.computeNextBackoffDelay(d);if(e.retryAfterHint){const t=e.retryAfterHint.getTime()-Date.now();u=Math.max(t||0,r)}else u=r;return d++,c=n,l-=n,n},releaseRetryTokens:e=>{l+=e??1,l=Math.min(l,r)}}})(500,100),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n))return e.getRetryTokenCount(t),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${r}`),r}}shouldRetry(e,t,n){return e.getRetryCount()<n&&e.hasRetryTokens(t.errorType)&&this.isRetryableError(t.errorType)}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class d{constructor(e,t){this.maxAttemptsProvider=e,this.mode=i.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new s,this.standardRetryStrategy=new u(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}},6528:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});const i=e=>encodeURIComponent(e).replace(/[!'()*]/g,r),r=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},7915:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var i=n(1206),r=n.n(i);const o=({serviceId:e,clientVersion:t})=>async()=>{const n="undefined"!=typeof window&&window?.navigator?.userAgent?r().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];return e&&i.push([`api/${e}`,t]),i}},2084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>i,toUtf8:()=>r});const i=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,i=e.length;n<i;n++){const i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){const r=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)})(e),r=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const r=e[++n];t+=String.fromCharCode((31&i)<<6|63&r)}else if(240<=i&&i<365){const r="%"+[i,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(r)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},2498:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});const i=e=>(new TextEncoder).encode(e)},916:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var i=n(2498);const r=e=>"string"==typeof e?(0,i.$)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)},6521:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});const i=e=>new TextDecoder("utf-8").decode(e)},1206:function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=n(18),r=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,i){void 0===i&&(i=!1);var r=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(r,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),i=t+new Array(n+1).join(".0");return e.map(i.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(i&&(s=a-Math.min(r,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)i.push(t(e[n]));return i},e.find=function(e,t){var n,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,i=e.length;n<i;n+=1){var r=e[n];if(t(r,n))return r}},e.assign=function(e){for(var t,n,i=e,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=r,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(91))&&i.__esModule?i:{default:i},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)},e.parse=function(e){return new r.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=c(n(92)),r=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},i=0,r={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(r[t]=a,o+=1):"object"==typeof a&&(n[t]=a,i+=1)})),i>0){var a=Object.keys(n),c=s.default.find(a,(function(e){return t.isOS(e)}));if(c){var l=this.satisfies(n[c]);if(void 0!==l)return l}var u=s.default.find(a,(function(e){return t.isPlatform(e)}));if(u){var d=this.satisfies(n[u]);if(void 0!==d)return d}}if(o>0){var h=Object.keys(r),p=s.default.find(h,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(r[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),r=s.default.getBrowserTypeByAlias(i);return t&&r&&(i=r.toLowerCase()),i===n},t.compareVersion=function(e){var t=[0],n=e,i=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(i=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(i=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(r,n,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(t,e),version:r.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=r.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=r.default.getMacOSVersionName(t),i={name:o.OS_MAP.MacOS,version:t};return n&&(i.versionName=n),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=r.default.getAndroidVersionName(t),i={name:o.OS_MAP.Android,version:t};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},6932:(e,t,n)=>{"use strict";const i=n(8501),r=n(8844),o=n(1192);e.exports={XMLParser:r,XMLValidator:i,XMLBuilder:o}},7604:(e,t)=>{"use strict";const n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const i=Object.keys(t),r=i.length;for(let o=0;o<r;o++)e[i[o]]="strict"===n?[t[i[o]]]:t[i[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){return!(null==i.exec(e))},t.getAllMatches=function(e,t){const n=[];let i=t.exec(e);for(;i;){const r=[];r.startIndex=t.lastIndex-i[0].length;const o=i.length;for(let e=0;e<o;e++)r.push(i[e]);n.push(r),i=t.exec(e)}return n},t.nameRegexp=n},8501:(e,t,n)=>{"use strict";const i=n(7604),r={allowBooleanAttributes:!1,unpairedTags:[]};function o(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function a(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const i=e.substr(n,t-n);if(t>5&&"xml"===i)return h("InvalidXml","XML declaration allowed only at the start of the document.",m(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function s(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function c(e,t){let n="",i="",r=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===i?i=e[t]:i!==e[t]||(i="");else if(">"===e[t]&&""===i){r=!0;break}n+=e[t]}return""===i&&{value:n,index:t,tagClosed:r}}t.validate=function(e,t){t=Object.assign({},r,t);const n=[];let l=!1,p=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let r=0;r<e.length;r++)if("<"===e[r]&&"?"===e[r+1]){if(r+=2,r=a(e,r),r.err)return r}else{if("<"!==e[r]){if(o(e[r]))continue;return h("InvalidChar","char '"+e[r]+"' is not expected.",m(e,r))}{let g=r;if(r++,"!"===e[r]){r=s(e,r);continue}{let y=!1;"/"===e[r]&&(y=!0,r++);let v="";for(;r<e.length&&">"!==e[r]&&" "!==e[r]&&"\t"!==e[r]&&"\n"!==e[r]&&"\r"!==e[r];r++)v+=e[r];if(v=v.trim(),"/"===v[v.length-1]&&(v=v.substring(0,v.length-1),r--),f=v,!i.isName(f)){let t;return t=0===v.trim().length?"Invalid space after '<'.":"Tag '"+v+"' is an invalid name.",h("InvalidTag",t,m(e,r))}const b=c(e,r);if(!1===b)return h("InvalidAttr","Attributes for '"+v+"' have open quote.",m(e,r));let x=b.value;if(r=b.index,"/"===x[x.length-1]){const n=r-x.length;x=x.substring(0,x.length-1);const i=u(x,t);if(!0!==i)return h(i.err.code,i.err.msg,m(e,n+i.err.line));l=!0}else if(y){if(!b.tagClosed)return h("InvalidTag","Closing tag '"+v+"' doesn't have proper closing.",m(e,r));if(x.trim().length>0)return h("InvalidTag","Closing tag '"+v+"' can't have attributes or invalid starting.",m(e,g));{const t=n.pop();if(v!==t.tagName){let n=m(e,t.tagStartPos);return h("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+v+"'.",m(e,g))}0==n.length&&(p=!0)}}else{const i=u(x,t);if(!0!==i)return h(i.err.code,i.err.msg,m(e,r-x.length+i.err.line));if(!0===p)return h("InvalidXml","Multiple possible root nodes found.",m(e,r));-1!==t.unpairedTags.indexOf(v)||n.push({tagName:v,tagStartPos:g}),l=!0}for(r++;r<e.length;r++)if("<"===e[r]){if("!"===e[r+1]){r++,r=s(e,r);continue}if("?"!==e[r+1])break;if(r=a(e,++r),r.err)return r}else if("&"===e[r]){const t=d(e,r);if(-1==t)return h("InvalidChar","char '&' is not expected.",m(e,r));r=t}else if(!0===p&&!o(e[r]))return h("InvalidXml","Extra text at the end",m(e,r));"<"===e[r]&&r--}}}var f;return l?1==n.length?h("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",m(e,n[0].tagStartPos)):!(n.length>0)||h("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):h("InvalidXml","Start tag expected.",1)};const l=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(e,t){const n=i.getAllMatches(e,l),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return h("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",f(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return h("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",f(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",f(n[e]));const i=n[e][2];if(!p(i))return h("InvalidAttr","Attribute '"+i+"' is an invalid name.",f(n[e]));if(r.hasOwnProperty(i))return h("InvalidAttr","Attribute '"+i+"' is repeated.",f(n[e]));r[i]=1}return!0}function d(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function p(e){return i.isName(e)}function m(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function f(e){return e.startIndex+e[1].length}},1192:(e,t,n)=>{"use strict";const i=n(2592),r={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],transformTagName:!1};function o(e){this.options=Object.assign({},r,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=m),this.processTextOrObjNode=s,this.options.format?(this.indentate=p,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=h,this.buildObjNode=l):(this.buildTextNode=u,this.buildObjNode=c),this.buildTextValNode=u,this.buildObjectNode=c,this.replaceEntitiesValue=d,this.buildAttrPairStr=a}function a(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'}function s(e,t,n){const i=this.j2x(e,n+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjNode(i.val,t,i.attrStr,n)}function c(e,t,n,i){let r="</"+t+this.tagEndChar,o="";return"?"===t[0]&&(o="?",r=""),n&&-1===e.indexOf("<")?this.indentate(i)+"<"+t+n+o+">"+e+r:!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===o.length?this.indentate(i)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(i)+"<"+t+n+o+this.tagEndChar+e+this.indentate(i)+r}function l(e,t,n,i){return""!==e?this.buildObjectNode(e,t,n,i):"?"===t[0]?this.indentate(i)+"<"+t+n+"?"+this.tagEndChar:this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function u(e,t,n,i){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(i)+`\x3c!--${e}--\x3e`+this.newLine;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),""===r&&-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode?this.indentate(i)+"<"+t+this.tagEndChar:this.indentate(i)+"<"+t+"/"+this.tagEndChar:this.indentate(i)+"<"+t+n+">"+r+"</"+t+this.tagEndChar}}function d(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e}function h(e,t,n,i){return""===e&&-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode?this.indentate(i)+"<"+t+this.tagEndChar:this.indentate(i)+"<"+t+"/"+this.tagEndChar:""!==e?this.buildTextValNode(e,t,n,i):"?"===t[0]?this.indentate(i)+"<"+t+n+"?"+this.tagEndChar:this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function p(e){return this.options.indentBy.repeat(e)}function m(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}o.prototype.build=function(e){return this.options.preserveOrder?i(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},o.prototype.j2x=function(e,t){let n="",i="";for(let r in e)if(void 0===e[r]);else if(null===e[r])"?"===r[0]?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)i+=this.buildTextNode(e[r],r,"",t);else if("object"!=typeof e[r]){const o=this.isAttribute(r);if(o)n+=this.buildAttrPairStr(o,""+e[r]);else if(r===this.options.textNodeName){let t=this.options.tagValueProcessor(r,""+e[r]);i+=this.replaceEntitiesValue(t)}else i+=this.buildTextNode(e[r],r,"",t)}else if(Array.isArray(e[r])){const n=e[r].length;for(let o=0;o<n;o++){const n=e[r][o];void 0===n||(null===n?"?"===r[0]?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:i+="object"==typeof n?this.processTextOrObjNode(n,r,t):this.buildTextNode(n,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const t=Object.keys(e[r]),i=t.length;for(let o=0;o<i;o++)n+=this.buildAttrPairStr(t[o],""+e[r][t[o]])}else i+=this.processTextOrObjNode(e[r],r,t);return{attrStr:n,val:i}},e.exports=o},2592:e=>{function t(e,a,s,c){let l="",u="";a.format&&a.indentBy.length>0&&(u="\n"+a.indentBy.repeat(c));for(let d=0;d<e.length;d++){const h=e[d],p=n(h);let m="";if(m=0===s.length?p:`${s}.${p}`,p===a.textNodeName){let e=h[p];r(m,a)||(e=a.tagValueProcessor(p,e),e=o(e,a)),l+=u+e;continue}if(p===a.cdataPropName){l+=u+`<![CDATA[${h[p][0][a.textNodeName]}]]>`;continue}if(p===a.commentPropName){l+=u+`\x3c!--${h[p][0][a.textNodeName]}--\x3e`;continue}if("?"===p[0]){const e=i(h[":@"],a),t="?xml"===p?"":u;let n=h[p][0][a.textNodeName];n=0!==n.length?" "+n:"",l+=t+`<${p}${n}${e}?>`;continue}let f=u+`<${p}${i(h[":@"],a)}`,g=t(h[p],a,m,c+1);-1!==a.unpairedTags.indexOf(p)?a.suppressUnpairedNode?l+=f+">":l+=f+"/>":g&&0!==g.length||!a.suppressEmptyNode?l+=f+`>${g}${u}</${p}>`:l+=f+"/>"}return l}function n(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function i(e,t){let n="";if(e&&!t.ignoreAttributes)for(let i in e){let r=t.attributeValueProcessor(i,e[i]);r=o(r,t),!0===r&&t.suppressBooleanAttributes?n+=` ${i.substr(t.attributeNamePrefix.length)}`:n+=` ${i.substr(t.attributeNamePrefix.length)}="${r}"`}return n}function r(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+n)return!0;return!1}function o(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const i=t.entities[n];e=e.replace(i.regex,i.val)}return e}e.exports=function(e,n){return t(e,n,"",0)}},4780:e=>{const t=RegExp("^\\s([a-zA-z0-0]+)[ \t](['\"])([^&]+)\\2");function n(e,n){const i=t.exec(e);i&&(n[i[1]]={regx:RegExp(`&${i[1]};`,"g"),val:i[3]})}e.exports=function(e,t){const i={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,o=!1,a=!1,s=!1,c="";for(;t<e.length;t++)if("<"===e[t]){if(o&&"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7])t+=7,a=!0;else if(o&&"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8])t+=8;else if(o&&"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8])t+=8;else if(o&&"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9])t+=9;else{if("!"!==e[t+1]||"-"!==e[t+2]||"-"!==e[t+3])throw new Error("Invalid DOCTYPE");s=!0}r++,c=""}else if(">"===e[t]){if(s){if("-"!==e[t-1]||"-"!==e[t-2])throw new Error("Invalid XML comment in DOCTYPE");s=!1}else a&&(n(c,i),a=!1);if(r--,0===r)break}else"["===e[t]?o=!0:c+=e[t];if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:i,i:t}}},6745:(e,t)=>{const n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1};t.buildOptions=function(e){return Object.assign({},n,e)},t.defaultOptions=n},1078:(e,t,n)=>{"use strict";const i=n(7604),r=n(6311),o=n(4780),a=n(4153);function s(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function c(e,t,n,i,r,o,a){if(void 0!==e&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));const i=this.options.tagValueProcessor(t,e,n,r,o);return null==i?e:typeof i!=typeof e||i!==e?i:this.options.trimValues||e.trim()===e?b(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function l(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp);const u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function d(e,t){if(!this.options.ignoreAttributes&&"string"==typeof e){const n=i.getAllMatches(e,u),r=n.length,o={};for(let e=0;e<r;e++){const i=this.resolveNameSpace(n[e][1]);let r=n[e][4];const a=this.options.attributeNamePrefix+i;if(i.length)if(void 0!==r){this.options.trimValues&&(r=r.trim()),r=this.replaceEntitiesValue(r);const e=this.options.attributeValueProcessor(i,r,t);o[a]=null==e?r:typeof e!=typeof r||e!==r?e:b(r,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[a]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=o,e}return o}}const h=function(e){e=e.replace(/\r\n?/g,"\n");const t=new r("!xml");let n=t,i="",a="";for(let s=0;s<e.length;s++)if("<"===e[s])if("/"===e[s+1]){const t=g(e,">",s,"Closing Tag is not closed.");let r=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){const e=r.indexOf(":");-1!==e&&(r=r.substr(e+1))}this.options.transformTagName&&(r=this.options.transformTagName(r)),n&&(i=this.saveTextToParentTag(i,n,a)),a=a.substr(0,a.lastIndexOf(".")),n=this.tagsNodeStack.pop(),i="",s=t}else if("?"===e[s+1]){let t=y(e,s,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,a),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new r(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,a)),n.addChild(e)}s=t.closeIndex+1}else if("!--"===e.substr(s+1,3)){const t=g(e,"--\x3e",s+4,"Comment is not closed.");if(this.options.commentPropName){const r=e.substring(s+4,t-2);i=this.saveTextToParentTag(i,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:r}])}s=t}else if("!D"===e.substr(s+1,2)){const t=o(e,s);this.docTypeEntities=t.entities,s=t.i}else if("!["===e.substr(s+1,2)){const t=g(e,"]]>",s,"CDATA is not closed.")-2,r=e.substring(s+9,t);if(i=this.saveTextToParentTag(i,n,a),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:r}]);else{let e=this.parseTextData(r,n.tagname,a,!0,!1,!0);null==e&&(e=""),n.add(this.options.textNodeName,e)}s=t+2}else{let o=y(e,s,this.options.removeNSPrefix),c=o.tagName,l=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&i&&"!xml"!==n.tagname&&(i=this.saveTextToParentTag(i,n,a,!1)),c!==t.tagname&&(a+=a?"."+c:c);const h=n;if(h&&-1!==this.options.unpairedTags.indexOf(h.tagname)&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,a,c)){let t="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)s=o.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(c))s=o.closeIndex;else{const n=this.readStopNodeData(e,c,d+1);if(!n)throw new Error(`Unexpected end of ${c}`);s=n.i,t=n.tagContent}const i=new r(c);c!==l&&u&&(i[":@"]=this.buildAttributesMap(l,a)),t&&(t=this.parseTextData(t,c,a,!0,u,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),i.add(this.options.textNodeName,t),n.addChild(i)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),l=c):l=l.substr(0,l.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const e=new r(c);c!==l&&u&&(e[":@"]=this.buildAttributesMap(l,a)),a=a.substr(0,a.lastIndexOf(".")),n.addChild(e)}else{const e=new r(c);this.tagsNodeStack.push(n),c!==l&&u&&(e[":@"]=this.buildAttributesMap(l,a)),n.addChild(e),n=e}i="",s=d}}else i+=e[s];return t.child},p=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function m(e,t,n,i){return e&&(void 0===i&&(i=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,i))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function f(e,t,n){const i="*."+n;for(const n in e){const r=e[n];if(i===r||t===r)return!0}return!1}function g(e,t,n,i){const r=e.indexOf(t,n);if(-1===r)throw new Error(i);return r+t.length-1}function y(e,t,n,i=">"){const r=function(e,t,n=">"){let i,r="";for(let o=t;o<e.length;o++){let t=e[o];if(i)t===i&&(i="");else if('"'===t||"'"===t)i=t;else if(t===n[0]){if(!n[1])return{data:r,index:o};if(e[o+1]===n[1])return{data:r,index:o}}else"\t"===t&&(t=" ");r+=t}}(e,t+1,i);if(!r)return;let o=r.data;const a=r.index,s=o.search(/\s/);let c=o,l=!0;if(-1!==s&&(c=o.substr(0,s).replace(/\s\s*$/,""),o=o.substr(s+1)),n){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),l=c!==r.data.substr(e+1))}return{tagName:c,tagExp:o,closeIndex:a,attrExpPresent:l}}function v(e,t,n){const i=n;let r=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const o=g(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(r--,0===r))return{tagContent:e.substring(i,n),i:o};n=o}else if("?"===e[n+1])n=g(e,"?>",n+1,"StopNode is not closed.");else if("!--"===e.substr(n+1,3))n=g(e,"--\x3e",n+3,"StopNode is not closed.");else if("!["===e.substr(n+1,2))n=g(e,"]]>",n,"StopNode is not closed.")-2;else{const i=y(e,n,">");i&&((i&&i.tagName)===t&&"/"!==i.tagExp[i.tagExp.length-1]&&r++,n=i.closeIndex)}}function b(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&a(e,n)}return i.isExist(e)?e:""}e.exports=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=s,this.parseXml=h,this.parseTextData=c,this.resolveNameSpace=l,this.buildAttributesMap=d,this.isItStopNode=f,this.replaceEntitiesValue=p,this.readStopNodeData=v,this.saveTextToParentTag=m}}},8844:(e,t,n)=>{const{buildOptions:i}=n(6745),r=n(1078),{prettify:o}=n(6997),a=n(8501);e.exports=class{constructor(e){this.externalEntities={},this.options=i(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=a.validate(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new r(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(e);return this.options.preserveOrder||void 0===i?i:o(i,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}},6997:(e,t)=>{"use strict";function n(e,t,a){let s;const c={};for(let l=0;l<e.length;l++){const u=e[l],d=i(u);let h="";if(h=void 0===a?d:a+"."+d,d===t.textNodeName)void 0===s?s=u[d]:s+=""+u[d];else{if(void 0===d)continue;if(u[d]){let e=n(u[d],t,h);const i=o(e,t);u[":@"]?r(e,u[":@"],h,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==c[d]&&c.hasOwnProperty(d)?(Array.isArray(c[d])||(c[d]=[c[d]]),c[d].push(e)):t.isArray(d,h,i)?c[d]=[e]:c[d]=e}}}return"string"==typeof s?s.length>0&&(c[t.textNodeName]=s):void 0!==s&&(c[t.textNodeName]=s),c}function i(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function r(e,t,n,i){if(t){const r=Object.keys(t),o=r.length;for(let a=0;a<o;a++){const o=r[a];i.isArray(o,n+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function o(e,t){const n=Object.keys(e).length;return!!(0===n||1===n&&e[t.textNodeName])}t.prettify=function(e,t){return n(e,t)}},6311:e=>{"use strict";e.exports=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){this.child.push({[e]:t})}addChild(e){e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}},4153:e=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const i={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,r={}){if(r=Object.assign({},i,r),!e||"string"!=typeof e)return e;let o=e.trim();if(void 0!==r.skipLike&&r.skipLike.test(o))return e;if(r.hex&&t.test(o))return Number.parseInt(o,16);{const t=n.exec(o);if(t){const n=t[1],i=t[2];let s=(a=t[3])&&-1!==a.indexOf(".")?("."===(a=a.replace(/0+$/,""))?a="0":"."===a[0]?a="0"+a:"."===a[a.length-1]&&(a=a.substr(0,a.length-1)),a):a;const c=t[4]||t[6];if(!r.leadingZeros&&i.length>0&&n&&"."!==o[2])return e;if(!r.leadingZeros&&i.length>0&&!n&&"."!==o[1])return e;{const t=Number(o),a=""+t;return-1!==a.search(/[eE]/)||c?r.eNotation?t:e:-1!==o.indexOf(".")?"0"===a&&""===s||a===s||n&&a==="-"+s?t:e:i?s===a||n+s===a?t:e:o===a||o===n+a?t:e}}return e}var a}},5921:function(e){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modifier=void 0;var i=function(){function e(){}return e.prototype.setModifiable=function(e){this.mod=e},e.prototype.getVertices=function(){return this.mod.getVertices()},e.prototype.destroy=function(){this.mod=null},e}();t.Modifier=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;var i=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=n}return e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},e.prototype.zero=function(){this.x=this.y=this.z=0},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.multiplyScalar=function(t){return new e(this.x*t,this.y*t,this.z*t)},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y,this.z*t.z)},e.prototype.divide=function(t){var n=1/t;return new e(this.x*n,this.y*n,this.z*n)},e.prototype.normalize=function(){var e=this.x*this.x+this.y*this.y+this.z*this.z;if(e>0){var t=1/Math.sqrt(e);this.x*=t,this.y*=t,this.z*=t}},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set:function(e){this.normalize(),this.x*=e,this.y*=e,this.z*=e},enumerable:!1,configurable:!0}),e.prototype.fromBufferAttribute=function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},e.prototype.toString=function(){return"["+this.x+" , "+this.y+" , "+this.z+"]"},e.sum=function(e,t){return e.add(t)},e.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},e.cross=function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)},e.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return Math.sqrt(n*n+i*i+r*r)},e.ZERO=new e(0,0,0),e}();t.Vector3=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModConstant=void 0;var i=function(){function e(){}return e.NONE=0,e.X=1,e.Y=2,e.Z=4,e.LEFT=-1,e.RIGHT=1,e}();t.ModConstant=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TMath=void 0;var i=function(){function e(){}return e.normalize=function(t,n,i){return 0==n-t?1:e.trim(0,1,(i-t)/n)},e.toRange=function(e,t,n){return 0==t-e?0:e+(t-e)*n},e.inInRange=function(e,t,n,i){return void 0===i&&(i=!1),i?n>=e&&n<=t:n>e&&n<t},e.sign=function(e,t){return void 0===t&&(t=0),0==e?t:e>0?1:-1},e.trim=function(e,t,n){return Math.min(t,Math.max(e,n))},e.wrap=function(e,t,n){return n<e?n+(t-e):n>=t?n-(t-e):n},e.degToRad=function(e){return e/180*Math.PI},e.radToDeg=function(e){return e/Math.PI*180},e.presicion=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},e.uceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.mappedKey=function(e){var t=Math.pow(10,4);return Math.round(e.x*t)+"_"+Math.round(e.y*t)+"_"+Math.round(e.z*t)},e.PI=3.1415,e}();t.TMath=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix4=void 0;var i=function(){function e(e,t,n,i,r,o,a,s,c,l,u,d,h,p,m,f){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=0),void 0===u&&(u=1),void 0===d&&(d=0),void 0===h&&(h=0),void 0===p&&(p=0),void 0===m&&(m=0),void 0===f&&(f=1),this.n11=e,this.n12=t,this.n13=n,this.n14=i,this.n21=r,this.n22=o,this.n23=a,this.n24=s,this.n31=c,this.n32=l,this.n33=u,this.n34=d,this.n41=h,this.n42=p,this.n43=m,this.n44=f}return e.translationMatrix=function(t,n,i){var r=new e;return r.n14=t,r.n24=n,r.n34=i,r},e.scaleMatrix=function(t,n,i){var r=new e;return r.n11=t,r.n22=n,r.n33=i,r},e.rotationMatrix=function(t,n,i,r,o){var a;void 0===o&&(o=null),a=o||new e;var s=Math.cos(r),c=Math.sin(r),l=1-s,u=t*n*l,d=n*i*l,h=t*i*l,p=c*i,m=c*n,f=c*t;return a.n11=s+t*t*l,a.n12=-p+u,a.n13=m+h,a.n14=0,a.n21=p+u,a.n22=s+n*n*l,a.n23=-f+d,a.n24=0,a.n31=-m+h,a.n32=f+d,a.n33=s+i*i*l,a.n34=0,a},e.prototype.calculateMultiply=function(e,t){var n=e.n11,i=t.n11,r=e.n21,o=t.n21,a=e.n31,s=t.n31,c=e.n12,l=t.n12,u=e.n22,d=t.n22,h=e.n32,p=t.n32,m=e.n13,f=t.n13,g=e.n23,y=t.n23,v=e.n33,b=t.n33,x=e.n14,w=t.n14,S=e.n24,E=t.n24,_=e.n34,C=t.n34;this.n11=n*i+c*o+m*s,this.n12=n*l+c*d+m*p,this.n13=n*f+c*y+m*b,this.n14=n*w+c*E+m*C+x,this.n21=r*i+u*o+g*s,this.n22=r*l+u*d+g*p,this.n23=r*f+u*y+g*b,this.n24=r*w+u*E+g*C+S,this.n31=a*i+h*o+v*s,this.n32=a*l+h*d+v*p,this.n33=a*f+h*y+v*b,this.n34=a*w+h*E+v*C+_},e.multiply=function(t,n){var i=new e;return i.calculateMultiply(t,n),i},e.multiplyVector=function(e,t){var n=t.x,i=t.y,r=t.z;t.x=n*e.n11+i*e.n12+r*e.n13+e.n14,t.y=n*e.n21+i*e.n22+r*e.n23+e.n24,t.z=n*e.n31+i*e.n32+r*e.n33+e.n34},e}();t.Matrix4=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var i=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y},e.prototype.zero=function(){this.x=this.y},e.prototype.negate=function(){return new e(-this.x,-this.y)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.multiplyScalar=function(t){return new e(this.x*t,this.y*t)},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.divide=function(t){var n=1/t;return new e(this.x*n,this.y*n)},e.prototype.normalize=function(){var e=this.x*this.x+this.y*this.y;if(e>0){var t=1/Math.sqrt(e);this.x*=t,this.y*=t}},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set:function(e){this.normalize(),this.x*=e,this.y*=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"["+this.x+" , "+this.y+"]"},e.sum=function(e,t){return e.add(t)},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},e.ZERO=new e(0,0),e}();t.Vector2=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0;var i=n(3),r=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=1),this._start=e,this._end=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._end-this._start},enumerable:!1,configurable:!0}),e.prototype.move=function(e){this._start+=e,this._end+=e},e.prototype.isIn=function(e){return e>=this._start&&e<=this._end},e.prototype.normalize=function(e){return i.TMath.normalize(this._start,this._end,e)},e.prototype.toRange=function(e){return i.TMath.toRange(this._start,this._end,e)},e.prototype.trim=function(e){return i.TMath.trim(this._start,this._end,e)},e.prototype.interpolate=function(e,t){return this.toRange(t.normalize(e))},e.prototype.toString=function(){return"["+this.start+" - "+this.end+"]"},e}();t.Range=r},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(9),t),r(n(16),t),r(n(6),t),r(n(5),t),r(n(1),t),r(n(3),t),r(n(2),t),r(n(17),t),r(n(19),t),r(n(20),t),r(n(21),t),r(n(25),t),r(n(26),t),r(n(27),t),r(n(28),t),r(n(29),t),r(n(30),t),r(n(31),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierStack=void 0;var i=n(10),r=function(){function e(e){this.baseMesh=new i.ThreeMesh,this.baseMesh.setMesh(e),this.baseMesh.analyzeGeometry(),this.stack=[]}return Object.defineProperty(e.prototype,"indexUpdate",{set:function(e){this.baseMesh.indexUpdate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundUpdate",{set:function(e){this.baseMesh.boundUpdate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvsAndColorUpdate",{set:function(e){this.baseMesh.uvsAndColorUpdate=e},enumerable:!1,configurable:!0}),e.prototype.addModifier=function(e){e.setModifiable(this.baseMesh),this.stack.push(e)},e.prototype.removeModifier=function(e){var t=this.stack.indexOf(e);t>-1&&this.stack.splice(t,1)},e.prototype.apply=function(){this.baseMesh.resetGeometry();for(var e=0;e<this.stack.length;e++)this.stack[e].apply();this.baseMesh.postApply()},e.prototype.collapse=function(){this.apply(),this.baseMesh.collapseGeometry(),this.stack.length=0},e.prototype.reset=function(){this.baseMesh.resetGeometry()},e.prototype.clear=function(){this.stack.length=0},e.prototype.destroy=function(){this.baseMesh.destroy();for(var e=0;e<this.stack.length;e++)this.stack[e].destroy();this.clear()},e}();t.ModifierStack=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeMesh=void 0;var r=n(11),o=n(13),a=n(14),s=n(3),c=n(1),l=n(15),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.verticesMap=new l.TMap,t.uvsAndColorUpdate=!1,t}return i(t,e),t.prototype.setMesh=function(e){this.mesh=e,this.setVertices(),this.setFaces(),this.mergeVertices(),this.mergeFaces()},t.prototype.setVertices=function(){for(var e=this.getAttr("position"),t=0;t<e.count;t++){var n=new r.ThreeVertex,i=(new c.Vector3).fromBufferAttribute(e,t);n.setVertex(i),this.vertices.push(n)}},t.prototype.setFaces=function(){var e=this.getAttr("index"),t=this.getAttr("position");if(null!==e)for(var n=0;n<e.count;n+=3){var i=new a.FaceProxy,r=e.getX(n),o=e.getX(n+1),s=e.getX(n+2),c=this.vertices[r],l=this.vertices[o],u=this.vertices[s];i.addVertices(c,l,u),this.faces.push(i)}else for(n=0;n<t.count;n+=3)i=new a.FaceProxy,r=n,o=n+1,s=n+2,c=this.vertices[r],l=this.vertices[o],u=this.vertices[s],i.addVertices(c,l,u),this.faces.push(i)},t.prototype.mergeVertices=function(){for(var e=[],t=this.verticesMap,n=0;n<this.vertices.length;n++){var i=this.vertices[n],r=s.TMath.mappedKey(i);if(t.includeByValue(r)){var o=t.getToByValue(r);t.add(o,n,r)}else o=e.length,i.only=!0,e.push(i),t.add(o,n,r)}this.vertices=e},t.prototype.mergeFaces=function(){for(var e=[],t=0,n=this.faces.length;t<n;t++){var i=this.faces[t],r=s.TMath.mappedKey(i.a),o=s.TMath.mappedKey(i.b),a=s.TMath.mappedKey(i.c),c=this.verticesMap.getToByValue(r),l=this.verticesMap.getToByValue(o),u=this.verticesMap.getToByValue(a);i.a=this.vertices[c],i.b=this.vertices[l],i.c=this.vertices[u];for(var d=[c,l,u],h=0;h<3;h++)if(d[h]===d[(h+1)%3]){e.push(t);break}}for(t=e.length-1;t>=0;t--){var p=e[t];this.faces.splice(p,1)}},t.prototype.postApply=function(){this.updatePosition(),this.updateIndex(),this.computeBounding(),this.updateUvsAndColor()},t.prototype.updateUvsAndColor=function(){if(this.uvsAndColorUpdate){var e=this.getAttr("color");e&&(e.needsUpdate=!0);var t=this.getAttr("uv");t&&(t.needsUpdate=!0)}},t.prototype.computeBounding=function(){if(this.boundUpdate){var e=this.mesh.geometry;e.computeBoundingBox(),e.computeBoundingSphere()}},t.prototype.updatePosition=function(){var e,t,n,i,r,o=this.getAttr("position"),a=this.vertices.length;for(n=0;n<a;n++)for(t=this.vertices[n],e=this.verticesMap.getFromByTo(n),i=0;i<e.length;i++)r=e[i],o.setX(r,t.x),o.setY(r,t.y),o.setZ(r,t.z);o.needsUpdate=!0},t.prototype.updateIndex=function(){if(this.indexUpdate){var e=this.getAttr("index");e&&(e.needsUpdate=!0)}},t.prototype.getAttr=function(e){var t=this.mesh.geometry;return"index"===e?t.getIndex():t.getAttribute(e)},t.prototype.updateMeshPosition=function(e){this.mesh.position.x+=e.x,this.mesh.position.y+=e.y,this.mesh.position.z+=e.z},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.verticesMap.destroy(),this.verticesMap=null,this.mesh=null},t}(o.MeshProxy);t.ThreeMesh=u},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeVertex=void 0;var r=function(e){function t(){var t=e.call(this)||this;return t.only=!1,t}return i(t,e),t.prototype.setVertex=function(e){this.vertor=e,this.ox=this.vertor.x,this.oy=this.vertor.y,this.oz=this.vertor.z},Object.defineProperty(t.prototype,"x",{get:function(){return this.vertor.x},set:function(e){this.vertor.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.vertor.y},set:function(e){this.vertor.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.vertor.z},set:function(e){this.vertor.z=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return e.prototype.toString.call(this)+" only:"+this.only},t}(n(12).VertexProxy);t.ThreeVertex=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexProxy=void 0;var i=n(1),r=n(2),o=function(){function e(){this.id=""}return e.prototype.setVertex=function(e){},e.prototype.setRatios=function(e,t,n){this._ratioX=e,this._ratioY=t,this._ratioZ=n},e.prototype.setOriginalPosition=function(e,t,n){this.ox=e,this.oy=t,this.oz=n},Object.defineProperty(e.prototype,"x",{get:function(){return 0},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return 0},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return 0},set:function(e){},enumerable:!1,configurable:!0}),e.prototype.getValue=function(e){switch(e){case r.ModConstant.X:return this.x;case r.ModConstant.Y:return this.y;case r.ModConstant.Z:return this.z}return 0},e.prototype.setValue=function(e,t){switch(e){case r.ModConstant.X:this.x=t;break;case r.ModConstant.Y:this.y=t;break;case r.ModConstant.Z:this.z=t}},Object.defineProperty(e.prototype,"ratioX",{get:function(){return this._ratioX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratioY",{get:function(){return this._ratioY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratioZ",{get:function(){return this._ratioZ},enumerable:!1,configurable:!0}),e.prototype.getRatio=function(e){switch(e){case r.ModConstant.X:return this._ratioX;case r.ModConstant.Y:return this._ratioY;case r.ModConstant.Z:return this._ratioZ}return-1},Object.defineProperty(e.prototype,"originalX",{get:function(){return this.ox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalY",{get:function(){return this.oy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalZ",{get:function(){return this.oz},enumerable:!1,configurable:!0}),e.prototype.getOriginalValue=function(e){switch(e){case r.ModConstant.X:return this.ox;case r.ModConstant.Y:return this.oy;case r.ModConstant.Z:return this.oz}return 0},e.prototype.reset=function(){this.x=this.ox,this.y=this.oy,this.z=this.oz},e.prototype.collapse=function(){this.ox=this.x,this.oy=this.y,this.oz=this.z},Object.defineProperty(e.prototype,"vector",{get:function(){return new i.Vector3(this.x,this.y,this.z)},set:function(e){this.x=e.x,this.y=e.y,this.z=e.z},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratioVector",{get:function(){return new i.Vector3(this.ratioX,this.ratioY,this.ratioZ)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Vertex id:"+this.id+" xyz:"+this.x+" "+this.y+" "+this.z},e}();t.VertexProxy=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeshProxy=void 0;var i=n(2),r=function(){function e(){this.boundUpdate=!1,this.indexUpdate=!1,this.uvsAndColorUpdate=!1,this.vertices=[],this.faces=[]}return e.prototype.setMesh=function(e){},e.prototype.updateMeshPosition=function(e){},e.prototype.getVertices=function(){return this.vertices},e.prototype.getFaces=function(){return this.faces},e.prototype.analyzeGeometry=function(){for(var e,t=this.getVertices().length,n=0;n<t;n++)e=this.getVertices()[n],0==n?(this._minX=this._maxX=e.x,this._minY=this._maxY=e.y,this._minZ=this._maxZ=e.z):(this._minX=Math.min(this._minX,e.x),this._minY=Math.min(this._minY,e.y),this._minZ=Math.min(this._minZ,e.z),this._maxX=Math.max(this._maxX,e.x),this._maxY=Math.max(this._maxY,e.y),this._maxZ=Math.max(this._maxZ,e.z)),e.setOriginalPosition(e.x,e.y,e.z);this._width=this._maxX-this._minX,this._height=this._maxY-this._minY,this._depth=this._maxZ-this._minZ;var r=Math.max(this._width,Math.max(this._height,this._depth)),o=Math.min(this._width,Math.min(this._height,this._depth));for(r==this._width&&o==this._height?(this._minAxis=i.ModConstant.Y,this._midAxis=i.ModConstant.Z,this._maxAxis=i.ModConstant.X):r==this._width&&o==this._depth?(this._minAxis=i.ModConstant.Z,this._midAxis=i.ModConstant.Y,this._maxAxis=i.ModConstant.X):r==this._height&&o==this._width?(this._minAxis=i.ModConstant.X,this._midAxis=i.ModConstant.Z,this._maxAxis=i.ModConstant.Y):r==this._height&&o==this._depth?(this._minAxis=i.ModConstant.Z,this._midAxis=i.ModConstant.X,this._maxAxis=i.ModConstant.Y):r==this._depth&&o==this._width?(this._minAxis=i.ModConstant.X,this._midAxis=i.ModConstant.Y,this._maxAxis=i.ModConstant.Z):r==this._depth&&o==this._height&&(this._minAxis=i.ModConstant.Y,this._midAxis=i.ModConstant.X,this._maxAxis=i.ModConstant.Z),n=0;n<t;n++)(e=this.getVertices()[n]).setRatios((e.x-this._minX)/this._width,(e.y-this._minY)/this._height,(e.z-this._minZ)/this._depth)},e.prototype.resetGeometry=function(){for(var e=this.getVertices().length,t=0;t<e;t++)this.getVertices()[t].reset()},e.prototype.collapseGeometry=function(){for(var e=this.getVertices().length,t=0;t<e;t++)this.getVertices()[t].collapse();this.analyzeGeometry()},Object.defineProperty(e.prototype,"minX",{get:function(){return this._minX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this._minY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minZ",{get:function(){return this._minZ},enumerable:!1,configurable:!0}),e.prototype.getMin=function(e){switch(e){case i.ModConstant.X:return this._minX;case i.ModConstant.Y:return this._minY;case i.ModConstant.Z:return this._minZ}return-1},Object.defineProperty(e.prototype,"maxX",{get:function(){return this._maxX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this._maxY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxZ",{get:function(){return this._maxZ},enumerable:!1,configurable:!0}),e.prototype.getMax=function(e){switch(e){case i.ModConstant.X:return this._maxX;case i.ModConstant.Y:return this._maxY;case i.ModConstant.Z:return this._maxZ}return-1},Object.defineProperty(e.prototype,"maxAxis",{get:function(){return this._maxAxis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"midAxis",{get:function(){return this._midAxis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minAxis",{get:function(){return this._minAxis},enumerable:!1,configurable:!0}),e.prototype.getSize=function(e){switch(e){case i.ModConstant.X:return this._width;case i.ModConstant.Y:return this._height;case i.ModConstant.Z:return this._depth}return-1},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),e.prototype.postApply=function(){},e.prototype.destroy=function(){this.vertices.length=0,this.faces.length=0},e}();t.MeshProxy=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FaceProxy=void 0;var i=function(){function e(){this._vertices=[]}return Object.defineProperty(e.prototype,"a",{get:function(){return this._vertices[0]},set:function(e){this._vertices[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._vertices[1]},set:function(e){this._vertices[1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c",{get:function(){return this._vertices[2]},set:function(e){this._vertices[2]=e},enumerable:!1,configurable:!0}),e.prototype.addVertex=function(e){this._vertices.push(e)},e.prototype.addVertices=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)this.addVertex(e[n])},e.prototype.addABC=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)this.addVertex(e[n])},Object.defineProperty(e.prototype,"vertices",{get:function(){return this._vertices},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e="",t=0;t<this._vertices.length;t++)e+=t+":"+this._vertices[t]+" ";return e},e}();t.FaceProxy=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TMap=void 0;var i=function(){function e(){this.from=[]}return e.prototype.push=function(e){this.from.push(e)},e}(),r=function(){function e(){this._map={}}return e.prototype.add=function(e,t,n){var r="t_"+e;this._map[r]||(this._map[r]=new i),this._map[r].push(t),this._map[r].to=e,this._map[r].value=n},e.prototype.getToByValue=function(e){var t=this.getItemByValue(e);return t?t.to:-1},e.prototype.getFromByTo=function(e){var t=this.getItemByTo(e);return t?t.from:null},e.prototype.includeByValue=function(e){return!!this.getItemByValue(e)},e.prototype.getItemByValue=function(e){for(var t in this._map){var n=this._map[t];if(n.value===e)return n}return null},e.prototype.getItemByTo=function(e){var t="t_"+e;return this._map[t]},e.prototype.destroy=function(){for(var e in this._map)delete this._map[e]},e}();t.TMap=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phase=void 0;var i=function(){function e(e){void 0===e&&(e=0),this.v=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.v},set:function(e){this.v=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phasedValue",{get:function(){return Math.sin(this.v)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absPhasedValue",{get:function(){return Math.abs(this.phasedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normValue",{get:function(){return(this.phasedValue+1)/2},enumerable:!1,configurable:!0}),e}();t.Phase=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Bend=void 0;var r=n(2),o=n(0),a=n(5),s=n(18),c=function(e){function t(t,n,i){void 0===t&&(t=0),void 0===n&&(n=.5),void 0===i&&(i=0);var o=e.call(this)||this;return o._constraint=r.ModConstant.NONE,o.switchAxes=!1,o._force=t,o._offset=n,o.angle=i,o}return i(t,e),t.prototype.setModifiable=function(t){e.prototype.setModifiable.call(this,t),this.max=this.switchAxes?t.midAxis:t.maxAxis,this.min=t.minAxis,this.mid=this.switchAxes?t.maxAxis:t.midAxis,this.width=t.getSize(this.max),this.height=t.getSize(this.mid),this.origin=t.getMin(this.max),this._diagAngle=Math.atan(this.width/this.height)},Object.defineProperty(t.prototype,"force",{get:function(){return this._force},set:function(e){this._force=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constraint",{get:function(){return this._constraint},set:function(e){this._constraint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diagAngle",{get:function(){return this._diagAngle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this.m1=new s.Matrix(1,0,0,1),this.m1.rotate(this._angle),this.m2=new s.Matrix(1,0,0,1),this.m2.rotate(-this._angle)},enumerable:!1,configurable:!0}),t.prototype.apply=function(){if(0!=this.force)for(var e=this.mod.getVertices(),t=e.length,n=this.origin+this.width*this.offset,i=this.width/Math.PI/this.force,o=2*Math.PI*(this.width/(i*Math.PI*2)),s=0;s<t;s++){var c=e[s],l=c.getValue(this.max),u=c.getValue(this.mid),d=c.getValue(this.min),h=this.m1.transformPoint(new a.Vector2(l,u));l=h.x,u=h.y;var p=(l-this.origin)/this.width;if(this.constraint==r.ModConstant.LEFT&&p<=this.offset||this.constraint==r.ModConstant.RIGHT&&p>=this.offset);else{var m=Math.PI/2-o*this.offset+o*p,f=Math.sin(m)*(i+d),g=Math.cos(m)*(i+d);d=f-i,l=n-g}var y=this.m2.transformPoint(new a.Vector2(l,u));l=y.x,u=y.y,c.setValue(this.max,l),c.setValue(this.mid,u),c.setValue(this.min,d)}},t}(o.Modifier);t.Bend=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;var i=n(5),r=function(){function e(e,t,n,i){this.m=[e,t,n,i]}return e.prototype.dispose=function(){return this.m.length=0,this},e.prototype.reset=function(){return this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e);return this.m[0]=t,this.m[1]=-n,this.m[2]=n,this.m[3]=t,this},e.prototype.scale=function(e,t){return this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,void 0!==e&&(this.m[0]=e,this.m[3]=e),void 0!==t&&(this.m[3]=t),this},e.prototype.multiply=function(t){return e.mult(this,t)},e.prototype.transformPoint=function(t){var n=e.transform(this,[t.x,t.y]);return new i.Vector2(n[0],n[1])},e.prototype.transformPointSelf=function(t){var n=e.transform(this,[t.x,t.y]);return t.x=n[0],t.y=n[1],t},e.prototype.clone=function(){var t=this.m;return new e(t[0],t[1],t[2],t[3])},e.transform=function(e,t){var n=e.m,i=t[0],r=t[1];return t[0]=n[0]*i+n[1]*r,t[1]=n[2]*i+n[3]*r,t},e.mult=function(e,t){var n=e.m,i=t.m,r=n[0],o=n[1],a=n[2],s=n[3];return n[0]=r*i[0]+o*i[2],n[1]=r*i[1]+o*i[3],n[2]=a*i[0]+s*i[2],n[3]=a*i[1]+s*i[3],e},e}();t.Matrix=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Bloat=void 0;var r=n(1),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._center=r.Vector3.ZERO,t._r=0,t._a=.01,t._u=r.Vector3.ZERO,t}return i(t,e),Object.defineProperty(t.prototype,"center",{get:function(){return this._center},set:function(e){this._center=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._r},set:function(e){this._r=Math.max(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(e){this._a=Math.max(0,e)},enumerable:!1,configurable:!0}),t.prototype.apply=function(){for(var e=0,t=this.mod.getVertices();e<t.length;e++){var n=t[e];this._u.x=n.x-this._center.x,this._u.y=n.y-this._center.y,this._u.z=n.z-this._center.z,this._u.magnitude+=this._r*Math.exp(-this._u.magnitude*this._a),n.x=this._u.x+this._center.x,n.y=this._u.y+this._center.y,n.z=this._u.z+this._center.z}},t}(n(0).Modifier);t.Bloat=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Break=void 0;var r=n(6),o=n(1),a=n(4),s=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=e.call(this)||this;return i.bv=new o.Vector3(0,1,0),i.range=new r.Range(0,1),i.angle=n,i._offset=t,i}return i(t,e),t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=new o.Vector3(0,0,-(this.mod.minZ+this.mod.depth*this.offset)),i=0;i<t;i++){var r=e[i],s=r.vector;if((s=s.add(n)).z>=0&&this.range.isIn(r.ratioY)){var c=this.angle,l=a.Matrix4.rotationMatrix(this.bv.x,this.bv.y,this.bv.z,c);a.Matrix4.multiplyVector(l,s)}var u=n.negate();s=s.add(u),r.x=s.x,r.y=s.y,r.z=s.z}},Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!1,configurable:!0}),t}(n(0).Modifier);t.Break=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Cloth=void 0;var r=n(2),o=n(22),a=n(0),s=n(23),c=n(24),l=function(e){function t(t,n){void 0===t&&(t=1),void 0===n&&(n=0);var i=e.call(this)||this;return i._forceX=0,i._forceY=0,i._forceZ=0,i._dic=new o.Dictionary,i._rigidity=t,i.friction=n,i}return i(t,e),t.prototype.setBounds=function(e,t,n,i,r,o){void 0===e&&(e=Number.NEGATIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.NEGATIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.NEGATIVE_INFINITY),void 0===o&&(o=Number.POSITIVE_INFINITY),this._useBounds=!0,this._boundsMinX=e,this._boundsMaxX=t,this._boundsMinY=n,this._boundsMaxY=i,this._boundsMinZ=r,this._boundsMaxZ=o},t.prototype.clearBounds=function(){this._useBounds=!1},Object.defineProperty(t.prototype,"verletVertices",{get:function(){return this._vertices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"friction",{get:function(){return 100*(this._friction-1)},set:function(e){e<0&&(e=0),this._friction=e/100+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rigidity",{get:function(){return this._rigidity},set:function(e){var t,n,i=this._connections.length;for(e>1?e=1:e<0&&(e=0),this._rigidity=e,t=.5*e;n=this._connections[--i];)n.rigidity=t},enumerable:!1,configurable:!0}),t.prototype.setForce=function(e,t,n){this._forceX=e,this._forceY=t,this._forceZ=n},Object.defineProperty(t.prototype,"forceX",{get:function(){return this._forceX},set:function(e){this._forceX=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceY",{get:function(){return this._forceY},set:function(e){this._forceY=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceZ",{get:function(){return this._forceZ},set:function(e){this._forceZ=e},enumerable:!1,configurable:!0}),t.prototype.unlockAll=function(){for(var e,t=this._vertices.length;e=this._vertices[--t];)e.mobileX=!0,e.mobileY=!0,e.mobileZ=!0},t.prototype.lockXMin=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.minX,"x",e,t)},t.prototype.lockXMax=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.maxX,"x",e,t)},t.prototype.lockYMin=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.minY,"y",e,t)},t.prototype.lockYMax=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.maxY,"y",e,t)},t.prototype.lockZMin=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.minZ,"z",e,t)},t.prototype.lockZMax=function(e,t){void 0===e&&(e=0),void 0===t&&(t=7),this.lockSet(this.mod.maxZ,"z",e,t)},t.prototype.lockSet=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=7);for(var o,a=this._vertices.length;o=this._vertices[--a];)Math.abs(o[t]-e)<=n&&(i&r.ModConstant.X&&(o.mobileX=!1),i&r.ModConstant.Y&&(o.mobileY=!1),i&r.ModConstant.Z&&(o.mobileZ=!1))},t.prototype.setModifiable=function(t){e.prototype.setModifiable.call(this,t),this.initVerletVertices(),this.initVerletConnections(),this.rigidity=this._rigidity},t.prototype.apply=function(){var e,t,n;for(e=this._connections.length;t=this._connections[--e];)t.update();for(e=this._vertices.length;n=this._vertices[--e];)n.mobileX&&(n.x+=this._forceX),n.mobileY&&(n.y+=this._forceY),n.mobileZ&&(n.z+=this._forceZ),n.velocityX/=this._friction,n.velocityY/=this._friction,n.velocityZ/=this._friction,this._useBounds&&(n.x<this._boundsMinX?n.x=this._boundsMinX:n.x>this._boundsMaxX&&(n.x=this._boundsMaxX),n.y<this._boundsMinY?n.y=this._boundsMinY:n.y>this._boundsMaxY&&(n.y=this._boundsMaxY),n.z<this._boundsMinZ?n.z=this._boundsMinZ:n.z>this._boundsMaxZ&&(n.z=this._boundsMaxZ)),n.update()},t.prototype.initVerletVertices=function(){var e,t=this.mod.getVertices(),n=t.length;for(this._vertices=[];e=t[--n];){var i=new c.VerletVertex(e);this._vertices.push(i),this._dic.setVal(e,i)}},t.prototype.initVerletConnections=function(){var e,t,n=this.mod.getFaces(),i=n.length;this._connections=[];for(var r=0;r<i;r++){t=(e=n[r].vertices).length;for(var o=0;o<t-1;o++)this.createConnection(this._dic.getVal(e[o]),this._dic.getVal(e[o+1])),o>1&&this.createConnection(this._dic.getVal(e[0]),this._dic.getVal(e[o]));this.createConnection(this._dic.getVal(e[t-1]),this._dic.getVal(e[0]))}},t.prototype.createConnection=function(e,t){if(e&&t){var n=e.distanceTo(t),i=new s.VerletConnection(e,t,n,this._rigidity);this._connections.push(i)}},t}(a.Modifier);t.Cloth=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dictionary=void 0;var i=function(){function e(){this.dic={}}return e.prototype.setVal=function(e,t){var n=this.getKey(e);this.dic[n]=t},e.prototype.getVal=function(e){var t=this.getKey(e);return this.dic[t]},e.prototype.getKey=function(e){if("object"==typeof e){if(e.id)return e.id;var t="d_"+Math.floor(Math.random()*Math.pow(10,10));return e.id=t,t}return e+""},e}();t.Dictionary=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerletConnection=void 0;var i=function(){function e(e,t,n,i){void 0===i&&(i=.5),this._rigidity=.5,this._v1=e,this._v2=t,this._strictDistance=n,this._rigidity=i}return Object.defineProperty(e.prototype,"rigidity",{get:function(){return this._rigidity},set:function(e){this._rigidity=e},enumerable:!1,configurable:!0}),e.prototype.update=function(){var e,t,n,i,r=this._v1.x,o=this._v2.x,a=this._v1.y,s=this._v2.y,c=this._v1.z,l=o-r,u=s-a,d=this._v2.z-c,h=Math.sqrt(l*l+u*u+d*d);h!=this._strictDistance&&(t=(e=(this._strictDistance-h)/h*this._rigidity)*l,n=e*u,i=e*d,this._v1.mobileX&&this._v2.mobileX||(t*=2),this._v1.mobileY&&this._v2.mobileY||(n*=2),this._v1.mobileZ&&this._v2.mobileZ||(i*=2),this._v1.mobileX&&(this._v1.x-=t),this._v1.mobileY&&(this._v1.y-=n),this._v1.mobileZ&&(this._v1.z-=i),this._v2.mobileX&&(this._v2.x+=t),this._v2.mobileY&&(this._v2.y+=n),this._v2.mobileZ&&(this._v2.z+=i))},e}();t.VerletConnection=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerletVertex=void 0;var i=function(){function e(e){this.mobileX=!0,this.mobileY=!0,this.mobileZ=!0,this._v=e,this.setPosition(this._v.x,this._v.y,this._v.z)}return e.prototype.setPosition=function(e,t,n){this._x=this._oldX=e,this._y=this._oldY=t,this._z=this._oldZ=n,this._v.x=e,this._v.y=t,this._v.z=n},e.prototype.update=function(){var e,t,n;this.mobileX&&(e=this.x,this.x+=this.velocityX,this._oldX=e),this.mobileY&&(t=this.y,this.y+=this.velocityY,this._oldY=t),this.mobileZ&&(n=this.z,this.z+=this.velocityZ,this._oldZ=n)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this.mobileX||(this._oldX=e),this._v.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this.mobileY||(this._oldY=e),this._v.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(e){this._z=e,this.mobileZ||(this._oldZ=e),this._v.z=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityX",{get:function(){return this._x-this._oldX},set:function(e){this._oldX=this._x-e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityY",{get:function(){return this._y-this._oldY},set:function(e){this._oldY=this._y-e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityZ",{get:function(){return this._z-this._oldZ},set:function(e){this._oldZ=this._z-e},enumerable:!1,configurable:!0}),e.prototype.distanceTo=function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y)+(this.z-e.z)*(this.z-e.z))},e}();t.VerletVertex=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Noise=void 0;var r=n(2),o=function(e){function t(t){void 0===t&&(t=0);var n=e.call(this)||this;return n.axc=r.ModConstant.NONE,n.start=0,n.end=0,n.frc=t,n}return i(t,e),Object.defineProperty(t.prototype,"force",{get:function(){return this.frc},set:function(e){this.frc=e},enumerable:!1,configurable:!0}),t.prototype.constraintAxes=function(e){this.axc=e},t.prototype.setFalloff=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1),this.start=e,this.end=t},t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=0;n<t;n++){var i=e[n],r=Math.random()*this.force-this.force/2,o=i.getRatio(this.mod.maxAxis);this.start<this.end?(o<this.start&&(o=0),o>this.end&&(o=1)):this.start>this.end?((o=1-o)>this.start&&(o=0),o<this.end&&(o=1)):o=1,1&this.axc||(i.x+=r*o),this.axc>>1&1||(i.y+=r*o),this.axc>>2&1||(i.z+=r*o)}},t}(n(0).Modifier);t.Noise=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Pivot=void 0;var r=n(1),o=function(e){function t(t,n,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0);var o=e.call(this)||this;return o.pivot=new r.Vector3(t,n,i),o}return i(t,e),t.prototype.setMeshCenter=function(){var e=-(this.mod.minX+this.mod.width/2),t=-(this.mod.minY+this.mod.height/2),n=-(this.mod.minZ+this.mod.depth/2);this.pivot=new r.Vector3(e,t,n)},t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=0;n<t;n++){var i=e[n];i.vector=i.vector.add(this.pivot)}var r=this.pivot.clone();this.mod.updateMeshPosition(r.negate())},t}(n(0).Modifier);t.Pivot=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Skew=void 0;var r=n(3),o=n(2),a=function(e){function t(t){void 0===t&&(t=0);var n=e.call(this)||this;return n._offset=.5,n._constraint=o.ModConstant.NONE,n._power=1,n._falloff=1,n._inverseFalloff=!1,n._oneSide=!1,n._swapAxes=!1,n._force=t,n}return i(t,e),t.prototype.setModifiable=function(t){e.prototype.setModifiable.call(this,t),this._skewAxis=this._skewAxis||t.maxAxis},t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=0;n<t;n++){var i=e[n];if(!(this._constraint==o.ModConstant.LEFT&&i.getRatio(this._skewAxis)<=this._offset||this._constraint==o.ModConstant.RIGHT&&i.getRatio(this._skewAxis)>this._offset)){var a=i.getRatio(this._skewAxis)-this._offset;this._oneSide&&(a=Math.abs(a));var s=i.getRatio(this.displaceAxis);this._inverseFalloff&&(s=1-s);var c=this._falloff+s*(1-this._falloff),l=Math.pow(Math.abs(a),this._power)*r.TMath.sign(a,1),u=i.getValue(this.displaceAxis)+this.force*l*c;i.setValue(this.displaceAxis,u)}}},Object.defineProperty(t.prototype,"displaceAxis",{get:function(){switch(this._skewAxis){case o.ModConstant.X:return this._swapAxes?o.ModConstant.Z:o.ModConstant.Y;case o.ModConstant.Y:return this._swapAxes?o.ModConstant.Z:o.ModConstant.X;case o.ModConstant.Z:return this._swapAxes?o.ModConstant.Y:o.ModConstant.X;default:return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"force",{get:function(){return this._force},set:function(e){this._force=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constraint",{get:function(){return this._constraint},set:function(e){this._constraint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=r.TMath.trim(0,1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){return this._power},set:function(e){this._power=Math.max(1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"falloff",{get:function(){return this._falloff},set:function(e){this._falloff=r.TMath.trim(0,1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oneSide",{get:function(){return this._oneSide},set:function(e){this._oneSide=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skewAxis",{get:function(){return this._skewAxis},set:function(e){this._skewAxis=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"swapAxes",{get:function(){return this._swapAxes},set:function(e){this._swapAxes=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inverseFalloff",{get:function(){return this._inverseFalloff},set:function(e){this._inverseFalloff=e},enumerable:!1,configurable:!0}),t}(n(0).Modifier);t.Skew=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Taper=void 0;var r=n(4),o=n(1),a=function(e){function t(t){var n=e.call(this)||this;return n.start=0,n.end=1,n._vector=new o.Vector3(1,0,1),n._vector2=new o.Vector3(0,1,0),n.frc=t,n.pow=1,n}return i(t,e),t.prototype.setFalloff=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1),this.start=e,this.end=t},Object.defineProperty(t.prototype,"force",{get:function(){return this.frc},set:function(e){this.frc=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){return this.pow},set:function(e){this.pow=e},enumerable:!1,configurable:!0}),t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=0;n<t;n++){var i=e[n],o=i.ratioVector.multiply(this._vector2),a=this.frc*Math.pow(o.magnitude,this.pow),s=r.Matrix4.scaleMatrix(1+a*this._vector.x,1+a*this._vector.y,1+a*this._vector.z),c=i.vector;r.Matrix4.multiplyVector(s,c),i.vector=c}},t}(n(0).Modifier);t.Taper=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Twist=void 0;var r=n(4),o=n(1),a=function(e){function t(t){void 0===t&&(t=0);var n=e.call(this)||this;return n._vector=new o.Vector3(0,1,0),n.center=o.Vector3.ZERO,n._angle=t,n}return i(t,e),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vector",{get:function(){return this._vector},set:function(e){this._vector=e},enumerable:!1,configurable:!0}),t.prototype.apply=function(){this._vector.normalize();for(var e=new o.Vector3(this.mod.maxX/2,this.mod.maxY/2,this.mod.maxZ/2),t=-o.Vector3.dot(this._vector,this.center),n=0;n<this.mod.getVertices().length;n++){var i=this.mod.getVertices()[n],r=o.Vector3.dot(new o.Vector3(i.x,i.y,i.z),this._vector)+t;this.twistPoint(i,r/e.magnitude*this._angle)}},t.prototype.twistPoint=function(e,t){var n=r.Matrix4.translationMatrix(e.x,e.y,e.z);n=r.Matrix4.multiply(r.Matrix4.rotationMatrix(this._vector.x,this._vector.y,this._vector.z,t),n),e.x=n.n14,e.y=n.n24,e.z=n.n34},t}(n(0).Modifier);t.Twist=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Wheel=void 0;var r=n(4),o=n(1),a=function(e){function t(){var t=e.call(this)||this;return t.steerVector=new o.Vector3(0,1,0),t.rollVector=new o.Vector3(0,0,1),t.speed=0,t.turn=0,t.roll=0,t}return i(t,e),t.prototype.setModifiable=function(t){e.prototype.setModifiable.call(this,t),this._radius=t.width/2},t.prototype.apply=function(){this.roll+=this.speed;var e,t,n=this.mod.getVertices(),i=n.length;if(0!=this.turn){t=r.Matrix4.rotationMatrix(this.steerVector.x,this.steerVector.y,this.steerVector.z,this.turn);var o=this.rollVector.clone();r.Matrix4.multiplyVector(t,o),e=r.Matrix4.rotationMatrix(o.x,o.y,o.z,this.roll)}else e=r.Matrix4.rotationMatrix(this.rollVector.x,this.rollVector.y,this.rollVector.z,this.roll);for(var a=0;a<i;a++){var s=n[a],c=s.vector.clone();0!=this.turn&&r.Matrix4.multiplyVector(t,c),r.Matrix4.multiplyVector(e,c),s.x=c.x,s.y=c.y,s.z=c.z}},Object.defineProperty(t.prototype,"step",{get:function(){return this._radius*this.speed/Math.PI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"perimeter",{get:function(){return 2*this._radius*Math.PI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),t}(n(0).Modifier);t.Wheel=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.UserDefined=void 0;var r=n(0),o=n(32),a=function(e){function t(){var t=e.call(this)||this;return t.eventEmitter=new o.EventEmitter,t}return i(t,e),t.prototype.apply=function(){for(var e=this.mod.getVertices(),t=e.length,n=0;n<t;n++){var i=e[n];this.renderVector&&this.renderVector(i,n,t)}this.dispatchEvent("CHANGE")},t.prototype.addEventListener=function(e,t){this.eventEmitter.on(e,t)},t.prototype.dispatchEvent=function(e){return this.eventEmitter.emit(e)},t.prototype.hasEventListener=function(e){return this.eventEmitter.has(e)},t.prototype.removeEventListener=function(e,t){this.eventEmitter.off(e,t)},t}(r.Modifier);t.UserDefined=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i,r=function(){function e(){}return e.prototype.on=function(e,t){return i||(i={}),i[e]||(i[e]=[]),i[e].push(t),t},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=!1;if(e&&i){var o=i[e];if(!o)return r;var a=(o=o.slice()).length,s=Array.prototype.slice.call(arguments);for(s.shift();a--;){var c=o[a];r=r||c.apply(null,s)}}return!!r},e.prototype.one=function(e,t){var n=this,i=Array.prototype.slice.call(arguments,2),r=function(){n.off(e,r),t.apply(null,i)};this.on(e,r)},e.prototype.has=function(e){return!(!i||!i[e])},e.prototype.off=function(e,t){if(i&&i[e])for(var n=i[e],r=0,o=n.length;r<o;r++)if(n[r].toString()==t.toString()){1==o?delete i[e]:n.splice(r,1);break}},e.prototype.offAll=function(e){e?i&&delete i[e]:i=null},e}();t.EventEmitter=r}])},6163:(e,t,n)=>{"use strict";const i=100,r=204,o=205,a=301,s=302,c=306,l=1e3,u=1001,d=1002,h=1003,p=1004,m=1005,f=1006,g=1008,y=1009,v=1012,b=1014,x=1015,w=1016,S=1020,E=1022,_=1023,C=1026,P=1027,M=2300,T=2301,A=2302,I=2400,R=2401,k=2402,L=3e3,N=3001,B=3007,D=3002,O=7680,F=35044,z=35048,U="300 es";class H{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const j=[];for(let e=0;e<256;e++)j[e]=(e<16?"0":"")+e.toString(16);let G=1234567;const V=Math.PI/180,W=180/Math.PI;function q(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(j[255&e]+j[e>>8&255]+j[e>>16&255]+j[e>>24&255]+"-"+j[255&t]+j[t>>8&255]+"-"+j[t>>16&15|64]+j[t>>24&255]+"-"+j[63&n|128]+j[n>>8&255]+"-"+j[n>>16&255]+j[n>>24&255]+j[255&i]+j[i>>8&255]+j[i>>16&255]+j[i>>24&255]).toUpperCase()}function Y(e,t,n){return Math.max(t,Math.min(n,e))}function K(e,t){return(e%t+t)%t}function $(e,t,n){return(1-n)*e+n*t}function X(e){return 0==(e&e-1)&&0!==e}function Z(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function J(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Q=Object.freeze({__proto__:null,DEG2RAD:V,RAD2DEG:W,generateUUID:q,clamp:Y,euclideanModulo:K,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:$,damp:function(e,t,n,i){return $(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(K(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(G=e%2147483647),G=16807*G%2147483647,(G-1)/2147483646},degToRad:function(e){return e*V},radToDeg:function(e){return e*W},isPowerOfTwo:X,ceilPowerOfTwo:Z,floorPowerOfTwo:J,setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),l=o((t+i)/2),u=a((t+i)/2),d=o((t-i)/2),h=a((t-i)/2),p=o((i-t)/2),m=a((i-t)/2);switch(r){case"XYX":e.set(s*u,c*d,c*h,s*l);break;case"YZY":e.set(c*h,s*u,c*d,s*l);break;case"ZXZ":e.set(c*d,c*h,s*u,s*l);break;case"XZX":e.set(s*u,c*m,c*p,s*l);break;case"YXY":e.set(c*p,s*u,c*m,s*l);break;case"ZYZ":e.set(c*m,c*p,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class ee{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}ee.prototype.isVector2=!0;class te{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,a,s,c){const l=this.elements;return l[0]=e,l[1]=i,l[2]=a,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],d=n[2],h=n[5],p=n[8],m=i[0],f=i[3],g=i[6],y=i[1],v=i[4],b=i[7],x=i[2],w=i[5],S=i[8];return r[0]=o*m+a*y+s*x,r[3]=o*f+a*v+s*w,r[6]=o*g+a*b+s*S,r[1]=c*m+l*y+u*x,r[4]=c*f+l*v+u*w,r[7]=c*g+l*b+u*S,r[2]=d*m+h*y+p*x,r[5]=d*f+h*v+p*w,r[8]=d*g+h*b+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-n*r*l+n*a*s+i*r*c-i*o*s}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=l*o-a*c,d=a*s-l*r,h=c*r-o*s,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(i*c-l*n)*m,e[2]=(a*n-i*o)*m,e[3]=d*m,e[4]=(l*t-i*s)*m,e[5]=(i*r-a*t)*m,e[6]=h*m,e[7]=(n*s-c*t)*m,e[8]=(o*t-n*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,a){const s=Math.cos(r),c=Math.sin(r);return this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-i*c,i*s,-i*(-c*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*c,i[6]=t*a+n*l,i[1]=-n*r+t*s,i[4]=-n*o+t*c,i[7]=-n*a+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let ne;te.prototype.isMatrix3=!0;class ie{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ne&&(ne=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),ne.width=e.width,ne.height=e.height;const n=ne.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ne}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let re=0;class oe extends H{constructor(e=oe.DEFAULT_IMAGE,t=oe.DEFAULT_MAPPING,n=1001,i=1001,r=1006,o=1008,a=1023,s=1009,c=1,l=3e3){super(),Object.defineProperty(this,"id",{value:re++}),this.uuid=q(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=s,this.offset=new ee(0,0),this.repeat=new ee(1,1),this.center=new ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new te,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=q()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(ae(i[e].image)):t.push(ae(i[e]))}else t=ae(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case l:e.x=e.x-Math.floor(e.x);break;case u:e.x=e.x<0?0:1;break;case d:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case l:e.y=e.y-Math.floor(e.y);break;case u:e.y=e.y<0?0:1;break;case d:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ae(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ie.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}oe.DEFAULT_IMAGE=void 0,oe.DEFAULT_MAPPING=300,oe.prototype.isTexture=!0;class se{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,a=.1,s=e.elements,c=s[0],l=s[4],u=s[8],d=s[1],h=s[5],p=s[9],m=s[2],f=s[6],g=s[10];if(Math.abs(l-d)<o&&Math.abs(u-m)<o&&Math.abs(p-f)<o){if(Math.abs(l+d)<a&&Math.abs(u+m)<a&&Math.abs(p+f)<a&&Math.abs(c+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,s=(h+1)/2,y=(g+1)/2,v=(l+d)/4,b=(u+m)/4,x=(p+f)/4;return e>s&&e>y?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=b/n):s>y?s<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=v/i,r=x/i):y<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=b/r,i=x/r),this.set(n,i,r,t),this}let y=Math.sqrt((f-p)*(f-p)+(u-m)*(u-m)+(d-l)*(d-l));return Math.abs(y)<.001&&(y=1),this.x=(f-p)/y,this.y=(u-m)/y,this.z=(d-l)/y,this.w=Math.acos((c+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}se.prototype.isVector4=!0;class ce extends H{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new se(0,0,e,t),this.scissorTest=!1,this.viewport=new se(0,0,e,t),this.texture=new oe(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:f,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ce.prototype.isWebGLRenderTarget=!0,class extends ce{constructor(e,t,n){super(e,t);const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class le extends ce{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}le.prototype.isWebGLMultisampleRenderTarget=!0;class ue{constructor(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,i)}static slerpFlat(e,t,n,i,r,o,a){let s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const d=r[o+0],h=r[o+1],p=r[o+2],m=r[o+3];if(0===a)return e[t+0]=s,e[t+1]=c,e[t+2]=l,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(u!==m||s!==d||c!==h||l!==p){let e=1-a;const t=s*d+c*h+l*p+u*m,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*e+d*r,c=c*e+h*r,l=l*e+p*r,u=u*e+m*r,e===1-a){const e=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=e,c*=e,l*=e,u*=e}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,o){const a=n[i],s=n[i+1],c=n[i+2],l=n[i+3],u=r[o],d=r[o+1],h=r[o+2],p=r[o+3];return e[t]=a*p+l*u+s*h-c*d,e[t+1]=s*p+l*d+c*u-a*h,e[t+2]=c*p+l*h+a*d-s*u,e[t+3]=l*p-a*u-s*d-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,o=e._order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(i/2),u=a(r/2),d=s(n/2),h=s(i/2),p=s(r/2);switch(o){case"XYZ":this._x=d*l*u+c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u-d*h*p;break;case"YXZ":this._x=d*l*u+c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u+d*h*p;break;case"ZXY":this._x=d*l*u-c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u-d*h*p;break;case"ZYX":this._x=d*l*u-c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u+d*h*p;break;case"YZX":this._x=d*l*u+c*h*p,this._y=c*h*u+d*l*p,this._z=c*l*p-d*h*u,this._w=c*l*u-d*h*p;break;case"XZY":this._x=d*l*u-c*h*p,this._y=c*h*u-d*l*p,this._z=c*l*p+d*h*u,this._w=c*l*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],a=t[5],s=t[9],c=t[2],l=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(l-s)*e,this._y=(r-c)*e,this._z=(o-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(l-s)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+c)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-c)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-i)/e,this._x=(r+c)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Y(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+o*a+i*c-r*s,this._y=i*l+o*s+r*a-n*c,this._z=r*l+o*c+n*s-i*a,this._w=o*l-n*a-i*s-r*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-t)*l)/c,d=Math.sin(t*l)/c;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ue.prototype.isQuaternion=!0;class de{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pe.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pe.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*i-a*n,l=s*n+a*t-r*i,u=s*i+r*n-o*t,d=-r*t-o*n-a*i;return this.x=c*s+d*-r+l*-a-u*-o,this.y=l*s+d*-o+u*-r-c*-a,this.z=u*s+d*-a+c*-o-l*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return he.copy(this).projectOnVector(e),this.sub(he)}reflect(e){return this.sub(he.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Y(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}de.prototype.isVector3=!0;const he=new de,pe=new ue;class me{constructor(e=new de(1/0,1/0,1/0),t=new de(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.length;s<c;s+=3){const c=e[s],l=e[s+1],u=e[s+2];c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.count;s<c;s++){const c=e.getX(s),l=e.getY(s),u=e.getZ(s);c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ge.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ye.copy(t.boundingBox),ye.applyMatrix4(e.matrixWorld),this.union(ye));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ge),ge.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_e),Ce.subVectors(this.max,_e),ve.subVectors(e.a,_e),be.subVectors(e.b,_e),xe.subVectors(e.c,_e),we.subVectors(be,ve),Se.subVectors(xe,be),Ee.subVectors(ve,xe);let t=[0,-we.z,we.y,0,-Se.z,Se.y,0,-Ee.z,Ee.y,we.z,0,-we.x,Se.z,0,-Se.x,Ee.z,0,-Ee.x,-we.y,we.x,0,-Se.y,Se.x,0,-Ee.y,Ee.x,0];return!!Te(t,ve,be,xe,Ce)&&(t=[1,0,0,0,1,0,0,0,1],!!Te(t,ve,be,xe,Ce)&&(Pe.crossVectors(we,Se),t=[Pe.x,Pe.y,Pe.z],Te(t,ve,be,xe,Ce)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ge.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ge).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(fe[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fe[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fe[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fe[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fe[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fe[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fe[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fe[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fe)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}me.prototype.isBox3=!0;const fe=[new de,new de,new de,new de,new de,new de,new de,new de],ge=new de,ye=new me,ve=new de,be=new de,xe=new de,we=new de,Se=new de,Ee=new de,_e=new de,Ce=new de,Pe=new de,Me=new de;function Te(e,t,n,i,r){for(let o=0,a=e.length-3;o<=a;o+=3){Me.fromArray(e,o);const a=r.x*Math.abs(Me.x)+r.y*Math.abs(Me.y)+r.z*Math.abs(Me.z),s=t.dot(Me),c=n.dot(Me),l=i.dot(Me);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}const Ae=new me,Ie=new de,Re=new de,ke=new de;class Le{constructor(e=new de,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Ae.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ke.subVectors(e,this.center);const t=ke.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(ke.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return Re.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Ie.copy(e.center).add(Re)),this.expandByPoint(Ie.copy(e.center).sub(Re)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ne=new de,Be=new de,De=new de,Oe=new de,Fe=new de,ze=new de,Ue=new de;class He{constructor(e=new de,t=new de(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ne)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ne.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ne.copy(this.direction).multiplyScalar(t).add(this.origin),Ne.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Be.copy(e).add(t).multiplyScalar(.5),De.copy(t).sub(e).normalize(),Oe.copy(this.origin).sub(Be);const r=.5*e.distanceTo(t),o=-this.direction.dot(De),a=Oe.dot(this.direction),s=-Oe.dot(De),c=Oe.lengthSq(),l=Math.abs(1-o*o);let u,d,h,p;if(l>0)if(u=o*s-a,d=o*a-s,p=r*l,u>=0)if(d>=-p)if(d<=p){const e=1/l;u*=e,d*=e,h=u*(u+o*d+2*a)+d*(o*u+d+2*s)+c}else d=r,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+c;else d=-r,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+c;else d<=-p?(u=Math.max(0,-(-o*r+a)),d=u>0?-r:Math.min(Math.max(-r,-s),r),h=-u*u+d*(d+2*s)+c):d<=p?(u=0,d=Math.min(Math.max(-r,-s),r),h=d*(d+2*s)+c):(u=Math.max(0,-(o*r+a)),d=u>0?r:Math.min(Math.max(-r,-s),r),h=-u*u+d*(d+2*s)+c);else d=o>0?-r:r,u=Math.max(0,-(o*d+a)),h=-u*u+d*(d+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(De).multiplyScalar(d).add(Be),h}intersectSphere(e,t){Ne.subVectors(e.center,this.origin);const n=Ne.dot(this.direction),i=Ne.dot(Ne)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),l>=0?(r=(e.min.y-d.y)*l,o=(e.max.y-d.y)*l):(r=(e.max.y-d.y)*l,o=(e.min.y-d.y)*l),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ne)}intersectTriangle(e,t,n,i,r){Fe.subVectors(t,e),ze.subVectors(n,e),Ue.crossVectors(Fe,ze);let o,a=this.direction.dot(Ue);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Oe.subVectors(this.origin,e);const s=o*this.direction.dot(ze.crossVectors(Oe,ze));if(s<0)return null;const c=o*this.direction.dot(Fe.cross(Oe));if(c<0)return null;if(s+c>a)return null;const l=-o*Oe.dot(Ue);return l<0?null:this.at(l/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class je{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,a,s,c,l,u,d,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new je).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ge.setFromMatrixColumn(e,0).length(),r=1/Ge.setFromMatrixColumn(e,1).length(),o=1/Ge.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*l,n=o*u,i=a*l,r=a*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=n+i*c,t[5]=e-r*c,t[9]=-a*s,t[2]=r-e*c,t[6]=i+n*c,t[10]=o*s}else if("YXZ"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e-r*a,t[4]=-o*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=o*l,t[9]=r-e*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*l,n=o*u,i=a*l,r=a*u;t[0]=s*l,t[4]=i*c-n,t[8]=e*c+r,t[1]=s*u,t[5]=r*c+e,t[9]=n*c-i,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*c,i=a*s,r=a*c;t[0]=s*l,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*l,t[9]=-a*l,t[2]=-c*l,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*s,n=o*c,i=a*s,r=a*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=e*u+r,t[5]=o*l,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*l,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(We,e,qe)}lookAt(e,t,n){const i=this.elements;return $e.subVectors(e,t),0===$e.lengthSq()&&($e.z=1),$e.normalize(),Ye.crossVectors(n,$e),0===Ye.lengthSq()&&(1===Math.abs(n.z)?$e.x+=1e-4:$e.z+=1e-4,$e.normalize(),Ye.crossVectors(n,$e)),Ye.normalize(),Ke.crossVectors($e,Ye),i[0]=Ye.x,i[4]=Ke.x,i[8]=$e.x,i[1]=Ye.y,i[5]=Ke.y,i[9]=$e.y,i[2]=Ye.z,i[6]=Ke.z,i[10]=$e.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],d=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],w=i[0],S=i[4],E=i[8],_=i[12],C=i[1],P=i[5],M=i[9],T=i[13],A=i[2],I=i[6],R=i[10],k=i[14],L=i[3],N=i[7],B=i[11],D=i[15];return r[0]=o*w+a*C+s*A+c*L,r[4]=o*S+a*P+s*I+c*N,r[8]=o*E+a*M+s*R+c*B,r[12]=o*_+a*T+s*k+c*D,r[1]=l*w+u*C+d*A+h*L,r[5]=l*S+u*P+d*I+h*N,r[9]=l*E+u*M+d*R+h*B,r[13]=l*_+u*T+d*k+h*D,r[2]=p*w+m*C+f*A+g*L,r[6]=p*S+m*P+f*I+g*N,r[10]=p*E+m*M+f*R+g*B,r[14]=p*_+m*T+f*k+g*D,r[3]=y*w+v*C+b*A+x*L,r[7]=y*S+v*P+b*I+x*N,r[11]=y*E+v*M+b*R+x*B,r[15]=y*_+v*T+b*k+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*s*u-i*c*u-r*a*d+n*c*d+i*a*h-n*s*h)+e[7]*(+t*s*h-t*c*d+r*o*d-i*o*h+i*c*l-r*s*l)+e[11]*(+t*c*u-t*a*h-r*o*u+n*o*h+r*a*l-n*c*l)+e[15]*(-i*a*l-t*s*u+t*a*d+i*o*u-n*o*d+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],y=u*f*c-m*d*c+m*s*h-a*f*h-u*s*g+a*d*g,v=p*d*c-l*f*c-p*s*h+o*f*h+l*s*g-o*d*g,b=l*m*c-p*u*c+p*a*h-o*m*h-l*a*g+o*u*g,x=p*u*s-l*m*s-p*a*d+o*m*d+l*a*f-o*u*f,w=t*y+n*v+i*b+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=y*S,e[1]=(m*d*r-u*f*r-m*i*h+n*f*h+u*i*g-n*d*g)*S,e[2]=(a*f*r-m*s*r+m*i*c-n*f*c-a*i*g+n*s*g)*S,e[3]=(u*s*r-a*d*r-u*i*c+n*d*c+a*i*h-n*s*h)*S,e[4]=v*S,e[5]=(l*f*r-p*d*r+p*i*h-t*f*h-l*i*g+t*d*g)*S,e[6]=(p*s*r-o*f*r-p*i*c+t*f*c+o*i*g-t*s*g)*S,e[7]=(o*d*r-l*s*r+l*i*c-t*d*c-o*i*h+t*s*h)*S,e[8]=b*S,e[9]=(p*u*r-l*m*r-p*n*h+t*m*h+l*n*g-t*u*g)*S,e[10]=(o*m*r-p*a*r+p*n*c-t*m*c-o*n*g+t*a*g)*S,e[11]=(l*a*r-o*u*r-l*n*c+t*u*c+o*n*h-t*a*h)*S,e[12]=x*S,e[13]=(l*m*i-p*u*i+p*n*d-t*m*d-l*n*f+t*u*f)*S,e[14]=(p*a*i-o*m*i-p*n*s+t*m*s+o*n*f-t*a*f)*S,e[15]=(o*u*i-l*a*i+l*n*s-t*u*s-o*n*d+t*a*d)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,c=r*o,l=r*a;return this.set(c*o+n,c*a-i*s,c*s+i*a,0,c*a+i*s,l*a+n,l*s-i*o,0,c*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,c=r+r,l=o+o,u=a+a,d=r*c,h=r*l,p=r*u,m=o*l,f=o*u,g=a*u,y=s*c,v=s*l,b=s*u,x=n.x,w=n.y,S=n.z;return i[0]=(1-(m+g))*x,i[1]=(h+b)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(h-b)*w,i[5]=(1-(d+g))*w,i[6]=(f+y)*w,i[7]=0,i[8]=(p+v)*S,i[9]=(f-y)*S,i[10]=(1-(d+m))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ge.set(i[0],i[1],i[2]).length();const o=Ge.set(i[4],i[5],i[6]).length(),a=Ge.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Ve.copy(this);const s=1/r,c=1/o,l=1/a;return Ve.elements[0]*=s,Ve.elements[1]*=s,Ve.elements[2]*=s,Ve.elements[4]*=c,Ve.elements[5]*=c,Ve.elements[6]*=c,Ve.elements[8]*=l,Ve.elements[9]*=l,Ve.elements[10]*=l,t.setFromRotationMatrix(Ve),n.x=r,n.y=o,n.z=a,this}makePerspective(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),d=-(o+r)/(o-r),h=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,o){const a=this.elements,s=1/(t-e),c=1/(n-i),l=1/(o-r),u=(t+e)*s,d=(n+i)*c,h=(o+r)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}je.prototype.isMatrix4=!0;const Ge=new de,Ve=new je,We=new de(0,0,0),qe=new de(1,1,1),Ye=new de,Ke=new de,$e=new de,Xe=new je,Ze=new ue;class Je{constructor(e=0,t=0,n=0,i=Je.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],o=i[4],a=i[8],s=i[1],c=i[5],l=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Y(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Y(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Y(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Y(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Y(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Y(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Xe.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Xe,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ze.setFromEuler(this),this.setFromQuaternion(Ze,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new de(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Je.prototype.isEuler=!0,Je.DefaultOrder="XYZ",Je.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Qe{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let et=0;const tt=new de,nt=new ue,it=new je,rt=new de,ot=new de,at=new de,st=new ue,ct=new de(1,0,0),lt=new de(0,1,0),ut=new de(0,0,1),dt={type:"added"},ht={type:"removed"};class pt extends H{constructor(){super(),Object.defineProperty(this,"id",{value:et++}),this.uuid=q(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pt.DefaultUp.clone();const e=new de,t=new Je,n=new ue,i=new de(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new je},normalMatrix:{value:new te}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=pt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Qe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return nt.setFromAxisAngle(e,t),this.quaternion.multiply(nt),this}rotateOnWorldAxis(e,t){return nt.setFromAxisAngle(e,t),this.quaternion.premultiply(nt),this}rotateX(e){return this.rotateOnAxis(ct,e)}rotateY(e){return this.rotateOnAxis(lt,e)}rotateZ(e){return this.rotateOnAxis(ut,e)}translateOnAxis(e,t){return tt.copy(e).applyQuaternion(this.quaternion),this.position.add(tt.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ct,e)}translateY(e){return this.translateOnAxis(lt,e)}translateZ(e){return this.translateOnAxis(ut,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(it.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?rt.copy(e):rt.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),ot.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?it.lookAt(ot,rt,this.up):it.lookAt(rt,ot,this.up),this.quaternion.setFromRotationMatrix(it),i&&(it.extractRotation(i.matrixWorld),nt.setFromRotationMatrix(it),this.quaternion.premultiply(nt.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(dt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ht)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(ht)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),it.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),it.multiply(e.parent.matrixWorld)),e.applyMatrix4(it),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ot,e,at),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ot,st,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),a=o(e.images),s=o(e.shapes),c=o(e.skeletons),l=o(e.animations);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}pt.DefaultUp=new de(0,1,0),pt.DefaultMatrixAutoUpdate=!0,pt.prototype.isObject3D=!0;const mt=new de,ft=new de,gt=new de,yt=new de,vt=new de,bt=new de,xt=new de,wt=new de,St=new de,Et=new de;class _t{constructor(e=new de,t=new de,n=new de){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),mt.subVectors(e,t),i.cross(mt);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){mt.subVectors(i,t),ft.subVectors(n,t),gt.subVectors(e,t);const o=mt.dot(mt),a=mt.dot(ft),s=mt.dot(gt),c=ft.dot(ft),l=ft.dot(gt),u=o*c-a*a;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(c*s-a*l)*d,p=(o*l-a*s)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,yt),yt.x>=0&&yt.y>=0&&yt.x+yt.y<=1}static getUV(e,t,n,i,r,o,a,s){return this.getBarycoord(e,t,n,i,yt),s.set(0,0),s.addScaledVector(r,yt.x),s.addScaledVector(o,yt.y),s.addScaledVector(a,yt.z),s}static isFrontFacing(e,t,n,i){return mt.subVectors(n,t),ft.subVectors(e,t),mt.cross(ft).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mt.subVectors(this.c,this.b),ft.subVectors(this.a,this.b),.5*mt.cross(ft).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _t.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _t.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return _t.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return _t.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _t.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,a;vt.subVectors(i,n),bt.subVectors(r,n),wt.subVectors(e,n);const s=vt.dot(wt),c=bt.dot(wt);if(s<=0&&c<=0)return t.copy(n);St.subVectors(e,i);const l=vt.dot(St),u=bt.dot(St);if(l>=0&&u<=l)return t.copy(i);const d=s*u-l*c;if(d<=0&&s>=0&&l<=0)return o=s/(s-l),t.copy(n).addScaledVector(vt,o);Et.subVectors(e,r);const h=vt.dot(Et),p=bt.dot(Et);if(p>=0&&h<=p)return t.copy(r);const m=h*c-s*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(bt,a);const f=l*p-h*u;if(f<=0&&u-l>=0&&h-p>=0)return xt.subVectors(r,i),a=(u-l)/(u-l+(h-p)),t.copy(i).addScaledVector(xt,a);const g=1/(f+m+d);return o=m*g,a=d*g,t.copy(n).addScaledVector(vt,o).addScaledVector(bt,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ct=0;class Pt extends H{constructor(){super(),Object.defineProperty(this,"id",{value:Ct++}),this.uuid=q(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=_,this.transparent=!1,this.blendSrc=r,this.blendDst=o,this.blendEquation=i,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=O,this.stencilZFail=O,this.stencilZPass=O,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==_&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Pt.prototype.isMaterial=!0;const Mt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tt={h:0,s:0,l:0},At={h:0,s:0,l:0};function It(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Rt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function kt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Lt{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=K(e,1),t=Y(t,0,1),n=Y(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=It(r,i,e+1/3),this.g=It(r,i,e),this.b=It(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Mt[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Rt(e.r),this.g=Rt(e.g),this.b=Rt(e.b),this}copyLinearToSRGB(e){return this.r=kt(e.r),this.g=kt(e.g),this.b=kt(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),o=Math.min(t,n,i);let a,s;const c=(o+r)/2;if(o===r)a=0,s=0;else{const e=r-o;switch(s=c<=.5?e/(r+o):e/(2-r-o),r){case t:a=(n-i)/e+(n<i?6:0);break;case n:a=(i-t)/e+2;break;case i:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=c,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Tt),Tt.h+=e,Tt.s+=t,Tt.l+=n,this.setHSL(Tt.h,Tt.s,Tt.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Tt),e.getHSL(At);const n=$(Tt.h,At.h,t),i=$(Tt.s,At.s,t),r=$(Tt.l,At.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Lt.NAMES=Mt,Lt.prototype.isColor=!0,Lt.prototype.r=1,Lt.prototype.g=1,Lt.prototype.b=1;class Nt extends Pt{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Nt.prototype.isMeshBasicMaterial=!0;const Bt=new de,Dt=new ee;class Ot{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=F,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new Lt),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new ee),t[n++]=r.x,t[n++]=r.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new de),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new se),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Dt.fromBufferAttribute(this,t),Dt.applyMatrix3(e),this.setXY(t,Dt.x,Dt.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Bt.fromBufferAttribute(this,t),Bt.applyMatrix3(e),this.setXYZ(t,Bt.x,Bt.y,Bt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Bt.x=this.getX(t),Bt.y=this.getY(t),Bt.z=this.getZ(t),Bt.applyMatrix4(e),this.setXYZ(t,Bt.x,Bt.y,Bt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Bt.x=this.getX(t),Bt.y=this.getY(t),Bt.z=this.getZ(t),Bt.applyNormalMatrix(e),this.setXYZ(t,Bt.x,Bt.y,Bt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Bt.x=this.getX(t),Bt.y=this.getY(t),Bt.z=this.getZ(t),Bt.transformDirection(e),this.setXYZ(t,Bt.x,Bt.y,Bt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==F&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Ot.prototype.isBufferAttribute=!0;class Ft extends Ot{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class zt extends Ot{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class extends Ot{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class Ut extends Ot{constructor(e,t,n){super(new Float32Array(e),t,n)}}function Ht(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let jt=0;const Gt=new je,Vt=new pt,Wt=new de,qt=new me,Yt=new me,Kt=new de;class $t extends H{constructor(){super(),Object.defineProperty(this,"id",{value:jt++}),this.uuid=q(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ht(e)>65535?zt:Ft)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new te).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gt.makeRotationFromQuaternion(e),this.applyMatrix4(Gt),this}rotateX(e){return Gt.makeRotationX(e),this.applyMatrix4(Gt),this}rotateY(e){return Gt.makeRotationY(e),this.applyMatrix4(Gt),this}rotateZ(e){return Gt.makeRotationZ(e),this.applyMatrix4(Gt),this}translate(e,t,n){return Gt.makeTranslation(e,t,n),this.applyMatrix4(Gt),this}scale(e,t,n){return Gt.makeScale(e,t,n),this.applyMatrix4(Gt),this}lookAt(e){return Vt.lookAt(e),Vt.updateMatrix(),this.applyMatrix4(Vt.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wt).negate(),this.translate(Wt.x,Wt.y,Wt.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Ut(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new me);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new de(-1/0,-1/0,-1/0),new de(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];qt.setFromBufferAttribute(n),this.morphTargetsRelative?(Kt.addVectors(this.boundingBox.min,qt.min),this.boundingBox.expandByPoint(Kt),Kt.addVectors(this.boundingBox.max,qt.max),this.boundingBox.expandByPoint(Kt)):(this.boundingBox.expandByPoint(qt.min),this.boundingBox.expandByPoint(qt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Le);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new de,1/0);if(e){const n=this.boundingSphere.center;if(qt.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Yt.setFromBufferAttribute(n),this.morphTargetsRelative?(Kt.addVectors(qt.min,Yt.min),qt.expandByPoint(Kt),Kt.addVectors(qt.max,Yt.max),qt.expandByPoint(Kt)):(qt.expandByPoint(Yt.min),qt.expandByPoint(Yt.max))}qt.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Kt.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Kt));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],a=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Kt.fromBufferAttribute(o,t),a&&(Wt.fromBufferAttribute(e,t),Kt.add(Wt)),i=Math.max(i,n.distanceToSquared(Kt))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,o=t.uv.array,a=i.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ot(new Float32Array(4*a),4));const s=t.tangent.array,c=[],l=[];for(let e=0;e<a;e++)c[e]=new de,l[e]=new de;const u=new de,d=new de,h=new de,p=new ee,m=new ee,f=new ee,g=new de,y=new de;function v(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(o,2*e),m.fromArray(o,2*t),f.fromArray(o,2*n),d.sub(u),h.sub(u),m.sub(p),f.sub(p);const r=1/(m.x*f.y-f.x*m.y);isFinite(r)&&(g.copy(d).multiplyScalar(f.y).addScaledVector(h,-m.y).multiplyScalar(r),y.copy(h).multiplyScalar(m.x).addScaledVector(d,-f.x).multiplyScalar(r),c[e].add(g),c[t].add(g),c[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)v(n[e+0],n[e+1],n[e+2])}const x=new de,w=new de,S=new de,E=new de;function _(e){S.fromArray(r,3*e),E.copy(S);const t=c[e];x.copy(t),x.sub(S.multiplyScalar(S.dot(t))).normalize(),w.crossVectors(E,t);const n=w.dot(l[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)_(n[e+0]),_(n[e+1]),_(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ot(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new de,r=new de,o=new de,a=new de,s=new de,c=new de,l=new de,u=new de;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),m=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),c.fromBufferAttribute(n,m),a.add(l),s.add(l),c.add(l),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(m,c.x,c.y,c.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,o=e.attributes[i],a=o.array,s=o.itemSize*t,c=Math.min(a.length,r.length-s);for(let e=0,t=s;e<c;e++,t++)r[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Kt.fromBufferAttribute(e,t),Kt.normalize(),e.setXYZ(t,Kt.x,Kt.y,Kt.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let a=0,s=0;for(let r=0,c=t.length;r<c;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)o[s++]=n[a++]}return new Ot(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $t,n=this.index.array,i=this.attributes;for(const r in i){const o=e(i[r],n);t.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],a=r[i];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);o.push(i)}t.morphAttributes[i]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];o.push(i.toJSON(e.data))}o.length>0&&(i[t]=o,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new $t).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}$t.prototype.isBufferGeometry=!0;const Xt=new je,Zt=new He,Jt=new Le,Qt=new de,en=new de,tn=new de,nn=new de,rn=new de,on=new de,an=new de,sn=new de,cn=new de,ln=new ee,un=new ee,dn=new ee,hn=new de,pn=new de;class mn extends pt{constructor(e=new $t,t=new Nt){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jt.copy(n.boundingSphere),Jt.applyMatrix4(r),!1===e.ray.intersectsSphere(Jt))return;if(Xt.copy(r).invert(),Zt.copy(e.ray).applyMatrix4(Xt),null!==n.boundingBox&&!1===Zt.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=d.length;n<p;n++){const p=d[n],m=i[p.materialIndex];for(let n=Math.max(p.start,h.start),i=Math.min(p.start+p.count,h.start+h.count);n<i;n+=3){const i=r.getX(n),d=r.getX(n+1),h=r.getX(n+2);o=fn(this,m,e,Zt,a,s,c,l,u,i,d,h),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else for(let n=Math.max(0,h.start),d=Math.min(r.count,h.start+h.count);n<d;n+=3){const d=r.getX(n),h=r.getX(n+1),p=r.getX(n+2);o=fn(this,i,e,Zt,a,s,c,l,u,d,h,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==a)if(Array.isArray(i))for(let n=0,r=d.length;n<r;n++){const r=d[n],p=i[r.materialIndex];for(let n=Math.max(r.start,h.start),i=Math.min(r.start+r.count,h.start+h.count);n<i;n+=3)o=fn(this,p,e,Zt,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,t.push(o))}else for(let n=Math.max(0,h.start),r=Math.min(a.count,h.start+h.count);n<r;n+=3)o=fn(this,i,e,Zt,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function fn(e,t,n,i,r,o,a,s,c,l,u,d){Qt.fromBufferAttribute(r,l),en.fromBufferAttribute(r,u),tn.fromBufferAttribute(r,d);const h=e.morphTargetInfluences;if(o&&h){an.set(0,0,0),sn.set(0,0,0),cn.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=h[e],n=o[e];0!==t&&(nn.fromBufferAttribute(n,l),rn.fromBufferAttribute(n,u),on.fromBufferAttribute(n,d),a?(an.addScaledVector(nn,t),sn.addScaledVector(rn,t),cn.addScaledVector(on,t)):(an.addScaledVector(nn.sub(Qt),t),sn.addScaledVector(rn.sub(en),t),cn.addScaledVector(on.sub(tn),t)))}Qt.add(an),en.add(sn),tn.add(cn)}e.isSkinnedMesh&&(e.boneTransform(l,Qt),e.boneTransform(u,en),e.boneTransform(d,tn));const p=function(e,t,n,i,r,o,a,s){let c;if(c=1===t.side?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,2!==t.side,s),null===c)return null;pn.copy(s),pn.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(pn);return l<n.near||l>n.far?null:{distance:l,point:pn.clone(),object:e}}(e,t,n,i,Qt,en,tn,hn);if(p){s&&(ln.fromBufferAttribute(s,l),un.fromBufferAttribute(s,u),dn.fromBufferAttribute(s,d),p.uv=_t.getUV(hn,Qt,en,tn,ln,un,dn,new ee)),c&&(ln.fromBufferAttribute(c,l),un.fromBufferAttribute(c,u),dn.fromBufferAttribute(c,d),p.uv2=_t.getUV(hn,Qt,en,tn,ln,un,dn,new ee));const e={a:l,b:u,c:d,normal:new de,materialIndex:0};_t.getNormal(Qt,en,tn,e.normal),p.face=e}return p}mn.prototype.isMesh=!0;class gn extends $t{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],c=[],l=[],u=[];let d=0,h=0;function p(e,t,n,i,r,o,p,m,f,g,y){const v=o/f,b=p/g,x=o/2,w=p/2,S=m/2,E=f+1,_=g+1;let C=0,P=0;const M=new de;for(let o=0;o<_;o++){const a=o*b-w;for(let s=0;s<E;s++){const d=s*v-x;M[e]=d*i,M[t]=a*r,M[n]=S,c.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=m>0?1:-1,l.push(M.x,M.y,M.z),u.push(s/f),u.push(1-o/g),C+=1}}for(let e=0;e<g;e++)for(let t=0;t<f;t++){const n=d+t+E*e,i=d+t+E*(e+1),r=d+(t+1)+E*(e+1),o=d+(t+1)+E*e;s.push(n,i,o),s.push(i,r,o),P+=6}a.addGroup(h,P,y),h+=P,d+=C}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Ut(c,3)),this.setAttribute("normal",new Ut(l,3)),this.setAttribute("uv",new Ut(u,2))}static fromJSON(e){return new gn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yn(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function vn(e){const t={};for(let n=0;n<e.length;n++){const i=yn(e[n]);for(const e in i)t[e]=i[e]}return t}const bn={clone:yn,merge:vn};class xn extends Pt{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yn(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}xn.prototype.isShaderMaterial=!0;class wn extends pt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}wn.prototype.isCamera=!0;class Sn extends wn{constructor(e=50,t=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*W*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*V*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*W*Math.atan(Math.tan(.5*V*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*V*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/a,i*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Sn.prototype.isPerspectiveCamera=!0;const En=90;class _n extends pt{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Sn(En,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new de(1,0,0)),this.add(i);const r=new Sn(En,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new de(-1,0,0)),this.add(r);const o=new Sn(En,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new de(0,1,0)),this.add(o);const a=new Sn(En,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new de(0,-1,0)),this.add(a);const s=new Sn(En,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new de(0,0,1)),this.add(s);const c=new Sn(En,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new de(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,o,a,s,c]=this.children,l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l}}class Cn extends oe{constructor(e,t,n,i,r,o,s,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:a,n,i,r,o,s=void 0!==s?s:E,c,l,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Cn.prototype.isCubeTexture=!0;class Pn extends ce{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Cn(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:f,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=_,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new gn(5,5,5),a=new xn({name:"CubemapFromEquirect",uniforms:yn(n),vertexShader:i,fragmentShader:r,side:1,blending:0});a.uniforms.tEquirect.value=t;const s=new mn(o,a),c=t.minFilter;return t.minFilter===g&&(t.minFilter=f),new _n(1,10,this).update(e,s),t.minFilter=c,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}Pn.prototype.isWebGLCubeRenderTarget=!0;const Mn=new de,Tn=new de,An=new te;class In{constructor(e=new de(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Mn.subVectors(n,t).cross(Tn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Mn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||An.getNormalMatrix(e),i=this.coplanarPoint(Mn).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}In.prototype.isPlane=!0;const Rn=new Le,kn=new de;class Ln{constructor(e=new In,t=new In,n=new In,i=new In,r=new In,o=new In){this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],d=n[8],h=n[9],p=n[10],m=n[11],f=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-i,u-s,m-d,v-f).normalize(),t[1].setComponents(a+i,u+s,m+d,v+f).normalize(),t[2].setComponents(a+r,u+c,m+h,v+g).normalize(),t[3].setComponents(a-r,u-c,m-h,v-g).normalize(),t[4].setComponents(a-o,u-l,m-p,v-y).normalize(),t[5].setComponents(a+o,u+l,m+p,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Rn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Rn)}intersectsSprite(e){return Rn.center.set(0,0,0),Rn.radius=.7071067811865476,Rn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rn)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(kn.x=i.normal.x>0?e.max.x:e.min.x,kn.y=i.normal.y>0?e.max.y:e.min.y,kn.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(kn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Nn(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Bn(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);void 0===o?i.set(t,function(t,i){const r=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(i,a),e.bufferData(i,r,o),t.onUploadCallback();let s=5126;return r instanceof Float32Array?s=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:r instanceof Int16Array?s=5122:r instanceof Uint32Array?s=5125:r instanceof Int32Array?s=5124:r instanceof Int8Array?s=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(function(t,i,r){const o=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,o):(n?e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,r),o.version=t.version)}}}class Dn extends $t{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,a=Math.floor(n),s=Math.floor(i),c=a+1,l=s+1,u=e/a,d=t/s,h=[],p=[],m=[],f=[];for(let e=0;e<l;e++){const t=e*d-o;for(let n=0;n<c;n++){const i=n*u-r;p.push(i,-t,0),m.push(0,0,1),f.push(n/a),f.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+c*e,i=t+c*(e+1),r=t+1+c*(e+1),o=t+1+c*e;h.push(n,i,o),h.push(i,r,o)}this.setIndex(h),this.setAttribute("position",new Ut(p,3)),this.setAttribute("normal",new Ut(m,3)),this.setAttribute("uv",new Ut(f,2))}static fromJSON(e){return new Dn(e.width,e.height,e.widthSegments,e.heightSegments)}}const On={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotVH = saturate( dot( geometry.viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float NoH ) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float NoV, float NoL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );\n}\nvec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in GeometricContext geometry ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = transmission.a;\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Fn={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new te},uv2Transform:{value:new te},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new te}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new ee(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new te}}},zn={basic:{uniforms:vn([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:vn([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.fog,Fn.lights,{emissive:{value:new Lt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:vn([Fn.common,Fn.specularmap,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,Fn.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:vn([Fn.common,Fn.envmap,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.roughnessmap,Fn.metalnessmap,Fn.fog,Fn.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:vn([Fn.common,Fn.aomap,Fn.lightmap,Fn.emissivemap,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.gradientmap,Fn.fog,Fn.lights,{emissive:{value:new Lt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:vn([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,Fn.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:vn([Fn.points,Fn.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:vn([Fn.common,Fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:vn([Fn.common,Fn.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:vn([Fn.common,Fn.bumpmap,Fn.normalmap,Fn.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:vn([Fn.sprite,Fn.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new te},t2D:{value:null}},vertexShader:On.background_vert,fragmentShader:On.background_frag},cube:{uniforms:vn([Fn.envmap,{opacity:{value:1}}]),vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distanceRGBA:{uniforms:vn([Fn.common,Fn.displacementmap,{referencePosition:{value:new de},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distanceRGBA_vert,fragmentShader:On.distanceRGBA_frag},shadow:{uniforms:vn([Fn.lights,Fn.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};function Un(e,t,n,i,r){const o=new Lt(0);let a,s,l=0,u=null,d=0,h=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),l=t,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,p(o,l)},render:function(n,r){let m=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=t.get(f));const g=e.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(f=null),null===f?p(o,l):f&&f.isColor&&(p(f,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===c)?(void 0===s&&(s=new mn(new gn(1,1,1),new xn({name:"BackgroundCubeMaterial",uniforms:yn(zn.cube.uniforms),vertexShader:zn.cube.vertexShader,fragmentShader:zn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,u===f&&d===f.version&&h===e.toneMapping||(s.material.needsUpdate=!0,u=f,d=f.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===a&&(a=new mn(new Dn(2,2),new xn({name:"BackgroundMaterial",uniforms:yn(zn.background.uniforms),vertexShader:zn.background.vertexShader,fragmentShader:zn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),a.material.uniforms.uvTransform.value.copy(f.matrix),u===f&&d===f.version&&h===e.toneMapping||(a.material.needsUpdate=!0,u=f,d=f.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Hn(e,t,n,i){const r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},c=h(null);let l=c;function u(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function h(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){f(e,0)}function f(n,r){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==r&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function g(){const t=l.newAttributes,n=l.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,o,a,s):e.vertexAttribIPointer(t,n,r,a,s)}function v(){b(),l!==c&&(l=c,u(l.object))}function b(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,d,v,b){let x=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let c=s[t.id];void 0===c&&(c={},s[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[a];return void 0===u&&(u=h(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=u),u}(v,d,c);l!==t&&(l=t,u(l.object)),x=function(e,t){const n=l.attributes,i=e.attributes;let r=0;for(const e in i){const t=n[e],o=i[e];if(void 0===t)return!0;if(t.attribute!==o)return!0;if(t.data!==o.data)return!0;r++}return l.attributesNum!==r||l.index!==t}(v,b),x&&function(e,t){const n={},i=e.attributes;let r=0;for(const e in i){const t=i[e],o={};o.attribute=t,t.data&&(o.data=t.data),n[e]=o,r++}l.attributes=n,l.attributesNum=r,l.index=t}(v,b)}else{const e=!0===c.wireframe;l.geometry===v.id&&l.program===d.id&&l.wireframe===e||(l.geometry=v.id,l.program=d.id,l.wireframe=e,x=!0)}!0===r.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const c=s.attributes,l=a.getAttributes(),u=o.defaultAttributeValues;for(const t in l){const i=l[t];if(i.location>=0){let o=c[t];if(void 0===o&&("instanceMatrix"===t&&r.instanceMatrix&&(o=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(o=r.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,c=n.get(o);if(void 0===c)continue;const l=c.buffer,u=c.type,d=c.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,c=n.stride,h=o.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)f(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,l);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,c*d,(h+a/i.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)f(i.location+e,o.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,l);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,a*d,a/i.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}g()}(r,c,d,v),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:v,resetDefaultState:b,dispose:function(){v();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}function jn(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let c,l;if(r)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,i,a,s),n.update(a,o,s)}}function Gn(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),m=e.getParameter(34921),f=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),v=d>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:o?e.getParameter(36183):0}}function Vn(e){const t=this;let n=null,i=0,r=!1,o=!1;const a=new In,s=new te,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const o=null!==e?e.length:0;let l=null;if(0!==o){if(l=c.value,!0!==r||null===l){const t=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===l||l.length<t)&&(l=new Float32Array(t));for(let t=0,n=i;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(r,s),a.normal.toArray(l,n),l[n+3]=a.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==i||r;return r=t,n=u(e,o,0),i=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){const d=t.clippingPlanes,h=t.clipIntersection,p=t.clipShadows,m=e.get(t);if(!r||null===d||0===d.length||o&&!p)o?u(null):l();else{const e=o?0:i,t=4*e;let r=m.clippingState||null;c.value=r,r=u(d,a,t,s);for(let e=0;e!==t;++e)r[e]=n[e];m.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Wn(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=a:304===t&&(e.mapping=s),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(303===o||304===o){if(t.has(r))return n(t.get(r).texture,r.mapping);{const o=r.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new Pn(o.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),e.setRenderTarget(a),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}zn.physical={uniforms:vn([zn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ee(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new Lt(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Lt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Lt(1,1,1)},specularTintMap:{value:null}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};class qn extends wn{constructor(e=-1,t=1,n=1,i=-1,r=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}qn.prototype.isOrthographicCamera=!0;class Yn extends xn{constructor(e){super(e),this.type="RawShaderMaterial"}}Yn.prototype.isRawShaderMaterial=!0;const Kn=Math.pow(2,8),$n=[.125,.215,.35,.446,.526,.582],Xn=5+$n.length,Zn={[L]:0,[N]:1,[D]:2,3004:3,3005:4,3006:5,[B]:6},Jn=new qn,{_lodPlanes:Qn,_sizeLods:ei,_sigmas:ti}=li(),ni=new Lt;let ii=null;const ri=(1+Math.sqrt(5))/2,oi=1/ri,ai=[new de(1,1,1),new de(-1,1,1),new de(1,1,-1),new de(-1,1,-1),new de(0,ri,oi),new de(0,ri,-oi),new de(oi,0,ri),new de(-oi,0,ri),new de(ri,oi,0),new de(-ri,oi,0)];class si{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(20),n=new de(0,1,0);return new Yn({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Zn[3e3]},outputEncoding:{value:Zn[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){ii=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=pi(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=hi(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Qn.length;e++)Qn[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(ii),e.scissorTest=!1,di(e,0,0,e.width,e.height)}_fromTexture(e){ii=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:h,minFilter:h,generateMipmaps:!1,type:y,format:1023,encoding:ci(e)?e.encoding:D,depthBuffer:!1},n=ui(t);return n.depthBuffer=!e,this._pingPongRenderTarget=ui(t),n}_compileMaterial(e){const t=new mn(Qn[0],e);this._renderer.compile(t,Jn)}_sceneToCubeUV(e,t,n,i){const r=new Sn(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.autoClear,l=s.outputEncoding,u=s.toneMapping;s.getClearColor(ni),s.toneMapping=0,s.outputEncoding=L,s.autoClear=!1;const d=new Nt({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new mn(new gn,d);let p=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,p=!0):(d.color.copy(ni),p=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(r.up.set(0,o[t],0),r.lookAt(a[t],0,0)):1==n?(r.up.set(0,0,o[t]),r.lookAt(0,a[t],0)):(r.up.set(0,o[t],0),r.lookAt(0,0,a[t])),di(i,n*Kn,t>2?Kn:0,Kn,Kn),s.setRenderTarget(i),p&&s.render(h,r),s.render(e,r)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.outputEncoding=l,s.autoClear=c,e.background=m}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=pi()):null==this._equirectShader&&(this._equirectShader=hi());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new mn(Qn[0],i),o=i.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Zn[e.encoding],o.outputEncoding.value=Zn[t.texture.encoding],di(t,0,0,3*Kn,2*Kn),n.setRenderTarget(t),n.render(r,Jn)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<Xn;t++){const n=Math.sqrt(ti[t]*ti[t]-ti[t-1]*ti[t-1]),i=ai[(t-1)%ai.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,a){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new mn(Qn[i],c),u=c.uniforms,d=ei[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,m=isFinite(r)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);f.push(n),0==e?g+=n:e<m&&(g+=2*n)}for(let e=0;e<f.length;e++)f[e]=f[e]/g;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=f,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=h,u.mipInt.value=8-n,u.inputEncoding.value=Zn[e.texture.encoding],u.outputEncoding.value=Zn[e.texture.encoding];const y=ei[i];di(t,3*Math.max(0,Kn-2*y),(0===i?0:2*Kn)+2*y*(i>4?i-8+4:0),3*y,2*y),s.setRenderTarget(t),s.render(l,Jn)}}function ci(e){return void 0!==e&&e.type===y&&(e.encoding===L||e.encoding===N||e.encoding===B)}function li(){const e=[],t=[],n=[];let i=8;for(let r=0;r<Xn;r++){const o=Math.pow(2,i);t.push(o);let a=1/o;r>4?a=$n[r-8+4-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],d=6,h=6,p=3,m=2,f=1,g=new Float32Array(p*h*d),y=new Float32Array(m*h*d),v=new Float32Array(f*h*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,p*h*e),y.set(u,m*h*e);const r=[e,e,e,e,e,e];v.set(r,f*h*e)}const b=new $t;b.setAttribute("position",new Ot(g,p)),b.setAttribute("uv",new Ot(y,m)),b.setAttribute("faceIndex",new Ot(v,f)),e.push(b),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function ui(e){const t=new ce(3*Kn,3*Kn,e);return t.texture.mapping=c,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function di(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function hi(){const e=new ee(1,1);return new Yn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Zn[3e3]},outputEncoding:{value:Zn[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pi(){return new Yn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Zn[3e3]},outputEncoding:{value:Zn[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mi(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping,c=303===o||304===o,l=o===a||o===s;if(c||l){if(t.has(r))return t.get(r).texture;{const o=r.image;if(c&&o&&o.height>0||l&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)){const o=e.getRenderTarget();null===n&&(n=new si(e));const a=c?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,a),e.setRenderTarget(o),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function fi(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function gi(e,t,n,i){const r={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete r[s.id];const c=o.get(s);c&&(t.remove(c),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const s=new(Ht(n)>65535?zt:Ft)(n,1);s.version=a;const c=o.get(e);c&&t.remove(c),o.set(e,s)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function yi(e,t,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,a,t*s),n.update(i,o,1)},this.renderInstances=function(i,c,l){if(0===l)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,c,a,i*s,l),n.update(c,o,l)}}function vi(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function bi(e,t){return e[0]-t[0]}function xi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function wi(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function(r,o,a,s){const c=r.morphTargetInfluences,l=void 0===c?0:c.length;let u=t[o.id];if(void 0===u||u.length!==l){u=[];for(let e=0;e<l;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<l;e++){const t=u[e];t[0]=e,t[1]=c[e]}u.sort(xi);for(let e=0;e<8;e++)e<l&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(bi);const d=o.morphAttributes.position,h=o.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],a=t[1];r!==Number.MAX_SAFE_INTEGER&&a?(d&&o.getAttribute("morphTarget"+e)!==d[r]&&o.setAttribute("morphTarget"+e,d[r]),h&&o.getAttribute("morphNormal"+e)!==h[r]&&o.setAttribute("morphNormal"+e,h[r]),n[e]=a,p+=a):(d&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),h&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const m=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(e,"morphTargetBaseInfluence",m),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Si(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=i.render.frame,s=e.geometry,c=t.get(e,s);return r.get(c)!==a&&(t.update(c),r.set(c,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),c},dispose:function(){r=new WeakMap}}}class Ei extends oe{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=h,this.minFilter=h,this.wrapR=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ei.prototype.isDataTexture2DArray=!0;class _i extends oe{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=h,this.minFilter=h,this.wrapR=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}_i.prototype.isDataTexture3D=!0;const Ci=new oe,Pi=new Ei,Mi=new _i,Ti=new Cn,Ai=[],Ii=[],Ri=new Float32Array(16),ki=new Float32Array(9),Li=new Float32Array(4);function Ni(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=Ai[r];if(void 0===o&&(o=new Float32Array(r),Ai[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function Bi(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Di(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Oi(e,t){let n=Ii[t];void 0===n&&(n=new Int32Array(t),Ii[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Fi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function zi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bi(n,t))return;e.uniform2fv(this.addr,t),Di(n,t)}}function Ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Bi(n,t))return;e.uniform3fv(this.addr,t),Di(n,t)}}function Hi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bi(n,t))return;e.uniform4fv(this.addr,t),Di(n,t)}}function ji(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Di(n,t)}else{if(Bi(n,i))return;Li.set(i),e.uniformMatrix2fv(this.addr,!1,Li),Di(n,i)}}function Gi(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Di(n,t)}else{if(Bi(n,i))return;ki.set(i),e.uniformMatrix3fv(this.addr,!1,ki),Di(n,i)}}function Vi(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Bi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Di(n,t)}else{if(Bi(n,i))return;Ri.set(i),e.uniformMatrix4fv(this.addr,!1,Ri),Di(n,i)}}function Wi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function qi(e,t){const n=this.cache;Bi(n,t)||(e.uniform2iv(this.addr,t),Di(n,t))}function Yi(e,t){const n=this.cache;Bi(n,t)||(e.uniform3iv(this.addr,t),Di(n,t))}function Ki(e,t){const n=this.cache;Bi(n,t)||(e.uniform4iv(this.addr,t),Di(n,t))}function $i(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Xi(e,t){const n=this.cache;Bi(n,t)||(e.uniform2uiv(this.addr,t),Di(n,t))}function Zi(e,t){const n=this.cache;Bi(n,t)||(e.uniform3uiv(this.addr,t),Di(n,t))}function Ji(e,t){const n=this.cache;Bi(n,t)||(e.uniform4uiv(this.addr,t),Di(n,t))}function Qi(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Ci,r)}function er(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Mi,r)}function tr(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Ti,r)}function nr(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Pi,r)}function ir(e,t){e.uniform1fv(this.addr,t)}function rr(e,t){const n=Ni(t,this.size,2);e.uniform2fv(this.addr,n)}function or(e,t){const n=Ni(t,this.size,3);e.uniform3fv(this.addr,n)}function ar(e,t){const n=Ni(t,this.size,4);e.uniform4fv(this.addr,n)}function sr(e,t){const n=Ni(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cr(e,t){const n=Ni(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function lr(e,t){const n=Ni(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ur(e,t){e.uniform1iv(this.addr,t)}function dr(e,t){e.uniform2iv(this.addr,t)}function hr(e,t){e.uniform3iv(this.addr,t)}function pr(e,t){e.uniform4iv(this.addr,t)}function mr(e,t){e.uniform1uiv(this.addr,t)}function fr(e,t){e.uniform2uiv(this.addr,t)}function gr(e,t){e.uniform3uiv(this.addr,t)}function yr(e,t){e.uniform4uiv(this.addr,t)}function vr(e,t,n){const i=t.length,r=Oi(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||Ci,r[e])}function br(e,t,n){const i=t.length,r=Oi(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||Ti,r[e])}function xr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Fi;case 35664:return zi;case 35665:return Ui;case 35666:return Hi;case 35674:return ji;case 35675:return Gi;case 35676:return Vi;case 5124:case 35670:return Wi;case 35667:case 35671:return qi;case 35668:case 35672:return Yi;case 35669:case 35673:return Ki;case 5125:return $i;case 36294:return Xi;case 36295:return Zi;case 36296:return Ji;case 35678:case 36198:case 36298:case 36306:case 35682:return Qi;case 35679:case 36299:case 36307:return er;case 35680:case 36300:case 36308:case 36293:return tr;case 36289:case 36303:case 36311:case 36292:return nr}}(t.type)}function wr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ir;case 35664:return rr;case 35665:return or;case 35666:return ar;case 35674:return sr;case 35675:return cr;case 35676:return lr;case 5124:case 35670:return ur;case 35667:case 35671:return dr;case 35668:case 35672:return hr;case 35669:case 35673:return pr;case 5125:return mr;case 36294:return fr;case 36295:return gr;case 36296:return yr;case 35678:case 36198:case 36298:case 36306:case 35682:return vr;case 35680:case 36300:case 36308:case 36293:return br}}(t.type)}function Sr(e){this.id=e,this.seq=[],this.map={}}wr.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Di(t,e)},Sr.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const Er=/(\w+)(\])?(\[|\.)?/g;function _r(e,t){e.seq.push(t),e.map[t.id]=t}function Cr(e,t,n){const i=e.name,r=i.length;for(Er.lastIndex=0;;){const o=Er.exec(i),a=Er.lastIndex;let s=o[1];const c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===r){_r(n,void 0===l?new xr(s,e,t):new wr(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Sr(s),_r(n,e)),n=e}}}function Pr(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Cr(n,e.getUniformLocation(t,n.name),this)}}function Mr(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Pr.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Pr.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},Pr.upload=function(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}},Pr.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let Tr=0;function Ar(e){switch(e){case L:return["Linear","( value )"];case N:return["sRGB","( value )"];case D:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case B:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Ir(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Rr(e,t){const n=Ar(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function kr(e,t){const n=Ar(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Lr(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Nr(e){return""!==e}function Br(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Dr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Or=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fr(e){return e.replace(Or,zr)}function zr(e,t){const n=On[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Fr(n)}const Ur=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Hr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jr(e){return e.replace(Hr,Vr).replace(Ur,Gr)}function Gr(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Vr(0,t,n,i)}function Vr(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function Wr(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function qr(e,t,n,i){const r=e.getContext(),o=n.defines;let l=n.vertexShader,u=n.fragmentShader;const d=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case a:case s:t="ENVMAP_TYPE_CUBE";break;case c:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case s:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),m=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nr).join("\n")}(n),y=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),v=r.createProgram();let b,x,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[y].filter(Nr).join("\n"),b.length>0&&(b+="\n"),x=[g,y].filter(Nr).join("\n"),x.length>0&&(x+="\n")):(b=[Wr(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nr).join("\n"),x=[g,Wr(n),"#define SHADER_NAME "+n.shaderName,y,"#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheenTint?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?On.tonemapping_pars_fragment:"",0!==n.toneMapping?Lr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===E?"#define OPAQUE":"",On.encodings_pars_fragment,n.map?Rr("mapTexelToLinear",n.mapEncoding):"",n.matcap?Rr("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Rr("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Rr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?Rr("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?Rr("lightMapTexelToLinear",n.lightMapEncoding):"",kr("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Nr).join("\n")),l=Fr(l),l=Br(l,n),l=Dr(l,n),u=Fr(u),u=Br(u,n),u=Dr(u,n),l=jr(l),u=jr(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",b=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===U?"":"out highp vec4 pc_fragColor;",n.glslVersion===U?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const S=w+x+u,_=Mr(r,35633,w+b+l),C=Mr(r,35632,S);if(r.attachShader(v,_),r.attachShader(v,C),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(v).trim(),t=r.getShaderInfoLog(_).trim(),n=r.getShaderInfoLog(C).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(v,35714)){i=!1;const t=Ir(r,_,"vertex"),n=Ir(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:x}})}let P,M;return r.deleteShader(_),r.deleteShader(C),this.getUniforms=function(){return void 0===P&&(P=new Pr(r,v)),P},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(r,v)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Tr++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=_,this.fragmentShader=C,this}function Yr(e,t,n,i,r,o,a){const s=[],l=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.floatVertexTextures,h=r.maxVertexUniforms,p=r.vertexTextures;let m=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function y(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=L,t}return{getParameters:function(o,s,g,v,b){const x=v.fog,w=o.isMeshStandardMaterial?v.environment:null,S=(o.isMeshStandardMaterial?n:t).get(o.envMap||w),E=f[o.type],_=b.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(d)return 1024;{const e=h,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(b):0;let C,P;if(null!==o.precision&&(m=r.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.")),E){const e=zn[E];C=e.vertexShader,P=e.fragmentShader}else C=o.vertexShader,P=o.fragmentShader;const M=e.getRenderTarget(),T=o.alphaTest>0,A=o.clearcoat>0;return{isWebGL2:l,shaderID:E,shaderName:o.type,vertexShader:C,fragmentShader:P,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:p,outputEncoding:null!==M?y(M.texture):e.outputEncoding,map:!!o.map,mapEncoding:y(o.map),matcap:!!o.matcap,matcapEncoding:y(o.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:y(S),envMapCubeUV:!!S&&(S.mapping===c||307===S.mapping),lightMap:!!o.lightMap,lightMapEncoding:y(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:y(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,clearcoat:A,clearcoatMap:A&&!!o.clearcoatMap,clearcoatRoughnessMap:A&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:A&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularTintMap:!!o.specularTintMap,specularTintMapEncoding:y(o.specularTintMap),alphaMap:!!o.alphaMap,alphaTest:T,gradientMap:!!o.gradientMap,sheenTint:!!o.sheenTint&&(o.sheenTint.r>0||o.sheenTint.g>0||o.sheenTint.b>0),transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!b.geometry&&!!b.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.geometry&&!!b.geometry.attributes.color&&4===b.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap||!o.displacementMap),fog:!!x,useFog:o.fog,fogExp2:x&&x.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===b.isSkinnedMesh&&_>0,maxBones:_,useVertexTexture:d,morphTargets:!!b.geometry&&!!b.geometry.morphAttributes.position,morphNormals:!!b.geometry&&!!b.geometry.morphAttributes.normal,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&g.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<g.length;e++)n.push(t[g[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=zn[t];n=bn.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new qr(e,n,t,o),s.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Kr(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function $r(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Xr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Zr(e){const t=[];let n=0;const i=[],r=[],o=[],a={id:-1};function s(i,r,o,s,c,l){let u=t[n];const d=e.get(o);return void 0===u?(u={id:i.id,object:i,geometry:r,material:o,program:d.program||a,groupOrder:s,renderOrder:i.renderOrder,z:c,group:l},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=o,u.program=d.program||a,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:i,transmissive:r,transparent:o,init:function(){n=0,i.length=0,r.length=0,o.length=0},push:function(e,t,n,a,c,l){const u=s(e,t,n,a,c,l);n.transmission>0?r.push(u):!0===n.transparent?o.push(u):i.push(u)},unshift:function(e,t,n,a,c,l){const u=s(e,t,n,a,c,l);n.transmission>0?r.unshift(u):!0===n.transparent?o.unshift(u):i.unshift(u)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||$r),r.length>1&&r.sort(t||Xr),o.length>1&&o.sort(t||Xr)}}}function Jr(e){let t=new WeakMap;return{get:function(n,i){let r;return!1===t.has(n)?(r=new Zr(e),t.set(n,[r])):i>=t.get(n).length?(r=new Zr(e),t.get(n).push(r)):r=t.get(n)[i],r},dispose:function(){t=new WeakMap}}}function Qr(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new de,color:new Lt};break;case"SpotLight":n={position:new de,direction:new de,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new de,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new de,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":n={color:new Lt,position:new de,halfWidth:new de,halfHeight:new de}}return e[t.id]=n,n}}}let eo=0;function to(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function no(e,t){const n=new Qr,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ee};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ee,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new de);const o=new de,a=new je,s=new je;return{setup:function(o,a){let s=0,c=0,l=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,m=0,f=0,g=0,y=0;o.sort(to);const v=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,b=t.intensity,x=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*b*v,c+=a.g*b*v,l+=a.b*b*v;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*v),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,f++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(b*v),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[h]=n,r.spotShadowMap[h]=w,r.spotShadowMatrix[h]=t.shadow.matrix,y++}r.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*v),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=w,r.pointShadowMatrix[d]=t.shadow.matrix,g++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*v),e.groundColor.copy(t.groundColor).multiplyScalar(b*v),r.hemi[m]=e,m++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Fn.LTC_FLOAT_1,r.rectAreaLTC2=Fn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Fn.LTC_HALF_1,r.rectAreaLTC2=Fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=c,r.ambient[2]=l;const b=r.hash;b.directionalLength===u&&b.pointLength===d&&b.spotLength===h&&b.rectAreaLength===p&&b.hemiLength===m&&b.numDirectionalShadows===f&&b.numPointShadows===g&&b.numSpotShadows===y||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=m,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=y,b.directionalLength=u,b.pointLength=d,b.spotLength=h,b.rectAreaLength=p,b.hemiLength=m,b.numDirectionalShadows=f,b.numPointShadows=g,b.numSpotShadows=y,r.version=eo++)},setupView:function(e,t){let n=0,i=0,c=0,l=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=r.spot[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),c++}else if(h.isRectAreaLight){const e=r.rectArea[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(h.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),l++}else if(h.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),i++}else if(h.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),e.direction.normalize(),u++}}},state:r}}function io(e,t){const n=new no(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function ro(e,t){let n=new WeakMap;return{get:function(i,r=0){let o;return!1===n.has(i)?(o=new io(e,t),n.set(i,[o])):r>=n.get(i).length?(o=new io(e,t),n.get(i).push(o)):o=n.get(i)[r],o},dispose:function(){n=new WeakMap}}}class oo extends Pt{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}oo.prototype.isMeshDepthMaterial=!0;class ao extends Pt{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new de,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function so(e,t,n){let i=new Ln;const r=new ee,o=new ee,a=new se,s=new oo({depthPacking:3201}),c=new ao,l={},u=n.maxTextureSize,d={0:1,1:0,2:2},p=new xn({uniforms:{shadow_pass:{value:null},resolution:{value:new ee},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new $t;g.setAttribute("position",new Ot(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new mn(g,p),v=this;function b(n,i){const r=t.update(y);p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,p.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,p,y,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,m.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,m,y,null)}function x(t,n,i,r,o,a,u){let h=null;const p=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==p?p:!0===r.isPointLight?c:s,e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const e=h.uuid,t=i.uuid;let n=l[e];void 0===n&&(n={},l[e]=n);let r=n[t];void 0===r&&(r=h.clone(),n[t]=r),h=r}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=3===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],h.alphaMap=i.alphaMap,h.alphaTest=i.alphaTest,h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.displacementMap=i.displacementMap,h.displacementScale=i.displacementScale,h.displacementBias=i.displacementBias,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,!0===r.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=o,h.farDistance=a),h}function w(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=r[l.materialIndex];if(u&&u.visible){const t=x(n,0,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,l)}}}else if(r.visible){const t=x(n,0,r,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)w(c[e],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let c=0,l=t.length;c<l;c++){const l=t[c],d=l.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;r.copy(d.mapSize);const m=d.getFrameExtents();if(r.multiply(m),o.copy(d.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/m.x),r.x=o.x*m.x,d.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/m.y),r.y=o.y*m.y,d.mapSize.y=o.y)),null===d.map&&!d.isPointLightShadow&&3===this.type){const e={minFilter:f,magFilter:f,format:_};d.map=new ce(r.x,r.y,e),d.map.texture.name=l.name+".shadowMap",d.mapPass=new ce(r.x,r.y,e),d.camera.updateProjectionMatrix()}if(null===d.map){const e={minFilter:h,magFilter:h,format:_};d.map=new ce(r.x,r.y,e),d.map.texture.name=l.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const g=d.getViewportCount();for(let e=0;e<g;e++){const t=d.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),p.viewport(a),d.updateMatrices(l,e),i=d.getFrustum(),w(n,s,d.camera,l,this.type)}d.isPointLightShadow||3!==this.type||b(d,s),d.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(c,l,d)}}function co(e,t,n){const a=n.isWebGL2,s=new function(){let t=!1;const n=new se;let i=null;const r=new se(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},c=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?U(2929):H(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},l=new function(){let t=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?U(2960):H(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&c===i||(e.stencilOp(t,n,i),a=t,s=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null}}};let u={},d=null,h={},p=null,m=!1,f=null,g=null,y=null,v=null,b=null,x=null,w=null,S=!1,E=null,_=null,C=null,P=null,M=null;const T=e.getParameter(35661);let A=!1,I=0;const R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(R)[1]),A=I>=1):-1!==R.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),A=I>=2);let k=null,L={};const N=e.getParameter(3088),B=e.getParameter(2978),D=(new se).fromArray(N),O=(new se).fromArray(B);function F(t,n,i){const r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return o}const z={};function U(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function H(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}z[3553]=F(3553,3553,1),z[34067]=F(34067,34069,6),s.setClear(0,0,0,1),c.setClear(1),l.setClear(0),U(2929),c.setFunc(3),W(!1),q(1),U(2884),V(0);const j={[i]:32774,101:32778,102:32779};if(a)j[103]=32775,j[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(j[103]=e.MIN_EXT,j[104]=e.MAX_EXT)}const G={200:0,201:1,202:768,[r]:770,210:776,208:774,206:772,203:769,[o]:771,209:775,207:773};function V(t,n,r,o,a,s,c,l){if(0!==t){if(!1===m&&(U(3042),m=!0),5===t)a=a||n,s=s||r,c=c||o,n===g&&a===b||(e.blendEquationSeparate(j[n],j[a]),g=n,b=a),r===y&&o===v&&s===x&&c===w||(e.blendFuncSeparate(G[r],G[o],G[s],G[c]),y=r,v=o,x=s,w=c),f=t,S=null;else if(t!==f||l!==S){if(g===i&&b===i||(e.blendEquation(32774),g=i,b=i),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,v=null,x=null,w=null,f=t,S=l}}else!0===m&&(H(3042),m=!1)}function W(t){E!==t&&(t?e.frontFace(2304):e.frontFace(2305),E=t)}function q(t){0!==t?(U(2884),t!==_&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):H(2884),_=t}function Y(t,n,i){t?(U(32823),P===n&&M===i||(e.polygonOffset(n,i),P=n,M=i)):H(32823)}function K(t){void 0===t&&(t=33984+T-1),k!==t&&(e.activeTexture(t),k=t)}return{buffers:{color:s,depth:c,stencil:l},enable:U,disable:H,bindFramebuffer:function(t,n){return null===n&&null!==d&&(n=d),h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==d&&(e.bindFramebuffer(36160,t),d=t)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?H(2884):U(2884);let n=1===e.side;t&&(n=!n),W(n),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),s.setMask(e.colorWrite);const i=e.stencilWrite;l.setTest(i),i&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):H(32926)},setFlipSided:W,setCullFace:q,setLineWidth:function(t){t!==C&&(A&&e.lineWidth(t),C=t)},setPolygonOffset:Y,setScissorTest:function(e){e?U(3089):H(3089)},activeTexture:K,bindTexture:function(t,n){null===k&&K();let i=L[k];void 0===i&&(i={type:void 0,texture:void 0},L[k]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=L[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},k=null,L={},d=null,h={},p=null,m=!1,f=null,g=null,y=null,v=null,b=null,x=null,w=null,S=!1,E=null,_=null,C=null,P=null,M=null,D.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),s.reset(),c.reset(),l.reset()}}}function lo(e,t,n,i,r,o,a){const s=r.isWebGL2,c=r.maxTextures,y=r.maxCubemapSize,M=r.maxTextureSize,T=r.maxSamples,A=new WeakMap;let I,R=!1;try{R="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function k(e,t){return R?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function L(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?J:Math.floor,o=i(r*e.width),a=i(r*e.height);void 0===I&&(I=k(o,a));const s=n?k(o,a):I;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function N(e){return X(e.width)&&X(e.height)}function B(e,t){return e.generateMipmaps&&t&&e.minFilter!==h&&e.minFilter!==f}function D(t,n,r,o,a=1){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log2(Math.max(r,o,a))}function O(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function F(e){return e===h||e===p||e===m?9728:9729}function z(t){const n=t.target;n.removeEventListener("dispose",z),function(t){const n=i.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),i.remove(t))}(n),n.isVideoTexture&&A.delete(n),a.memory.textures--}function U(t){const n=t.target;n.removeEventListener("dispose",U),function(t){const n=t.texture,r=i.get(t),o=i.get(n);if(t){if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[t])}i.remove(n),i.remove(t)}}(n)}let H=0;function j(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;A.get(e)!==t&&(A.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void K(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function G(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?function(t,i,r){if(6!==i.image.length)return;Y(t,i),n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const a=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),c=i.image[0]&&i.image[0].isDataTexture,l=[];for(let e=0;e<6;e++)l[e]=a||c?c?i.image[e].image:i.image[e]:L(i.image[e],!1,!0,y);const u=l[0],d=N(u)||s,h=o.convert(i.format),p=o.convert(i.type),m=O(i.internalFormat,h,p);let f;if(q(34067,i,d),a){for(let e=0;e<6;e++){f=l[e].mipmaps;for(let t=0;t<f.length;t++){const r=f[t];i.format!==_&&i.format!==E?null!==h?n.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,r.width,r.height,0,h,p,r.data)}}t.__maxMipLevel=f.length-1}else{f=i.mipmaps;for(let e=0;e<6;e++)if(c){n.texImage2D(34069+e,0,m,l[e].width,l[e].height,0,h,p,l[e].data);for(let t=0;t<f.length;t++){const i=f[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,h,p,i.data)}}else{n.texImage2D(34069+e,0,m,h,p,l[e]);for(let t=0;t<f.length;t++){const i=f[t];n.texImage2D(34069+e,t+1,m,h,p,i.image[e])}}t.__maxMipLevel=f.length}B(i,d)&&D(34067,i,u.width,u.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(a,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture))}const V={[l]:10497,[u]:33071,[d]:33648},W={[h]:9728,[p]:9984,[m]:9986,[f]:9729,1007:9985,[g]:9987};function q(n,o,a){if(a?(e.texParameteri(n,10242,V[o.wrapS]),e.texParameteri(n,10243,V[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,V[o.wrapR]),e.texParameteri(n,10240,W[o.magFilter]),e.texParameteri(n,10241,W[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===u&&o.wrapT===u||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,F(o.magFilter)),e.texParameteri(n,10241,F(o.minFilter)),o.minFilter!==h&&o.minFilter!==f&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===x&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===w&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function Y(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",z),t.__webglTexture=e.createTexture(),a.memory.textures++)}function K(t,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),Y(t,i),n.activeTexture(33984+r),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const c=function(e){return!s&&(e.wrapS!==u||e.wrapT!==u||e.minFilter!==h&&e.minFilter!==f)}(i)&&!1===N(i.image),l=L(i.image,c,!1,M),d=N(l)||s,p=o.convert(i.format);let m,g=o.convert(i.type),y=O(i.internalFormat,p,g);q(a,i,d);const w=i.mipmaps;if(i.isDepthTexture)y=6402,s?y=i.type===x?36012:i.type===b?33190:i.type===S?35056:33189:i.type===x&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===C&&6402===y&&i.type!==v&&i.type!==b&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=v,g=o.convert(i.type)),i.format===P&&6402===y&&(y=34041,i.type!==S&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=S,g=o.convert(i.type))),n.texImage2D(3553,0,y,l.width,l.height,0,p,g,null);else if(i.isDataTexture)if(w.length>0&&d){for(let e=0,t=w.length;e<t;e++)m=w[e],n.texImage2D(3553,e,y,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,y,l.width,l.height,0,p,g,l.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)m=w[e],i.format!==_&&i.format!==E?null!==p?n.compressedTexImage2D(3553,e,y,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,y,m.width,m.height,0,p,g,m.data);t.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,l.width,l.height,l.depth,0,p,g,l.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,l.width,l.height,l.depth,0,p,g,l.data),t.__maxMipLevel=0;else if(w.length>0&&d){for(let e=0,t=w.length;e<t;e++)m=w[e],n.texImage2D(3553,e,y,p,g,m);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,y,p,g,l),t.__maxMipLevel=0;B(i,d)&&D(a,i,l.width,l.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function $(t,r,a,s,c){const l=o.convert(a.format),u=o.convert(a.type),d=O(a.internalFormat,l,u);32879===c||35866===c?n.texImage3D(c,0,d,r.width,r.height,r.depth,0,l,u,null):n.texImage2D(c,0,d,r.width,r.height,0,l,u,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,c,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===x?r=36012:t.type===b&&(r=33190));const i=Q(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=Q(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=o.convert(t.format),a=o.convert(t.type),s=O(t.internalFormat,r,a);if(i){const t=Q(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function Q(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(T,e.samples):0}let ee=!1,te=!1;this.allocateTextureUnit=function(){const e=H;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),H+=1,e},this.resetTextureUnits=function(){H=0},this.setTexture2D=j,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?K(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?K(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=G,this.setupRenderTarget=function(t){const c=t.texture,l=i.get(t),u=i.get(c);t.addEventListener("dispose",U),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=c.version,a.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,m=c.isDataTexture3D||c.isDataTexture2DArray,f=N(t)||s;if(!s||c.format!==E||c.type!==x&&c.type!==w||(c.format=_,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(s){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const i=o.convert(c.format),r=o.convert(c.type),a=O(c.internalFormat,i,r),s=Q(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(34067,u.__webglTexture),q(34067,c,f);for(let e=0;e<6;e++)$(l.__webglFramebuffer[e],t,c,36064,34069+e);B(c,f)&&D(34067,c,t.width,t.height),n.unbindTexture()}else if(h){const e=t.texture;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=i.get(o);n.bindTexture(3553,a.__webglTexture),q(3553,o,f),$(l.__webglFramebuffer,t,o,36064+r,3553),B(o,f)&&D(3553,o,t.width,t.height)}n.unbindTexture()}else{let e=3553;m&&(s?e=c.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),q(e,c,f),$(l.__webglFramebuffer,t,c,36064,e),B(c,f)&&D(e,c,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&function(t){const r=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),j(r.depthTexture,0);const o=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===C)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==P)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),Z(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),Z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=N(e)||s,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=r.length;o<a;o++){const a=r[o];if(B(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(t,r),D(t,a,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const r=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const s=i.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===ee&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ee=!0),e=e.texture),j(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===te&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),te=!0),e=e.texture),G(e,t)}}function uo(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===y)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===v)return 5123;if(1013===e)return 5124;if(e===b)return 5125;if(e===x)return 5126;if(e===w)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===E)return 6407;if(e===_)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===C)return 6402;if(e===P)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===S?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}ao.prototype.isMeshDistanceMaterial=!0;class ho extends Sn{constructor(e=[]){super(),this.cameras=e}}ho.prototype.isArrayCamera=!0;class po extends pt{constructor(){super(),this.type="Group"}}po.prototype.isGroup=!0;const mo={type:"move"};class fo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new po,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new po,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new de,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new de),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new po,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new de,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new de),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(mo))),c&&e.hand){o=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n);if(void 0===c.joints[i.jointName]){const e=new po;e.matrixAutoUpdate=!1,e.visible=!1,c.joints[i.jointName]=e,c.add(e)}const r=c.joints[i.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const i=c.joints["index-finger-tip"],r=c.joints["thumb-tip"],a=i.position.distanceTo(r.position),s=.02,l=.005;c.inputState.pinching&&a>s+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&a<=s-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==c&&(c.visible=null!==o),this}}class go extends H{constructor(e,t){super();const n=this,i=e.state;let r=null,o=1,a=null,s="local-floor",c=null,l=null,u=null,d=null,h=null,p=!1,m=null,f=null,g=null,y=null,v=null,b=null;const x=[],w=new Map,S=new Sn;S.layers.enable(1),S.viewport=new se;const E=new Sn;E.layers.enable(2),E.viewport=new se;const _=[S,E],C=new ho;C.layers.enable(1),C.layers.enable(2);let P=null,M=null;function T(e){const t=w.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function A(){w.forEach((function(e,t){e.disconnect(t)})),w.clear(),P=null,M=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),m&&t.deleteFramebuffer(m),f&&t.deleteRenderbuffer(f),g&&t.deleteRenderbuffer(g),u=null,m=null,f=null,g=null,h=null,d=null,l=null,r=null,B.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function I(e){const t=r.inputSources;for(let e=0;e<x.length;e++)w.set(t[e],x[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=w.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),w.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=w.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new fo,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new fo,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new fo,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return l},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",A),r.addEventListener("inputsourceschange",I);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h})}else if(t instanceof WebGLRenderingContext){const n={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(r,t,n),r.updateRenderState({layers:[h]})}else{p=e.antialias;let n=null;e.depth&&(b=256,e.stencil&&(b|=1024),v=e.stencil?33306:36096,n=e.stencil?35056:33190);const a={colorFormat:e.alpha?32856:32849,depthFormat:n,scaleFactor:o};l=new XRWebGLBinding(r,t),d=l.createProjectionLayer(a),u=t.createFramebuffer(),r.updateRenderState({layers:[d]}),p&&(m=t.createFramebuffer(),f=t.createRenderbuffer(),t.bindRenderbuffer(36161,f),t.renderbufferStorageMultisample(36161,4,32856,d.textureWidth,d.textureHeight),i.bindFramebuffer(36160,m),t.framebufferRenderbuffer(36160,36064,36161,f),t.bindRenderbuffer(36161,null),null!==n&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,n,d.textureWidth,d.textureHeight),t.framebufferRenderbuffer(36160,v,36161,g),t.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}a=await r.requestReferenceSpace(s),B.setContext(r),B.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const R=new de,k=new de;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;C.near=E.near=S.near=e.near,C.far=E.far=S.far=e.far,P===C.near&&M===C.far||(r.updateRenderState({depthNear:C.near,depthFar:C.far}),P=C.near,M=C.far);const t=e.parent,n=C.cameras;L(C,t);for(let e=0;e<n.length;e++)L(n[e],t);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),e.position.copy(C.position),e.quaternion.copy(C.quaternion),e.scale.copy(C.scale),e.matrix.copy(C.matrix),e.matrixWorld.copy(C.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(k),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(o[8]+1)/o[0],h=a*u,p=a*d,m=i/(-u+d),f=m*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+m,y=s+m,v=h-f,b=p+(i-f),x=c*s/y*g,w=l*s/y*g;e.projectionMatrix.makePerspective(v,b,x,w,g,y)}(C,S,E):C.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let N=null;const B=new Nn;B.setAnimationLoop((function(e,n){if(c=n.getViewerPose(a),y=n,null!==c){const e=c.views;null!==h&&i.bindXRFramebuffer(h.framebuffer);let n=!1;e.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const o=e[r];let a=null;if(null!==h)a=h.getViewport(o);else{const e=l.getViewSubImage(d,o);i.bindXRFramebuffer(u),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,v,3553,e.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),a=e.viewport}const s=_[r];s.matrix.fromArray(o.transform.matrix),s.projectionMatrix.fromArray(o.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&C.matrix.copy(s.matrix),!0===n&&C.cameras.push(s)}p&&(i.bindXRFramebuffer(m),null!==b&&t.clear(b))}const o=r.inputSources;for(let e=0;e<x.length;e++){const t=x[e],i=o[e];t.update(i,n,a)}if(N&&N(e,n),p){const e=d.textureWidth,n=d.textureHeight;i.bindFramebuffer(36008,m),i.bindFramebuffer(36009,u),t.invalidateFramebuffer(36008,[v]),t.invalidateFramebuffer(36009,[v]),t.blitFramebuffer(0,0,e,n,0,0,e,n,16384,9728),t.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,m)}y=null})),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}function yo(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap?r=n.specularTintMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap&&(r=n.thicknessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,o,a){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t,i){n(e,t),e.ior.value=t.ior,t.sheenTint&&e.sheenTint.value.copy(t.sheenTint),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint)),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,i,a):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,o):i.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function vo(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let p=null,m=null;const f=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=L,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const b=this;let S=!1,E=0,C=0,P=null,M=-1,T=null;const A=new se,I=new se;let R=null,k=t.width,N=t.height,B=1,D=null,O=null;const F=new se(0,0,k,N),z=new se(0,0,k,N);let U=!1;const H=[],j=new Ln;let G=!1,V=!1,W=null;const q=new je,Y=new de,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===P?B:1}let X,Z,J,Q,ee,te,ne,ie,re,oe,ae,ue,he,pe,me,fe,ge,ye,ve,be,xe,we,Se,Ee=n;function _e(e,n){for(let i=0;i<e.length;i++){const r=e[i],o=t.getContext(r,n);if(null!==o)return o}return null}try{const e={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",Te,!1),null===Ee){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),Ee=_e(t,e),null===Ee)throw _e(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ee.getShaderPrecisionFormat&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ce(){X=new fi(Ee),Z=new Gn(Ee,X,e),X.init(Z),we=new uo(Ee,X,Z),J=new co(Ee,X,Z),H[0]=1029,Q=new vi(Ee),ee=new Kr,te=new lo(Ee,X,J,ee,Z,we,Q),ne=new Wn(b),ie=new mi(b),re=new Bn(Ee,Z),Se=new Hn(Ee,X,re,Z),oe=new gi(Ee,re,Q,Se),ae=new Si(Ee,oe,re,Q),ve=new wi(Ee),fe=new Vn(ee),ue=new Yr(b,ne,ie,X,Z,Se,fe),he=new yo(ee),pe=new Jr(ee),me=new ro(X,Z),ye=new Un(b,ne,J,ae,s),ge=new so(b,ae,Z),be=new jn(Ee,X,Q,Z),xe=new yi(Ee,X,Q,Z),Q.programs=ue.programs,b.capabilities=Z,b.extensions=X,b.properties=ee,b.renderLists=pe,b.shadowMap=ge,b.state=J,b.info=Q}Ce();const Pe=new go(b,Ee);function Me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const e=Q.autoReset,t=ge.enabled,n=ge.autoUpdate,i=ge.needsUpdate,r=ge.type;Ce(),Q.autoReset=e,ge.enabled=t,ge.autoUpdate=n,ge.needsUpdate=i,ge.type=r}function Ae(e){const t=e.target;t.removeEventListener("dispose",Ae),function(e){(function(e){const t=ee.get(e).programs;void 0!==t&&t.forEach((function(e){ue.releaseProgram(e)}))})(e),ee.remove(e)}(t)}this.xr=Pe,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(e){void 0!==e&&(B=e,this.setSize(k,N,!1))},this.getSize=function(e){return e.set(k,N)},this.setSize=function(e,n,i){Pe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,N=n,t.width=Math.floor(e*B),t.height=Math.floor(n*B),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(k*B,N*B).floor()},this.setDrawingBufferSize=function(e,n,i){k=e,N=n,B=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(F)},this.setViewport=function(e,t,n,i){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,i),J.viewport(A.copy(F).multiplyScalar(B).floor())},this.getScissor=function(e){return e.copy(z)},this.setScissor=function(e,t,n,i){e.isVector4?z.set(e.x,e.y,e.z,e.w):z.set(e,t,n,i),J.scissor(I.copy(z).multiplyScalar(B).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(e){J.setScissorTest(U=e)},this.setOpaqueSort=function(e){D=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),Ee.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",Te,!1),pe.dispose(),me.dispose(),ee.dispose(),ne.dispose(),ie.dispose(),ae.dispose(),Se.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",Re),Pe.removeEventListener("sessionend",ke),W&&(W.dispose(),W=null),Le.stop()},this.renderBufferImmediate=function(e,t){Se.initAttributes();const n=ee.get(e);e.hasPositions&&!n.position&&(n.position=Ee.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=Ee.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=Ee.createBuffer()),e.hasColors&&!n.color&&(n.color=Ee.createBuffer());const i=t.getAttributes();e.hasPositions&&(Ee.bindBuffer(34962,n.position),Ee.bufferData(34962,e.positionArray,35048),Se.enableAttribute(i.position.location),Ee.vertexAttribPointer(i.position.location,3,5126,!1,0,0)),e.hasNormals&&(Ee.bindBuffer(34962,n.normal),Ee.bufferData(34962,e.normalArray,35048),Se.enableAttribute(i.normal.location),Ee.vertexAttribPointer(i.normal.location,3,5126,!1,0,0)),e.hasUvs&&(Ee.bindBuffer(34962,n.uv),Ee.bufferData(34962,e.uvArray,35048),Se.enableAttribute(i.uv.location),Ee.vertexAttribPointer(i.uv.location,2,5126,!1,0,0)),e.hasColors&&(Ee.bindBuffer(34962,n.color),Ee.bufferData(34962,e.colorArray,35048),Se.enableAttribute(i.color.location),Ee.vertexAttribPointer(i.color.location,3,5126,!1,0,0)),Se.disableUnusedAttributes(),Ee.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=K);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=Ue(e,t,i,r);J.setMaterial(i,a);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,d=1;!0===i.wireframe&&(c=oe.getWireframeAttribute(n),d=2),void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ve.update(r,n,i,s),Se.setup(r,i,s,n,c);let h=be;null!==c&&(u=re.get(c),h=xe,h.setIndex(u));const p=null!==c?c.count:l.count,m=n.drawRange.start*d,f=n.drawRange.count*d,g=null!==o?o.start*d:0,y=null!==o?o.count*d:1/0,v=Math.max(m,g),b=Math.min(p,m+f,g+y)-1,x=Math.max(0,b-v+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(J.setLineWidth(i.wireframeLinewidth*$()),h.setMode(1)):h.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),J.setLineWidth(e*$()),r.isLineSegments?h.setMode(1):r.isLineLoop?h.setMode(2):h.setMode(3)}else r.isPoints?h.setMode(0):r.isSprite&&h.setMode(4);if(r.isInstancedMesh)h.renderInstances(v,x,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(v,x,e)}else h.render(v,x)}},this.compile=function(e,t){m=me.get(e),m.init(),v.push(m),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(b.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++)Fe(n[i],e,t);else Fe(n,e,t)})),v.pop(),m=null};let Ie=null;function Re(){Le.stop()}function ke(){Le.start()}const Le=new Nn;function Ne(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||j.intersectsSprite(e)){i&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q);const t=ae.update(e),r=e.material;r.visible&&p.push(e,t,r,n,Y.z,null)}}else if(e.isImmediateRenderObject)i&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q),p.push(e,null,e.material,n,Y.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Q.render.frame&&(e.skeleton.update(),e.skeleton.frame=Q.render.frame),!e.frustumCulled||j.intersectsObject(e))){i&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q);const t=ae.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&p.push(e,t,s,n,Y.z,a)}}else r.visible&&p.push(e,t,r,n,Y.z,null)}const r=e.children;for(let e=0,o=r.length;e<o;e++)Ne(r[e],t,n,i)}function Be(e,t,n,i){const r=e.opaque,o=e.transmissive,s=e.transparent;m.setupLightsView(n),o.length>0&&function(e,t,n){if(null===W){const e=!0===a&&!0===Z.isWebGL2;W=new(e?le:ce)(1024,1024,{generateMipmaps:!0,type:null!==we.convert(w)?w:y,minFilter:g,magFilter:h,wrapS:u,wrapT:u})}const i=b.getRenderTarget();b.setRenderTarget(W),b.clear();const r=b.toneMapping;b.toneMapping=0,De(e,t,n),b.toneMapping=r,te.updateMultisampleRenderTarget(W),te.updateRenderTargetMipmap(W),b.setRenderTarget(i)}(r,t,n),i&&J.viewport(A.copy(i)),r.length>0&&De(r,t,n),o.length>0&&De(o,t,n),s.length>0&&De(s,t,n)}function De(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=o.object,s=o.geometry,c=null===i?o.material:i,l=o.group;a.layers.test(n.layers)&&Oe(a,t,n,s,c,l)}}function Oe(e,t,n,i,r,o){if(e.onBeforeRender(b,t,n,i,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=Ue(n,t,r,e);J.setMaterial(r),Se.reset(),function(e,t){e.render((function(e){b.renderBufferImmediate(e,t)}))}(e,i)}else!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,b.renderBufferDirect(n,t,i,r,e,o),r.side=0,r.needsUpdate=!0,b.renderBufferDirect(n,t,i,r,e,o),r.side=2):b.renderBufferDirect(n,t,i,r,e,o);e.onAfterRender(b,t,n,i,r,o)}function Fe(e,t,n){!0!==t.isScene&&(t=K);const i=ee.get(e),r=m.state.lights,o=m.state.shadowsArray,a=r.state.version,s=ue.getParameters(e,r.state,o,t,n),c=ue.getProgramCacheKey(s);let l=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ie:ne).get(e.envMap||i.environment),void 0===l&&(e.addEventListener("dispose",Ae),l=new Map,i.programs=l);let u=l.get(c);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return ze(e,s),u}else s.uniforms=ue.getUniforms(e),e.onBuild(s,b),e.onBeforeCompile(s,b),u=ue.acquireProgram(s,c),l.set(c,u),i.uniforms=s.uniforms;const d=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=fe.uniform),ze(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotShadowMatrix.value=r.state.spotShadowMatrix,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);const h=u.getUniforms(),p=Pr.seqWithValue(h.seq,d);return i.currentProgram=u,i.uniformsList=p,u}function ze(e,t){const n=ee.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ue(e,t,n,i){!0!==t.isScene&&(t=K),te.resetTextureUnits();const r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===P?b.outputEncoding:P.texture.encoding,s=(n.isMeshStandardMaterial?ie:ne).get(n.envMap||o),c=!0===n.vertexColors&&!!i.geometry&&!!i.geometry.attributes.color&&4===i.geometry.attributes.color.itemSize,l=!!i.geometry&&!!i.geometry.attributes.tangent,u=!!i.geometry&&!!i.geometry.morphAttributes.position,d=!!i.geometry&&!!i.geometry.morphAttributes.normal,h=ee.get(n),p=m.state.lights;if(!0===G&&(!0===V||e!==T)){const t=e===T&&n.id===M;fe.setState(n,e,t)}let f=!1;n.version===h.__version?h.needsLights&&h.lightsStateVersion!==p.state.version||h.outputEncoding!==a||i.isInstancedMesh&&!1===h.instancing?f=!0:i.isInstancedMesh||!0!==h.instancing?i.isSkinnedMesh&&!1===h.skinning?f=!0:i.isSkinnedMesh||!0!==h.skinning?h.envMap!==s||n.fog&&h.fog!==r?f=!0:void 0===h.numClippingPlanes||h.numClippingPlanes===fe.numPlanes&&h.numIntersection===fe.numIntersection?(h.vertexAlphas!==c||h.vertexTangents!==l||h.morphTargets!==u||h.morphNormals!==d)&&(f=!0):f=!0:f=!0:f=!0:(f=!0,h.__version=n.version);let g=h.currentProgram;!0===f&&(g=Fe(n,t,i));let y=!1,v=!1,x=!1;const w=g.getUniforms(),S=h.uniforms;if(J.useProgram(g.program)&&(y=!0,v=!0,x=!0),n.id!==M&&(M=n.id,v=!0),y||T!==e){if(w.setValue(Ee,"projectionMatrix",e.projectionMatrix),Z.logarithmicDepthBuffer&&w.setValue(Ee,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),T!==e&&(T=e,v=!0,x=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=w.map.cameraPosition;void 0!==t&&t.setValue(Ee,Y.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&w.setValue(Ee,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||i.isSkinnedMesh)&&w.setValue(Ee,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){w.setOptional(Ee,i,"bindMatrix"),w.setOptional(Ee,i,"bindMatrixInverse");const e=i.skeleton;e&&(Z.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),w.setValue(Ee,"boneTexture",e.boneTexture,te),w.setValue(Ee,"boneTextureSize",e.boneTextureSize)):w.setOptional(Ee,e,"boneMatrices"))}var E,_;return(v||h.receiveShadow!==i.receiveShadow)&&(h.receiveShadow=i.receiveShadow,w.setValue(Ee,"receiveShadow",i.receiveShadow)),v&&(w.setValue(Ee,"toneMappingExposure",b.toneMappingExposure),h.needsLights&&(_=x,(E=S).ambientLightColor.needsUpdate=_,E.lightProbe.needsUpdate=_,E.directionalLights.needsUpdate=_,E.directionalLightShadows.needsUpdate=_,E.pointLights.needsUpdate=_,E.pointLightShadows.needsUpdate=_,E.spotLights.needsUpdate=_,E.spotLightShadows.needsUpdate=_,E.rectAreaLights.needsUpdate=_,E.hemisphereLights.needsUpdate=_),r&&n.fog&&he.refreshFogUniforms(S,r),he.refreshMaterialUniforms(S,n,B,N,W),Pr.upload(Ee,h.uniformsList,S,te)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Pr.upload(Ee,h.uniformsList,S,te),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&w.setValue(Ee,"center",i.center),w.setValue(Ee,"modelViewMatrix",i.modelViewMatrix),w.setValue(Ee,"normalMatrix",i.normalMatrix),w.setValue(Ee,"modelMatrix",i.matrixWorld),g}Le.setAnimationLoop((function(e){Ie&&Ie(e)})),"undefined"!=typeof window&&Le.setContext(window),this.setAnimationLoop=function(e){Ie=e,Pe.setAnimationLoop(e),null===e?Le.stop():Le.start()},Pe.addEventListener("sessionstart",Re),Pe.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===Pe.enabled&&!0===Pe.isPresenting&&(!0===Pe.cameraAutoUpdate&&Pe.updateCamera(t),t=Pe.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,P),m=me.get(e,v.length),m.init(),v.push(m),q.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),j.setFromProjectionMatrix(q),V=this.localClippingEnabled,G=fe.init(this.clippingPlanes,V,t),p=pe.get(e,f.length),p.init(),f.push(p),Ne(e,t,0,b.sortObjects),p.finish(),!0===b.sortObjects&&p.sort(D,O),!0===G&&fe.beginShadows();const n=m.state.shadowsArray;if(ge.render(n,e,t),!0===G&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ye.render(p,e),m.setupLights(b.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Be(p,e,i,i.viewport)}}else Be(p,e,t);null!==P&&(te.updateMultisampleRenderTarget(P),te.updateRenderTargetMipmap(P)),!0===e.isScene&&e.onAfterRender(b,e,t),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),Se.resetDefaultState(),M=-1,T=null,v.pop(),m=v.length>0?v[v.length-1]:null,f.pop(),p=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTarget=function(e,t=0,n=0){P=e,E=t,C=n,e&&void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e);let i=null,r=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=ee.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=a[t],r=!0):i=e.isWebGLMultisampleRenderTarget?ee.get(e).__webglMultisampledFramebuffer:a,A.copy(e.viewport),I.copy(e.scissor),R=e.scissorTest}else A.copy(F).multiplyScalar(B).floor(),I.copy(z).multiplyScalar(B).floor(),R=U;if(J.bindFramebuffer(36160,i)&&Z.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(H.length!==n.length||36064!==H[0]){for(let e=0,t=n.length;e<t;e++)H[e]=36064+e;H.length=n.length,t=!0}}else 1===H.length&&36064===H[0]||(H[0]=36064,H.length=1,t=!0);else 1===H.length&&1029===H[0]||(H[0]=1029,H.length=1,t=!0);t&&(Z.isWebGL2?Ee.drawBuffers(H):X.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}if(J.viewport(A),J.scissor(I),J.setScissorTest(R),r){const i=ee.get(e.texture);Ee.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(o){const i=ee.get(e.texture),r=t||0;Ee.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){J.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,c=a.type;if(s!==_&&we.convert(s)!==Ee.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=c===w&&(X.has("EXT_color_buffer_half_float")||Z.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(c===y||we.convert(c)===Ee.getParameter(35738)||c===x&&(Z.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Ee.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Ee.readPixels(t,n,i,r,we.convert(s),we.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==P?ee.get(P).__webglFramebuffer:null;J.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i);let a=we.convert(t.format);Z.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),te.setTexture2D(t,0),Ee.copyTexImage2D(3553,n,a,e.x,e.y,r,o,0),J.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,o=t.image.height,a=we.convert(n.format),s=we.convert(n.type);te.setTexture2D(n,0),Ee.pixelStorei(37440,n.flipY),Ee.pixelStorei(37441,n.premultiplyAlpha),Ee.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Ee.texSubImage2D(3553,i,e.x,e.y,r,o,a,s,t.image.data):t.isCompressedTexture?Ee.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):Ee.texSubImage2D(3553,i,e.x,e.y,a,s,t.image),0===i&&n.generateMipmaps&&Ee.generateMipmap(3553),J.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,c=we.convert(i.format),l=we.convert(i.type);let u;if(i.isDataTexture3D)te.setTexture3D(i,0),u=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");te.setTexture2DArray(i,0),u=35866}Ee.pixelStorei(37440,i.flipY),Ee.pixelStorei(37441,i.premultiplyAlpha),Ee.pixelStorei(3317,i.unpackAlignment);const d=Ee.getParameter(3314),h=Ee.getParameter(32878),p=Ee.getParameter(3316),m=Ee.getParameter(3315),f=Ee.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Ee.pixelStorei(3314,g.width),Ee.pixelStorei(32878,g.height),Ee.pixelStorei(3316,e.min.x),Ee.pixelStorei(3315,e.min.y),Ee.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?Ee.texSubImage3D(u,r,t.x,t.y,t.z,o,a,s,c,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(u,r,t.x,t.y,t.z,o,a,s,c,g.data)):Ee.texSubImage3D(u,r,t.x,t.y,t.z,o,a,s,c,l,g),Ee.pixelStorei(3314,d),Ee.pixelStorei(32878,h),Ee.pixelStorei(3316,p),Ee.pixelStorei(3315,m),Ee.pixelStorei(32877,f),0===r&&i.generateMipmaps&&Ee.generateMipmap(u),J.unbindTexture()},this.initTexture=function(e){te.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){E=0,C=0,P=null,J.reset(),Se.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends vo{}).prototype.isWebGL1Renderer=!0;class bo{constructor(e,t=25e-5){this.name="",this.color=new Lt(e),this.density=t}clone(){return new bo(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}bo.prototype.isFogExp2=!0;class xo{constructor(e,t=1,n=1e3){this.name="",this.color=new Lt(e),this.near=t,this.far=n}clone(){return new xo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}xo.prototype.isFog=!0;class wo extends pt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}wo.prototype.isScene=!0;class So{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=F,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=q()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=q()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=q()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}So.prototype.isInterleavedBuffer=!0;const Eo=new de;class _o{constructor(e,t,n,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Eo.x=this.getX(t),Eo.y=this.getY(t),Eo.z=this.getZ(t),Eo.applyMatrix4(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Eo.x=this.getX(t),Eo.y=this.getY(t),Eo.z=this.getZ(t),Eo.applyNormalMatrix(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Eo.x=this.getX(t),Eo.y=this.getY(t),Eo.z=this.getZ(t),Eo.transformDirection(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ot(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _o(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}_o.prototype.isInterleavedBufferAttribute=!0;class Co extends Pt{constructor(e){super(),this.type="SpriteMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Po;Co.prototype.isSpriteMaterial=!0;const Mo=new de,To=new de,Ao=new de,Io=new ee,Ro=new ee,ko=new je,Lo=new de,No=new de,Bo=new de,Do=new ee,Oo=new ee,Fo=new ee;function zo(e,t,n,i,r,o){Io.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Ro.x=o*Io.x-r*Io.y,Ro.y=r*Io.x+o*Io.y):Ro.copy(Io),e.copy(t),e.x+=Ro.x,e.y+=Ro.y,e.applyMatrix4(ko)}(class extends pt{constructor(e){if(super(),this.type="Sprite",void 0===Po){Po=new $t;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new So(e,5);Po.setIndex([0,1,2,0,2,3]),Po.setAttribute("position",new _o(t,3,0,!1)),Po.setAttribute("uv",new _o(t,2,3,!1))}this.geometry=Po,this.material=void 0!==e?e:new Co,this.center=new ee(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),To.setFromMatrixScale(this.matrixWorld),ko.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ao.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&To.multiplyScalar(-Ao.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;zo(Lo.set(-.5,-.5,0),Ao,o,To,i,r),zo(No.set(.5,-.5,0),Ao,o,To,i,r),zo(Bo.set(.5,.5,0),Ao,o,To,i,r),Do.set(0,0),Oo.set(1,0),Fo.set(1,1);let a=e.ray.intersectTriangle(Lo,No,Bo,!1,Mo);if(null===a&&(zo(No.set(-.5,.5,0),Ao,o,To,i,r),Oo.set(0,1),a=e.ray.intersectTriangle(Lo,Bo,No,!1,Mo),null===a))return;const s=e.ray.origin.distanceTo(Mo);s<e.near||s>e.far||t.push({distance:s,point:Mo.clone(),uv:_t.getUV(Mo,Lo,No,Bo,Do,Oo,Fo,new ee),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Uo=new de,Ho=new se,jo=new se,Go=new de,Vo=new je;class Wo extends mn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new je,this.bindMatrixInverse=new je}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new se,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;Ho.fromBufferAttribute(i.attributes.skinIndex,e),jo.fromBufferAttribute(i.attributes.skinWeight,e),Uo.fromBufferAttribute(i.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const i=jo.getComponent(e);if(0!==i){const r=Ho.getComponent(e);Vo.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Go.copy(Uo).applyMatrix4(Vo),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}Wo.prototype.isSkinnedMesh=!0;class qo extends pt{constructor(){super(),this.type="Bone"}}qo.prototype.isBone=!0;class Yo extends oe{constructor(e=null,t=1,n=1,i,r,o,a,s,c=1003,l=1003,u,d){super(null,o,a,s,c,l,i,r,u,d),this.image={data:e,width:t,height:n},this.magFilter=c,this.minFilter=l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Yo.prototype.isDataTexture=!0;const Ko=new je,$o=new je;class Xo{constructor(e=[],t=[]){this.uuid=q(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new je;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:$o;Ko.multiplyMatrices(r,t[i]),Ko.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Xo(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Z(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Yo(t,e,e,_,x);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new qo),this.bones.push(r),this.boneInverses.push((new je).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Zo extends Ot{constructor(e,t,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Zo.prototype.isInstancedBufferAttribute=!0;const Jo=new je,Qo=new je,ea=[],ta=new mn;(class extends mn{constructor(e,t,n){super(e,t),this.instanceMatrix=new Zo(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(ta.geometry=this.geometry,ta.material=this.material,void 0!==ta.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Jo),Qo.multiplyMatrices(n,Jo),ta.matrixWorld=Qo,ta.raycast(e,ea);for(let e=0,n=ea.length;e<n;e++){const n=ea[e];n.instanceId=r,n.object=this,t.push(n)}ea.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Zo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class na extends Pt{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Lt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}na.prototype.isLineBasicMaterial=!0;const ia=new de,ra=new de,oa=new je,aa=new He,sa=new Le;class ca extends pt{constructor(e=new $t,t=new na){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)ia.fromBufferAttribute(t,e-1),ra.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ia.distanceTo(ra);e.setAttribute("lineDistance",new Ut(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sa.copy(n.boundingSphere),sa.applyMatrix4(i),sa.radius+=r,!1===e.ray.intersectsSphere(sa))return;oa.copy(i).invert(),aa.copy(e.ray).applyMatrix4(oa);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,c=new de,l=new de,u=new de,d=new de,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i)for(let n=Math.max(0,o.start),a=Math.min(i.count,o.start+o.count)-1;n<a;n+=h){const o=i.getX(n),a=i.getX(n+1);if(c.fromBufferAttribute(r,o),l.fromBufferAttribute(r,a),aa.distanceSqToSegment(c,l,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(d);h<e.near||h>e.far||t.push({distance:h,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),i=Math.min(r.count,o.start+o.count)-1;n<i;n+=h){if(c.fromBufferAttribute(r,n),l.fromBufferAttribute(r,n+1),aa.distanceSqToSegment(c,l,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ca.prototype.isLine=!0;const la=new de,ua=new de;class da extends ca{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)la.fromBufferAttribute(t,e),ua.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+la.distanceTo(ua);e.setAttribute("lineDistance",new Ut(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}da.prototype.isLineSegments=!0;class ha extends ca{constructor(e,t){super(e,t),this.type="LineLoop"}}ha.prototype.isLineLoop=!0;class pa extends Pt{constructor(e){super(),this.type="PointsMaterial",this.color=new Lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}pa.prototype.isPointsMaterial=!0;const ma=new je,fa=new He,ga=new Le,ya=new de;class va extends pt{constructor(e=new $t,t=new pa){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ga.copy(n.boundingSphere),ga.applyMatrix4(i),ga.radius+=r,!1===e.ray.intersectsSphere(ga))return;ma.copy(i).invert(),fa.copy(e.ray).applyMatrix4(ma);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position;if(null!==r)for(let n=Math.max(0,o.start),c=Math.min(r.count,o.start+o.count);n<c;n++){const o=r.getX(n);ya.fromBufferAttribute(a,o),ba(ya,o,s,i,e,t,this)}else for(let n=Math.max(0,o.start),r=Math.min(a.count,o.start+o.count);n<r;n++)ya.fromBufferAttribute(a,n),ba(ya,n,s,i,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function ba(e,t,n,i,r,o,a){const s=fa.distanceSqToPoint(e);if(s<n){const n=new de;fa.closestPointToPoint(e,n),n.applyMatrix4(i);const c=r.ray.origin.distanceTo(n);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}va.prototype.isPoints=!0,class extends oe{constructor(e,t,n,i,r,o,a,s,c){super(e,t,n,i,r,o,a,s,c),this.format=void 0!==a?a:E,this.minFilter=void 0!==o?o:f,this.magFilter=void 0!==r?r:f,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends oe{constructor(e,t,n,i,r,o,a,s,c,l,u,d){super(null,o,a,s,c,l,i,r,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;class xa extends oe{constructor(e,t,n,i,r,o,a,s,c){super(e,t,n,i,r,o,a,s,c),this.needsUpdate=!0}}xa.prototype.isCanvasTexture=!0,class extends oe{constructor(e,t,n,i,r,o,a,s,c,l){if((l=void 0!==l?l:C)!==C&&l!==P)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===C&&(n=v),void 0===n&&l===P&&(n=S),super(null,i,r,o,a,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:h,this.minFilter=void 0!==s?s:h,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isDepthTexture=!0;class wa extends $t{constructor(e=1,t=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],o=[],a=[],s=[],c=new de,l=new ee;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const d=n+r/t*i;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[u]/e+1)/2,l.y=(o[u+1]/e+1)/2,s.push(l.x,l.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new Ut(o,3)),this.setAttribute("normal",new Ut(a,3)),this.setAttribute("uv",new Ut(s,2))}static fromJSON(e){return new wa(e.radius,e.segments,e.thetaStart,e.thetaLength)}}new de,new de,new de,new _t;class Sa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let a,s=0,c=r-1;for(;s<=c;)if(i=Math.floor(s+(c-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,n[i]===o)return i/(r-1);const l=n[i];return(i+(o-l)/(n[i+1]-l))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),a=this.getPoint(r),s=t||(o.isVector2?new ee:new de);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new de,i=[],r=[],o=[],a=new de,s=new je;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new de),i[t].normalize()}r[0]=new de,o[0]=new de;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Y(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(Y(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ea extends Sa{constructor(e=0,t=0,n=1,i=1,r=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new ee,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=c-this.aY;s=n*e-i*t+this.aX,c=n*t+i*e+this.aY}return n.set(s,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Ea.prototype.isEllipseCurve=!0;class _a extends Ea{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.type="ArcCurve"}}function Ca(){let e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){let c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(i-t)/(a+s)+(i-n)/s;c*=a,l*=a,r(t,n,c,l)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}_a.prototype.isArcCurve=!0;const Pa=new de,Ma=new Ca,Ta=new Ca,Aa=new Ca;class Ia extends Sa{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new de){const n=t,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let a,s,c=Math.floor(o),l=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:0===l&&c===r-1&&(c=r-2,l=1),this.closed||c>0?a=i[(c-1)%r]:(Pa.subVectors(i[0],i[1]).add(i[0]),a=Pa);const u=i[c%r],d=i[(c+1)%r];if(this.closed||c+2<r?s=i[(c+2)%r]:(Pa.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=Pa),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Ma.initNonuniformCatmullRom(a.x,u.x,d.x,s.x,t,n,i),Ta.initNonuniformCatmullRom(a.y,u.y,d.y,s.y,t,n,i),Aa.initNonuniformCatmullRom(a.z,u.z,d.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(Ma.initCatmullRom(a.x,u.x,d.x,s.x,this.tension),Ta.initCatmullRom(a.y,u.y,d.y,s.y,this.tension),Aa.initCatmullRom(a.z,u.z,d.z,s.z,this.tension));return n.set(Ma.calc(l),Ta.calc(l),Aa.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new de).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ra(e,t,n,i,r){const o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function ka(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function La(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}Ia.prototype.isCatmullRomCurve3=!0;class Na extends Sa{constructor(e=new ee,t=new ee,n=new ee,i=new ee){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ee){const n=t,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(La(e,i.x,r.x,o.x,a.x),La(e,i.y,r.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Na.prototype.isCubicBezierCurve=!0;class Ba extends Sa{constructor(e=new de,t=new de,n=new de,i=new de){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new de){const n=t,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(La(e,i.x,r.x,o.x,a.x),La(e,i.y,r.y,o.y,a.y),La(e,i.z,r.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ba.prototype.isCubicBezierCurve3=!0;class Da extends Sa{constructor(e=new ee,t=new ee){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ee){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new ee;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Da.prototype.isLineCurve=!0;class Oa extends Sa{constructor(e=new ee,t=new ee,n=new ee){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ee){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(ka(e,i.x,r.x,o.x),ka(e,i.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Oa.prototype.isQuadraticBezierCurve=!0;class Fa extends Sa{constructor(e=new de,t=new de,n=new de){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new de){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(ka(e,i.x,r.x,o.x),ka(e,i.y,r.y,o.y),ka(e,i.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Fa.prototype.isQuadraticBezierCurve3=!0;class za extends Sa{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ee){const n=t,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],c=i[o],l=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Ra(a,s.x,c.x,l.x,u.x),Ra(a,s.y,c.y,l.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ee).fromArray(n))}return this}}za.prototype.isSplineCurve=!0;var Ua=Object.freeze({__proto__:null,ArcCurve:_a,CatmullRomCurve3:Ia,CubicBezierCurve:Na,CubicBezierCurve3:Ba,EllipseCurve:Ea,LineCurve:Da,LineCurve3:class extends Sa{constructor(e=new de,t=new de){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new de){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Oa,QuadraticBezierCurve3:Fa,SplineCurve:za});function Ha(e,t,n,i,r){let o,a;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=cs(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=cs(o,e[o],e[o+1],a);return a&&ns(a,a.next)&&(ls(a),a=a.next),a}function ja(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!ns(i,i.next)&&0!==ts(i.prev,i,i.next))i=i.next;else{if(ls(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Ga(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=Za(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,a,s,c,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ,i);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(e,i,r,o);let s,c,l=e;for(;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Wa(e,i,r,o):Va(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),ls(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?Ga(e=qa(ja(e),t,n),t,n,i,r,o,2):2===a&&Ya(e,t,n,i,r,o):Ga(ja(e),t,n,i,r,o,1);break}}function Va(e){const t=e.prev,n=e,i=e.next;if(ts(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(Qa(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ts(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Wa(e,t,n,i){const r=e.prev,o=e,a=e.next;if(ts(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,c=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,d=Za(s,c,t,n,i),h=Za(l,u,t,n,i);let p=e.prevZ,m=e.nextZ;for(;p&&p.z>=d&&m&&m.z<=h;){if(p!==e.prev&&p!==e.next&&Qa(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ts(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==e.prev&&m!==e.next&&Qa(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&ts(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Qa(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ts(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=h;){if(m!==e.prev&&m!==e.next&&Qa(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&ts(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function qa(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!ns(r,o)&&is(r,i,i.next,o)&&as(r,o)&&as(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),ls(i),ls(i.next),i=e=o),i=i.next}while(i!==e);return ja(i)}function Ya(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&es(a,e)){let s=ss(a,e);return a=ja(a,a.next),s=ja(s,s.next),Ga(a,t,n,i,r,o),void Ga(s,t,n,i,r,o)}e=e.next}a=a.next}while(a!==e)}function Ka(e,t){return e.x-t.x}function $a(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a){if(a=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===a)return o;const s=o,c=o.x,l=o.y;let u,d=1/0;n=o;do{i>=n.x&&n.x>=c&&i!==n.x&&Qa(r<l?i:a,r,c,l,r<l?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),as(n,e)&&(u<d||u===d&&(n.x>o.x||n.x===o.x&&Xa(o,n)))&&(o=n,d=u)),n=n.next}while(n!==s);return o}(e,t),t){const n=ss(t,e);ja(t,t.next),ja(n,n.next)}}function Xa(e,t){return ts(e.prev,e,t.prev)<0&&ts(t.next,e,e.next)<0}function Za(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ja(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Qa(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function es(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&is(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(as(e,t)&&as(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(ts(e.prev,e,t.prev)||ts(e,t.prev,t))||ns(e,t)&&ts(e.prev,e,e.next)>0&&ts(t.prev,t,t.next)>0)}function ts(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ns(e,t){return e.x===t.x&&e.y===t.y}function is(e,t,n,i){const r=os(ts(e,t,n)),o=os(ts(e,t,i)),a=os(ts(n,i,e)),s=os(ts(n,i,t));return r!==o&&a!==s||!(0!==r||!rs(e,n,t))||!(0!==o||!rs(e,i,t))||!(0!==a||!rs(n,e,i))||!(0!==s||!rs(n,t,i))}function rs(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function os(e){return e>0?1:e<0?-1:0}function as(e,t){return ts(e.prev,e,e.next)<0?ts(e,t,e.next)>=0&&ts(e,e.prev,t)>=0:ts(e,t,e.prev)<0||ts(e,e.next,t)<0}function ss(e,t){const n=new us(e.i,e.x,e.y),i=new us(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function cs(e,t,n,i){const r=new us(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ls(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function us(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ds{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return ds.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];hs(e),ps(n,e);let o=e.length;t.forEach(hs);for(let e=0;e<t.length;e++)i.push(o),o+=t[e].length,ps(n,t[e]);const a=function(e,t,n=2){const i=t&&t.length,r=i?t[0]*n:e.length;let o=Ha(e,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,c,l,u,d,h,p;if(i&&(o=function(e,t,n,i){const r=[];let o,a,s,c,l;for(o=0,a=t.length;o<a;o++)s=t[o]*i,c=o<a-1?t[o+1]*i:e.length,l=Ha(e,s,c,i,!1),l===l.next&&(l.steiner=!0),r.push(Ja(l));for(r.sort(Ka),o=0;o<r.length;o++)$a(r[o],n),n=ja(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=l=e[0],c=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<s&&(s=d),h<c&&(c=h),d>l&&(l=d),h>u&&(u=h);p=Math.max(l-s,u-c),p=0!==p?1/p:0}return Ga(o,a,n,s,c,p),a}(n,i);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}}function hs(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ps(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class ms extends $t{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++)o(e[t]);function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:u-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:fs;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let g,y,v,b,x,w=!1;m&&(g=m.getSpacedPoints(s),w=!0,l=!1,y=m.computeFrenetFrames(s,!1),v=new de,b=new de,x=new de),l||(p=0,u=0,d=0,h=0);const S=e.extractPoints(a);let E=S.shape;const _=S.holes;if(!ds.isClockWise(E)){E=E.reverse();for(let e=0,t=_.length;e<t;e++){const t=_[e];ds.isClockWise(t)&&(_[e]=t.reverse())}}const C=ds.triangulateShape(E,_),P=E;for(let e=0,t=_.length;e<t;e++){const t=_[e];E=E.concat(t)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=E.length,A=C.length;function I(e,t,n){let i,r,o;const a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=a*a+s*s,d=a*l-s*c;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(c*c+l*l),p=t.x-s/d,m=t.y+a/d,f=((n.x-l/h-p)*l-(n.y+c/h-m)*c)/(a*l-s*c);i=p+a*f-e.x,r=m+s*f-e.y;const g=i*i+r*r;if(g<=2)return new ee(i,r);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?c>Number.EPSILON&&(e=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new ee(i/o,r/o)}const R=[];for(let e=0,t=P.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),R[e]=I(P[e],P[n],P[i]);const k=[];let L,N=R.concat();for(let e=0,t=_.length;e<t;e++){const t=_[e];L=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[e]=I(t[e],t[i],t[r]);k.push(L),N=N.concat(L)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=P.length;e<t;e++){const t=M(P[e],R[e],i);O(t.x,t.y,-n)}for(let e=0,t=_.length;e<t;e++){const t=_[e];L=k[e];for(let e=0,r=t.length;e<r;e++){const r=M(t[e],L[e],i);O(r.x,r.y,-n)}}}const B=d+h;for(let e=0;e<T;e++){const t=l?M(E[e],N[e],B):E[e];w?(b.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(v),O(x.x,x.y,x.z)):O(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){const n=l?M(E[t],N[t],B):E[t];w?(b.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(v),O(x.x,x.y,x.z)):O(n.x,n.y,c/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=P.length;e<t;e++){const t=M(P[e],R[e],i);O(t.x,t.y,c+n)}for(let e=0,t=_.length;e<t;e++){const t=_[e];L=k[e];for(let e=0,r=t.length;e<r;e++){const r=M(t[e],L[e],i);w?O(r.x,r.y+g[s-1].y,g[s-1].x+n):O(r.x,r.y,c+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=T*e,o=T*(e+1);z(t+i+n,t+r+n,t+r+o,t+i+o)}}}function O(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,r){U(e),U(t),U(r);const o=i.length/3,a=f.generateTopUV(n,i,o-3,o-2,o-1);H(a[0]),H(a[1]),H(a[2])}function z(e,t,r,o){U(e),U(t),U(o),U(t),U(r),U(o);const a=i.length/3,s=f.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function U(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function H(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(l){let e=0,t=T*e;for(let e=0;e<A;e++){const n=C[e];F(n[2]+t,n[1]+t,n[0]+t)}e=s+2*p,t=T*e;for(let e=0;e<A;e++){const n=C[e];F(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<A;e++){const t=C[e];F(t[2],t[1],t[0])}for(let e=0;e<A;e++){const t=C[e];F(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;D(P,t),t+=P.length;for(let e=0,n=_.length;e<n;e++){const n=_[e];D(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Ut(i,3)),this.setAttribute("uv",new Ut(r,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Ua[i.type]).fromJSON(i)),new ms(n,e.options)}}const fs={generateTopUV:function(e,t,n,i,r){const o=t[3*n],a=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new ee(o,a),new ee(s,c),new ee(l,u)]},generateSideWallUV:function(e,t,n,i,r,o){const a=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],m=t[3*r+2],f=t[3*o],g=t[3*o+1],y=t[3*o+2];return Math.abs(s-u)<Math.abs(a-l)?[new ee(a,1-c),new ee(l,1-d),new ee(h,1-m),new ee(f,1-y)]:[new ee(s,1-c),new ee(u,1-d),new ee(p,1-m),new ee(g,1-y)]}};class gs extends $t{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(a,s,t),a+=s,s=0;function c(e){const a=i.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===ds.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===ds.isClockWise(t)&&(u[e]=t.reverse())}const d=ds.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],i=t[0]+a,r=t[1]+a,o=t[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ut(i,3)),this.setAttribute("normal",new Ut(r,3)),this.setAttribute("uv",new Ut(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new gs(n,e.curveSegments)}}class ys extends Pt{constructor(e){super(),this.type="ShadowMaterial",this.color=new Lt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ys.prototype.isShadowMaterial=!0;class vs extends Pt{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}vs.prototype.isMeshStandardMaterial=!0;class bs extends vs{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Y(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new Lt(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Lt(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(e)}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheenTint.copy(e.sheenTint),this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}bs.prototype.isMeshPhysicalMaterial=!0;(class extends Pt{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Lt(16777215),this.specular=new Lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends Pt{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends Pt{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends Pt{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends Pt{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends na{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const xs={arraySlice:function(e,t,n){return xs.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)},subclip:function(e,t,n,i,r=30){const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*r;if(!(o<n||o>=i)){c.push(t.times[e]);for(let n=0;n<s;++n)l.push(t.values[e*s+n])}}0!==c.length&&(t.times=xs.convertArray(c,t.times.constructor),t.values=xs.convertArray(l,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,o=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===a)continue;let s=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const d=i.times.length-1;let h;if(o<=i.times[0]){const e=s,t=c-s;h=xs.arraySlice(i.values,e,t)}else if(o>=i.times[d]){const e=d*c+s,t=e+c-s;h=xs.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=s,n=c-s;e.evaluate(o),h=xs.arraySlice(e.resultBuffer,t,n)}"quaternion"===r&&(new ue).fromArray(h).normalize().conjugate().toArray(h);const p=a.times.length;for(let e=0;e<p;++e){const t=e*u+l;if("quaternion"===r)ue.multiplyQuaternionsFlat(a.values,t,h,0,a.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)a.values[t+n]-=h[n]}}}return e.blendMode=2501,e}};class ws{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}ws.prototype.beforeStart_=ws.prototype.copySampleValue_,ws.prototype.afterEnd_=ws.prototype.copySampleValue_;class Ss extends ws{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:I,endingEnd:I}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case R:r=e,a=2*t-n;break;case k:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case R:o=e,s=2*n-t;break;case k:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=o*l}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),m=p*p,f=m*p,g=-d*f+2*d*m-d*p,y=(1+d)*f+(-1.5-2*d)*m+(-.5+d)*p+1,v=(-1-h)*f+(1.5+h)*m+.5*p,b=h*f-h*m;for(let e=0;e!==a;++e)r[e]=g*o[l+e]+y*o[c+e]+v*o[s+e]+b*o[u+e];return r}}class Es extends ws{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=(n-t)/(i-t),u=1-l;for(let e=0;e!==a;++e)r[e]=o[c+e]*u+o[s+e]*l;return r}}class _s extends ws{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cs{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xs.convertArray(t,this.TimeBufferType),this.values=xs.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:xs.convertArray(e.times,Array),values:xs.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new _s(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Es(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ss(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case M:t=this.InterpolantFactoryMethodDiscrete;break;case T:t=this.InterpolantFactoryMethodLinear;break;case A:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return M;case this.InterpolantFactoryMethodLinear:return T;case this.InterpolantFactoryMethodSmooth:return A}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=xs.arraySlice(n,r,o),this.values=xs.arraySlice(this.values,r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,o),e=!1;break}o=i}if(void 0!==i&&xs.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=xs.arraySlice(this.times),t=xs.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===A,r=e.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[o+a]){r=!0;break}}}if(r){if(a!==o){e[o]=e[a];const i=a*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,a=0;a!==n;++a)t[i+a]=t[e+a];++o}return o!==e.length?(this.times=xs.arraySlice(e,0,o),this.values=xs.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=xs.arraySlice(this.times,0),t=xs.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Cs.prototype.TimeBufferType=Float32Array,Cs.prototype.ValueBufferType=Float32Array,Cs.prototype.DefaultInterpolation=T;class Ps extends Cs{}Ps.prototype.ValueTypeName="bool",Ps.prototype.ValueBufferType=Array,Ps.prototype.DefaultInterpolation=M,Ps.prototype.InterpolantFactoryMethodLinear=void 0,Ps.prototype.InterpolantFactoryMethodSmooth=void 0;class Ms extends Cs{}Ms.prototype.ValueTypeName="color";class Ts extends Cs{}Ts.prototype.ValueTypeName="number";class As extends ws{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(i-t);let c=e*a;for(let e=c+a;c!==e;c+=4)ue.slerpFlat(r,0,o,c-a,o,c,s);return r}}class Is extends Cs{InterpolantFactoryMethodLinear(e){return new As(this.times,this.values,this.getValueSize(),e)}}Is.prototype.ValueTypeName="quaternion",Is.prototype.DefaultInterpolation=T,Is.prototype.InterpolantFactoryMethodSmooth=void 0;class Rs extends Cs{}Rs.prototype.ValueTypeName="string",Rs.prototype.ValueBufferType=Array,Rs.prototype.DefaultInterpolation=M,Rs.prototype.InterpolantFactoryMethodLinear=void 0,Rs.prototype.InterpolantFactoryMethodSmooth=void 0;class ks extends Cs{}ks.prototype.ValueTypeName="vector";class Ls{constructor(e,t=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=q(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(Ns(n[e]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(Cs.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,o=[];for(let e=0;e<r;e++){let a=[],s=[];a.push((e+r-1)%r,e,(e+1)%r),s.push(0,1,0);const c=xs.getKeyframeOrder(a);a=xs.sortedArray(a,1,c),s=xs.sortedArray(s,1,c),i||0!==a[0]||(a.push(r),s.push(s[0])),o.push(new Ts(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(r);if(o&&o.length>1){const e=o[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const o=[];for(const e in i)o.push(this.CreateFromMorphTargetSequence(e,i[e],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],a=[];xs.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const r=c[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new Ts(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(ks,o+".position",r,"pos",i),n(Is,o+".quaternion",r,"rot",i),n(ks,o+".scale",r,"scl",i)}}return 0===i.length?null:new this(r,s,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ns(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ts;case"vector":case"vector2":case"vector3":case"vector4":return ks;case"color":return Ms;case"quaternion":return Is;case"bool":case"boolean":return Ps;case"string":return Rs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];xs.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Bs={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Ds=new class{constructor(e,t,n){const i=this;let r,o=!1,a=0,s=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}};class Os{constructor(e){this.manager=void 0!==e?e:Ds,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Fs={};class zs extends Os{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Bs.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0!==Fs[e])return void Fs[e].push({onLoad:t,onProgress:n,onError:i});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let i;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);i="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(s,n);break;case"json":i=JSON.parse(s);break;default:i=s}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Fs[e]=[],Fs[e].push({onLoad:t,onProgress:n,onError:i}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,i=Fs[e];if(delete Fs[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Bs.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=Fs[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=Fs[e];delete Fs[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=Fs[e];delete Fs[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return r.manager.itemStart(e),s}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Us extends Os{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Bs.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),Bs.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Hs extends Os{constructor(e){super(e)}load(e,t,n,i){const r=new Cn,o=new Us(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)s(t);return r}}class js extends Os{constructor(e){super(e)}load(e,t,n,i){const r=new oe,o=new Us(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?E:_,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}class Gs extends Sa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Da(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],o=r.getLength(),a=0===o?0:1-e/o;return r.getPointAt(a)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Ua[n.type]).fromJSON(n))}return this}}class Vs extends Gs{constructor(e){super(),this.type="Path",this.currentPoint=new ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Da(this.currentPoint.clone(),new ee(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Oa(this.currentPoint.clone(),new ee(e,t),new ee(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const a=new Na(this.currentPoint.clone(),new ee(e,t),new ee(n,i),new ee(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new za(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,o,a,s),this}absellipse(e,t,n,i,r,o,a,s){const c=new Ea(e,t,n,i,r,o,a,s);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ws extends Vs{constructor(e){super(e),this.uuid=q(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Vs).fromJSON(n))}return this}}class qs extends pt{constructor(e,t=1){super(),this.type="Light",this.color=new Lt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}qs.prototype.isLight=!0;(class extends qs{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(pt.DefaultUp),this.updateMatrix(),this.groundColor=new Lt(t)}copy(e){return qs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Ys=new je,Ks=new de,$s=new de;class Xs{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ee(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ln,this._frameExtents=new ee(1,1),this._viewportCount=1,this._viewports=[new se(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Ks.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ks),$s.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($s),t.updateMatrixWorld(),Ys.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ys),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Zs extends Xs{constructor(){super(new Sn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*W*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Zs.prototype.isSpotLightShadow=!0;class Js extends qs{constructor(e,t,n=0,i=Math.PI/3,r=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(pt.DefaultUp),this.updateMatrix(),this.target=new pt,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.shadow=new Zs}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Js.prototype.isSpotLight=!0;const Qs=new je,ec=new de,tc=new de;class nc extends Xs{constructor(){super(new Sn(90,1,.5,500)),this._frameExtents=new ee(4,2),this._viewportCount=6,this._viewports=[new se(2,1,1,1),new se(0,1,1,1),new se(3,1,1,1),new se(1,1,1,1),new se(3,0,1,1),new se(1,0,1,1)],this._cubeDirections=[new de(1,0,0),new de(-1,0,0),new de(0,0,1),new de(0,0,-1),new de(0,1,0),new de(0,-1,0)],this._cubeUps=[new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,0,1),new de(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),ec.setFromMatrixPosition(e.matrixWorld),n.position.copy(ec),tc.copy(n.position),tc.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(tc),n.updateMatrixWorld(),i.makeTranslation(-ec.x,-ec.y,-ec.z),Qs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qs)}}nc.prototype.isPointLightShadow=!0;class ic extends qs{constructor(e,t,n=0,i=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new nc}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}ic.prototype.isPointLight=!0;class rc extends Xs{constructor(){super(new qn(-5,5,5,-5,.5,500))}}rc.prototype.isDirectionalLightShadow=!0;class oc extends qs{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(pt.DefaultUp),this.updateMatrix(),this.target=new pt,this.shadow=new rc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}oc.prototype.isDirectionalLight=!0;class ac extends qs{constructor(e,t){super(e,t),this.type="AmbientLight"}}ac.prototype.isAmbientLight=!0;(class extends qs{constructor(e,t,n=10,i=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class sc{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new de)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}sc.prototype.isSphericalHarmonics3=!0;class cc extends qs{constructor(e=new sc,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}cc.prototype.isLightProbe=!0;class lc{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}(class extends $t{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;class uc extends Os{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Bs.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Bs.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}uc.prototype.isImageBitmapLoader=!0;let dc;class hc extends Os{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new zs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);(void 0===dc&&(dc=new(window.AudioContext||window.webkitAudioContext)),dc).decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}(class extends cc{constructor(e,t,n=1){super(void 0,n);const i=(new Lt).set(e),r=(new Lt).set(t),o=new de(i.r,i.g,i.b),a=new de(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class extends cc{constructor(e,t=1){super(void 0,t);const n=(new Lt).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class pc{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=mc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=mc();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function mc(){return("undefined"==typeof performance?Date:performance).now()}class fc{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]}_slerp(e,t,n,i){ue.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const o=this._workIndex*r;ue.multiplyQuaternionsFlat(e,o,e,t,e,n),ue.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*o+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}}const gc=new RegExp("[\\[\\]\\.:\\/]","g"),yc="[^\\[\\]\\.:\\/]",vc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",bc=/((?:WC+[\/:])*)/.source.replace("WC",yc),xc=/(WCOD+)?/.source.replace("WCOD",vc),wc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yc),Sc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yc),Ec=new RegExp("^"+bc+xc+wc+Sc+"$"),_c=["material","materials","bones"];class Cc{constructor(e,t,n){this.path=t,this.parsedPath=n||Cc.parseTrackName(t),this.node=Cc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Cc.Composite(e,t,n):new Cc(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gc,"")}static parseTrackName(e){const t=Ec.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==_c.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Cc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cc.Composite=class{constructor(e,t,n){const i=n||Cc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Cc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Cc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Cc.prototype.GetterByBindingType=[Cc.prototype._getValue_direct,Cc.prototype._getValue_array,Cc.prototype._getValue_arrayElement,Cc.prototype._getValue_toArray],Cc.prototype.SetterByBindingTypeAndVersioning=[[Cc.prototype._setValue_direct,Cc.prototype._setValue_direct_setNeedsUpdate,Cc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cc.prototype._setValue_array,Cc.prototype._setValue_array_setNeedsUpdate,Cc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cc.prototype._setValue_arrayElement,Cc.prototype._setValue_arrayElement_setNeedsUpdate,Cc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cc.prototype._setValue_fromArray,Cc.prototype._setValue_fromArray_setNeedsUpdate,Cc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Pc{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,o=r.length,a=new Array(o),s={endingStart:I,endingEnd:I};for(let e=0;e!==o;++e){const t=r[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=2202===n;if(0===e)return-1===r?i:o&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=R,i.endingEnd=R):(i.endingStart=e?this.zeroSlopeAtStart?R:I:k,i.endingEnd=t?this.zeroSlopeAtEnd?R:I:k)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}(class extends H{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let e=0;e!==r;++e){const r=i[e],c=r.name;let u=l[c];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new fc(Cc.create(n,c,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),o[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Es(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let o="string"==typeof e?Ls.findByName(i,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const l=new Pc(this,o,t,n);return this._bindAction(l,c),this._addInactiveAction(l,a,r),l}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?Ls.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(i,e,r,o);const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Mc{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Mc(void 0===this.value.clone?this.value:this.value.clone())}}(class extends So{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class Tc{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Y(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Ac=new ee;class Ic{constructor(e=new ee(1/0,1/0),t=new ee(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ac.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ac.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ic.prototype.isBox2=!0,class extends pt{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}.prototype.isImmediateRenderObject=!0;const Rc=new de,kc=new je,Lc=new je;function Nc(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Nc(e.children[n]));return t}const Bc=new Float32Array(1);new Int32Array(Bc.buffer),Sa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Sa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Vs.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends da{constructor(e=10,t=10,n=4473924,i=8947848){n=new Lt(n),i=new Lt(i);const r=t/2,o=e/t,a=e/2,s=[],c=[];for(let e=0,l=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===r?n:i;t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3}const l=new $t;l.setAttribute("position",new Ut(s,3)),l.setAttribute("color",new Ut(c,3)),super(l,new na({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends da{constructor(e){const t=Nc(e),n=new $t,i=[],r=[],o=new Lt(0,0,1),a=new Lt(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Ut(i,3)),n.setAttribute("color",new Ut(r,3)),super(n,new na({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Lc.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(kc.multiplyMatrices(Lc,r.matrixWorld),Rc.setFromMatrixPosition(kc),i.setXYZ(n,Rc.x,Rc.y,Rc.z),kc.multiplyMatrices(Lc,r.parent.matrixWorld),Rc.setFromMatrixPosition(kc),i.setXYZ(n+1,Rc.x,Rc.y,Rc.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Os.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),lc.extractUrlBase(e)},Os.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ic.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ic.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ic.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Ic.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},me.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},me.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},me.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},me.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},me.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Le.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ln.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},te.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},te.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},te.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},te.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},te.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},te.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},je.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},je.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},je.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new de).setFromMatrixColumn(this,3)},je.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},je.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},je.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},je.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},je.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},je.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},je.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},je.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},je.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},je.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},je.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},je.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},je.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},je.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},je.prototype.makeFrustum=function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)},je.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},In.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},ue.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},ue.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},He.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},He.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},He.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},_t.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},_t.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},_t.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},_t.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},_t.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},_t.barycoordFromPoint=function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),_t.getBarycoord(e,t,n,i,r)},_t.normal=function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),_t.getNormal(e,t,n,i)},Ws.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Ws.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ms(this,e)},Ws.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gs(this,e)},ee.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ee.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},ee.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},de.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},de.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},de.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},de.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},de.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},de.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},de.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},de.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},de.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},se.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pt.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},pt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},pt.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},pt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},pt.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(pt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),mn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(mn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Wo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Sn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(qs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ot.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===z},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(z)}}}),Ot.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?z:F),this},Ot.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ot.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},$t.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},$t.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ot(arguments[1],arguments[2])))},$t.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},$t.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},$t.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},$t.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},$t.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties($t.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),So.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?z:F),this},So.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ms.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ms.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ms.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},wo.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Mc.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Pt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Lt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(xn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),vo.prototype.clearTarget=function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},vo.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},vo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},vo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},vo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},vo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},vo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},vo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},vo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},vo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},vo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},vo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},vo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},vo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},vo.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},vo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},vo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},vo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},vo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},vo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},vo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},vo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},vo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},vo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},vo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(vo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?N:L}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(so.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ce.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends pt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new hc).load(e,(function(e){t.setBuffer(e)})),this},_n.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},_n.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)},ie.crossOrigin=void 0,ie.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new js;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},ie.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Hs;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},ie.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ie.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"132"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="132");var Dc=function(){this._tweens={},this._tweensAddedDuringUpdate={}};Dc.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:Fc.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(e)&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var Oc,Fc=new Dc;Fc.Group=Dc,Fc._nextId=0,Fc.nextId=function(){return Fc._nextId++},"undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?Fc.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?Fc.now=self.performance.now.bind(self.performance):void 0!==Date.now?Fc.now=Date.now:Fc.now=function(){return(new Date).getTime()},Fc.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=Fc.Easing.Linear.None,this._interpolationFunction=Fc.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||Fc,this._id=Fc.nextId()},Fc.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?Fc.now()+parseFloat(e):e:Fc.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},Fc.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-Fc.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Fc.Easing.Bounce.In(2*e):.5*Fc.Easing.Bounce.Out(2*e-1)+.5}}},Fc.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=Fc.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],i):1<t?o(e[n],e[n-1],n-i):o(e[r],e[n<r+1?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,o=Fc.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-t,i-a)*r(t,a)*e[a]*o(i,a);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=Fc.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),o(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):1<t?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=Fc.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(Oc=[1],function(e){var t=1;if(Oc[e])return Oc[e];for(var n=e;1<n;n--)t*=n;return Oc[e]=t}),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}},"function"==typeof define&&define.amd?define([],(function(){return Fc})):void 0!==e&&"object"==typeof exports&&(e.exports=Fc);const zc={type:"change"},Uc={type:"start"},Hc={type:"end"};class jc extends H{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new de,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",G),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(zc),n.update(),r=i.NONE},this.update=function(){const t=new de,d=(new ue).setFromUnitVectors(e.up,new de(0,1,0)),h=d.clone().invert(),p=new de,m=new ue,f=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(d),a.setFromVector3(t),n.autoRotate&&r===i.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let g=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=f:g>Math.PI&&(g-=f),y<-Math.PI?y+=f:y>Math.PI&&(y-=f),a.theta=g<=y?Math.max(g,Math.min(y,a.theta)):a.theta>(g+y)/2?Math.max(g,a.theta):Math.min(y,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(l,n.dampingFactor):n.target.add(l),t.setFromSpherical(a),t.applyQuaternion(h),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,l.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),l.set(0,0,0)),c=1,!!(u||p.distanceToSquared(n.object.position)>o||8*(1-m.dot(n.object.quaternion))>o)&&(n.dispatchEvent(zc),p.copy(n.object.position),m.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",V),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",H),n.domElement.removeEventListener("wheel",j),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",U),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",G)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const o=1e-6,a=new Tc,s=new Tc;let c=1;const l=new de;let u=!1;const d=new ee,h=new ee,p=new ee,m=new ee,f=new ee,g=new ee,y=new ee,v=new ee,b=new ee,x=[],w={};function S(){return Math.pow(.95,n.zoomSpeed)}function E(e){s.theta-=e}function _(e){s.phi-=e}const C=function(){const e=new de;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),l.add(e)}}(),P=function(){const e=new de;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),l.add(e)}}(),M=function(){const e=new de;return function(t,i){const r=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*a/r.clientHeight,n.object.matrix),P(2*i*a/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),P(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function T(e){n.object.isPerspectiveCamera?c/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function A(e){n.object.isPerspectiveCamera?c*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){d.set(e.clientX,e.clientY)}function R(e){m.set(e.clientX,e.clientY)}function k(){if(1===x.length)d.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);d.set(e,t)}}function L(){if(1===x.length)m.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);m.set(e,t)}}function N(){const e=x[0].pageX-x[1].pageX,t=x[0].pageY-x[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function B(e){if(1==x.length)h.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);h.set(n,i)}p.subVectors(h,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;E(2*Math.PI*p.x/t.clientHeight),_(2*Math.PI*p.y/t.clientHeight),d.copy(h)}function D(e){if(1===x.length)f.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}g.subVectors(f,m).multiplyScalar(n.panSpeed),M(g.x,g.y),m.copy(f)}function O(e){const t=Y(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);v.set(0,o),b.set(0,Math.pow(v.y/y.y,n.zoomSpeed)),T(b.y),y.copy(v)}function F(e){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",U)),function(e){x.push(e)}(e),"touch"===e.pointerType?function(e){switch(q(e),x.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;k(),r=i.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;L(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&N(),n.enablePan&&L(),r=i.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&N(),n.enableRotate&&k(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(Uc)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===n.enableZoom)return;!function(e){y.set(e.clientX,e.clientY)}(e),r=i.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;R(e),r=i.PAN}else{if(!1===n.enableRotate)return;I(e),r=i.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;I(e),r=i.ROTATE}else{if(!1===n.enablePan)return;R(e),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(Uc)}(e))}function z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(q(e),r){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&O(e),n.enablePan&&D(e)}(e),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&O(e),n.enableRotate&&B(e)}(e),n.update();break;default:r=i.NONE}}(e):function(e){if(!1!==n.enabled)switch(r){case i.ROTATE:if(!1===n.enableRotate)return;!function(e){h.set(e.clientX,e.clientY),p.subVectors(h,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;E(2*Math.PI*p.x/t.clientHeight),_(2*Math.PI*p.y/t.clientHeight),d.copy(h),n.update()}(e);break;case i.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY),b.subVectors(v,y),b.y>0?T(S()):b.y<0&&A(S()),y.copy(v),n.update()}(e);break;case i.PAN:if(!1===n.enablePan)return;!function(e){f.set(e.clientX,e.clientY),g.subVectors(f,m).multiplyScalar(n.panSpeed),M(g.x,g.y),m.copy(f),n.update()}(e)}}(e))}function U(e){!1!==n.enabled&&(e.pointerType,n.dispatchEvent(Hc),r=i.NONE,W(e),0===x.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",U)))}function H(e){W(e)}function j(e){!1===n.enabled||!1===n.enableZoom||r!==i.NONE&&r!==i.ROTATE||(e.preventDefault(),n.dispatchEvent(Uc),function(e){e.deltaY<0?A(S()):e.deltaY>0&&T(S()),n.update()}(e),n.dispatchEvent(Hc))}function G(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:M(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:M(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:M(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:M(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function V(e){!1!==n.enabled&&e.preventDefault()}function W(e){delete w[e.pointerId];for(let t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId)return void x.splice(t,1)}function q(e){let t=w[e.pointerId];void 0===t&&(t=new ee,w[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Y(e){const t=e.pointerId===x[0].pointerId?x[1]:x[0];return w[t.pointerId]}n.domElement.addEventListener("contextmenu",V),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",j,{passive:!1}),this.update()}}class Gc extends Os{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Kc(e)})),this.register((function(e){return new Qc(e)})),this.register((function(e){return new el(e)})),this.register((function(e){return new $c(e)})),this.register((function(e){return new Xc(e)})),this.register((function(e){return new Zc(e)})),this.register((function(e){return new Jc(e)})),this.register((function(e){return new qc(e)})),this.register((function(e){return new tl(e)}))}load(e,t,n,i){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:lc.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},s=new zs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{r.parse(n,o,(function(n){t(n),r.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},a={};if("string"==typeof e)r=e;else if(lc.decodeText(new Uint8Array(e,0,4))===nl){try{o[Wc.KHR_BINARY_GLTF]=new il(e)}catch(e){return void(i&&i(e))}r=o[Wc.KHR_BINARY_GLTF].content}else r=lc.decodeText(new Uint8Array(e));const s=JSON.parse(r);if(void 0===s.asset||s.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Pl(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](c);a[t.name]=t,o[t.name]=!0}if(s.extensionsUsed)for(let e=0;e<s.extensionsUsed.length;++e){const t=s.extensionsUsed[e],n=s.extensionsRequired||[];switch(t){case Wc.KHR_MATERIALS_UNLIT:o[t]=new Yc;break;case Wc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[t]=new sl;break;case Wc.KHR_DRACO_MESH_COMPRESSION:o[t]=new rl(s,this.dracoLoader);break;case Wc.KHR_TEXTURE_TRANSFORM:o[t]=new ol;break;case Wc.KHR_MESH_QUANTIZATION:o[t]=new cl;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,i)}}function Vc(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Wc={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class qc{constructor(e){this.parser=e,this.name=Wc.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const s=new Lt(16777215);void 0!==o.color&&s.fromArray(o.color);const c=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new oc(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new ic(s),a.distance=c;break;case"spot":a=new Js(s),a.distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class Yc{constructor(){this.name=Wc.KHR_MATERIALS_UNLIT}getMaterialType(){return Nt}extendParams(e,t,n){const i=[];e.color=new Lt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(i)}}class Kc{constructor(e){this.parser=e,this.name=Wc.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bs:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ee(e,-e)}return Promise.all(r)}}class $c{constructor(e){this.parser=e,this.name=Wc.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bs:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Xc{constructor(e){this.parser=e,this.name=Wc.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bs:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationTint=new Lt(a[0],a[1],a[2]),Promise.all(r)}}class Zc{constructor(e){this.parser=e,this.name=Wc.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bs:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class Jc{constructor(e){this.parser=e,this.name=Wc.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bs:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularTint=new Lt(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularTintMap",o.specularColorTexture).then((function(e){e.encoding=N}))),Promise.all(r)}}class Qc{constructor(e){this.parser=e,this.name=Wc.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=n.images[r.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class el{constructor(e){this.parser=e,this.name=Wc.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=i.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,a,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class tl{constructor(e){this.name=Wc.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,r.ready]).then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,a=e.byteStride,s=new ArrayBuffer(o*a),c=new Uint8Array(t[0],n,i);return r.decodeGltfBuffer(new Uint8Array(s),o,a,c,e.mode,e.filter),s}))}return null}}const nl="glTF";class il{constructor(e){this.name=Wc.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:lc.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==nl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let r=0;for(;r<n;){const t=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,1313821514===n){const n=new Uint8Array(e,12+r,t);this.content=lc.decodeText(n)}else if(5130562===n){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rl{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Wc.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(const e in o){const t=gl[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const i=gl[t]||t.toLowerCase();if(void 0!==o[t]){const r=n.accessors[e.attributes[t]],o=hl[r.componentType];c[i]=o,s[i]=!0===r.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=s[t];void 0!==i&&(n.normalized=i)}t(e)}),a,c)}))}))}}class ol{constructor(){this.name=Wc.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class al extends vs{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Lt).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class sl{constructor(){this.name=Wc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return al}extendParams(e,t,n){const i=t.extensions[this.name];e.color=new Lt(1,1,1),e.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const t=i.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new Lt(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new Lt(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const t=i.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",t)),r.push(n.assignTexture(e,"specularMap",t))}return Promise.all(r)}createMaterial(e){const t=new al(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class cl{constructor(){this.name=Wc.KHR_MESH_QUANTIZATION}}class ll extends ws{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let e=0;e!==i;e++)t[e]=n[r+e];return t}}ll.prototype.beforeStart_=ll.prototype.copySampleValue_,ll.prototype.afterEnd_=ll.prototype.copySampleValue_,ll.prototype.interpolate_=function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=i-t,u=(n-t)/l,d=u*u,h=d*u,p=e*c,m=p-c,f=-2*h+3*d,g=h-d,y=1-f,v=g-d+u;for(let e=0;e!==a;e++){const t=o[m+e+a],n=o[m+e+s]*l,i=o[p+e+a],c=o[p+e]*l;r[e]=y*t+v*n+f*i+g*c}return r};const ul=new ue;class dl extends ll{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return ul.fromArray(r).normalize().toArray(r),r}}const hl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pl={9728:h,9729:f,9984:p,9985:1007,9986:m,9987:g},ml={33071:u,33648:d,10497:l},fl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gl={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},vl={CUBICSPLINE:void 0,LINEAR:T,STEP:M};function bl(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function xl(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function wl(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Sl(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function El(e){const t=e.extensions&&e.extensions[Wc.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+_l(t.attributes):e.indices+":"+_l(e.attributes)+":"+e.mode,n}function _l(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function Cl(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Pl{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Vc,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new uc(this.options.manager):this.textureLoader=new js(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};xl(r,o,i),wl(o,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n].joints;for(let t=0,n=i.length;t<n;t++)e[i[t]].isBone=!0}for(let t=0,i=e.length;t<i;t++){const i=e[t];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone();return i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Wc.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,r){n.load(bl(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=fl[i.type],a=hl[i.componentType],s=a.BYTES_PER_ELEMENT,c=s*o,l=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let h,p;if(u&&u!==c){const e=Math.floor(l/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let c=t.cache.get(n);c||(h=new a(r,e*u,i.count*u/s),c=new So(h,u/s),t.cache.add(n,c)),p=new _o(c,o,l%u/s,d)}else h=null===r?new a(i.count*o):new a(r,l,i.count*o),p=new Ot(h,o,d);if(void 0!==i.sparse){const t=fl.SCALAR,n=hl[i.sparse.indices.componentType],s=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,l=new n(e[1],s,i.sparse.count*t),u=new a(e[2],c,i.sparse.count*o);null!==r&&(p=new Ot(p.array.slice(),p.itemSize,p.normalized));for(let e=0,t=l.length;e<t;e++){const t=l[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e],r=t.images[i.source];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const i=this,r=this.json,o=this.options,a=r.textures[e],s=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];const c=self.URL||self.webkitURL;let u=t.uri||"",d=!1,h=!0;const p=u.search(/\.jpe?g($|\?)/i)>0||0===u.search(/^data\:image\/jpeg/);if(("image/jpeg"===t.mimeType||p)&&(h=!1),void 0!==t.bufferView)u=i.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){const t=new DataView(e,25,1).getUint8(0,!1);h=6===t||4===t||3===t}d=!0;const n=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(n),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(u).then((function(e){return new Promise((function(t,i){let r=t;!0===n.isImageBitmapLoader&&(r=function(e){const n=new oe(e);n.needsUpdate=!0,t(n)}),n.load(bl(e,o.path),r,void 0,i)}))})).then((function(t){!0===d&&c.revokeObjectURL(u),t.flipY=!1,a.name&&(t.name=a.name),h||(t.format=E);const n=(r.samplers||{})[a.sampler]||{};return t.magFilter=pl[n.magFilter]||f,t.minFilter=pl[n.minFilter]||g,t.wrapS=ml[n.wrapS]||l,t.wrapT=ml[n.wrapT]||l,i.associations.set(t,{type:"textures",index:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[s]=m,m}assignTexture(e,t,n){const i=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[Wc.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Wc.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(r);r=i.extensions[Wc.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),i.associations.set(r,t)}}return e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0!==t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new pa,Pt.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new na,Pt.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(i||r||o){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),i&&(e+="vertex-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return vs}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const a={},s=r.extensions||{},c=[];if(s[Wc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=i[Wc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),c.push(e.extendParams(a,r,t))}else if(s[Wc.KHR_MATERIALS_UNLIT]){const e=i[Wc.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),c.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new Lt(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&c.push(t.assignTexture(a,"map",n.baseColorTexture)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===r.doubleSided&&(a.side=2);const l=r.alphaMode||"OPAQUE";return"BLEND"===l?(a.transparent=!0,a.depthWrite=!1):(a.format=E,a.transparent=!1,"MASK"===l&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Nt&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new ee(1,-1),void 0!==r.normalTexture.scale&&a.normalScale.set(r.normalTexture.scale,-r.normalTexture.scale)),void 0!==r.occlusionTexture&&o!==Nt&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Nt&&(a.emissive=(new Lt).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==Nt&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(c).then((function(){let n;return n=o===al?i[Wc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),r.name&&(n.name=r.name),n.map&&(n.map.encoding=N),n.emissiveMap&&(n.emissiveMap.encoding=N),wl(n,r),t.associations.set(n,{type:"materials",index:e}),r.extensions&&xl(i,n,r),n}))}createUniqueName(e){const t=Cc.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[Wc.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Tl(n,e,t)}))}const o=[];for(let n=0,a=e.length;n<a;n++){const a=e[n],s=El(a),c=i[s];if(c)o.push(c.promise);else{let e;e=a.extensions&&a.extensions[Wc.KHR_DRACO_MESH_COMPRESSION]?r(a):Tl(new $t,a,t),i[s]={primitive:a,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,a=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new vs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),s.DefaultMaterial):this.getDependency("material",o[e].material);a.push(t)}var s;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],c=[];for(let n=0,l=s.length;n<l;n++){const l=s[n],u=o[n];let d;const h=a[n];if(4===u.mode||5===u.mode||6===u.mode||void 0===u.mode)d=!0===r.isSkinnedMesh?new Wo(l,h):new mn(l,h),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),5===u.mode?d.geometry=Al(d.geometry,1):6===u.mode&&(d.geometry=Al(d.geometry,2));else if(1===u.mode)d=new da(l,h);else if(3===u.mode)d=new ca(l,h);else if(2===u.mode)d=new ha(l,h);else{if(0!==u.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new va(l,h)}Object.keys(d.geometry.morphAttributes).length>0&&Sl(d,r),d.name=t.createUniqueName(r.name||"mesh_"+e),wl(d,r),u.extensions&&xl(i,d,u),t.assignFinalMaterial(d),c.push(d)}if(1===c.length)return c[0];const l=new po;for(let e=0,t=c.length;e<t;e++)l.add(c[e]);return l}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Sn(Q.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new qn(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),wl(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],i=[],r=[],o=[],a=[];for(let e=0,s=t.channels.length;e<s;e++){const s=t.channels[e],c=t.samplers[s.sampler],l=s.target,u=void 0!==l.node?l.node:l.id,d=void 0!==t.parameters?t.parameters[c.input]:c.input,h=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",u)),i.push(this.getDependency("accessor",d)),r.push(this.getDependency("accessor",h)),o.push(c),a.push(l)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(a)]).then((function(n){const i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=[];for(let e=0,t=i.length;e<t;e++){const t=i[e],n=r[e],l=o[e],u=a[e],d=s[e];if(void 0===t)continue;let h;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,yl[d.path]){case yl.weights:h=Ts;break;case yl.rotation:h=Is;break;default:h=ks}const p=t.name?t.name:t.uuid,m=void 0!==u.interpolation?vl[u.interpolation]:T,f=[];yl[d.path]===yl.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&f.push(e.name?e.name:e.uuid)})):f.push(p);let g=l.array;if(l.normalized){const e=Cl(g.constructor),t=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)t[n]=g[n]*e;g=t}for(let e=0,t=f.length;e<t;e++){const t=new h(f[e]+"."+yl[d.path],n.array,g,m);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof Is?dl:ll)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const l=t.name?t.name:"animation_"+e;return new Ls(l,void 0,c)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,i=this,r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"";return function(){const t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==r.camera&&t.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===r.isBone?new qo:t.length>1?new po:1===t.length?t[0]:new pt,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),wl(a,r),r.extensions&&xl(n,a,r),void 0!==r.matrix){const e=new je;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.set(a,{type:"nodes",index:e}),a}))}loadScene(e){const t=this.json,n=this.extensions,i=this.json.scenes[e],r=this,o=new po;i.name&&(o.name=r.createUniqueName(i.name)),wl(o,i),i.extensions&&xl(n,o,i);const a=i.nodes||[],s=[];for(let e=0,n=a.length;e<n;e++)s.push(Ml(a[e],o,t,r));return Promise.all(s).then((function(){return o}))}}function Ml(e,t,n,i){const r=n.nodes[e];return i.getDependency("node",e).then((function(e){if(void 0===r.skin)return e;let t;return i.getDependency("skin",r.skin).then((function(e){t=e;const n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(i.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const i=[],r=[];for(let e=0,o=n.length;e<o;e++){const o=n[e];if(o){i.push(o);const n=new je;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),r.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new Xo(i,r),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(r.children){const t=r.children;for(let r=0,a=t.length;r<a;r++){const a=t[r];o.push(Ml(a,e,n,i))}}return Promise.all(o)}))}function Tl(e,t,n){const i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const t in i){const n=gl[t]||t.toLowerCase();n in e.attributes||r.push(o(i[t],n))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return wl(e,t),function(e,t,n){const i=t.attributes,r=new me;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new de(t[0],t[1],t[2]),new de(o[0],o[1],o[2])),e.normalized){const t=Cl(hl[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new de,t=new de;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,a=i.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),i.normalized){const e=Cl(hl[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new Le;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(e);const o=[],a=[];for(let s=0,c=t.length;s<c;s++){const c=t[s];if(i){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(r){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(o),Promise.all(a)]).then((function(t){const n=t[0],o=t[1];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function Al(e,t){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(2===t)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o}var Il={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class Rl{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const kl=new qn(-1,1,1,-1,0,1),Ll=new $t;Ll.setAttribute("position",new Ut([-1,3,0,-1,-1,0,3,-1,0],3)),Ll.setAttribute("uv",new Ut([0,2,0,0,2,0],2));class Nl{constructor(e){this._mesh=new mn(Ll,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,kl)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Bl extends Rl{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof xn?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=bn.clone(e.uniforms),this.material=new xn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Nl(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Dl extends Rl{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),r=e.state;let o,a;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),r.buffers.stencil.setClear(a),r.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class Ol extends Rl{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Fl{constructor(e,t){if(this.renderer=e,void 0===t){const n={minFilter:f,magFilter:f,format:_},i=e.getSize(new ee);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new ce(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Il&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Bl&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Bl(Il),this.clock=new pc}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,i=this.passes.length;t<i;t++){const i=this.passes[t];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),i.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Dl&&(i instanceof Dl?n=!0:i instanceof Ol&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new ee);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new qn(-1,1,1,-1,0,1);const zl=new $t;zl.setAttribute("position",new Ut([-1,3,0,-1,-1,0,3,-1,0],3)),zl.setAttribute("uv",new Ut([0,2,0,0,2,0],2));class Ul extends Rl{constructor(e,t,n,i,r){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Lt}render(e,t,n){const i=e.autoClear;let r,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=i}}const Hl={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Lt(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class jl extends Rl{constructor(e,t,n,i){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=i,this.resolution=void 0!==e?new ee(e.x,e.y):new ee(256,256),this.clearColor=new Lt(0,0,0);const r={minFilter:f,magFilter:f,format:_};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new ce(o,a,r),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let e=0;e<this.nMips;e++){const t=new ce(o,a,r);t.texture.name="UnrealBloomPass.h"+e,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const n=new ce(o,a,r);n.texture.name="UnrealBloomPass.v"+e,n.texture.generateMipmaps=!1,this.renderTargetsVertical.push(n),o=Math.round(o/2),a=Math.round(a/2)}void 0===Hl&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const s=Hl;this.highPassUniforms=bn.clone(s.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new xn({uniforms:this.highPassUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let e=0;e<this.nMips;e++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[e])),this.separableBlurMaterials[e].uniforms.texSize.value=new ee(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new de(1,1,1),new de(1,1,1),new de(1,1,1),new de(1,1,1),new de(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===Il&&console.error("THREE.UnrealBloomPass relies on CopyShader");const l=Il;this.copyUniforms=bn.clone(l.uniforms),this.materialCopy=new xn({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Lt,this.oldClearAlpha=1,this.basic=new Nt,this.fsQuad=new Nl(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let e=0;e<this.nMips;e++)this.renderTargetsHorizontal[e].setSize(n,i),this.renderTargetsVertical[e].setSize(n,i),this.separableBlurMaterials[e].uniforms.texSize.value=new ee(n,i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,i,r){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let t=0;t<this.nMips;t++)this.fsQuad.material=this.separableBlurMaterials[t],this.separableBlurMaterials[t].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[t].uniforms.direction.value=jl.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[t]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[t].uniforms.colorTexture.value=this.renderTargetsHorizontal[t].texture,this.separableBlurMaterials[t].uniforms.direction.value=jl.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[t]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[t];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new xn({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new ee(.5,.5)},direction:{value:new ee(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new xn({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform sampler2D dirtTexture;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}jl.BlurDirectionX=new ee(1,0),jl.BlurDirectionY=new ee(0,1);var Gl=n(5921);class Vl{constructor(e,t,n,i,r,o,a,s,c){this.force=e,this.offset=t,this.angle=n,this.tforce=i,this.toffset=r,this.tangle=o,this.tweentype=s,this.yoyo=c,this.duration=a}}e=n.hmd(e),window.onloaded=function(){1==Xl&&(document.getElementById("versionid").classList.add("console"),document.getElementById("versionid").classList.add("console_button"));var e=(new Date).getTime()-loadtime;document.getElementById("splashblock").classList.add("fadedout"),e>=2500?(console.log(">> load time took = "+e/1e3+" - so don't delay!"),document.getElementById("welcomeblock").classList.remove("fadedout")):setTimeout((function(){console.log(">> load time took = "+e/1e3+" - rather quick!"),document.getElementById("welcomeblock").classList.remove("fadedout")}),2500-e)},window.introNextPage=function(e){1==e?(document.getElementById("welcomeblock").classList.add("fadedout"),qu(document.getElementById("layer1patterns_ins"),0).click(),Cu.isAuto=!1,setTimeout((function(){document.getElementById("tut1block").classList.remove("fadedout"),document.getElementById("container").style.display="block",setTimeout((function(){document.getElementById("container").classList.remove("fadedout")}),700)}),700)):2==e?(document.getElementById("tut1interior").classList.add("fadedout"),document.getElementById("tut2block").classList.remove("fadedout"),setTimeout((function(){document.getElementById("tut1block").classList.add("fadedout")}),700)):3==e&&(qu(document.getElementById("layer1patterns_ins"),0).click(),document.getElementById("tut2block").classList.add("fadedout"),Cu.updateProgress(5,"activating"),Xu(),document.getElementById("palette_tools").classList.remove("disabledUserEvents"))},window.onPatternPicked=function(e,t,n){if(console.log(">> pattern picked == current "+(yu==e)),yu!=e){yu=e;var i=Cu.currentPage-1;Cu.currentPage>1&&i--,0==i?document.getElementById("layer1patterns_ins").classList.add("disabledButton"):1==i?document.getElementById("layer2tags_ins").classList.add("disabledButton"):2==i&&document.getElementById("layer3decals_ins").classList.add("disabledButton"),$u(e,i,t,n),Cu.isAuto||(Au.mapUniforms.leadin.value=1,console.log(">> lead in sfx"),Au.startFX(350)),fu=-1}else Cu.isAuto&&(Cu.isAuto=!1)},window.onPatternsTab=Xu,window.onColoursTab=function(){Cu.changedPage(2)},window.onTagTab=function(){Cu.changedPage(3)},window.onDecalTab=function(){Cu.changedPage(4)},window.backNextPage=function(e){console.log(">>> BACK from page "+Cu.currentPage+" to page "+(Cu.currentPage-1)),Cu.currentPage,-1==e?Cu.changedPage(Cu.currentPage-1):1==e&&Cu.changedPage(Cu.currentPage+1);var t=Cu.currentPage-1;Cu.currentPage>1&&t--,Iu.isActive=1==t},window.onChangePaint=function(e){fu=e;var t=Cu.currentPage-1;Cu.currentPage>1&&t--;var n=Cu.getElementColour(e);document.getElementById("coloursample").style.backgroundColor=n,n=new Lt(n).getHexString(),ju.color.hexString=n;var i=fu;1==t?i-=3:2==t&&(i-=5);var r=_u.liveryData.Layers[t].Channels[i].metalroughtype;0==r?(document.getElementById("glossbutton").classList.add("nextButton"),document.getElementById("mattebutton").classList.remove("nextButton"),document.getElementById("metallicbutton").classList.remove("nextButton")):1==r?(document.getElementById("glossbutton").classList.remove("nextButton"),document.getElementById("mattebutton").classList.add("nextButton"),document.getElementById("metallicbutton").classList.remove("nextButton")):2==r&&(document.getElementById("glossbutton").classList.remove("nextButton"),document.getElementById("mattebutton").classList.remove("nextButton"),document.getElementById("metallicbutton").classList.add("nextButton")),Cu.pickedChannelPaint(e)},window.onConfirm=function(){5==Cu.currentPage?Du=4:(fu<=2?Eu.useCustom=!0:fu<=4?Eu.useCustomTag=!0:fu<=5&&(Eu.useCustomDecal=!0),Cu.confirm(fu))},window.onDefaultPaint=Zu,window.onPreselectedPage=function(){Zu()},window.onRandomPaint=function(){var e=gu,t=Cu.currentPage-1;Cu.currentPage>1&&t--,Eu.useCustom=!0,Au.mapUniforms.leadin.value=2,Au.startFX(500);var n=1;-1==e?console.log("no pattern so choose a colour for base"):n=_u.patternsData.Patterns[e].Channels.length;for(var i=0;i<n;i++){var r=Ju(255*Math.random())+","+Ju(255*Math.random())+","+Ju(255*Math.random()),o=Ju(3*Math.random()),a=0,s=0;1==o?(a=0,s=1):2==o?(a=1,s=0):(a=1,s=1);var c=new Lt("rgb("+r+")"),l=Eu.rgbToHex(255*c.r,255*c.g,255*c.b);_u.liveryData.Layers[t].Channels[i].tint=l,0==i?document.getElementById("basepaintbutton").style.backgroundColor=l:1==i?document.getElementById("primarypaintbutton").style.backgroundColor=l:2==i&&(document.getElementById("secondarypaintbutton").style.backgroundColor=l);var u=new se(c.r,c.g,c.b,1);0==i?(Mu.mapUniforms.texture1TintChannel1.value=u,Tu.mapUniforms.baseChannel1Metal.value=a,Tu.mapUniforms.baseChannel1Rough.value=s):1==i?(Mu.mapUniforms.texture1TintChannel2.value=u,Tu.mapUniforms.baseChannel2Metal.value=a,Tu.mapUniforms.baseChannel2Rough.value=s):2==i&&(Mu.mapUniforms.texture1TintChannel3.value=u,Tu.mapUniforms.baseChannel3Metal.value=a,Tu.mapUniforms.baseChannel3Rough.value=s),_u.liveryData.Layers[t].Channels[i].metalroughtype=o}},window.expandDropdown=function(e){const t=document.getElementById(e),n=t.className.split(" ");var i=!1;n.forEach((e=>{"shrunk"==e&&(i=!0)})),i?t.classList.remove("shrunk"):t.classList.add("shrunk")},window.onLaunchARButton=function(){Du=4},window.onMaterialbutton=function(e){console.log(">> selectedChan = "+fu);var t=Cu.currentPage-1;Cu.currentPage>1&&t--;var n=fu;1==t?n-=3:2==t&&(n-=5),_u.liveryData.Layers[t].Channels[n].metalroughtype=e,ed(e,fu)},window.switchModel=function(e){au!=e&&(au=e,_u.loadPatterns(au,ql,Yl,Kl,tu))},window.onMinMax=function(){if(Wu){var e=new de(window.innerHeight-Cu.tabHeight,0,0),t=Cu.bestToolPosY;console.log(">> top = "+t),document.getElementById("minmax").classList.remove("gg-chevron-rotated"),new Fc.Tween(e).to({x:t,y:0,z:0},500).onUpdate((function(e){document.querySelector(":root").style.setProperty("--toolsPosY",e.x+"px"),Cu.setRendererSize(window.innerWidth,e.x+Cu.tabHeight,lu,cu)})).start()}else Wu||(e=new de(Cu.bestToolPosY,0,0),t=window.innerHeight-Cu.tabHeight,console.log(">> top = "+t),document.getElementById("minmax").classList.add("gg-chevron-rotated"),new Fc.Tween(e).to({x:t,y:0,z:0},500).onUpdate((function(e){document.querySelector(":root").style.setProperty("--toolsPosY",e.x+"px"),Cu.setRendererSize(window.innerWidth,e.x+Cu.tabHeight,lu,cu)})).start());Wu=!Wu},window.onConsole=function(e){if(0==Xl)return;const t=document.getElementById("console");if(0==e)if("hidden"==t.className){document.getElementById("c_tonemappingSliderTxt").innerHTML="toneMapping : "+lu.toneMappingExposure,document.getElementById("c_tonemappingSlider").value=lu.toneMappingExposure;const e=1==lu.toneMapping?"linear":3==lu.toneMapping?"cineon":"aces";document.getElementById("c_tonemap").value=e,"car"==document.getElementById("c_envstrength").value?document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envmapStrength:"carstatic"==document.getElementById("c_envstrength").value?document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envstrBase:document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envstrGar,t.classList.remove("hidden")}else t.classList.add("hidden");else 1==e?Gu=!Gu:2==e?(Vu=!Vu,Ru.enabled=!Ru.enabled,Ru.root.visible=Ru.enabled):3==e&&(Ru.enableGlow=!Ru.enableGlow)};const Wl=new URLSearchParams(document.location.search);Wl.get("m"),document.getElementById("introokbutton").classList.remove("hidden"),document.getElementById("introcarbutton").classList.add("hidden"),document.getElementById("introhelmetbutton").classList.add("hidden");var ql=Wl.get("u")?Wl.get("u"):"noID",Yl=Wl.get("n")?Wl.get("n"):"no name",Kl=Wl.get("e")?Wl.get("e"):"no email",$l=Wl.get("m")?Wl.get("m"):"c",Xl=Wl.get("c")?Wl.get("c"):0;"h"!=$l&&($l="c");const Zl=Wl.get("u");ql=ql.replace(/['"]+/g,""),Yl=Yl.replace(/['"]+/g,""),Kl=Kl.replace(/['"]+/g,""),$l=$l.replace(/['"]+/g,""),console.log(">> ** name:"+Yl+", id:"+ql+", email:"+Kl+", model:"+$l);var Jl=document.cookie.replace(/(?:(?:^|.*;\s*)userID\s*\=\s*([^;]*).*$)|^.*$/,"$1"),Ql=document.cookie.replace(/(?:(?:^|.*;\s*)userName\s*\=\s*([^;]*).*$)|^.*$/,"$1"),eu=document.cookie.replace(/(?:(?:^|.*;\s*)userEmail\s*\=\s*([^;]*).*$)|^.*$/,"$1"),tu=document.cookie.replace(/(?:(?:^|.*;\s*)F1Livery\s*\=\s*([^;]*).*$)|^.*$/,"$1");null==Zl&&(tu="");const nu="my-iframe";function iu(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}var ru=new Date;ru.setTime(ru.getTime()+31536e6);var ou="expires="+ru.toUTCString();document.cookie="test1=10; "+ou+"; path=/",""!=Jl&&"noID"!=Jl||(console.log(">> *** cookie = NONE PRESENT\n ** creating"),function(){var e=new Date;e.setTime(e.getTime()+31536e6);var t="expires="+e.toUTCString();document.cookie="userID="+ql+"; "+t+"; path=/",document.cookie="userName="+Yl+"; "+t+"; path=/",document.cookie="userEmail="+Kl+"; "+t+"; path=/"}()),console.log(">> *** cookie:\nuserID:"+Jl+"\nuserName:"+Ql+"\nuserEmail:"+eu+"\n"),"noID"==ql&&(ql=Jl,Yl=Ql,Kl=eu),iu("userID"),iu("userName"),iu("userEmail"),iu("F1Livery"),""==ql&&(ql="noID"),"noID"==ql&&console.log(">> *** No user id");var au=!1;"h"==$l&&(au=!0);var su,cu,lu,uu=1024,du=new class{constructor(){this.car_files=["./assets/car/F1PS_F1_Car_V05_Split.glb","./assets/car/F1PS_F1_V03_NewUV_BaseColor.png","./assets/car/F1PS_F1_V03_NewUV_Normal.jpg","./assets/car/F1PS_F1_V03_NewUV_AO.png","./assets/car/MetalRough.png","./assets/car/MetalRough.png","./assets/car/static/V05/F1PS_F1_V05_NewUV_BaseColor.jpg","./assets/car/static/V04/F1PS_F1_V04_NewUV_Normal.jpg","./assets/car/static/V04/F1PS_F1_V04_NewUV_AO.jpg","./assets/car/static/V04/F1PS_F1_V04_NewUV_Metal.jpg","./assets/car/static/V04/F1PS_F1_V04_NewUV_Roughness.jpg"],this.helmet_files=["./assets/helmet/F1PS_Helmet.glb","./assets/helmet/Helmet_BaseColor.png","./assets/helmet/Helmet Triangulated_Normal.png","./assets/helmet/Helmet Triangulated_AO.png","./assets/helmet/Helmet Triangulated_Metal.png","./assets/helmet/Helmet Triangulated_Roughness.png"]}};let hu;var pu,mu=new pc,fu=-1,gu=-1,yu=-1;new Gc;var vu,bu,xu,wu,Su=0,Eu=(mu.getElapsedTime(),new class{constructor(e){this.currentPatternElement=0,this.init(e)}init(e){this.useCustom=e,this.useCustomTag=e,this.useCustomDecal=e,this.layerNoneElements=new Array,this.timer1=0,this.patternLoaderTimeout=0,this.patternTexture=0}patternTextureLoader(e,t,n){}buildGUI(e){console.log(">> adding thumbs");var t=document.getElementById("layer1patterns_ins"),n=document.getElementById("layer2tags_ins"),i=document.getElementById("layer3decals_ins");t.innerHTML="",n.innerHTML="",i.innerHTML="";for(var r=0;r<e.Patterns.length;r++){var o=document.createElement("div");o.classList.add("patternContainer");var a=document.createElement("div");if(a.classList.add("pattern"),a.setAttribute("patternId",e.Patterns[r].id),a.setAttribute("onClick","onPatternPicked("+r+",'./patterns/"+e.Patterns[r].image+"',this)"),-1==e.Patterns[r].id)a.style.backgroundSize="contain",a.style.backgroundRepeat="no-repeat",a.style.backgroundRepeatX="no-repeat",a.style.backgroundPosition="center",this.layerNoneElements.push(a),a.style.backgroundImage="url('./assets/inapp/noneicon.png')";else{var s=e.Patterns[r].thumbnail;a.style.backgroundImage="url('./patterns/"+s+"')"}o.appendChild(a),0==e.Patterns[r].layer?t.appendChild(o):1==e.Patterns[r].layer?n.appendChild(o):2==e.Patterns[r].layer?i.appendChild(o):alert("error layer overflow")}}componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}rgbToHex(e,t,n){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(n)}changePattern(e,t,n,i,r,o,a,s,c,l,u){const d=i.getAttribute("patternId");var h=">> Picked pattern = "+e+" id='"+d+"'\n    file = "+t;if("./patterns/smallredimage.png"!=t&&(h=h+r.Patterns[e].name+"\n   "+r.Patterns[e].image),console.log(h),0!=this.currentPatternElement&&this.currentPatternElement.classList.remove("patternSelected"),-1==r.Patterns[e].id&&0!=a)0==a?document.getElementById("layer1patterns_ins").classList.remove("disabledButton"):1==a?(document.getElementById("layer2tags_ins").classList.remove("disabledButton"),document.getElementById("taginputcontainer").classList.add("disabledButton"),n.useTag.value=0,l.mapUniforms.useTag.value=0,s.useTag.value=0,i.classList.add("patternSelected"),this.currentPatternElement=i):2==a&&(document.getElementById("layer3decals_ins").classList.remove("disabledButton"),n.useDecal.value=0,s.useDecal.value=0,l.mapUniforms.useDecal.value=0,i.classList.add("patternSelected"),this.currentPatternElement=i),setTimeout((function(){o.Layers[a].patternId=d,o.Layers[a].filename=t,l.mapUniforms.leadin.value=0,u.isAuto?u.isAuto=!1:l.startFX(1e3)}),350);else{t=t;var p=this;console.log(">>>> Texture image = attempt load > "+t),clearTimeout(this.patternLoaderTimeout),this.patternLoaderTimeout=setTimeout((function(){console.log(">>>> ********* TIMED OUT - RETRY > "+t),p.patternTexture=0,p.changePattern(e,t,n,i,r,o,a,s,c,l,u)}),4e3),(new js).load(t,(h=>{clearTimeout(this.patternLoaderTimeout),console.log(">>>> Texture image = LOADED > "+t),h.premultiplyAlpha=!0,h.encoding=L,0==l.effectStarttime&&(l.effectStarttime=(new Date).getTime());const p=l.duration+l.effectStarttime-(new Date).getTime();console.log(">> wait for it! "+p),setTimeout((()=>{this.patternTexture=h,l.mapUniforms.leadin.value=0,o.Layers[a].patternId=d,o.Layers[a].filename=t,u.isAuto?u.isAuto=!1:l.startFX(1e3),0==a?document.getElementById("layer1patterns_ins").classList.remove("disabledButton"):1==a?document.getElementById("layer2tags_ins").classList.remove("disabledButton"):2==a&&document.getElementById("layer3decals_ins").classList.remove("disabledButton"),0==a?(n.texture1Base.value=h,s.texture1Base.value=h):1==a?(n.useTag.value=1,l.mapUniforms.useTag.value=1,o.Layers.tagfontstyle=r.Patterns[e].style,s.useTag.value=1,c.tagPattern=h,c.locations=1,document.getElementById("taginputcontainer").classList.remove("disabledButton"),c.fontstyle=o.Layers.tagfontstyle,c.fixText(),c.composite()):2==a&&(n.useDecal.value=1,s.useDecal.value=1,l.mapUniforms.useDecal.value=1,n.texture3Decal.value=h,s.texture3Decal.value=h);var p=new Date;if(p.setTime(p.getTime()+31536e6),p.toUTCString(),0==a){r.Patterns[e].Channels.length;for(var m=0;m<3;m++){if(this.useCustom)y=o.Layers[a].Channels[m].tint,v=new Lt(y),f=this.rgbToHex(255*v.r,255*v.g,255*v.b);else{y=r.Patterns[e].Channels[m].defaultColour,v=new Lt("rgb("+y+")");var f=this.rgbToHex(255*v.r,255*v.g,255*v.b);o.Layers[a].Channels[m].tint=f}0==m?document.getElementById("basepaintbutton").style.backgroundColor=f:1==m?document.getElementById("primarypaintbutton").style.backgroundColor=f:2==m&&(document.getElementById("secondarypaintbutton").style.backgroundColor=f);var g=new se(v.r,v.g,v.b,1);0==m?n.texture1TintChannel1.value=g:1==m?n.texture1TintChannel2.value=g:2==m&&(n.texture1TintChannel3.value=g)}}else if(1==a)for(m=0;m<2;m++){if(this.useCustomTag)y=o.Layers[a].Channels[m].tint,v=new Lt(y),f=this.rgbToHex(255*v.r,255*v.g,255*v.b);else{y=r.Patterns[e].Channels[m].defaultColour,v=new Lt("rgb("+y+")");f=this.rgbToHex(255*v.r,255*v.g,255*v.b);o.Layers[a].Channels[m].tint=f}0==m?document.getElementById("tagstylepaintbutton").style.backgroundColor=f:1==m&&(document.getElementById("tagpaintbutton").style.backgroundColor=f),g=new se(v.r,v.g,v.b,1),0==m?n.tagStyleTint.value=g:1==m&&(n.tagTint.value=g)}else if(2==a)for(m=0;m<2;m++){var y,v;this.useCustomDecal&&1!=m?(y=o.Layers[a].Channels[m].tint,v=new Lt(y),f=this.rgbToHex(255*v.r,255*v.g,255*v.b)):(y=r.Patterns[e].Channels[m].defaultColour,v=new Lt("rgb("+y+")"),f=this.rgbToHex(255*v.r,255*v.g,255*v.b),o.Layers[a].Channels[m].tint=f),0==m&&(document.getElementById("decalpaintbutton").style.backgroundColor=f),g=new se(v.r,v.g,v.b,1),0==m?n.decalTint.value=g:1==m&&(n.decal2Tint.value=g)}i.classList.add("patternSelected"),this.currentPatternElement=i}),p)}))}}}(""==!tu)),_u=new class{constructor(e){this.loadedLiveryJSON=0,this.totLayers=0,this.liveryData="",this.patternItems=e,this.patternsJSONdata={},this.patternsData=new Array}writePatterns(){console.log(">> save patterns json"),this.writeJSON("./patterns/patterns.json")}loadPatterns(e,t,n,i,r){console.log(">> load patterns json"),e?this.readJSON("./patterns/patterns_helmet.json","PATTERNS",t,n,i,e,r):this.readJSON("./patterns/patterns_car.json","PATTERNS",t,n,i,e,r)}haveloadedStartupJSON(){this.loadedLiveryJSON=1}readJSON(e,t,n,i,r,o,a){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="json",s.onload=()=>{if("PATTERNS"==t){console.log(">> have completed loading patterns json"),this.processStrung(s.response),this.patternItems.buildGUI(this.patternsData);for(var e=0;e<this.patternsData.Patterns.length;e++){var c=this.patternsData.Patterns[e].layer;c>this.totLayers&&(this.totLayers=c)}this.totLayers=this.totLayers+1,console.log(">> loaded "+this.patternsData.Patterns.length+" with "+this.totLayers+" layers");for(var l=new Array,u=0;u<this.totLayers;u++){var d=new Array,h="pattern";0==u&&(d.push({id:0,isActive:!0,tint:"#320050",metalroughtype:0}),d.push({id:1,isActive:!0,tint:"#00ff00",metalroughtype:0}),d.push({id:2,isActive:!0,tint:"#0000ff",metalroughtype:0})),1==u?(h="tag",d.push({id:0,isActive:!0,tint:"#320050",metalroughtype:0}),d.push({id:1,isActive:!0,tint:"#00ff00",metalroughtype:0}),d.push({id:2,isActive:!1,tint:"#0000ff",metalroughtype:0})):2==u&&(h="decal",d.push({id:0,isActive:!0,tint:"#320050",metalroughtype:0}),d.push({id:1,isActive:!0,tint:"#00ff00",metalroughtype:0}),d.push({id:2,isActive:!1,tint:"#0000ff",metalroughtype:0})),l.push({name:h,type:u,filename:"./",patternId:-1,Channels:d})}var p="car";if(o&&(p="helmet"),""==a){this.liveryData={name:i,model:p,timestamp:"000000_0000",email:r,uniqueid:n,tagtext:"F1",tagfontstyle:1,Layers:l};var m=new Date;m.setTime(m.getTime()+31536e6);var f="expires="+m.toUTCString(),g=JSON.stringify(this.liveryData);document.cookie="F1Livery="+g+"; "+f+"; path=/"}else this.liveryData=JSON.parse(a);console.log(">> set new livery json. "+this.liveryData),this.haveloadedStartupJSON()}},s.send()}writeJSON(e){var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-Type","application/json"),t.onload=function(){console.log("JSON file saved")};var n=JSON.stringify(this.patternsJSONdata,null,1).replace(/\n /g,"\n");console.log(n)}processStrung(e){this.patternsData=e,console.log(this.patternsData)}resetLiveryLayerPatterns(){for(var e=0;e<this.totLayers;e++)this.liveryData.Layers[e].patternId=-1;var t=JSON.stringify(this.liveryData),n=new Date;n.setTime(n.getTime()+31536e6);var i="expires="+n.toUTCString();document.cookie="F1Livery="+t+"; "+i+"; path=/"}}(Eu);_u.loadPatterns(au,ql,Yl,Kl,tu),new class{constructor(){this.init()}init(){this.fontFDW=new FontFace("Formula1-Display-Wide","url('./assets/fonts/Formula1-Display-Regular.otf')")}};var Cu=new class{constructor(e){this.scaleDevice=1,this.currentPage=1,this.inPresets=!1,this.currentProgress=0,this.processJSON=e,this.isAuto=!0,this.bestToolPosY=0,this.tabHeight=0,this.init()}init(){}updateProgress(e,t){const n=document.getElementById("progress");this.currentProgress=this.currentProgress+e,n.style.width=this.currentProgress/90*100+"%",console.log(">> percent loaded = "+this.currentProgress+" - "+t)}updateProgress2(e){document.getElementById("progress2").style.width=e+"%"}setBackgroundColourByID(e,t){this.setBackgroundColour(document.getElementById(e),t)}setBackgroundColour(e,t){e.style.backgroundColor=t}pickedChannelPaint(e){var t="BASE COLOUR";1==e?t="PRIMARY COLOUR":2==e&&(t="SECONDARY COLOUR"),e<3?document.getElementById("patternColours").classList.add("hidden"):e<5?(document.getElementById("paintatagblock").classList.remove("hidden"),document.getElementById("tagblock").classList.add("hidden"),document.getElementById("layer2tags_ins").classList.add("hidden"),3==e?t="TAG COLOUR":4==e&&(t="STYLE COLOUR")):5==e&&(document.getElementById("paintdecalblock").classList.remove("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("layer3decals_ins").classList.add("hidden"),t="SPONSOR COLOUR"),document.getElementById("backbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.add("hidden"),document.getElementById("confirmbutton").classList.remove("hidden"),document.getElementById("whichchanneltext").innerHTML=t,document.getElementById("paintachannelblock").classList.remove("hidden"),document.getElementById("colourPickerContainer").classList.remove("hidden")}confirm(e){document.getElementById("confirmbutton").classList.add("hidden"),this.changedPage(this.currentPage)}getElementColour(e){var t;return 0==e?t="basepaintbutton":1==e?t="primarypaintbutton":2==e?t="secondarypaintbutton":3==e?t="tagstylepaintbutton":4==e?t="tagpaintbutton":5==e&&(t="decalpaintbutton"),window.getComputedStyle(document.getElementById(t),null).getPropertyValue("background-color")}hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}showPage(e,t){if(this.currentPage=e,document.getElementById("f1patterntab").classList.remove("f1tabActive"),document.getElementById("f1colourtab").classList.remove("f1tabActive"),document.getElementById("f1tagtab").classList.remove("f1tabActive"),document.getElementById("f1decalstab").classList.remove("f1tabActive"),document.getElementById("launchbutton").classList.add("hidden"),document.getElementById("launchARPage").classList.add("hidden"),document.getElementById("progressbarPage").classList.add("hidden"),document.getElementById("ARpage").classList.add("hidden"),this.currentPage<=1?(document.getElementById("backbutton").classList.add("disabledButton"),document.getElementById("nextbutton").classList.remove("disabledButton")):(document.getElementById("backbutton").classList.remove("disabledButton"),this.currentPage>=5?document.getElementById("nextbutton").classList.add("disabledButton"):document.getElementById("nextbutton").classList.remove("disabledButton")),1==e)document.getElementById("f1patterntab").classList.add("f1tabActive"),document.getElementById("tagblock").classList.add("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("finalPage").classList.add("hidden"),document.getElementById("confirmbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.remove("hidden"),document.getElementById("backbutton").classList.remove("hidden"),document.getElementById("layer1patterns_ins").classList.remove("hidden"),document.getElementById("paintatagblock").classList.add("hidden"),document.getElementById("paintdecalblock").classList.add("hidden"),document.getElementById("paintachannelblock").classList.add("hidden"),document.getElementById("patternColours").classList.add("hidden");else if(2==e)document.getElementById("f1colourtab").classList.add("f1tabActive"),document.getElementById("layer1patterns_ins").classList.add("hidden"),document.getElementById("tagblock").classList.add("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("finalPage").classList.add("hidden"),document.getElementById("confirmbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.remove("hidden"),document.getElementById("backbutton").classList.remove("hidden"),document.getElementById("patternColours").classList.remove("hidden"),document.getElementById("paintatagblock").classList.add("hidden"),document.getElementById("paintachannelblock").classList.add("hidden"),document.getElementById("paintdecalblock").classList.add("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("layer3decals_ins").classList.add("hidden"),-1==this.processJSON.liveryData.Layers[0].patternId?document.getElementById("flexpair").classList.add("hidden"):document.getElementById("flexpair").classList.remove("hidden");else if(3==e){document.getElementById("f1tagtab").classList.add("f1tabActive"),document.getElementById("patternColours").classList.add("hidden"),document.getElementById("layer1patterns_ins").classList.add("hidden"),document.getElementById("finalPage").classList.add("hidden"),document.getElementById("confirmbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.remove("hidden"),document.getElementById("backbutton").classList.remove("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("tagblock").classList.remove("hidden");var n=this.processJSON.liveryData.Layers[1].Channels[0].tint,i=this.processJSON.liveryData.Layers[1].Channels[1].tint;document.getElementById("tagpaintbutton").style.backgroundColor=i,document.getElementById("tagstylepaintbutton").style.backgroundColor=n,document.getElementById("paintatagblock").classList.add("hidden"),document.getElementById("layer2tags_ins").classList.remove("hidden"),document.getElementById("paintachannelblock").classList.add("hidden"),document.getElementById("paintdecalblock").classList.add("hidden")}else if(4==e){document.getElementById("f1decalstab").classList.add("f1tabActive"),document.getElementById("patternColours").classList.add("hidden"),document.getElementById("layer1patterns_ins").classList.add("hidden"),document.getElementById("tagblock").classList.add("hidden"),document.getElementById("finalPage").classList.add("hidden"),document.getElementById("confirmbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.remove("hidden"),document.getElementById("backbutton").classList.remove("hidden"),document.getElementById("paintatagblock").classList.add("hidden"),document.getElementById("decalblock").classList.remove("hidden");var r=this.processJSON.liveryData.Layers[2].Channels[0].tint;document.getElementById("decalpaintbutton").style.backgroundColor=r,document.getElementById("paintdecalblock").classList.add("hidden"),document.getElementById("decalblock").classList.remove("hidden"),document.getElementById("layer3decals_ins").classList.remove("hidden"),document.getElementById("paintachannelblock").classList.add("hidden")}else if(5==e)document.getElementById("patternColours").classList.add("hidden"),document.getElementById("layer1patterns_ins").classList.add("hidden"),document.getElementById("tagblock").classList.add("hidden"),document.getElementById("decalblock").classList.add("hidden"),document.getElementById("paintatagblock").classList.add("hidden"),document.getElementById("backbutton").classList.remove("hidden"),document.getElementById("nextbutton").classList.add("hidden"),document.getElementById("confirmbutton").classList.remove("hidden"),document.getElementById("finalPage").classList.remove("hidden");else if(6==e){document.getElementById("finalPage").classList.add("hidden"),document.getElementById("confirmbutton").classList.add("hidden"),document.getElementById("backbutton").classList.add("hidden"),document.getElementById("nextbutton").classList.add("hidden"),document.getElementById("progressbarPage").classList.remove("hidden"),this.currentProgress=0;var o=this,a=new de(0,0,0);new Fc.Tween(a).to({x:100,y:0,z:0},1500).onUpdate((function(e){o.updateProgress2(e.x)})).start(),setTimeout((function(){document.getElementById("progressbarPage").classList.add("hidden"),document.getElementById("nextbutton").classList.add("hidden"),document.getElementById("launchbutton").classList.remove("hidden"),document.getElementById("backbutton").classList.remove("hidden")}),1500)}}changedPage(e){if(this.currentPage=e,-1==this.processJSON.liveryData.Layers[0].patternId){const e=this.processJSON.liveryData.Layers[0].Channels[0].tint;document.getElementById("basepaintbutton").backgroundColor=e}if(1==e){this.showPage(1,!1);var t=0;const e=document.getElementById("layer1patterns_ins");for(var n=!1,i=0;i<e.children.length;i++){const r=e.children[i].children[0].getAttribute("patternId");if(this.processJSON.liveryData.Layers[0].patternId==r){console.log("matched"),n=!0,t=e.children[i].children[0];break}}n||console.log(">> **** error finding matching pattern"),0!=t&&(this.isAuto=!0,t.click())}else if(2==e)this.showPage(2,!1);else if(3==e){this.showPage(3,!1),t=0;const e=document.getElementById("layer2tags_ins");for(n=!1,i=0;i<e.children.length;i++){const r=e.children[i].children[0].getAttribute("patternId");if(this.processJSON.liveryData.Layers[1].patternId==r){console.log("matched"),n=!0,t=e.children[i].children[0];break}}n||console.log(">> **** error finding matching pattern"),0!=t&&(this.isAuto=!0,t.click())}else if(4==e){this.showPage(4,!1),t=0;const e=document.getElementById("layer3decals_ins");for(n=!1,i=0;i<e.children.length;i++){const r=e.children[i].children[0].getAttribute("patternId");if(this.processJSON.liveryData.Layers[2].patternId==r){console.log("matched"),n=!0,t=e.children[i].children[0];break}}n||console.log(">> **** error finding matching pattern"),0!=t&&(this.isAuto=!0,t.click())}else 5==e&&this.showPage(5,!1)}setRendererSize(e,t,n,i){n.setSize(e,t),i.top=.5*t,i.bottom=.5*-t,i.left=.5*-e,i.right=.5*e,i.aspect=e/t,i.updateProjectionMatrix()}setSize(e,t,n,i,r){const o=document.querySelector(":root"),a=document.getElementById("palette_tools"),s=(e,t,n,i,r)=>((e,t,n)=>(t-e)*n+e)(n,i,((e,t,n)=>(n-e)/(t-e))(e,t,r));var c,l=20;const u=t/e;l=s(290,800,12,18,e),l+=s(1.5,3,-2,2,u),console.log(">> ** fontsizepix="+l),c=s(10,20,.5,20,l),console.log(l+",aspectratio = "+l+", "+u),o.style.setProperty("--rootFontSize",l+"px"),o.style.setProperty("--gapHeightBase",c+"px"),r.handleRadius=.4*l,r.width=.5*e;var d=2*l,h=t-(13*d+5*c);o.style.setProperty("--toolsPosY",h+"px"),this.bestToolPosY=h,this.tabHeight=2*d,document.getElementById("guicontainer").style.height=this.tabHeight+"px",o.style.setProperty("--screenWidth",e+"px");var p=e;a.style.width=p+"px",a.style.left="0px";const m=.45*(p-36),f=.5*m;o.style.setProperty("--patternWidth",m+"px"),o.style.setProperty("--patternHeight",f+"px"),document.getElementById("tut2block").style.height=h+"px",document.getElementById("tut1block").style.height=t-h+"px";var g=this.tabHeight,y=document.getElementById("container").offsetHeight;document.getElementById("toolscontainer").style.height=y-h-g+"px";var v=y-h-g-3*d;o.style.setProperty("--layersContainerHeight",v+"px"),document.getElementById("tagblock");var b=!1;document.getElementById("decalblock").classList.contains("hidden")&&(b=!0);var x=document.getElementById("gettagblockheight").clientHeight;document.getElementById("tagblock").classList.contains("hidden")&&(document.getElementById("tagblock").classList.remove("hidden"),x=document.getElementById("gettagblockheight").clientHeight,document.getElementById("tagblock").classList.add("hidden")),o.style.setProperty("--layersTagContainerHeight",v-x+"px");var w=document.getElementById("getdecalblockheight").clientHeight;document.getElementById("decalblock").classList.contains("hidden")&&(document.getElementById("decalblock").classList.remove("hidden"),w=document.getElementById("getdecalblockheight").clientHeight,document.getElementById("decalblock").classList.add("hidden")),o.style.setProperty("--layersDecalsContainerHeight",v-w+"px"),3!=this.currentPage&&document.getElementById("tagblock").classList.add("hidden"),this.setRendererSize(e,h+this.tabHeight,n,i),b&&document.getElementById("decalblock").classList.add("hidden")}}(_u);Cu.updateProgress(5,"patterns");var Pu=new class{constructor(){this.toloadlist=new Array,this.envmapStrength=7,this.envstrBase=350,this.envstrGar=1.5,this.totalTexturesLoaded=0,this.totalTexturesAttempted=0,this.alltexturesloaded=!1,this.filetimeout=0,this.keepRibbon=0,this.init()}init(){this.ribbonMaterialold=new Nt({specular:16777215,shininess:250,side:2,transparent:!0}),this.ribbonMateriala=new xn({name:"ribbonMaterial",uniforms:{baseTexture:{value:null},amountRibbon:{value:0},time:{value:0}},vertexShader:"\n              uniform float time;\n              varying vec2 vUv;\n              varying float speed;\n              void main() {\n                vUv = uv;\n                vec3 pos = position.xyz;\n                speed = 1.0;\n\n                float incre = sin( uv.x * 3.14159265 * 0.5);\n                float wavemove = (time*0.5*speed)+uv.x;\n                float amnt = sin( wavemove * 3.14159265 * 3.0) * 50.0 * incre;\n                pos = pos + (normal * amnt);\n//                pos.z += amnt;\n\n                float taper = ((sin( uv.x * 3.14159265 * 0.5)) * 2.0);\n                pos.y *= 1.0 + (taper/0.5);\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n\n              }\n\n              //----------------------\n\n              ",fragmentShader:"\n              uniform sampler2D baseTexture;\n              uniform float amountRibbon;\n              uniform float time;\n              varying float speed;\n\n              varying vec2 vUv;\n    \n              void main() {\n                vec2 uv = vUv;\n                uv.x *= 4.0;\n                uv.x += time * 1.0 * speed;\n                vec4 colbase = texture2D( baseTexture, uv );\n                vec4 outcol = colbase;\n                outcol.yz = vec2(0.2,0.2);\n                float a = max(max(outcol.x,outcol.y),outcol.z);\n                if(vUv.x<0.3) {\n                    float s = sin(3.14159265 * 0.5 * (vUv.x/0.3));\n                    a = a * s;\n                    outcol.xyz *= s;\n                }\n                else if(vUv.x>0.7) {\n                    float s = 1.0-(sin(3.14159265 * 0.5 * ((vUv.x-0.7)/0.3)));\n                    a = a * s;\n                    outcol.xyz *= s;\n                }\n                gl_FragColor = vec4(outcol.xyz, a );\n              }\n        \n              ",transparent:!0,side:2,defines:{}})}loadEnvMap(e,t,n){console.log("ENVMAP >> *** Environment map trying to load cube map env");var i=this;this.envMap=(new Hs).setPath("./assets/cubemap-static/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"],(function(r){i.totalTexturesLoaded=i.totalTexturesAttempted,console.log(">> "+i.totalTexturesLoaded+"/"+i.totalTexturesAttempted+"== sequential LOADED  = ENVMAP"),console.log("ENVMAP >> TEXTURES ALL DONE!"),clearTimeout(i.filetimeout),i.quickSetMaps(r,e,t),n.updateProgress(5,"envmap"),i.alltexturesloaded=!0}))}setEnvStrength(e,t,n,i){2==i?(this.envstrGar=e,n.garageMaterial.envMapIntensity=this.envstrGar,n.garageMaterial.needsUpdate=!0,n.garageWall.material.envMapIntensity=this.envmapStrength,n.garageWall.material.needsUpdate=!0):0==i?(this.envmapStrength=e,t.theHelmetMaterial.envMapIntensity=this.envmapStrength,t.theHelmetMaterial.needsUpdate=!0):(this.envstrBase=e,t.theBaseMaterial.envMapIntensity=this.envstrBase,t.theBaseMaterial.needsUpdate=!0)}quickSetMaps(e,t,n){if(t&&t.theHelmetMaterial&&n.garageMaterial&&n.garageWall.material)console.log(">> Materials all ready - envmap applying.."),t.theHelmetMaterial.envMap=e,n.garageMaterial.envMap=e,n.garageWall.material.envMap=e,n.garageWall.material.envMapIntensity=this.envstrGar,n.garageMaterial.envMapIntensity=this.envstrGar,t.theHelmetMaterial.envMapIntensity=this.envmapStrength,null!=t.theBaseMaterial&&(t.theBaseMaterial.envMap=e,t.theBaseMaterial.envMapIntensity=this.envstrBase,t.theBaseMaterial.needsUpdate=!0),t.theHelmetMaterial.needsUpdate=!0,n.garageMaterial.needsUpdate=!0,n.garageWall.material.needsUpdate=!0;else{console.log(">> error materials not all present yet - envmap waiting..");var i=this;setTimeout((function(){i.quickSetMaps(e,t,n)}),500)}}newGarageMat(){return new vs({name:"garagenewMaterial",fog:!1,metalness:.5,envMapIntensity:1,roughness:.6,emissiveIntensity:1,aoMapIntensity:1,side:2,transparent:!0,normalScale:new ee(-.2,.2),depthTest:!0})}sequentialLoadMaps(e,t,n,i,r,o,a,s){this.totalTexturesAttempted++;const c=this;console.log(">> "+this.totalTexturesLoaded+"/"+this.totalTexturesAttempted+"== attempting loadmaps sequential = "+e[0]);const u=e[0],d=t[0],h=e.slice(1),p=t.slice(1),m=this;10!=d?(clearTimeout(this.filetimeout),this.filetimeout=setTimeout((function(){console.log(">> .......checking file texture load timeout : "+c.totalTexturesAttempted+", "+c.totalTexturesLoaded),c.totalTexturesAttempted!=c.totalTexturesLoaded&&(console.log("*************** FILE FAILED *******************"),c.totalTexturesAttempted--,c.sequentialLoadMaps(e,t,n,i,r,o,a,s))}),5e3),(new js).load(u,(e=>{this.totalTexturesLoaded++,clearTimeout(this.filetimeout),e.encoding=L,e.flipY=!1,e.premultiplyAlpha=!0,e.wrapS=e.wrapT=l,console.log(">> "+this.totalTexturesLoaded+"/"+this.totalTexturesAttempted+"== sequential LOADED  = "+u),r.updateProgress(5,""),0==d?(n.map=e,n.needsUpdate=!0):1==d?(n.metalnessMap=e,n.needsUpdate=!0):2==d?(n.roughnessMap=e,n.needsUpdate=!0):3==d?(n.aoMap=e,n.needsUpdate=!0):4==d?(n.normalMap=e,n.needsUpdate=!0):5==d?(i.normalMap=e,i.needsUpdate=!0):6==d?(i.aoMap=e,i.needsUpdate=!0):7==d?(o.garageMaterial.map=e,o.garageMaterial.needsUpdate=!0):8==d?(o.garageMaterial.roughnessMap=e,o.garageMaterial.needsUpdate=!0):9==d?(o.garageWall.material.map=e,o.garageWall.material.needsUpdate=!0):11==d?(e.premultiplyAlpha=!0,s.uniforms.texture1.value=e,this.keepRibbon=e):12==d?(e.premultiplyAlpha=!1,s.floorGlowMat.map=e,s.floorGlowMat.needsUpdate=!0):13==d&&(e.premultiplyAlpha=!1,o.backgroundImage=e),0!=h.length&&this.sequentialLoadMaps(h,p,n,i,r,o,a,s)}))):setTimeout((function(){clearTimeout(this.filetimeout),m.loadEnvMap(a,o,r)}),1e3)}},Mu=new class{constructor(e,t,n,i){this.init(e,t,n,i)}init(e,t,n){console.log(">> init F1 LayerShader");var i=t,r=this;this.baseLayer=(new js).load("./patterns/smallredimage.png",(e=>{e.encoding=L})),this.tagLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.decalLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.planeGeometry=new Dn(t,t),this.bufferMapScene=new wo,this.bufferMapCamera=new qn(.5*-i,.5*i,.5*-i,.5*i,1,10),this.bufferMapCamera.position.set(0,0,1),this.bufferMapScene.add(this.bufferMapCamera),this.bufferMapSceneTarget=new ce(i,i,{alpha:!0,minFilter:f,magFilter:h,antialias:!0,premultipliedAlpha:!0,blending:2,format:_,stencilBufer:!1}),this.mapUniforms={renderMode:{value:1},texture1Base:{value:this.baseLayer},texture2Tag:{value:this.tagLayer},texture3Decal:{value:this.decalLayer},texture1TintChannel1:{value:new se(.19,0,.314,1)},texture1TintChannel2:{value:new se(0,1,0,1)},texture1TintChannel3:{value:new se(0,0,1,1)},tagTint:{value:new se(1,1,1,1)},tagStyleTint:{value:new se(1,1,1,1)},decalTint:{value:new se(1,1,1,1)},decal2Tint:{value:new se(1,1,1,1)},useTag:{value:0},useDecal:{value:0}},r.bufferMapMaterial=new xn({name:"layersbufferMapMaterial",uniforms:r.mapUniforms,vertexShader:"\n              varying vec2 vUv;\n              uniform int renderMode;\n              uniform float fxAmount;\n\n              void main() {\n                vUv = uv;\n                vec3 pos = position;\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n              }\n            ",fragmentShader:"\n              uniform sampler2D texture1Base;\n              uniform sampler2D texture2Tag;\n              uniform sampler2D texture3Decal;\n    \n              uniform vec4 texture1TintChannel1;\n              uniform vec4 texture1TintChannel2;\n              uniform vec4 texture1TintChannel3;\n\n              uniform vec4 tagTint;\n              uniform vec4 tagStyleTint;\n              uniform vec4 decalTint;\n              uniform vec4 decal2Tint;\n\n              uniform int mixMode;\n              uniform int renderMode;\n              uniform float fxamount;\n          \n              uniform int useTag;\n              uniform int useDecal;\n\n\n              varying vec2 vUv;\n          \n              void main() {\n                vec4 tint1 = texture1TintChannel1;//vec4(1,0,0,1);\n                vec4 tint2 = texture1TintChannel2;//vec4(0,1,0,1);\n                vec4 tint3 = texture1TintChannel3;//vec4(0,0,1,1);\n    \n                vec4 color1 = texture2D(texture1Base, vUv);\n                vec4 color2 = texture2D(texture2Tag, vUv);\n                vec4 color3 = texture2D(texture3Decal, vUv);\n\n\n                vec3 c1 = mix(color1,tint1 * color1.r, color1.a).xyz;\n                vec3 c2 = mix(color1,tint2 * color1.g, color1.a).xyz;\n                vec3 c3 = mix(color1,tint3 * color1.b, color1.a).xyz;\n\n                vec4 outcol = vec4(mix(c1,c2,color1.g),1.0);\n                outcol = vec4(mix(outcol.xyz,c3,color1.b),1.0);\n\n                // now overlay texture2 tags\n                if(useTag==1) {\n                  c1 = mix(outcol,tagStyleTint * color2.r, color2.a).xyz;\n                  c2 = mix(outcol,tagTint * color2.g, color2.a).xyz;\n                  outcol = vec4(mix(c1,c2,color2.g),1.0);\n                  // outcol = vec4(mix(outcol.xyz,color2.xyz, color2.a),1.0);\n                }\n                if(useDecal==1) {\n                  c1 = mix(outcol,decalTint * color3.g, color3.a).xyz;\n                  c2 = mix(outcol,decal2Tint * color3.r, color3.a).xyz;\n\n                  outcol = vec4(mix(c1,c2,color3.r),1.0);\n                }\n\n\n\n\n                gl_FragColor = outcol;\n                return;\n\n\n\n                if(mixMode==0) // straight through\n                {\n//                  gl_FragColor = color1;\n\n                  if(renderMode==1)\n                    gl_FragColor = color1;\n                  else {\n                    gl_FragColor = vec4(1,0,0,1);\n                  }\n\n\n                }\n                else\n                {\n                  // for alpha\n                  vec3 c1 = mix(color1,tint1 * color2.r, color2.a).xyz;\n                  vec3 c2 = mix(color1,tint2 * color2.g, color2.a).xyz;\n                  vec3 c3 = mix(color1,tint3 * color2.b, color2.a).xyz;\n\n                  vec4 outcol = vec4(mix(c1,c2,color2.g),1.0);\n                  outcol = vec4(mix(outcol.xyz,c3,color2.b),1.0);\n\n\n\n                  if(renderMode==1)\n                    gl_FragColor = outcol;\n                  else {\n                    float tone = (color2.r + color2.g + color2.b) / 3.0;\n                    gl_FragColor = vec4(tone,tone,tone,color2.a * tone);\n                    gl_FragColor = vec4(tone,tone,tone,0.5);\n                  }\n                }\n\n              }\n            ",side:2});const o=new mn(r.planeGeometry,r.bufferMapMaterial);r.bufferMapScene.add(o),r.bufferMapMaterial.needsUpdate=!0}}(au,uu,du),Tu=new class{constructor(e,t,n,i){this.init(e,t,n,i)}init(e,t,n){console.log(">> init F1 Metal Rough");var i=t,r=this;this.baseLayer=(new js).load(n.car_files[4],(e=>{e.encoding=L})),this.tagLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.decalLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.planeGeometry=new Dn(t,t),this.bufferMapScene=new wo,this.bufferMapCamera=new qn(.5*-i,.5*i,.5*-i,.5*i,1,10),this.bufferMapCamera.position.set(0,0,1),this.bufferMapScene.add(this.bufferMapCamera),this.bufferMapSceneTarget=new ce(i,i,{alpha:!0,minFilter:f,magFilter:h,antialias:!0,premultipliedAlpha:!0,blending:2,format:_,stencilBufer:!1}),this.mapUniforms={renderMode:{value:1},texture1Base:{value:this.baseLayer},texture2Tag:{value:this.tagLayer},texture3Decal:{value:this.decalLayer},baseChannel1Metal:{value:0},baseChannel1Rough:{value:0},baseChannel2Metal:{value:0},baseChannel2Rough:{value:0},baseChannel3Metal:{value:0},baseChannel3Rough:{value:0},tagChannel1Metal:{value:0},tagChannel1Rough:{value:0},tagChannel2Metal:{value:0},tagChannel2Rough:{value:0},decalChannel1Metal:{value:0},decalChannel1Rough:{value:0},useTag:{value:0},useDecal:{value:0}},r.bufferMapMaterial=new xn({name:"metalroughbufferMapMaterial",uniforms:r.mapUniforms,vertexShader:"\n              varying vec2 vUv;\n              uniform int renderMode;\n              uniform float fxAmount;\n\n              void main() {\n                vUv = uv;\n                vec3 pos = position;\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n              }\n            ",fragmentShader:"\n              uniform sampler2D texture1Base;\n              uniform sampler2D texture2Tag;\n              uniform sampler2D texture3Decal;\n    \n              uniform float baseChannel1Metal;\n              uniform float baseChannel1Rough;\n              uniform float baseChannel2Metal;\n              uniform float baseChannel2Rough;\n              uniform float baseChannel3Metal;\n              uniform float baseChannel3Rough;\n              \n              uniform float tagChannel1Metal;\n              uniform float tagChannel1Rough;\n              uniform float tagChannel2Metal;\n              uniform float tagChannel2Rough;\n              \n              uniform float decalChannel1Metal;\n              uniform float decalChannel1Rough;\n\n              uniform int mixMode;\n              uniform int renderMode;\n              uniform float fxamount;\n          \n              uniform int useTag;\n              uniform int useDecal;\n\n\n              varying vec2 vUv;\n          \n              void main() {\n\n                vec4 color1 = texture2D(texture1Base, vUv);\n\n                float metalness1 = color1.r * baseChannel1Metal *  color1.a * 0.8;\n                float roughness1 = color1.r * baseChannel1Rough *  color1.a;\n\n                float metalness2 = color1.g * baseChannel2Metal *  color1.a * 0.8;\n                float roughness2 = color1.g * baseChannel2Rough *  color1.a;\n\n                float metalness3 = color1.b * baseChannel3Metal *  color1.a * 0.8;\n                float roughness3 = color1.b * baseChannel3Rough *  color1.a;\n\n                vec4 outcol = vec4(0,roughness1,metalness1 ,1);\n                outcol = vec4(mix(outcol.xyz, vec3(0,roughness2,metalness2), color1.g ),1);\n                outcol = vec4(mix(outcol.xyz, vec3(0,roughness3,metalness3), color1.b ),1);\n\n                if(useTag!=0) {\n                    vec4 color2 = texture2D(texture2Tag, vUv);\n                    float metalnesstagstyle = color2.r * tagChannel1Metal *  color2.a;\n                    float roughnesstagstyle = color2.r * tagChannel1Rough *  color2.a;\n\n                    float metalnesstag = color2.g * tagChannel2Metal *  color2.a;\n                    float roughnesstag = color2.g * tagChannel2Rough *  color2.a;\n\n                    vec4 outcoltag = vec4(0,roughnesstagstyle,metalnesstagstyle ,1);\n                    // outcoltag = vec4(mix(outcoltag.xyz, vec3(0,roughnesstag,metalnesstag), color2.g ),1);\n\n                    if(color2.g>0.0) {\n                      if(color2.g<0.2) \n                        outcoltag = vec4(mix(outcoltag.xyz, vec3(0,roughnesstag,metalnesstag), color2.g ),1);\n                      else\n                        outcoltag = vec4(0,roughnesstag,metalnesstag,1);\n                    }\n                    \n                    outcol = mix(outcol,outcoltag,color2.a);\n                }\n                if(useDecal!=0) {\n                    vec4 color3 = texture2D(texture3Decal, vUv);\n                    float metalnessdecal = color3.r * decalChannel1Metal *  color3.a;\n                    float roughnessdecal = color3.r * decalChannel1Rough *  color3.a;\n\n                    float metalnessdecal2 = color3.g * decalChannel1Metal *  color3.a;\n                    float roughnessdecal2 = color3.g * decalChannel1Rough *  color3.a;\n\n                    vec4 outcoldecal = vec4(0,roughnessdecal,metalnessdecal ,1);\n                    // outcoldecal = vec4(mix(outcoldecal.xyz, vec3(0,roughnessdecal2,metalnessdecal2), color3.g ),1);\n\n                    if(color3.g>0.0) {\n                      if(color3.g<0.2) \n                        outcoldecal = vec4(mix(outcoldecal.xyz, vec3(0,roughnessdecal2,metalnessdecal2), color3.g ),1);\n                      else\n                        outcoldecal = vec4(0,roughnessdecal2,metalnessdecal2,1);\n                    }\n\n\n                    outcol = mix(outcol,outcoldecal,color3.a);\n                }\n\n                \n                gl_FragColor = outcol;\n\n\n          \n\n\n\n                \n\n              }\n            ",side:2});const o=new mn(r.planeGeometry,r.bufferMapMaterial);r.bufferMapScene.add(o),r.bufferMapMaterial.needsUpdate=!0}}(au,uu,du),Au=(new class{constructor(e,t,n,i){this.init(e,t,n,i)}init(e,t,n){console.log(">> init F1 Post Render");var i=t,r=this;this.baseLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.planeGeometry=new Dn(t,t),this.bufferMapScene=new wo,this.bufferMapCamera=new qn(.5*-i,.5*i,.5*-i,.5*i,1,10),this.bufferMapCamera.position.set(0,0,1),this.bufferMapScene.add(this.bufferMapCamera),this.bufferMapSceneTarget=new ce(i,i,{alpha:!0,minFilter:f,magFilter:h,antialias:!0,premultipliedAlpha:!0,blending:2,format:_,stencilBufer:!1}),this.mapUniforms={texture1Base:{value:this.baseLayer}},r.bufferMapMaterial=new xn({name:"postrenderbufferMapMaterial",uniforms:r.mapUniforms,vertexShader:"\n              varying vec2 vUv;\n\n              void main() {\n                vUv = uv;\n                vUv.y = 1.0 - vUv.y;\n                vec3 pos = position;\n\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n              }\n            ",fragmentShader:"\n            uniform sampler2D texture1Base;\n            // uniform sampler2D texture2FX;\n\n              varying vec2 vUv;\n          \n              void main() {\n\n                vec4 colour = texture2D(texture1Base, vUv);\n                // vec4 colourFX = texture2D(texture2FX, vUv);\n                vec4 outcol = colour;\n//                 if(colourFX.a!=0.0) {\n//                   outcol = mix(outcol,vec4(0,0,0,1),colourFX.g * colourFX.a);\n// //                  outcol = mix(outcol,colourFX,colourFX.g * colourFX.a);\n//                 }\n\n                gl_FragColor = outcol;\n\n\n          \n\n\n\n                \n\n              }\n            ",side:2});const o=new mn(r.planeGeometry,r.bufferMapMaterial);r.bufferMapScene.add(o),r.bufferMapMaterial.needsUpdate=!0}}(au,uu,du),new class{constructor(e,t,n,i){this.f1BloomRibbonPass=0,this.finalComposer=0,this.fxComposer=0,this.fxRibbonComposer=0,this.finalPass=0,this.effectStarttime=0,this.duration=0,this.init(e,t,n,i)}startFX(e){this.effectStarttime=(new Date).getTime(),this.duration=e,this.finalPass.uniforms.amountBloom.value=1}timePassing(){if(1==this.mapUniforms.leadin.value){const e=((new Date).getTime()-this.effectStarttime)/this.duration;this.finalPass.uniforms.amountBloom.value=e>=1?.05:1-e}else if(2==this.mapUniforms.leadin.value){const e=((new Date).getTime()-this.effectStarttime)/this.duration;this.finalPass.uniforms.amountBloom.value=e>=1?0:1-e}else{const e=((new Date).getTime()-this.effectStarttime)/this.duration;this.finalPass.uniforms.amountBloom.value=e>=1?0:1-e}}init(e,t,n){console.log(">> init F1 Special FX Render pipeline");var a=t;this.plainMat=new Nt({name:"plainMaterial",transparent:!0,blending:5,blendEquation:i,blendSrc:r,blendDst:o}),this.blackMat=new Nt({color:0,side:2,name:"blackMaterial"});var s=this;this.baseLayer=(new js).load("./patterns/smallblackimage.jpg",(e=>{e.encoding=L})),this.planeGeometry=new Dn(t,t),this.bufferMapScene=new wo,this.bufferMapCamera=new qn(.5*-a,.5*a,.5*-a,.5*a,1,10),this.bufferMapCamera.position.set(0,0,1),this.bufferMapScene.add(this.bufferMapCamera),this.bufferMapSceneTarget=new ce(a,a,{alpha:!0,minFilter:f,magFilter:h,antialias:!0,premultipliedAlpha:!0,blending:2,format:_}),this.mapUniforms={texture1Base:{value:this.baseLayer},fTime:{value:0},layer:{value:0},leadin:{value:0},chan1Colour:{value:new de(0,0,0)},chan2Colour:{value:new de(0,0,0)},chan3Colour:{value:new de(0,0,0)},useTag:{value:0},useDecal:{value:0}},s.bufferMapMaterial=new xn({name:"specialFXbufferMapMaterial",uniforms:s.mapUniforms,vertexShader:"\n              varying vec2 vUv;\n\n              void main() {\n                vUv = uv;\n                // vUv.y = 1.0 - vUv.y;\n                vec3 pos = position;\n\n\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n              }\n            ",fragmentShader:"\n              uniform sampler2D texture1Base;\n\n              varying vec2 vUv;\n              uniform float fTime;\n              uniform float layer;\n              uniform float leadin;\n              uniform float useTag;\n              uniform float useDecal;\n\n              uniform vec3 chan1Colour;\n              uniform vec3 chan2Colour;\n              uniform vec3 chan3Colour;\n//==================================================================          \n              void main() {\n                vec4 colour = texture2D(texture1Base, vUv);\n                float calc = 1.0 - fTime;\n                float amnt = sin(calc * (3.1415926538 * 0.5));\n\n                if(leadin==2.0) {\n                  amnt = sin(calc * (3.1415926538) * 1.0);\n                  vec3 rc = (colour.r) * chan1Colour;\n                  vec3 gc = (colour.g) * chan2Colour;\n                  vec3 bc = (colour.b) * chan3Colour;\n                  vec3 c= mix(rc,gc,colour.g);\n                  c= mix(c,bc,colour.b);\n                  \n                  vec3 cv = max(bc,gc);\n                  c = mix(c,cv,amnt);\n                  c = max(c,colour.r * vec3(1,0,0));\n\n\n\n                  if(fTime>0.8) {\n                    // c = mix(c,rc, ((fTime-0.8)/0.2) );\n                    // c = mix(rc,vec3(1,1,1),0.5);\n                  }\n                \n                  float alpha = amnt;\n                  gl_FragColor = vec4(c,alpha*0.85);\n\n\n                }\n                else\n                \n                if(layer==1.0) {\n                  if(leadin==1.0) {\n                    amnt = sin(calc * (3.1415926538 * 0.5));\n                    float cosit = 1.0*(sin(calc * (3.1415926538 * 0.5)));\n                    // cosit = 1.0;\n                    float alpha=1.0;\n                    \n                    if(amnt<0.3) {\n                      alpha = mix(0.0,1.0, (amnt/0.3));\n                    }\n\n\n                    vec3 c= mix(vec3(0,0,0),vec3(1,0,0),cosit);\n                    gl_FragColor = vec4(c,alpha*0.5*amnt);\n\n\n\n                    /*\n                    vec3 rc = (colour.r) * chan1Colour;\n                    vec3 gc = (colour.g) * chan2Colour;\n                    vec3 bc = (colour.b) * chan3Colour;\n\n                    vec3 c= mix(rc,gc,colour.g);\n                    c= mix(c,bc,colour.b);\n\n                    float alpha=1.0;\n                    float beta = amnt;\n                    if(amnt<0.3) {\n                      alpha = mix(0.0,1.0, (amnt/0.3));\n                      gl_FragColor = vec4(c,alpha*0.85*beta);\n                    }\n                    else if(cosit<=0.1) {\n                      gl_FragColor = vec4(mix(c,vec3(1,0,0),(cosit-0.1)/0.1),alpha*0.85*beta);\n                    }\n                    else {\n                      c = mix(c, c*2.0,((amnt-0.3)/0.7)*0.35);\n                      c=vec3(0,1,0);\n                      gl_FragColor = vec4(c,alpha*0.85*beta);\n                    }\n                    */\n                  }\n                  else {\n                    amnt = sin(calc * (3.1415926538 * 0.5));\n\n                    vec3 rc = (colour.r) * chan1Colour;\n                    vec3 gc = (colour.g) * chan2Colour;\n                    vec3 bc = (colour.b) * chan3Colour;\n\n                    vec3 c;\n                    if(amnt<0.3) {\n                      c=mix(vec3(1,0,0),rc, amnt/0.3);\n                    }\n                    else if(amnt<0.5) {\n                      c=mix(rc,bc, (amnt-0.3)/0.2);\n                    }\n                    else if(amnt<0.7) {\n                      vec3 cv = max(bc,gc);\n                      c=mix(bc,cv, (amnt-0.5)/0.2);\n                    }\n                    else\n                      c=gc;\n                    \n                    if(amnt>=0.8) {\n                      gl_FragColor = vec4(c,(1.0-((amnt-0.8)/0.2))*0.85);\n                    }\n                    else\n                      gl_FragColor = vec4(c,0.85);\n\n                  }\n                }\n                else if(layer==3.0) {\n                  if(leadin>=0.5) {\n                    colour.g = 0.0;\n                    vec3 rc = (amnt * colour.r) * chan1Colour;\n                    vec3 gc = (amnt * colour.g) * chan2Colour;\n                    vec3 c = mix(rc,gc,colour.g);\n                    gl_FragColor = vec4(c,amnt);\n                  }\n                  else {\n                    vec3 rc = (1.0 * colour.r) * chan1Colour;\n                    vec3 gc = (1.0 * colour.g) * chan2Colour;\n\n                    vec3 c1 = mix(rc,gc,colour.g);\n                    \n                    // calc = calc * 4.0;\n                    if(calc>=1.0) {\n                      calc=1.0;\n                    }\n\n                    vec3 c2 = gc;\n                    if(useTag>0.5)\n                      c1 = mix(c1,c2,calc);\n                    else\n                      c1 = mix(c1,vec3(0,0,0),calc);\n\n\n                    gl_FragColor = vec4(c1,1.0-amnt);\n                  }                  \n                }\n                else if(layer==4.0) {\n                  if(leadin>=0.5) {\n                    colour.g = 0.0;\n                    vec3 rc = (amnt * colour.r) * chan1Colour;\n                    vec3 gc = (amnt * colour.g) * chan2Colour;\n                    vec3 c = mix(rc,gc,colour.g);\n                    gl_FragColor = vec4(c,amnt);\n                  }\n                  else {\n                    vec3 rc = (1.0 * colour.r) * chan1Colour;\n                    vec3 gc = (1.0 * colour.g) * chan2Colour;\n\n                    vec3 c1 = mix(rc,gc,colour.g);\n                    \n                    // calc = calc * 4.0;\n                    if(calc>=1.0) {\n                      calc=1.0;\n                    }\n\n                    vec3 c2 = gc;\n                    if(useDecal>0.5)\n                      c1 = mix(c1,c2,calc);\n                    else\n                      c1 = mix(c1,vec3(0,0,0),calc);\n\n\n                    gl_FragColor = vec4(c1,1.0-amnt);\n                  }      \n                }\n\n\n                /*\n                \n                if((layer==3.0 && useTag!=0.0) || (layer==4.0 && useDecal!=0.0)) {\n                  if(leadin>=0.5) {\n                    colour.g = 0.0;\n                    vec3 rc = (amnt * colour.r) * chan1Colour;\n                    vec3 gc = (amnt * colour.g) * chan2Colour;\n\n                    vec3 c = mix(rc,gc,colour.g);\n\n                    gl_FragColor = vec4(c,amnt);\n\n                    gl_FragColor = vec4(1,1,1,1);\n\n                  }*/\n                  /*\n                  else {\n                    vec3 rc = (1.0 * colour.r) * chan1Colour;\n                    vec3 gc = (1.0 * colour.g) * chan2Colour;\n\n                    vec3 c1 = mix(rc,gc,colour.g);\n                    \n                    // calc = calc * 4.0;\n                    if(calc>=1.0) {\n                      calc=1.0;\n                    }\n\n                    // vec3 c2 = max(gc,bc);\n                    // c1 = mix(c1,c2,calc);\n\n\n                    gl_FragColor = vec4(c1,1.0-amnt);\n                  }\n                  */\n                //}\n              }\n//==================================================================\n              void amain() {\n                vec4 colour = texture2D(texture1Base, vUv);\n                float best=0.0;\n                if(layer==1.0) {\n                  if(fTime>=0.875) {\n                    gl_FragColor = vec4(1,1,1,1);\n                  }\n                  else if(fTime>0.0475) {\n                    float amnt = 1.0 - ((fTime-0.475)/0.875);\n                    best = colour.g;\n                    \n                    vec3 themix = mix(vec3(1,1,1),chan2Colour,amnt);\n                    themix *= best;\n                    gl_FragColor = vec4(themix,1.0);\n\n                  }\n                  else\n                  {\n                    float amnt = 1.0 - ((fTime)/0.475);\n                    vec3 themix = mix(chan2Colour,chan3Colour,amnt);\n                    best = colour.b;\n                    themix *= best;\n                    gl_FragColor = vec4(themix,1.0);\n\n                  }\n    \n  \n                }\n\n              }\n\n              void oldmain() {\n                vec4 colour = texture2D(texture1Base, vUv);\n\n                float best = max(colour.r,colour.g);\n                best = max(best,colour.b);\n\n                if(fTime>0.875) {\n                  best=1.0;\n                  gl_FragColor = vec4(chan1Colour * best,best);\n                  // gl_FragColor = vec4(best,0.0,0.0,best);\n                }\n                else if(fTime>0.375) {\n                  float amnt = (fTime-0.375)/0.5;\n                  float best2 = max(colour.g,colour.b);\n                  if(layer==1.0) { // pattern\n                    best2 = max(colour.g,colour.b);\n                  }\n                  else if(layer==3.0) { // tag\n                    best2 = max(colour.r,colour.g);\n                  }\n                  else if(layer==4.0) { // decal\n                    best2 = max(colour.r,colour.g);\n                  }\n\n                  best = mix(1.0,best2,1.0-amnt);\n                  gl_FragColor = vec4(chan2Colour * best,best);\n                  // gl_FragColor = vec4(0.0,best,0.0,best);\n                }\n                else\n                {\n                  float best2 = max(colour.g,colour.b);\n                  if(layer==1.0) { // pattern\n                    best2 = max(colour.g,colour.b);\n                  }\n                  else if(layer==3.0) { // tag\n                    best2 = max(colour.r,colour.g);\n                  }\n                  else if(layer==4.0) { // decal\n                    best2 = max(colour.r,colour.g);\n                  }\n\n                  best=best2;\n                  gl_FragColor = vec4(chan3Colour * best,best);\n                  // gl_FragColor = vec4(0.0,0.0,best,best);\n\n                }\n\n                return;\n\n\n                /*\n                vec4 colour = texture2D(texture1Base, vUv);\n\n                float best = max(colour.r,colour.g);\n                best = max(best,colour.b);\n                if(fTime>0.75) {\n                  if(best>0.1)\n                }\n                else if(fTime>0.5) {\n                  float amnt = (fTime-0.5)/0.25;\n                  float best2 = max(colour.g,colour.b);\n                  best = mix(best,best2,1.0-amnt);\n                }\n                else\n                {\n                  float best2 = max(colour.g,colour.b);\n                  float val = fTime - 0.5;\n                  if(val<0.0) val=0.0; \n                  else {\n                    best = mix(best,best2, 1.0-(val/0.25));\n                  }\n                  best=best2;\n                }\n                gl_FragColor = vec4(best,best,best,best);\n                return;\n                */\n\n/*\n                float best = max(colour.r,colour.g);\n                best = max(best,colour.b);\n\n                if(layer==1.0) { // pattern\n                  best = max(colour.r,colour.g);\n                  best = max(best,colour.b);\n                }\n                else if(layer==3.0) { // tag\n                  best = max(colour.r,colour.g);\n                }\n                else if(layer==4.0) { // decal\n                  best = max(colour.r,colour.g);\n                }\n*/\n/*\n                // float y = sin(fTime * 3.14159265);// / 2.0;\n                float y = sin(fTime * 3.14159265);// * 2.0;\n                best = mix(1.0,best, y);\n*/                \n                // if(fTime > 0.5)\n                //   gl_FragColor = vec4(1,0,0,1);\n                // else\n//                  gl_FragColor = vec4(best,best,best,best);\n\n                return;\n/*\n                if(layer==1.0) { // pattern\n\n                  float best = max(colour.r,colour.g);\n                  best = max(best,colour.b);\n                  \n                  gl_FragColor = vec4(best,best,best,best);\n                }\n                else if(layer==3.0) { // tag\n                  // gl_FragColor = vec4(1,0,0,1);\n                  float best = max(colour.r,colour.g);\n                  gl_FragColor = vec4(best,best,best,best);\n\n                }\n                else if(layer==4.0) { // decal\n                  float best = max(colour.r,colour.g);\n                  gl_FragColor = vec4(best,best,best,best);\n                  \n                }\n\n                if(fTime>0.75) {\n                  float amnt = ((fTime - 0.75)/0.25);\n                  // amnt = sin(amnt*3.14159265);\n\n                  float y = sin(amnt * 3.14159265);// / 2.0);\n                  // Scale the result to the output range of 0-1\n                  amnt = (y + 1.0) / 2.0;\n\n//                  gl_FragColor = vec4(0.7,0.3,0.3,1.0-amnt);\n                }\n                if(leadin==1.0) {\n                  float y = sin(fTime * 3.14159265);// / 2.0);\n                  gl_FragColor = vec4(1,1,1,y);\n\n                }\n                // else\n                //   gl_FragColor = vec4(1,1,1,1);\n\n                  // gl_FragColor = vec4(1,1,1,1);\n*/\n\n                /*\n\n                vec4 colour = texture2D(texture1Base, vUv);\n                vec4 bright = mix(vec4(1,1,1,1),colour,1.0 - fTime); // all chan\n\n                float val = (colour.g + colour.b) * 0.5;\n                colour=mix(vec4(bright),vec4(val,val,val,val), 1.0-fTime );\n\n                // float isgb = (colour.g+colour.b) * 3.0;\n                // if(isgb>1.0) isgb = 1.0;\n                // colour = mix(bright,vec4(isgb,isgb,isgb,bright.a),tim);\n\n\n                colour = vec4(colour.g,colour.g,colour.g,colour.g*colour.a);\n\n\n                gl_FragColor = colour;\n                  */\n\n\n\n/*\n                // float amnt = sin(fTime * 3.1415926538) * 0.5 + 0.5;\n\n                // float tim = (fTime)*2.0;\n                // if(tim>1.0) tim = 1.0;\n\n                float tim = 1.0 - fTime;\n\n                float amnt = sin(tim * 3.1415926538/2.0);\n\n                vec4 colour = texture2D(texture1Base, vUv);\n                vec4 bright = mix(vec4(1,1,1,colour.a),colour,colour.a);\n                // float isgb = (colour.g+colour.b) * 2.0;\n                // if(isgb>1.0) isgb = 1.0;\n                float isgb = (colour.g) * 2.0;\n                if(isgb>1.0) isgb = 1.0;\n\n                colour = mix(bright,vec4(isgb,isgb,isgb,bright.a * colour.g),amnt);\n\n                colour = vec4(colour.g,colour.g,colour.g,colour.g*colour.a);\n\n                // float tim = fTime;//-2.0;\n                // if(tim<0.0) tim = 0.0;\n\n                // // colour = mix(vec4(colour.g,colour.g,colour.g,1.0),vec4(colour.xyz,1.0),tim);\n                // vec4 bright = mix(vec4(1,1,1,1),colour,colour.a);\n                // float isgb = (colour.g+colour.b) * 3.0;\n                // if(isgb>1.0) isgb = 1.0;\n                // colour = mix(bright,vec4(isgb,isgb,isgb,bright.a),tim);\n\n                // if(colour.g > 0.1) {\n                //   colour = vec4(1,1,1,1);\n                // }\n                // else \n                //   colour = vec4(0,0,0,0);\n//                colour = vec4(colour.g,colour.g,colour.g,colour.g);\n\n                // colour = vec4(1,1,1,1);\n\n                gl_FragColor = colour;\n*/\n\n          \n\n\n\n                \n\n              }\n            ",side:2,transparent:!0,blending:5,blendEquation:i,blendSrc:r,blendDst:o});const c=new mn(s.planeGeometry,s.bufferMapMaterial);s.bufferMapScene.add(c),s.bufferMapMaterial.needsUpdate=!0}setupBloom(e,t,n,i,r){const o=new wo;o.add(new mn(this.planeGeometry,r.backgroundMat)),new Ul(o,t);const a=new Ul(e,t),s=new jl(new ee(1024,1024),3,.75,15e-5);this.fxComposer=new Fl(n),this.fxComposer.renderToScreen=!1,this.fxComposer.addPass(a),this.fxComposer.addPass(s);const c=new Ul(e,t);this.f1BloomRibbonPass=new jl(new ee(512,512),4.25,.7,15e-6),this.fxRibbonComposer=new Fl(n),this.fxRibbonComposer.renderToScreen=!1,this.fxRibbonComposer.addPass(c),this.fxRibbonComposer.addPass(this.f1BloomRibbonPass),this.finalPass=new Bl(new xn({name:"finalpassshadermat",uniforms:{baseTexture:{value:null},bloomTexture:{value:this.fxComposer.renderTarget2.texture},bloomRibbonTexture:{value:this.fxRibbonComposer.renderTarget2.texture},amountBloom:{value:0},bloomAmount:{value:.28}},vertexShader:"\n          varying vec2 vUv;\n\n          void main() {\n    \n            vUv = uv;\n            vec3 pos = position;\n\n\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n    \n          }\n          ",fragmentShader:"\n          uniform sampler2D baseTexture;\n          uniform sampler2D bloomTexture;\n          uniform sampler2D bloomRibbonTexture;\n          \n          uniform float amountBloom;\n          uniform float bloomAmount;\n          varying vec2 vUv;\n\n          void main() {\n    \n            vec4 colbase = texture2D( baseTexture, vUv );\n            vec4 colBloom = texture2D( bloomTexture, vUv );\n            vec4 colRibbon = texture2D( bloomRibbonTexture, vUv );\n            // vec4 outcol = max(colbase,colBloom);\n            // outcol = max(outcol,colRibbon);\n            float a = max(max(colBloom.x,colBloom.y),colBloom.z) * bloomAmount;\n            vec4 outcol = mix(colbase,colBloom,a);\n            outcol = max(outcol,colRibbon);\n\n            gl_FragColor = vec4(outcol.xyz,colBloom.a * colbase.a * colRibbon.a );\n            return;\n\n\n\n\n            float amnt = 0.0;\n\n            if(amountBloom>=0.75) {\n              float calc = 1.0 - ((amountBloom - 0.75) / 0.25);\n              amnt = sin(calc * (3.1415926538 * 0.5));\n            }\n            else if(amountBloom>=0.25) {\n              amnt = 1.0;\n            }\n            else {\n              float calc = amountBloom / 0.25;\n              amnt = sin(calc * (3.1415926538 * 0.5));              \n            }\n            \n//            amnt = sin(amountBloom * (3.1415926538)) ;\n\n            float waver = sin(amountBloom * (3.1415926538) * 3.0) ;\n            waver = 1.0 - (waver*0.025);\n//            amnt = amnt * (waver);\n\n            // colBloom *= amnt;\n\n            gl_FragColor = ( colbase + vec4( 1.0 ) * colBloom);\n            return;\n            /*\n            float amnt = 0.0;\n\n            if (amountBloom >= 0.75) {\n              amnt = sin((amountBloom - 0.75) * (4.0 * 3.1415926538));\n            } else if (amountBloom >= 0.25 && amountBloom < 0.75) {\n              amnt = 1.0;\n            } else if (amountBloom < 0.25) {\n              amnt = sin(amountBloom * (4.0 * 3.1415926538) + 0.5 * 3.1415926538);\n            }\n            colBloom *= amnt;\n            gl_FragColor = ( colbase + vec4( 1.0 ) * colBloom);\n            \n            gl_FragColor = texture2D( bloomTexture, vUv );\n            return;\n            */\n\n            // float amnt = sin(amountBloom * (3.1415926538)) * 0.5 + 0.5;\n            // amnt*=2.0;\n            // if(amnt>1.0) amnt=1.0;\n            // amnt = amountBloom;\n            \n            // if(amountBloom>0.0) {\n            //   amnt = 1.0;\n            // }\n\n\n            // float amnt = sin(amountBloom * (3.1415926538)) ;\n\n            // vec4 colBloom = texture2D( bloomTexture, vUv ) * amnt;//amountBloom;\n    \n    \n            // gl_FragColor = ( colbase + vec4( 1.0 ) * colBloom );\n    \n          }\n    \n          ",transparent:!0,defines:{}}),"baseTexture"),this.finalPass.needsSwap=!0,this.finalComposer=new Fl(n),this.finalComposer.addPass(a),this.finalComposer.addPass(this.finalPass),this.finalComposer.setSize(i,i),this.fxComposer.setSize(i,i),this.fxRibbonComposer.setSize(i,i)}}(au,uu,du)),Iu=new class{constructor(e,t){this.f1Layers_mapUniforms=e,this.f1MetalRough_mapUniforms=t,this.fontstyle=0,this.processJSON=0,this.sizecanvas=1024,this.isActive=!1,this.isDebug=!1,this.textTexture=0,this.tagPattern=0,this.tagComposite=0;var n=this;this.locos=new Array,this.locos.push([.466,-.678,.133,90]),this.locos.push([-.589,.693,.133,-90]),this.locos.push([-.909,-.441,.105,-180]),document.getElementById("c_tagXSlider").value=1e3*n.locos[0][0],document.getElementById("c_tagYSlider").value=1e3*n.locos[0][1],document.getElementById("c_tagScaleSlider").value=1e3*n.locos[0][2],document.getElementById("c_tagRotSlider").value=1e3*n.locos[0][3],document.getElementById("c_tagXSliderTxt").value="x= "+n.locos[0][0],document.getElementById("c_tagYSliderTxt").value="y= "+n.locos[0][1],document.getElementById("c_tagScaleSliderTxt").value="scale= "+n.locos[0][2],document.getElementById("c_tagRotSliderTxt").value="rot= "+n.locos[0][3],document.getElementById("c_whichtag").onchange=function(){const e=this.value;document.getElementById("c_tagXSlider").value=1e3*n.locos[e][0],document.getElementById("c_tagYSlider").value=1e3*n.locos[e][1],document.getElementById("c_tagScaleSlider").value=1e3*n.locos[0][2],document.getElementById("c_tagRotSlider").value=1e3*n.locos[0][3],document.getElementById("c_tagXSliderTxt").innerHTML="x= "+n.locos[e][0],document.getElementById("c_tagYSliderTxt").innerHTML="y= "+n.locos[e][1],document.getElementById("c_tagScaleSliderTxt").value="scale= "+n.locos[0][2],document.getElementById("c_tagRotSliderTxt").value="rot= "+n.locos[0][3],console.log("chosen loco")},document.getElementById("c_tagXSlider").onchange=function(){const e=document.getElementById("c_whichtag").value;n.locos[e][0]=this.value/1e3,document.getElementById("c_tagXSliderTxt").innerHTML="x= "+n.locos[e][0],n.composite()},document.getElementById("c_tagYSlider").onchange=function(){const e=document.getElementById("c_whichtag").value;n.locos[e][1]=this.value/1e3,document.getElementById("c_tagYSliderTxt").innerHTML="y= "+n.locos[e][1],n.composite()},document.getElementById("c_tagScaleSlider").onchange=function(){const e=document.getElementById("c_whichtag").value;n.locos[e][2]=this.value/1e3,document.getElementById("c_tagScaleSliderTxt").innerHTML="scale= "+n.locos[e][2],n.composite()},document.getElementById("c_tagRotSlider").onchange=function(){const e=document.getElementById("c_whichtag").value;n.locos[e][3]=this.value/1e3,document.getElementById("c_tagRotSliderTxt").innerHTML="rot= "+n.locos[e][3],n.composite()}}init(e){console.log(">> init F1 Text pipeline");var t=this;this.processJSON=e;let n=document.getElementById("taginput");t.textTexture=t.createText("F1",1),n.addEventListener("input",(function(){t.fixText(),t.composite()})),t=this}fixText(){let e=document.getElementById("taginput").value;console.log(e);const t=this.processJSON.liveryData.Layers.tagfontstyle;this.textTexture=this.createText(e,t),this.processJSON.liveryData.tagtext=e}drawTextAt(e,t){t.save();const n=this.locos[e][0],i=this.locos[e][1],r=this.locos[e][2],o=this.locos[e][3];t.rotate(o*Math.PI/180),t.drawImage(this.textTexture.image,0,0,this.textTexture.image.width,this.textTexture.image.height,n*this.sizecanvas,i*this.sizecanvas,this.sizecanvas*r,this.sizecanvas*r),t.restore()}composite(){let e=document.createElement("canvas");e.width=this.sizecanvas,e.height=this.sizecanvas;let t=e.getContext("2d");t.drawImage(this.tagPattern.image,0,0,this.tagPattern.image.width,this.tagPattern.image.height,0,0,this.sizecanvas,this.sizecanvas),this.drawTextAt(0,t),this.drawTextAt(1,t),this.drawTextAt(2,t);let n=new xa(e);this.tagComposite=n,this.f1Layers_mapUniforms.texture2Tag.value=this.tagComposite,this.f1MetalRough_mapUniforms.texture2Tag.value=this.tagComposite,e.remove()}createText(e,t){const n=.5*this.sizecanvas;var i=1;let r=document.createElement("canvas");r.width=this.sizecanvas,r.height=this.sizecanvas;let o=r.getContext("2d");o.lineWidth=0,o.fillStyle="rgb(0,255,0)",o.textAlign="center",o.textBaseline="middle";var a="px ",s=!1,c=!1;i=.95,0==t?a+="F1PaintShopBoldFont":1==t?(a+="F1PaintShopWideFont",i=.55):2==t?a+="F1PaintShopBoldFont":3==t?(a+="F1PaintShopWideFont",i=.55):4==t?(s=!0,a+="F1PaintShopBoldFont",i=1.1,o.lineJoin="round"):5==t&&(c=!0,a+="F1PaintShopWideFont",i=.55,o.lineJoin="round"),o.font=n*i+a,s?(o.strokeStyle="rgb(255,0,0)",o.lineWidth=.08*n*i,o.strokeText(e,.5*this.sizecanvas,n),o.fillText(e,.5*this.sizecanvas,n)):c?(o.strokeStyle="rgb(0,255,0)",o.lineWidth=.5*n*i,o.strokeText(e,.5*this.sizecanvas,n),o.strokeStyle="rgb(255,0,0)",o.lineWidth=.35*n*i,o.strokeText(e,.5*this.sizecanvas,n),o.fillText(e,.5*this.sizecanvas,n)):o.fillText(e,.5*this.sizecanvas,n);let l=new xa(r);return r.remove(),l}}(Mu.mapUniforms,Tu.mapUniforms),Ru=new class{constructor(e){this.prevupdate=(new Date).getTime(),this.timer1=this.prevupdate,this.init(e)}init(e){console.log(">> init F1 Ribbons and fx"),this.enabled=!0;var t=this;this.root=new pt,this.boxroot=new pt,this.root.visible=this.enabled,this.enableGlow=!0,this.ribbonGeometry=new Dn(200,15,64,2),this.setupRibbonMaterials(e),document.getElementById("c_bendmodcon").onchange=function(){var e=this.value;const n=document.getElementById("c_bend").value-1;t.modifier.stack[n].constraint=e},document.getElementById("c_bend").onchange=function(){const e=this.value-1,n=t.modifier.stack[e].force,i=t.modifier.stack[e].offset,r=t.modifier.stack[e].angle,o=t.modifier.stack[e].constraint;document.getElementById("c_bendFSliderTxt").innerHTML="force: "+n,document.getElementById("c_bendPSliderTxt").innerHTML="offset: "+i,document.getElementById("c_bendASliderTxt").innerHTML="angle: "+r,document.getElementById("c_bendFSlider").value=100*n,document.getElementById("c_bendPSlider").value=100*i,document.getElementById("c_bendASlider").value=r/(Math.PI/180),document.getElementById("c_bendmodcon").value=o,t.modifier.stack[e].force=n,t.modifier.stack[e].offset=i,t.modifier.stack[e].angle=r,t.modifier.stack[e].constraint=o},document.getElementById("c_bendFSlider").oninput=function(){const e=this.value/100,n=document.getElementById("c_bend").value-1;document.getElementById("c_bendFSliderTxt").innerHTML="force: "+e,t.modifier.stack[n].force=e},document.getElementById("c_bendPSlider").oninput=function(){const e=this.value/100,n=document.getElementById("c_bend").value-1;document.getElementById("c_bendPSliderTxt").innerHTML="offset: "+e,t.modifier.stack[n].offset=e},document.getElementById("c_bendASlider").oninput=function(){const e=this.value*(Math.PI/180),n=document.getElementById("c_bend").value-1;document.getElementById("c_bendASliderTxt").innerHTML="angle: "+e,t.modifier.stack[n].angle=e}}setupRibbonMaterials(e){this.uniforms={texture1:{value:0},fTime:{value:0},faderTime:{value:0}},this.ribbonMaterial=new xn({name:"ribbonMaterial",uniforms:this.uniforms,vertexShader:"\n            varying vec2 vUv;\n            varying float viewerDistance;\n\n            void main() {\n                vUv = uv;\n                vec3 pos = position;\n\n                vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n                gl_Position = projectionMatrix * mvPosition;\n              \n                // Calculate distance from camera\n                viewerDistance = length(mvPosition.xyz);\n                              \n//                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n            }\n            ",fragmentShader:"\n            uniform sampler2D texture1;\n\n            varying vec2 vUv;\n            uniform float fTime;\n            uniform float faderTime;\n            varying float viewerDistance;\n\n//==================================================================          \n            vec3 getEndFade(vec3 vin, float edge) {\n                if(vUv.x >= edge) {\n                    return mix(vin,vec3(0,0,0), (vUv.x - edge) / (1.0-edge));\n                }\n                else\n                    return vin;\n            }\n//==================================================================          \n            void main() {\n                float speedconst = 0.3;\n                float r_rate = fTime * 4.0;\n                float g_rate = fTime * 2.0;\n                float b_rate = fTime * 1.0;\n\n                vec2 uv = vUv.yx + vec2(0,r_rate);\n                // uv.x *= 1.0;\n                uv.x += (sin(fTime*3.14159275*20.0) * 0.052) * vUv.y;\n                // uv.x *= sin(fTime/1000.0 * 3.14159254 * 2.0)*0.5;\n\n\n                vec4 colour = texture2D(texture1, uv);\n                vec3 outcolour = vec3(1,0,0) * max(max(colour.r,colour.g),colour.b);\n                // outcolour = getEndFade(outcolour, 0.9);\n\n                // if(uv.y >= fTime - 0.2 && uv.y <= fTime + 0.2) {\n                //     float amnt=1.0;\n                //     if(uv.y < fTime) {\n                //         amnt = (uv.y - fTime + 0.2) / 0.2;\n                //     }\n                //     else if(uv.y > fTime) {\n                //         amnt = 1.0 - ((uv.y - fTime) / 0.2);\n                //     }\n                //     outcolour *= amnt;\n                // }\n\n\n\n                uv = vUv.yx + vec2(0,g_rate);\n                uv.x = (uv.x*0.6) + 0.5;\n                colour = texture2D(texture1, uv);\n                // if(uv.y >= fTime - 0.2 && uv.y <= fTime + 0.2) {\n\n                //     float amnt=1.0;\n                //     if(uv.y < fTime) {\n                //         amnt = (uv.y - fTime + 0.2) / 0.2;\n                //     }\n                //     else if(uv.y > fTime) {\n                //         amnt = 1.0 - ((uv.y - fTime) / 0.2);\n                //     }\n                //     colour *= amnt;\n                // }\n\n\n                outcolour = max(outcolour, vec3(0.7,0.6,0) * max(max(colour.r,colour.g),colour.b));\n                outcolour = getEndFade(outcolour, 0.75);\n\n                uv = vUv.yx + vec2(0,b_rate);\n                uv.x = (uv.x*1.3) + 0.5;\n                colour = texture2D(texture1, uv);\n                // if(uv.y >= fTime - 0.2 && uv.y <= fTime + 0.2) {\n\n                //     float amnt=1.0;\n                //     if(uv.y < fTime) {\n                //         amnt = (uv.y - fTime + 0.2) / 0.2;\n                //     }\n                //     else if(uv.y > fTime) {\n                //         amnt = 1.0 - ((uv.y - fTime) / 0.2);\n                //     }\n                //     colour *= amnt;\n                // }\n\n\n\n                float b = max(max(colour.r,colour.g),colour.b);\n                outcolour = max(outcolour, vec3(0.2,0.2,1) * max(max(colour.r,colour.g),colour.b));\n                outcolour = getEndFade(outcolour, 0.6);\n\n\n                // if(vUv.y < 0.2) {\n                //     float amnt = (vUv.y / 0.2);\n                //     a = a * amnt;\n                //     outcolour*=amnt;\n                // }\n                // else if(vUv.y >= 0.8) {\n                //     float amnt = (1.0-((vUv.y-0.8) / 0.2));\n                //     a = a * amnt;\n                //     outcolour*=amnt;\n                // }\n\n                float v = 1.0;\n                // if( viewerDistance >= 200.0) {\n                //     float amnt = (viewerDistance - 200.0) / 300.0;\n                //     if(amnt>1.0) amnt=1.0;\n                //     amnt = 1.0 - amnt;\n                //     outcolour *= amnt;\n                // }\n\n                float amnt =1.0;\n                if( viewerDistance <= 150.0) {\n                    amnt = (viewerDistance ) / 150.0;\n                    if(amnt>1.0) amnt=1.0;\n                    // amnt = 1.0 - amnt;\n                    outcolour *= amnt * amnt;\n\n                }\n                // else if( viewerDistance >= 200.0) {\n                //     float amnt = (viewerDistance - 200.0) / 300.0;\n                //     if(amnt>1.0) amnt=1.0;\n                //     amnt = 1.0 - amnt;\n                //     outcolour *= amnt;\n                // }\n\n\n                float a = max(outcolour.r,max(outcolour.g,outcolour.b));\n\n                a = a * faderTime * amnt;\n                outcolour *= faderTime;\n\n                gl_FragColor = vec4(outcolour,a);\n\n      \n            }\n            ",side:2,transparent:!0,blending:5,blendEquation:i,blendSrc:r,blendDst:o,alphaTest:.1,depthWrite:!1,depthTest:!0}),0!=e.keepRibbon&&(this.uniforms.texture1.value=e.keepRibbon),this.ribbonMaterialsimple=new vs({color:16777215,transparent:!0,opacity:1,side:2,name:"ribbonMaterial"}),this.redf1mat=new Nt({color:4526610}),this.floorGlowMat=new Nt({color:6227205})}createTwist(e){const t=new Gl.Twist(e[0]);t.vector=e[1],this.modifier.addModifier(t),0!=e[5]&&new Fc.Tween(t).to({angle:e[3]},e[4]).repeat(1/0).yoyo(1==e[5]).easing(e[2]).onUpdate((function(e){})).onComplete((function(){})).start()}createBend(e,t){const n=new Gl.Bend(t.force,t.offset,t.angle);this.modifier.addModifier(n),0!=t.yoyo&&new Fc.Tween(n).to({force:t.tforce,offset:t.toffset,angle:t.tangle},1*t.duration).repeat(1/0).yoyo(1==t.yoyo).easing(t.tweentype).onUpdate((function(e){})).onComplete((function(){})).start()}createBentMeshParams(e){for(var t=0;t<e.length;t++)this.createBend(t,e[t])}getRandomBend(){var e=new de(2*Math.random(),1*Math.random(),0);return console.log("bvals="+e.x+","+e.y+","+e.z),e}changeModifier(e,t,n,i){this.modifier.stack[e].force=t,this.modifier.stack[e].force=n,this.modifier.stack[e].angle=i}createBentMesh(){console.log("--");var e=new Array;e.push(new Vl(2,.25,0,2,.75,0,3e4,Fc.Easing.Cubic.InOut,1)),e.push(new Vl(-2,.5,0,-2,.5,2*Math.PI,3e4,Fc.Easing.Linear.None,2)),this.createBentMeshParams(e),this.createTwist([1.3,new Gl.Vector3(1,0,0),Fc.Easing.Linear.None,0,2e4,0])}getSceneObjects(e){this.ribbonMesh=new mn(this.ribbonGeometry,this.ribbonMaterial),this.ribbonMesh.layers.set(3),this.modifier=new Gl.ModifierStack(this.ribbonMesh),this.ribbonMesh.position.set(0,30,0),this.createBentMesh(),this.root.add(this.ribbonMesh),this.ribbonMesh2=this.ribbonMesh.clone(),this.ribbonMesh2.position.set(-20,25,-80),this.ribbonMesh2.scale.set(2,3,1.5),this.ribbonMesh2.rotateZ(Math.PI/180*180),new Fc.Tween(this.ribbonMesh2.position).to({x:-20,y:-25,z:-120},32e3).repeat(1/0).yoyo(!0).easing(Fc.Easing.Back.InOut).start(),new Fc.Tween(this.ribbonMesh.position).to({x:0,y:30,z:-80},3e4).repeat(1/0).yoyo(!0).easing(Fc.Easing.Back.InOut).start(),this.root.add(this.ribbonMesh2);const t=new wa(80,32),n=new mn(t,this.floorGlowMat);return n.rotateX(Math.PI/180*-90),n.position.set(0,-9.8,0),n.layers.set(3),this.root.add(n),this.root}mathPulse(e){let t=.75,n=Math.PI/2,i=Math.PI,r=Math.sqrt(.38+.12*Math.cos(.5*e-t*e+n-.2)+.2*Math.cos(.5*e-1*e+i-.2)+.3*Math.cos(t*e-1*e+i-n));return((.2*Math.sin(.5*e+.2)+.3*Math.sin(t*e+n)+.5*Math.sin(1*e+i)+.2*Math.sin(.1*e)*.5)/r+1)/2}sineWave(e){return(1+Math.sin(2*Math.PI*e-Math.PI/2))/2}easedSineWave(e){const t=this.easeFactor(e,.1),n=this.easeFactor(e,.6);return this.sineWave(e)*n+(1-t)}easeFactor(e,t){const n=t/2,i=.5-n,r=.5+n;return e<i?0:e<.5?.5*(1+Math.sin(Math.PI*(e-i)/t-Math.PI/2)):e<r?1:.5*(1+Math.sin(Math.PI*(e-r)/t-Math.PI/2))}update(){const e=(new Date).getTime(),t=e-this.prevupdate,n=.25*e%5e3;this.uniforms.fTime.value=n/5e3;const i=5e-5*e%360,r=this.easedSineWave(.25*i);console.log(r),this.uniforms.faderTime.value=r,t<10||(this.prevupdate=e,this.modifier&&this.modifier&&this.modifier.apply())}}(Pu);Cu.updateProgress(5,"pipelines");var ku=new class{constructor(e,t){this.init(e,t)}init(e,t){this.planeGeometry=new Dn(1024,1024),this.f1materials=e,this.f1Gui=t,this.garageWall=0,this.garageRoot=new pt,this.garageMaterial=e.newGarageMat(),this.garageMaterial.color=new Lt(1184274),this.backgroundImage=0,this.backgroundMat=new Nt({color:16777215,side:2,name:"scene background"}),this.garageMaterial.needsUpdate=!0,this.garageWall=new mn(this.planeGeometry,e.newGarageMat()),this.garageWall.layers.set(1),this.garageWall.rotateZ(Math.PI/180*180),this.garageWall.scale.set(.5,.5,.5),this.garageWall.receiveShadow=!1;const n=this.garageWall.clone();n.rotateY(Math.PI/180*90),n.position.x=-250;const i=this.garageWall.clone();i.rotateY(Math.PI/180*90),i.position.x=250,this.garageWall.clone().position.z=250,this.garageWall.position.z=-250;let r=new mn(new wa(160,32),this.garageMaterial);r.layers.set(1),r.rotateX(Math.PI/180*90),r.scale.set(.5,.5,.5),r.receiveShadow=!1,this.garageRoot.add(r),this.garageRoot.position.set(0,20,-20);const o=new ys;o.opacity=.34,o.side=2,o.transparent=!0,o.needsUpdate=!0;let a=new mn(new Dn(512,512),o);a.position.set(0,.05,0),a.layers.set(1),a.scale.set(.5,.5,.5),a.rotateX(Math.PI/180*90),a.receiveShadow=!0,this.garageRoot.add(a)}}(Pu,Cu),Lu=new class{constructor(){}init(e,t,n,i,r,o,a,s,c){if(this.isHelmet=n,this.gltfLoader=new Gc,this.theHelmet)for(;this.theHelmet.children.length>0;)this.theHelmet.remove(this.theHelmet.children[0]);this.theHelmet=new pt,this.f1materials=e,this.f1Gui=o,this.specialFXMesh=0,this.baseFXMesh=0;var l,u=this;this.theHelmetMaterial=new vs({name:"theHelmetMaterial",map:t.bufferMapSceneTarget.texture,fog:!1,metalness:1,roughness:1,emissiveIntensity:1,aoMapIntensity:1,metalnessMap:r.bufferMapSceneTarget.texture,roughnessMap:r.bufferMapSceneTarget.texture,color:new Lt(16777215),shadowSide:0,emissive:new Lt(0,0,0),normalScale:new ee(-.5,.5),side:2}),this.isHelmet||(this.theBaseMaterial=new vs({name:"theHelmetBaseMaterial",fog:!1,metalness:1,roughness:1,emissiveIntensity:1,aoMapIntensity:1,color:new Lt(16777215),shadowSide:0,emissive:new Lt(0,0,0),normalScale:new ee(-.5,.5),side:2})),l=this.isHelmet?i.helmet_files[0]:i.car_files[0],this.helmetCentre=new de,console.log(">> attempting to load 3d mesh="+l),this.gltfLoader.load(l,(function(e){let t=e.scene;if(u.theHelmet.add(t),console.log(">> attempting to traverse mesh "+t.children.length),t.traverse((function(e){e.isMesh&&(console.log(">> model child name ="+e.name),e.castShadow=!0,e.receiveShadow=!1,e.material=u.theHelmetMaterial)})),u.isHelmet){let e=t.getObjectByName("Helmet_main_low");e.layers.set(2),e.material=u.theHelmetMaterial,u.specialFXMesh=e,e.castShadow=!0,e.receiveShadow=!1}else{let e=t.getObjectByName("F1PS_F1_Car_Customizable");e.layers.set(2),e.material=u.theHelmetMaterial,u.specialFXMesh=e,e.castShadow=!0,e.receiveShadow=!1;let n=t.getObjectByName("F1PS_F1_Car_Static");n.layers.set(2),n.material=u.theBaseMaterial,u.baseFXMesh=n,n.castShadow=!0,n.receiveShadow=!1}u.f1Gui.updateProgress(10,"mesh");const n=new Array,r=new Array;n.push("./assets/garage/concretetilesSquare.jpg"),r.push(7),n.push("./assets/garage/concretetilesSquare.jpg"),r.push(8),n.push("./assets/garage/walls.jpg"),r.push(9),n.push("./assets/sfx/scenebackground.jpg"),r.push(13),u.isHelmet?(r.push(5),n.push("./assets/helmet/Helmet Triangulated_Normal.png"),r.push(6),n.push("./assets/helmet/Helmet Triangulated_AO.png")):(n.push(i.car_files[6]),r.push(0),n.push(i.car_files[9]),r.push(1),n.push(i.car_files[10]),r.push(2),n.push(i.car_files[8]),r.push(3),n.push(i.car_files[7]),r.push(4),n.push(i.car_files[2]),r.push(5),n.push(i.car_files[3]),r.push(6),u.theBaseMaterial.emissive.r=0,u.theBaseMaterial.emissive.g=0,u.theBaseMaterial.emissive.b=0),n.push("./assets/garage/ribbon2.png"),r.push(11),n.push("./assets/sfx/floorglow.jpg"),r.push(12),n.push("envmap"),r.push(10),u.theHelmetMaterial.emissive.r=0,u.theHelmetMaterial.emissive.g=0,u.theHelmetMaterial.emissive.b=0,u.f1materials.sequentialLoadMaps(n,r,u.theBaseMaterial,u.theHelmetMaterial,u.f1Gui,s,u,c),u.isHelmet?(u.theHelmet.scale.set(22,22,22),u.theHelmet.position.set(0,10,0)):(u.theHelmet.scale.set(18,18,18),u.theHelmet.position.set(0,20,-20))}),void 0,(function(e){console.error(e)}))}},Nu=!1,Bu=new pt,Du=0;const Ou=new Uint8Array(4194304),Fu=new Uint8Array(4194304),zu=document.getElementById("canvas-container");!function(t,i){"object"==typeof exports?e.exports=i():"function"==typeof define&&n.amdO?define(i):(t=t||self).iro=i()}(void 0,(function(){var e,t,n,i,r,o={},a=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function l(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var i,r,o,a,s=arguments;if(t=c({},t),3<arguments.length)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===t[r]&&(t[r]=e.defaultProps[r]);return a=t.key,null!=(o=t.ref)&&delete t.ref,null!=a&&delete t.key,d(e,t,a,o)}function d(t,n,i,r){var o={type:t,props:n,key:i,ref:r,n:null,i:null,e:0,o:null,l:null,c:null,constructor:void 0};return e.vnode&&e.vnode(o),o}function h(e){return e.children}function p(e,t){this.props=e,this.context=t}function m(e,t){if(null==t)return e.i?m(e.i,e.i.n.indexOf(e)+1):null;for(var n;t<e.n.length;t++)if(null!=(n=e.n[t])&&null!=n.o)return n.o;return"function"==typeof e.type?m(e):null}function f(e){var t,n;if(null!=(e=e.i)&&null!=e.c){for(e.o=e.c.base=null,t=0;t<e.n.length;t++)if(null!=(n=e.n[t])&&null!=n.o){e.o=e.c.base=n.o;break}return f(e)}}function g(r){(!r.f&&(r.f=!0)&&1===t.push(r)||i!==e.debounceRendering)&&(i=e.debounceRendering,(e.debounceRendering||n)(y))}function y(){var e,n,i,r,o,a,s,l;for(t.sort((function(e,t){return t.d.e-e.d.e}));e=t.pop();)e.f&&(r=i=void 0,a=(o=(n=e).d).o,s=n.p,l=n.u,n.u=!1,s&&(i=[],r=E(s,o,c({},o),n.w,void 0!==s.ownerSVGElement,null,i,l,null==a?m(o):a),_(i,o),r!=a&&f(o)))}function v(e,t,n,i,r,s,c,u,d){var h,p,f,g,y,v,x,w=n&&n.n||a,S=w.length;if(u==o&&(u=null!=s?s[0]:S?m(n,0):null),h=0,t.n=b(t.n,(function(n){if(null!=n){if(n.i=t,n.e=t.e+1,null===(f=w[h])||f&&n.key==f.key&&n.type===f.type)w[h]=void 0;else for(p=0;p<S;p++){if((f=w[p])&&n.key==f.key&&n.type===f.type){w[p]=void 0;break}f=null}if(g=E(e,n,f=f||o,i,r,s,c,null,u,d),(p=n.ref)&&f.ref!=p&&(x=x||[]).push(p,n.c||g,n),null!=g){if(null==v&&(v=g),null!=n.l)g=n.l,n.l=null;else if(s==f||g!=u||null==g.parentNode){e:if(null==u||u.parentNode!==e)e.appendChild(g);else{for(y=u,p=0;(y=y.nextSibling)&&p<S;p+=2)if(y==g)break e;e.insertBefore(g,u)}"option"==t.type&&(e.value="")}u=g.nextSibling,"function"==typeof t.type&&(t.l=g)}}return h++,n})),t.o=v,null!=s&&"function"!=typeof t.type)for(h=s.length;h--;)null!=s[h]&&l(s[h]);for(h=S;h--;)null!=w[h]&&P(w[h],w[h]);if(x)for(h=0;h<x.length;h++)C(x[h],x[++h],x[++h])}function b(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var i=0;i<e.length;i++)b(e[i],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return d(null,e,null,null);if(null==e.o&&null==e.c)return e;var t=d(e.type,e.props,e.key,null);return t.o=e.o,t}(e)):e);return n}function x(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===s.test(t)?n+"px":null==n?"":n}function w(e,t,n,i,r){var o,a,s,c,l;if("key"===(t=r?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(o=e.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof i&&(o.cssText="",i=null),i)for(a in i)n&&a in n||x(o,a,"");if(n)for(s in n)i&&n[s]===i[s]||x(o,s,n[s])}else"o"===t[0]&&"n"===t[1]?(c=t!==(t=t.replace(/Capture$/,"")),t=((l=t.toLowerCase())in e?l:t).slice(2),n?(i||e.addEventListener(t,S,c),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,S,c)):"list"!==t&&"tagName"!==t&&"form"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function S(t){return this.t[t.type](e.event?e.event(t):t)}function E(t,n,i,r,s,l,u,d,m,f){var g,y,x,S,E,_,C,P,T,A,I=n.type;if(void 0!==n.constructor)return null;(g=e.e)&&g(n);try{e:if("function"==typeof I){if(P=n.props,T=(g=I.contextType)&&r[g.c],A=g?T?T.props.value:g.i:r,i.c?C=(y=n.c=i.c).i=y.k:("prototype"in I&&I.prototype.render?n.c=y=new I(P,A):(n.c=y=new p(P,A),y.constructor=I,y.render=M),T&&T.sub(y),y.props=P,y.state||(y.state={}),y.context=A,y.w=r,x=y.f=!0,y.m=[]),null==y.j&&(y.j=y.state),null!=I.getDerivedStateFromProps&&c(y.j==y.state?y.j=c({},y.j):y.j,I.getDerivedStateFromProps(P,y.j)),x)null==I.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&u.push(y);else{if(null==I.getDerivedStateFromProps&&null==d&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(P,A),!d&&null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(P,y.j,A)){for(y.props=P,y.state=y.j,y.f=!1,(y.d=n).o=null!=m?m!==i.o?m:i.o:null,n.n=i.n,g=0;g<n.n.length;g++)n.n[g]&&(n.n[g].i=n);break e}null!=y.componentWillUpdate&&y.componentWillUpdate(P,y.j,A)}for(S=y.props,E=y.state,y.context=A,y.props=P,y.state=y.j,(g=e.M)&&g(n),y.f=!1,y.d=n,y.p=t,g=y.render(y.props,y.state,y.context),n.n=b(null!=g&&g.type==h&&null==g.key?g.props.children:g),null!=y.getChildContext&&(r=c(c({},r),y.getChildContext())),x||null==y.getSnapshotBeforeUpdate||(_=y.getSnapshotBeforeUpdate(S,E)),v(t,n,i,r,s,l,u,m,f),y.base=n.o;g=y.m.pop();)y.j&&(y.state=y.j),g.call(y);x||null==S||null==y.componentDidUpdate||y.componentDidUpdate(S,E,_),C&&(y.k=y.i=null)}else n.o=function(e,t,n,i,r,s,c,l){var u,d,h,p,m=n.props,f=t.props;if(r="svg"===t.type||r,null==e&&null!=s)for(u=0;u<s.length;u++)if(null!=(d=s[u])&&(null===t.type?3===d.nodeType:d.localName===t.type)){e=d,s[u]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),s=null}return null===t.type?m!==f&&(null!=s&&(s[s.indexOf(e)]=null),e.data=f):t!==n&&(null!=s&&(s=a.slice.call(e.childNodes)),h=(m=n.props||o).dangerouslySetInnerHTML,p=f.dangerouslySetInnerHTML,l||(p||h)&&(p&&h&&p.O==h.O||(e.innerHTML=p&&p.O||"")),function(e,t,n,i,r){var o;for(o in n)o in t||w(e,o,null,n[o],i);for(o in t)r&&"function"!=typeof t[o]||"value"===o||"checked"===o||n[o]===t[o]||w(e,o,t[o],n[o],i)}(e,f,m,r,l),t.n=t.props.children,p||v(e,t,n,i,"foreignObject"!==t.type&&r,s,c,o,l),l||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))),e}(i.o,n,i,r,s,l,u,f);(g=e.diffed)&&g(n)}catch(t){e.o(t,n,i)}return n.o}function _(t,n){for(var i;i=t.pop();)try{i.componentDidMount()}catch(t){e.o(t,i.d)}e.c&&e.c(n)}function C(t,n,i){try{"function"==typeof t?t(n):t.current=n}catch(t){e.o(t,i)}}function P(t,n,i){var r,o,a;if(e.unmount&&e.unmount(t),(r=t.ref)&&C(r,null,n),i||"function"==typeof t.type||(i=null!=(o=t.o)),t.o=t.l=null,null!=(r=t.c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){e.o(t,n)}r.base=r.p=null}if(r=t.n)for(a=0;a<r.length;a++)r[a]&&P(r[a],n,i);null!=o&&l(o)}function M(e,t,n){return this.constructor(e,n)}function T(){return(T=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var i=t[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}e={},p.prototype.setState=function(e,t){var n=this.j!==this.state&&this.j||(this.j=c({},this.state));"function"==typeof e&&!(e=e(n,this.props))||c(n,e),null!=e&&this.d&&(this.u=!1,t&&this.m.push(t),g(this))},p.prototype.forceUpdate=function(e){this.d&&(e&&this.m.push(e),this.u=!0,g(this))},p.prototype.render=h,t=[],n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=e.debounceRendering,e.o=function(e,t,n){for(var i;t=t.i;)if((i=t.c)&&!i.i)try{if(i.constructor&&null!=i.constructor.getDerivedStateFromError)i.setState(i.constructor.getDerivedStateFromError(e));else{if(null==i.componentDidCatch)continue;i.componentDidCatch(e)}return g(i.k=i)}catch(t){e=t}throw e},r=o;var A="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",I="[\\s|\\(]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")\\s*\\)?",R="[\\s|\\(]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")\\s*\\)?",k=new RegExp("rgb"+I),L=new RegExp("rgba"+R),N=new RegExp("hsl"+I),B=new RegExp("hsla"+R),D="^(?:#?|0x?)",O="([0-9a-fA-F]{1})",F="([0-9a-fA-F]{2})",z=new RegExp(D+O+O+O+"$"),U=new RegExp(D+O+O+O+O+"$"),H=new RegExp(D+F+F+F+"$"),j=new RegExp(D+F+F+F+F+"$"),G=Math.log,V=Math.round,W=Math.floor;function q(e,t,n){return Math.min(Math.max(e,t),n)}function Y(e,t){var n=-1<e.indexOf("%"),i=parseFloat(e);return n?t/100*i:i}function K(e){return parseInt(e,16)}function $(e){return e.toString(16).padStart(2,"0")}var X=function(){function e(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=T({},this.$)}var t=e.prototype;return t.set=function(t){if("string"==typeof t)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(t)?this.hexString=t:/^rgba?/.test(t)?this.rgbString=t:/^hsla?/.test(t)&&(this.hslString=t);else{if("object"!=typeof t)throw new Error("Invalid color value");t instanceof e?this.hsva=t.hsva:"r"in t&&"g"in t&&"b"in t?this.rgb=t:"h"in t&&"s"in t&&"v"in t?this.hsv=t:"h"in t&&"s"in t&&"l"in t?this.hsl=t:"kelvin"in t&&(this.kelvin=t.kelvin)}},t.setChannel=function(e,t,n){var i;this[e]=T({},this[e],((i={})[t]=n,i))},t.reset=function(){this.hsva=this.initialValue},t.clone=function(){return new e(this)},t.unbind=function(){this.onChange=void 0},e.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,i=e.v/100,r=W(t),o=t-r,a=i*(1-n),s=i*(1-o*n),c=i*(1-(1-o)*n),l=r%6,u=[c,i,i,s,a,a][l],d=[a,a,c,i,i,s][l];return{r:q(255*[i,s,a,a,c,i][l],0,255),g:q(255*u,0,255),b:q(255*d,0,255)}},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=r-o,s=0,c=r,l=0===r?0:a/r;switch(r){case o:s=0;break;case t:s=(n-i)/a+(n<i?6:0);break;case n:s=(i-t)/a+2;break;case i:s=(t-n)/a+4}return{h:60*s%360,s:q(100*l,0,100),v:q(100*c,0,100)}},e.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,i=(2-t)*n,r=i<=1?i:2-i,o=r<1e-9?0:t*n/r;return{h:e.h,s:q(100*o,0,100),l:q(50*i,0,100)}},e.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100,i=t+n<1e-9?0:2*n/(t+n);return{h:e.h,s:q(100*i,0,100),v:q((t+n)/2,0,100)}},e.kelvinToRgb=function(e){var t,n,i,r=e/100;return i=r<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=r-2)+104.49216199393888*G(n),r<20?0:.8274096064007395*(i=r-10)-254.76935184120902+115.67994401066147*G(i)):(t=351.97690566805693+.114206453784165*(t=r-55)-40.25366309332127*G(t),n=325.4494125711974+.07943456536662342*(n=r-50)-28.0852963507957*G(n),255),{r:q(W(t),0,255),g:q(W(n),0,255),b:q(W(i),0,255)}},e.rgbToKelvin=function(t){for(var n,i=t.r,r=t.b,o=2e3,a=4e4;.4<a-o;){var s=e.kelvinToRgb(n=.5*(a+o));s.b/s.r>=r/i?a=n:o=n}return n},function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var t=this.$;if(e=T({},t,e),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var i in t)n[i]=e[i]!=t[i];this.$=e,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=e}},{key:"hsva",get:function(){return T({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=T({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return e.rgbToKelvin(this.rgb)},set:function(t){this.rgb=e.kelvinToRgb(t)}},{key:"red",get:function(){return this.rgb.r},set:function(e){this.rgb=T({},this.rgb,{r:e})}},{key:"green",get:function(){return this.rgb.g},set:function(e){this.rgb=T({},this.rgb,{g:e})}},{key:"blue",get:function(){return this.rgb.b},set:function(e){this.rgb=T({},this.rgb,{b:e})}},{key:"rgb",get:function(){var t=e.hsvToRgb(this.$),n=t.r,i=t.g,r=t.b;return{r:V(n),g:V(i),b:V(r)}},set:function(t){this.hsv=T({},e.rgbToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"rgba",get:function(){return T({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var t=e.hsvToHsl(this.$),n=t.h,i=t.s,r=t.l;return{h:V(n),s:V(i),l:V(r)}},set:function(t){this.hsv=T({},e.hslToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"hsla",get:function(){return T({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var t,n,i,r,o=1;if((t=k.exec(e))?(n=Y(t[1],255),i=Y(t[2],255),r=Y(t[3],255)):(t=L.exec(e))&&(n=Y(t[1],255),i=Y(t[2],255),r=Y(t[3],255),o=Y(t[4],1)),!t)throw new Error("Invalid rgb string");this.rgb={r:n,g:i,b:r,a:o}}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+$(e.r)+$(e.g)+$(e.b)},set:function(e){var t,n,i,r,o=255;if((t=z.exec(e))?(n=17*K(t[1]),i=17*K(t[2]),r=17*K(t[3])):(t=U.exec(e))?(n=17*K(t[1]),i=17*K(t[2]),r=17*K(t[3]),o=17*K(t[4])):(t=H.exec(e))?(n=K(t[1]),i=K(t[2]),r=K(t[3])):(t=j.exec(e))&&(n=K(t[1]),i=K(t[2]),r=K(t[3]),o=K(t[4])),!t)throw new Error("Invalid hex string");this.rgb={r:n,g:i,b:r,a:o/255}}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+$(e.r)+$(e.g)+$(e.b)+$(W(255*e.a))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var t,n,i,r,o=1;if((t=N.exec(e))?(n=Y(t[1],360),i=Y(t[2],100),r=Y(t[3],100)):(t=B.exec(e))&&(n=Y(t[1],360),i=Y(t[2],100),r=Y(t[3],100),o=Y(t[4],1)),!t)throw new Error("Invalid hsl string");this.hsl={h:n,s:i,l:r,a:o}}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),e}();function Z(e){var t,n=e.width,i=e.sliderSize,r=e.borderWidth,o=e.handleRadius,a=e.padding,s=e.sliderShape,c="horizontal"===e.layoutDirection;return i=null!=(t=i)?t:2*a+2*o,"circle"===s?{handleStart:e.padding+e.handleRadius,handleRange:n-2*a-2*o,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-r/2}:{handleStart:i/2,handleRange:n-i,radius:i/2,x:0,y:0,width:c?i:n,height:c?n:i}}var J,Q=2*Math.PI,ee=function(e,t){return Math.sqrt(e*e+t*t)};function te(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function ne(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function ie(e,t,n){var i=e.wheelAngle,r=e.wheelDirection;return n&&"clockwise"===r?t=i+t:"clockwise"===r?t=360-i+t:n&&"anticlockwise"===r?t=i+180-t:"anticlockwise"===r&&(t=i-t),function(e,t){return(e%360+360)%360}(t)}function re(e,t,n){var i=ne(e),r=i.cx,o=i.cy,a=te(e);t=r-t,n=o-n;var s=ie(e,Math.atan2(-n,-t)*(360/Q)),c=Math.min(ee(t,n),a);return{h:Math.round(s),s:Math.round(100/a*c)}}function oe(e){var t=e.width,n=e.boxHeight;return{width:t,height:null!=n?n:t,radius:e.padding+e.handleRadius}}function ae(e,t,n){var i=oe(e),r=i.width,o=i.height,a=i.radius,s=(t-a)/(r-2*a)*100,c=(n-a)/(o-2*a)*100;return{s:Math.max(0,Math.min(s,100)),v:Math.max(0,Math.min(100-c,100))}}function se(e,t,n,i){for(var r=0;r<i.length;r++){var o=i[r].x-t,a=i[r].y-n;if(Math.sqrt(o*o+a*a)<e.handleRadius)return r}return null}function ce(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function le(e,t,n){return e+"-gradient("+t+", "+n.map((function(e){var t=e[0];return e[1]+" "+t+"%"})).join(",")+")"}function ue(e){return"string"==typeof e?e:e+"px"}var de=["mousemove","touchmove","mouseup","touchend"],he=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=this.handleEvent.bind(this),n={onMouseDown:t,ontouchstart:t},i="horizontal"===e.layoutDirection,r=null===e.margin?e.sliderMargin:e.margin,o={overflow:"visible",display:i?"inline-block":"block"};return 0<e.index&&(o[i?"marginLeft":"marginTop"]=r),u(h,null,e.children(this.uid,n,o))},t.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,i=this.base.getBoundingClientRect();e.preventDefault();var r=e.touches?e.changedTouches[0]:e,o=r.clientX-i.left,a=r.clientY-i.top;switch(e.type){case"mousedown":case"touchstart":!1!==n(o,a,0)&&de.forEach((function(e){document.addEventListener(e,t,{passive:!1})}));break;case"mousemove":case"touchmove":n(o,a,1);break;case"mouseup":case"touchend":n(o,a,2),de.forEach((function(e){document.removeEventListener(e,t,{passive:!1})}))}},t}(p);function pe(e){var t=e.r,n=e.url,i=t,r=t;return u("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ue(e.x)+", "+ue(e.y)+")",willChange:"transform",top:ue(-t),left:ue(-t),width:ue(2*t),height:ue(2*t),position:"absolute",overflow:"visible"}},n&&u("use",Object.assign({xlinkHref:function(e){J=J||document.getElementsByTagName("base");var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),i=/iPhone|iPod|iPad/i.test(t),r=window.location;return(n||i)&&0<J.length?r.protocol+"//"+r.host+r.pathname+r.search+e:e}(n)},e.props)),!n&&u("circle",{cx:i,cy:r,r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&u("circle",{cx:i,cy:r,r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function me(e){var t=e.activeIndex,n=void 0!==t&&t<e.colors.length?e.colors[t]:e.color,i=Z(e),r=i.width,o=i.height,a=i.radius,s=function(e,t){var n=Z(e),i=n.width,r=n.height,o=n.handleRange,a=n.handleStart,s="horizontal"===e.layoutDirection,c=s?i/2:r/2,l=a+function(e,t){var n=t.hsva,i=t.rgb;switch(e.sliderType){case"red":return i.r/2.55;case"green":return i.g/2.55;case"blue":return i.b/2.55;case"alpha":return 100*n.a;case"kelvin":var r=e.minTemperature,o=e.maxTemperature-r,a=(t.kelvin-r)/o*100;return Math.max(0,Math.min(a,100));case"hue":return n.h/=3.6;case"saturation":return n.s;default:return n.v}}(e,t)/100*o;return s&&(l=-1*l+o+2*a),{x:s?c:l,y:s?l:c}}(e,n),c=function(e,t){var n=t.hsv,i=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+i.g+","+i.b+")"],[100,"rgb(255,"+i.g+","+i.b+")"]];case"green":return[[0,"rgb("+i.r+",0,"+i.b+")"],[100,"rgb("+i.r+",255,"+i.b+")"]];case"blue":return[[0,"rgb("+i.r+","+i.g+",0)"],[100,"rgb("+i.r+","+i.g+",255)"]];case"alpha":return[[0,"rgba("+i.r+","+i.g+","+i.b+",0)"],[100,"rgb("+i.r+","+i.g+","+i.b+")"]];case"kelvin":for(var r=[],o=e.minTemperature,a=e.maxTemperature,s=a-o,c=o,l=0;c<a;c+=s/8,l+=1){var u=X.kelvinToRgb(c),d=u.r,h=u.g,p=u.b;r.push([12.5*l,"rgb("+d+","+h+","+p+")"])}return r;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var m=X.hsvToHsl({h:n.h,s:0,v:n.v}),f=X.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"],[100,"hsl("+f.h+","+f.s+"%,"+f.l+"%)"]];default:var g=X.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]]}}(e,n);return u(he,Object.assign({},e,{onInput:function(t,i,r){var o=function(e,t,n){var i,r=Z(e),o=r.handleRange,a=r.handleStart;i="horizontal"===e.layoutDirection?-1*n+o+a:t-a,i=Math.max(Math.min(i,o),0);var s=Math.round(100/o*i);switch(e.sliderType){case"kelvin":var c=e.minTemperature;return c+s/100*(e.maxTemperature-c);case"alpha":return s/100;case"hue":return 3.6*s;case"red":case"blue":case"green":return 2.55*s;default:return s}}(e,t,i);e.parent.inputActive=!0,n[e.sliderType]=o,e.onInput(r,e.id)}}),(function(t,i,l){return u("div",Object.assign({},i,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ue(r),height:ue(o),borderRadius:ue(a),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},l)}),u("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ue(a),background:le("linear","horizontal"===e.layoutDirection?"to top":"to right",c)},ce(e))}),u(pe,{isActive:!0,index:n.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s.x,y:s.y}))}))}function fe(e){var t=ne(e).width,n=e.colors,i=(e.borderWidth,e.parent),r=e.color,o=r.hsv,a=n.map((function(t){return function(e,t){var n=t.hsv,i=ne(e),r=i.cx,o=i.cy,a=te(e),s=(180+ie(e,n.h,!0))*(Q/360),c=n.s/100*a,l="clockwise"===e.wheelDirection?-1:1;return{x:r+c*Math.cos(s)*l,y:o+c*Math.sin(s)*l}}(e,t)})),s={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return u(he,Object.assign({},e,{onInput:function(t,n,o){if(0===o){if(!function(e,t,n){var i=ne(e),r=i.cx,o=i.cy,a=e.width/2;return ee(r-t,o-n)<a}(e,t,n))return!1;var s=se(e,t,n,a);null!==s?i.setActiveColor(s):(i.inputActive=!0,r.hsv=re(e,t,n),e.onInput(o,e.id))}else 1===o&&(i.inputActive=!0,r.hsv=re(e,t,n));e.onInput(o,e.id)}}),(function(i,c,l){return u("div",Object.assign({},c,{className:"IroWheel",style:Object.assign({},{width:ue(t),height:ue(t),position:"relative"},l)}),u("div",{className:"IroWheelHue",style:Object.assign({},s,{transform:"rotateZ("+(e.wheelAngle+90)+"deg)",background:"clockwise"===e.wheelDirection?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),u("div",{className:"IroWheelSaturation",style:Object.assign({},s,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),e.wheelLightness&&u("div",{className:"IroWheelLightness",style:Object.assign({},s,{background:"#000",opacity:1-o.v/100})}),u("div",{className:"IroWheelBorder",style:Object.assign({},s,ce(e))}),n.filter((function(e){return e!==r})).map((function(t){return u(pe,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:a[t.index].x,y:a[t.index].y})})),u(pe,{isActive:!0,index:r.index,fill:r.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:a[r.index].x,y:a[r.index].y}))}))}pe.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},me.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var ge=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(0<t.colors.length?t.colors:[t.color]).forEach((function(e){return n.addColor(e)})),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var n=new X(e,this.onColorChange.bind(this));this.colors.splice(t,0,n),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",n)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e,t){var n=this;void 0===t&&(t=0),this.colors.forEach((function(e){return e.unbind()})),this.colors=[],e.forEach((function(e){return n.addColor(e)})),this.setActiveColor(t),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var n=this,i=this.events;(Array.isArray(e)?e:[e]).forEach((function(e){(i[e]||(i[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach((function(e){t.apply(null,e)})),n.deferredEvents[e]=[])}))},t.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach((function(e){var i=n.events[e];i&&i.splice(i.indexOf(t),1)}))},t.prototype.emit=function(e){for(var t=this,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.activeEvents;r.hasOwnProperty(e)&&r[e]||(r[e]=!0,(this.events[e]||[]).forEach((function(e){return e.apply(t,n)})),r[e]=!1)},t.prototype.deferredEmit=function(e){for(var t,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.deferredEvents;(t=this).emit.apply(t,[e].concat(n)),(r[e]||(r[e]=[])).push(n)},t.prototype.setOptions=function(e){this.setState(e)},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach((function(e){return e.reset()})),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e,t){0===e?this.emit("input:start",this.color,t):1===e?this.emit("input:move",this.color,t):2===e&&this.emit("input:end",this.color,t)},t.prototype.render=function(e,t){var n=this,i=t.layout;return Array.isArray(i)||(i=[{component:fe},{component:me}],t.transparency&&i.push({component:me,options:{sliderType:"alpha"}})),u("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},i.map((function(e,i){var r=e.component,o=e.options;return u(r,Object.assign({},t,o,{ref:void 0,onInput:n.emitInputEvent.bind(n),parent:n,index:i}))})))},t}(p);ge.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var ye,ve,be,xe,we=(Se.prototype=(ye=ge).prototype,Object.assign(Se,ye),Se.I=ye,Se);function Se(t,n){var i,s=document.createElement("div");function c(){var e=t instanceof Element?t:document.querySelector(t);e.appendChild(i.base),i.onMount(e)}return function(t,n,i){var s,c,l;e.i&&e.i(t,n),c=(s=void 0===r)?null:n.n,t=u(h,null,[t]),l=[],E(n,n.n=t,c||o,o,void 0!==n.ownerSVGElement,c?null:a.slice.call(n.childNodes),l,!1,o,s),_(l,t)}(u(ye,Object.assign({},{ref:function(e){return i=e}},n)),s),"loading"!==document.readyState?c():document.addEventListener("DOMContentLoaded",c),i}return(be=ve=ve||{}).version="5.5.2",be.Color=X,be.ColorPicker=we,(xe=be.ui||(be.ui={})).h=u,xe.ComponentBase=he,xe.Handle=pe,xe.Slider=me,xe.Wheel=fe,xe.Box=function(e){var t=oe(e),n=t.width,i=t.height,r=t.radius,o=e.colors,a=e.parent,s=e.activeIndex,c=void 0!==s&&s<e.colors.length?e.colors[s]:e.color,l=function(e,t){return[[[0,"#fff"],[100,"hsl("+t.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}(0,c),d=o.map((function(t){return function(e,t){var n=oe(e),i=n.width,r=n.height,o=n.radius,a=t.hsv,s=o,c=i-2*o,l=r-2*o;return{x:s+a.s/100*c,y:s+(l-a.v/100*l)}}(e,t)}));return u(he,Object.assign({},e,{onInput:function(t,n,i){if(0===i){var r=se(e,t,n,d);null!==r?a.setActiveColor(r):(a.inputActive=!0,c.hsv=ae(e,t,n),e.onInput(i,e.id))}else 1===i&&(a.inputActive=!0,c.hsv=ae(e,t,n));e.onInput(i,e.id)}}),(function(t,a,s){return u("div",Object.assign({},a,{className:"IroBox",style:Object.assign({},{width:ue(n),height:ue(i),position:"relative"},s)}),u("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ue(r)},ce(e),{background:le("linear","to bottom",l[1])+","+le("linear","to right",l[0])})}),o.filter((function(e){return e!==c})).map((function(t){return u(pe,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:d[t.index].x,y:d[t.index].y})})),u(pe,{isActive:!0,index:c.index,fill:c.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:d[c.index].x,y:d[c.index].y}))}))},ve})),new Array(7.29,61.86,7.29,58.52,7.29,55.2,7.29,51.87,7.29,48.53,7.29,45.19,7.29,41.87,7.29,38.53,7.29,35.19,7.29,31.86,7.29,28.53,7.29,25.2,7.29,21.86,7.29,18.52,7.29,15.19,7.29,11.85,7.29,8.53,7.29,5.19,7.29,1.85,7.29,-1.47,7.29,-4.81,9.42,-6,12.77,-6,16.09,-6,19.42,-6,22.76,-5.92,26.08,-5.66,29.38,-5.17,32.63,-4.42,35.78,-3.33,38.77,-1.85,41.56,-.05,44.16,2.04,46.54,4.36,48.69,6.93,50.55,9.67,52.13,12.6,53.41,15.69,54.4,18.87,55.07,22.13,55.45,25.45,55.52,28.77,55.31,32.1,54.78,35.38,53.94,38.61,52.8,41.74,51.35,44.75,49.62,47.58,47.59,50.23,45.3,52.66,42.85,54.91,40.21,56.95,37.36,58.66,34.27,59.91,31.03,60.74,27.74,61.23,24.42,61.5,21.09,61.66,17.77,61.76,14.42,61.82,11.09,61.85,7.77,61.86,110.26,53.31,108.38,56.03,105.98,58.35,103.2,60.17,100.12,61.48,96.9,62.31,93.6,62.7,90.27,62.72,86.97,62.26,83.8,61.25,80.87,59.69,78.24,57.62,76.02,55.15,74.25,52.33,72.92,49.28,72.05,46.06,71.62,42.77,71.61,39.42,72.03,36.12,72.9,32.91,74.25,29.85,76.03,27.05,78.26,24.57,80.87,22.51,83.8,20.92,86.97,19.9,90.26,19.43,93.59,19.45,96.88,19.93,100.05,20.94,103,22.51,105.63,24.56,107.85,27.03,109.59,29.86,110.84,32.96,111.54,36.2,111.35,39.18,108.02,39.18,104.68,39.18,101.35,39.18,98.02,39.18,94.69,39.18,91.35,39.18,88.03,39.18,84.68,39.18,81.34,39.18,78.02,39.18,74.68,39.18,71.65,39.48,71.71,42.81,72.18,46.11,73.09,49.31,74.44,52.36,76.24,55.16,78.48,57.63,81.09,59.68,84.03,61.24,87.22,62.22,90.52,62.64,93.86,62.6,97.15,62.16,100.37,61.29,103.41,59.94,106.18,58.09,108.55,55.75,127.19,51.78,128.2,54.83,129.99,57.62,132.41,59.89,135.29,61.56,138.48,62.51,141.81,62.76,145.1,62.32,148.21,61.11,150.93,59.21,153.08,56.68,154.44,53.65,154.82,50.34,154.24,47.08,152.45,44.29,149.84,42.26,146.8,40.85,143.69,39.68,140.55,38.53,137.43,37.38,134.5,35.8,132.1,33.53,130.75,30.49,130.8,27.19,132.16,24.18,134.52,21.84,137.43,20.25,140.68,19.52,143.99,19.69,147.11,20.82,149.87,22.68,151.99,25.25,151.25,24.04,148.84,21.76,145.92,20.16,142.69,19.41,139.37,19.6,136.23,20.67,133.5,22.56,131.44,25.17,130.54,28.37,130.93,31.65,132.76,34.4,135.39,36.42,138.42,37.79,141.54,39,144.66,40.16,147.79,41.3,150.71,42.89,153.07,45.23,154.45,48.24,154.7,51.55,153.96,54.78,152.29,57.66,149.9,59.96,147,61.6,143.79,62.49,140.48,62.65,137.19,62.13,134.09,60.89,131.38,58.97,129.21,56.46,127.71,53.49,178.86,5.52,178.86,61.86,178.77,58.61,178.77,55.28,178.77,51.95,178.77,48.62,178.77,45.28,178.77,41.95,178.77,38.61,178.77,35.29,178.77,31.95,178.77,28.62,178.77,25.27,178.77,21.95,178.86,21.86,178.86,25.19,178.86,28.52,178.86,31.86,178.86,35.19,178.86,38.52,178.86,41.86,178.86,45.19,178.86,48.52,178.86,51.85,178.86,55.18,178.86,58.53,178.86,61.85,206.32,67.72,206.82,71.01,208.07,74.07,210.06,76.75,212.59,78.9,215.54,80.45,218.73,81.4,222.03,81.75,225.35,81.55,228.6,80.79,231.64,79.42,234.25,77.37,236.28,74.73,237.78,71.77,238.71,68.56,239.18,65.27,239.4,61.94,239.44,58.6,239.44,55.27,237.63,56.68,235.08,58.81,232.22,60.52,229.14,61.79,225.89,62.56,222.57,62.75,219.25,62.42,216.04,61.53,213.05,60.06,210.37,58.11,208.03,55.73,206.12,53.01,204.63,50.02,203.6,46.87,203.03,43.59,202.91,40.25,203.23,36.94,204.02,33.69,205.28,30.61,207,27.76,209.15,25.22,211.7,23.07,214.56,21.37,217.65,20.19,220.93,19.53,224.25,19.39,227.57,19.74,230.77,20.65,233.75,22.13,236.41,24.13,238.71,26.54,239.44,25.34,239.44,22.01,239.44,18.67,239.53,21.89,239.53,25.22,239.53,28.57,239.53,31.89,239.53,35.22,239.53,38.56,239.53,41.89,239.53,45.22,239.53,48.55,239.53,51.89,239.53,55.23,239.53,58.56,239.5,61.89,239.31,65.22,238.89,68.52,238.01,71.74,236.49,74.69,234.43,77.32,231.84,79.41,228.86,80.84,225.62,81.62,222.29,81.84,218.97,81.55,215.77,80.67,212.8,79.17,210.23,77.06,208.2,74.41,206.85,71.39,206.25,68.1,267.44,61.86,267.35,58.61,267.35,55.28,267.35,51.95,267.35,48.62,267.35,45.28,267.35,41.95,267.35,38.61,267.35,35.29,267.35,31.95,267.35,28.62,267.35,25.27,267.35,21.95,267.44,21.85,267.44,25.19,268.38,25.27,270.63,22.81,273.38,20.96,276.49,19.79,279.8,19.38,283.13,19.6,286.34,20.43,289.18,22.14,291.23,24.74,292.51,27.81,293.24,31.06,293.57,34.37,293.63,37.7,293.63,41.04,293.63,44.39,293.63,47.71,293.63,51.05,293.63,54.38,293.63,57.71,293.63,61.05,293.54,59.43,293.54,56.1,293.54,52.76,293.54,49.43,293.54,46.1,293.54,42.76,293.54,39.44,293.54,36.11,293.36,32.77,292.84,29.48,291.86,26.31,290.19,23.42,287.69,21.25,284.61,20,281.32,19.51,278,19.59,274.77,20.4,271.86,22.01,269.39,24.24,267.45,26.93,267.44,30.27,267.44,33.61,267.44,36.93,267.44,40.27,267.44,43.61,267.44,46.94,267.44,50.27,267.44,53.61,267.44,56.93,267.44,60.27,41.76,101.38,39.8,98.72,37.44,96.4,34.69,94.51,31.67,93.09,28.47,92.21,25.14,91.93,21.82,92.2,18.61,93.05,15.61,94.48,12.92,96.44,10.69,98.91,9.03,101.8,8.1,104.99,7.96,108.3,8.63,111.56,10.21,114.48,12.55,116.84,15.2,118.85,18.03,120.64,20.96,122.21,23.93,123.74,26.88,125.27,29.85,126.82,32.8,128.35,35.72,129.97,38.54,131.74,41.13,133.84,43.19,136.45,44.56,139.48,45.07,142.75,44.86,146.07,43.87,149.25,42.2,152.14,40.06,154.69,37.55,156.87,34.74,158.67,31.73,160.06,28.54,161,25.23,161.46,21.91,161.42,18.61,160.88,15.47,159.8,12.56,158.21,9.93,156.15,7.64,153.72,5.76,150.98,4.29,147.99,4.74,148.74,6.32,151.66,8.3,154.33,10.67,156.67,13.38,158.62,16.37,160.08,19.58,161,22.88,161.39,26.21,161.28,29.48,160.67,32.62,159.57,35.59,158.04,38.31,156.13,40.72,153.83,42.73,151.18,44.2,148.19,44.93,144.94,44.86,141.62,44.07,138.39,42.41,135.51,40.04,133.18,37.38,131.19,34.55,129.44,31.61,127.87,28.65,126.33,25.69,124.79,22.73,123.26,19.77,121.73,16.88,120.05,14.14,118.18,11.56,116.06,9.46,113.48,8.2,110.41,7.83,107.1,8.24,103.8,9.43,100.69,11.29,97.94,13.69,95.63,16.49,93.85,19.59,92.61,22.84,91.97,26.18,91.86,29.47,92.31,32.65,93.33,35.61,94.87,38.24,96.88,40.47,99.37,100.54,152.05,98.66,154.77,96.26,157.09,93.48,158.91,90.4,160.22,87.18,161.05,83.88,161.44,80.55,161.46,77.25,161,74.08,159.99,71.15,158.43,68.52,156.36,66.3,153.89,64.53,151.07,63.2,148.02,62.33,144.8,61.9,141.51,61.89,138.16,62.31,134.86,63.18,131.65,64.53,128.59,66.31,125.79,68.54,123.31,71.15,121.25,74.08,119.66,77.25,118.64,80.54,118.17,83.87,118.19,87.16,118.67,90.33,119.68,93.28,121.25,95.91,123.3,98.13,125.77,99.87,128.6,101.12,131.7,101.82,134.94,101.63,137.92,98.3,137.92,94.96,137.92,91.63,137.92,88.3,137.92,84.97,137.92,81.63,137.92,78.31,137.92,74.96,137.92,71.62,137.92,68.3,137.92,64.96,137.92,61.93,138.22,61.99,141.55,62.46,144.85,63.37,148.05,64.72,151.1,66.52,153.9,68.76,156.37,71.37,158.42,74.31,159.98,77.5,160.96,80.8,161.38,84.14,161.34,87.43,160.9,90.65,160.03,93.69,158.68,96.46,156.83,98.83,154.49,154.1,162.39,154.1,159.07,154.1,155.74,153.72,153.75,151.6,156.32,148.99,158.37,146.04,159.91,142.87,160.95,139.58,161.46,136.24,161.42,132.97,160.89,129.81,159.82,126.9,158.21,124.3,156.13,122.08,153.63,120.34,150.81,119.03,147.74,118.19,144.51,117.79,141.22,117.79,137.88,118.18,134.58,119.03,131.35,120.35,128.3,122.15,125.5,124.42,123.05,127.09,121.05,130.05,119.56,133.24,118.6,136.55,118.16,139.88,118.19,143.17,118.74,146.31,119.81,149.25,121.4,151.83,123.49,153.98,126.04,154.1,123.11,154.1,119.79,154.19,118.26,154.19,121.59,154.19,124.93,154.19,128.26,154.19,131.61,154.19,134.93,154.19,138.27,154.19,141.6,154.19,144.94,154.19,148.27,154.19,151.59,154.19,154.93,154.19,158.27,154.19,161.6,173.73,150.52,174.74,153.57,176.53,156.36,178.95,158.63,181.83,160.3,185.02,161.25,188.35,161.5,191.64,161.06,194.75,159.85,197.47,157.95,199.62,155.42,200.98,152.39,201.36,149.08,200.78,145.82,198.99,143.03,196.38,141,193.34,139.59,190.23,138.42,187.09,137.27,183.97,136.12,181.04,134.54,178.64,132.27,177.29,129.23,177.34,125.93,178.7,122.92,181.06,120.58,183.97,118.99,187.22,118.26,190.53,118.43,193.65,119.56,196.41,121.42,198.53,123.99,197.79,122.78,195.38,120.5,192.46,118.9,189.23,118.15,185.91,118.34,182.77,119.41,180.04,121.3,177.98,123.91,177.08,127.11,177.47,130.39,179.3,133.14,181.93,135.16,184.96,136.53,188.08,137.74,191.2,138.9,194.33,140.04,197.25,141.63,199.61,143.97,200.99,146.98,201.24,150.29,200.5,153.52,198.83,156.4,196.44,158.7,193.54,160.34,190.33,161.23,187.02,161.39,183.73,160.87,180.63,159.63,177.92,157.71,175.75,155.2,174.25,152.23,239.34,161.5,236.03,161.25,232.79,160.5,229.71,159.23,226.85,157.51,224.29,155.39,222.08,152.89,220.29,150.1,218.94,147.05,218.09,143.82,217.76,140.51,217.91,137.19,218.54,133.92,219.69,130.79,221.3,127.88,223.33,125.23,225.74,122.94,228.48,121.03,231.47,119.57,234.64,118.61,237.95,118.16,241.28,118.19,244.58,118.7,247.75,119.69,250.74,121.17,253.46,123.08,255.85,125.39,257.85,128.06,259.43,131,260.52,134.15,261.1,137.43,261.2,140.75,260.83,144.05,259.96,147.28,258.6,150.31,256.78,153.1,254.56,155.58,251.96,157.68,249.09,159.34,245.98,160.55,242.73,161.27,239.4,161.5,281.12,160.6,281.03,157.35,281.03,154.02,281.03,150.69,281.03,147.36,281.03,144.02,281.03,140.69,281.03,137.35,281.03,134.03,281.03,130.69,281.03,127.36,281.03,124.01,281.03,120.69,281.12,120.59,281.12,123.93,282.06,124.01,284.31,121.55,287.06,119.7,290.17,118.53,293.48,118.12,296.81,118.34,300.02,119.17,302.86,120.88,304.91,123.48,306.19,126.55,306.92,129.8,307.25,133.11,307.31,136.44,307.31,139.78,307.31,143.13,307.31,146.45,307.31,149.79,307.31,153.12,307.31,156.45,307.31,159.79,307.22,158.17,307.22,154.84,307.22,151.5,307.22,148.17,307.22,144.84,307.22,141.5,307.22,138.18,307.22,134.85,307.04,131.51,306.52,128.22,305.54,125.05,303.87,122.16,301.37,119.99,298.29,118.74,295,118.25,291.68,118.33,288.45,119.14,285.54,120.75,283.07,122.98,281.13,125.67,281.12,129.01,281.12,132.35,281.12,135.67,281.12,139.01,281.12,142.35,281.12,145.68,281.12,149.01,281.12,152.35,281.12,155.67,281.12,159.01);const Uu=.5*window.innerWidth,Hu=.08*window.innerHeight;var ju=new iro.ColorPicker("#colourWheelPicker",{width:Uu,boxHeight:Hu,color:"rgb(255, 0, 0)",borderWidth:1,margin:40,borderColor:"#fff",layout:[{component:iro.ui.Box},{component:iro.ui.Slider,options:{id:"hue-slider",sliderType:"hue"}}]});ju.on("input:change",(function(e){var t=new Lt(e.hexString),n=new se(t.r,t.g,t.b,1);Cu.setBackgroundColourByID("coloursample",e.hexString);var i=Cu.currentPage-1;switch(Cu.currentPage>1&&i--,0==fu?Cu.setBackgroundColourByID("basepaintbutton",e.hexString):1==fu?Cu.setBackgroundColourByID("primarypaintbutton",e.hexString):2==fu?Cu.setBackgroundColourByID("secondarypaintbutton",e.hexString):3==fu?Cu.setBackgroundColourByID("tagstylepaintbutton",e.hexString):4==fu?Cu.setBackgroundColourByID("tagpaintbutton",e.hexString):5==fu&&Cu.setBackgroundColourByID("decalpaintbutton",e.hexString),fu<3?_u.liveryData.Layers[i].Channels[fu].tint=e.hexString:fu<5?_u.liveryData.Layers[i].Channels[fu-3].tint=e.hexString:5==fu&&(_u.liveryData.Layers[i].Channels[0].tint=e.hexString),fu){case 0:Mu.mapUniforms.texture1TintChannel1.value=n;break;case 1:Mu.mapUniforms.texture1TintChannel2.value=n;break;case 2:Mu.mapUniforms.texture1TintChannel3.value=n;break;case 3:Mu.mapUniforms.tagStyleTint.value=n;break;case 4:Mu.mapUniforms.tagTint.value=n;break;case 5:Mu.mapUniforms.decalTint.value=n;break;default:alert("error in index of colour buttons in colorPatternPicker")}}));var Gu=!0,Vu=Ru.enabled;document.getElementById("c_tonemappingSlider").oninput=function(){self.amount=this.value/10,document.getElementById("c_tonemappingSliderTxt").innerHTML="toneMapping : "+self.amount,lu.toneMappingExposure=self.amount},document.getElementById("c_envStrengthSlider").oninput=function(){self.amount=this.value/100,document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+self.amount,"car"==document.getElementById("c_envstrength").value?Pu.setEnvStrength(self.amount,Lu,ku,0):"carstatic"==document.getElementById("c_envstrength").value?(document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+100*self.amount,Pu.setEnvStrength(100*self.amount,Lu,ku,1)):Pu.setEnvStrength(self.amount,Lu,ku,2)},document.getElementById("c_lightsSlider").oninput=function(){self.amount=this.value/10,document.getElementById("c_lightsSliderTxt").innerHTML="spots: "+self.amount,vu.intensity=.6*self.amount,bu.intensity=.6*self.amount},document.getElementById("c_lightsASlider").oninput=function(){self.amount=this.value/10,document.getElementById("c_lightsASliderTxt").innerHTML="ambient light: "+self.amount,xu.intensity=.5*self.amount},document.getElementById("c_lightsDSlider").oninput=function(){self.amount=this.value/10,document.getElementById("c_lightsDSliderTxt").innerHTML="dir light: "+self.amount,wu.intensity=.5*self.amount},document.getElementById("c_sfxSlider").oninput=function(){self.amount=this.value/10,document.getElementById("c_sfxSliderTxt").innerHTML="sfx bloom: "+self.amount,Au.finalPass.uniforms.bloomAmount.value=self.amount},document.getElementById("c_envstrength").onchange=function(){console.log(this.value),"car"==this.value?(document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envmapStrength,document.getElementById("c_envStrengthSlider").value=100*Lu.theHelmetMaterial.envMapIntensity):"carstatic"==this.value?(document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envstrBase,document.getElementById("c_envStrengthSlider").value=1*Lu.theBaseMaterial.envMapIntensity):(document.getElementById("c_envStrengthSliderTxt").innerHTML="envStrength : "+Pu.envstrGar,document.getElementById("c_envStrengthSlider").value=100*ku.garageMaterial.envMapIntensity)},document.getElementById("c_tonemap").onchange=function(){console.log(this.value),"linear"==this.value?lu.toneMapping=1:"cineon"==this.value?lu.toneMapping=3:"aces"==this.value&&(lu.toneMapping=4)},document.getElementById("c_sfxRibbonSlider").onchange=function(){self.amount=this.value/10,console.log(this.value),document.getElementById("c_sfxRibbonSliderTxt").innerHTML="ribbon bloom: "+self.amount,Au.f1BloomRibbonPass.strength=self.amount};var Wu=!1;function qu(e,t){for(var n,i=!1,r=0;r<e.children.length;r++){const o=e.children[r].children[0].getAttribute("patternId");if(_u.liveryData.Layers[t].patternId==o){console.log("matched"),i=!0,n=e.children[r].children[0];break}}return i||console.log(">> **** error finding matching pattern"),n}function Yu(e){var t=new ic(16777215,e);return t.castShadow=!0,t.shadow.radius=8,t.shadow.bias=-222e-6,t}function Ku(e,t){Cu.setSize(e,t,lu,cu,ju)}function $u(e,t,n,i){0==t&&(gu=e),Eu.changePattern(e,n,Mu.mapUniforms,i,_u.patternsData,_u.liveryData,t,Tu.mapUniforms,Iu,Au,Cu)}function Xu(){Cu.changedPage(1)}function Zu(){Au.mapUniforms.leadin.value=2,Au.startFX(500);var e=gu,t=Cu.currentPage-1;Cu.currentPage>1&&t--;var n=1;-1==e?console.log("no pattern so choose a colour for base"):n=_u.patternsData.Patterns[e].Channels.length;for(var i=0;i<n;i++){var r;r=-1==e?_u.patternsData.Patterns[0].Channels[0].defaultColour:_u.patternsData.Patterns[e].Channels[i].defaultColour;var o=new Lt("rgb("+r+")"),a=Eu.rgbToHex(255*o.r,255*o.g,255*o.b);_u.liveryData.Layers[t].Channels[i].tint=a,0==i?document.getElementById("basepaintbutton").style.backgroundColor=a:1==i?document.getElementById("primarypaintbutton").style.backgroundColor=a:2==i&&(document.getElementById("secondarypaintbutton").style.backgroundColor=a);var s=new se(o.r,o.g,o.b,1);0==i?Mu.mapUniforms.texture1TintChannel1.value=s:1==i?Mu.mapUniforms.texture1TintChannel2.value=s:2==i&&(Mu.mapUniforms.texture1TintChannel3.value=s)}}function Ju(e){return 0|e}function Qu(e,t){var n=document.createElement("canvas");n.width=uu,n.height=uu;var i=n.getContext("2d"),r=i.createImageData(uu,uu);r.data.set(e),i.putImageData(r,0,0);var o=n.toDataURL();const a=ql+t;console.log('>> file saving "'+a+'"'),pd(function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new Blob([o],{type:n})}(o),a),n.remove()}function ed(e,t){var n=1,i=1;0==e?(n=0,i=0):1==e?(n=0,i=1):2==e&&(n=1,i=0),0==t?(Tu.mapUniforms.baseChannel1Metal.value=n,Tu.mapUniforms.baseChannel1Rough.value=i):1==t?(Tu.mapUniforms.baseChannel2Metal.value=n,Tu.mapUniforms.baseChannel2Rough.value=i):2==t?(Tu.mapUniforms.baseChannel3Metal.value=n,Tu.mapUniforms.baseChannel3Rough.value=i):3==t?(Tu.mapUniforms.tagChannel1Metal.value=n,Tu.mapUniforms.tagChannel1Rough.value=i):4==t?(Tu.mapUniforms.tagChannel2Metal.value=n,Tu.mapUniforms.tagChannel2Rough.value=i):5==t&&(Tu.mapUniforms.decalChannel1Metal.value=n,Tu.mapUniforms.decalChannel1Rough.value=i),0==e?(document.getElementById("glossbutton").classList.add("nextButton"),document.getElementById("mattebutton").classList.remove("nextButton"),document.getElementById("metallicbutton").classList.remove("nextButton")):1==e?(document.getElementById("glossbutton").classList.remove("nextButton"),document.getElementById("mattebutton").classList.add("nextButton"),document.getElementById("metallicbutton").classList.remove("nextButton")):2==e&&(document.getElementById("glossbutton").classList.remove("nextButton"),document.getElementById("mattebutton").classList.remove("nextButton"),document.getElementById("metallicbutton").classList.add("nextButton"))}function td(e,t){for(var n,i,r=0;r<t.children.length;r++){const o=t.children[r].children[0].getAttribute("patternId");if(_u.liveryData.Layers[e].patternId==o){n=t.children[r].children[0],i=r;break}}$u(i,e,_u.liveryData.Layers[e].filename,n)}var nd=!1;const{CognitoIdentityClient:id}=n(4519),{fromCognitoIdentityPool:rd}=n(1102),{S3Client:od,PutObjectCommand:ad,ListObjectsCommand:sd,DeleteObjectCommand:cd,DeleteObjectsCommand:ld}=n(8904),ud="eu-west-2",dd=new od({region:ud,credentials:rd({client:new id({region:ud}),identityPoolId:"eu-west-2:cbf69f68-9773-42df-90ba-9f93aa42132b"})}),hd="f1-fanzone-paintshop",pd=async(e,t)=>{try{const n=encodeURIComponent("userimages")+"/";await dd.send(new sd({Prefix:n,Bucket:hd}));const i={Bucket:hd,Key:n+t,Body:e};try{await dd.send(new ad(i)),console.log(">> Successfully uploaded images to aws server.")}catch(e){return console.log(">> There was an error uploading images to aws server: "+e.message)}}catch(e){if(!files.length)return console.log(">> aws no files to upload?")}};window.s3upload=pd,window.addEventListener("resize",(function(e){Ku(window.innerWidth,window.innerHeight)}),!0),document.getElementById("versionid").innerHTML="v0.1.9.0",(lu=new vo({alpha:!0,antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!0})).sortObjects=!1,lu.shadowMap.enabled=!0,lu.shadowMap.type=2,lu.toneMapping=1,lu.toneMappingExposure=.9,function e(){if(0!=_u.loadedLiveryJSON){if(1==_u.loadedLiveryJSON)return null==Zl&&_u.resetLiveryLayerPatterns(),""!=tu?function(){const e=_u.liveryData.tagtext;document.getElementById("taginput").value=e,ed(_u.liveryData.Layers[0].Channels[0].metalroughtype,0),ed(_u.liveryData.Layers[0].Channels[1].metalroughtype,1),ed(_u.liveryData.Layers[0].Channels[2].metalroughtype,2),ed(_u.liveryData.Layers[1].Channels[0].metalroughtype,3),ed(_u.liveryData.Layers[1].Channels[1].metalroughtype,4),ed(_u.liveryData.Layers[2].Channels[0].metalroughtype,5),ed(_u.liveryData.Layers[2].Channels[1].metalroughtype,6),td(0,document.getElementById("layer1patterns_ins")),td(1,document.getElementById("layer2tags_ins")),td(2,document.getElementById("layer3decals_ins"))}():tu=document.cookie.replace(/(?:(?:^|.*;\s*)F1Livery\s*\=\s*([^;]*).*$)|^.*$/,"$1"),Iu.init(_u),Iu.isDebug=Xl,function(){if(Nu)for(;su.children.length>0;)su.remove(su.children[0]);else Nu=!0;(su=new wo).background=new Lt(5592405),(cu=new Sn(45,1,.1,900)).position.set(44,36,90),cu.layers.enable(2),cu.layers.disable(3),su.add(cu),hu=zu.appendChild(lu.domElement);var e=lu.getContext("webgl",{premultipliedAlpha:!0});e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),Au.setupBloom(su,cu,lu,uu,ku),Lu.init(Pu,Mu,au,du,Tu,Cu,Au,ku,Ru),vu=Yu(1.2),bu=Yu(1.2),vu.position.set(90,100,70),bu.position.set(-90,100,70),xu=new ac(16777215,1),(wu=new oc(16777215,1)).position.set(0,30,-30),wu.target=Lu.theHelmet,su.add(vu),su.add(bu),su.add(xu),su.add(wu),su.add(Ru.getSceneObjects(Pu)),Bu.add(Lu.theHelmet),Bu.add(ku.garageRoot),su.add(Bu),Bu.position.set(0,-30,20),(pu=new jc(cu,lu.domElement)).enablePan=!0,pu.enableDamping=!1,Xl||(pu.minDistance=70,pu.maxDistance=200,pu.minPolarAngle=Math.PI/6,pu.maxPolarAngle=Math.PI/2.15),pu.target=new de(0,-8,5),Su=new de(0,-8,5),pu.addEventListener("end",(()=>{mu.getElapsedTime(),pu.enablePan=!0})),pu.addEventListener("start",(()=>{mu.getElapsedTime()})),pu.addEventListener("change",(()=>{cu.position.y,pu.getDistance()})),pu.update(),Ku(window.innerWidth,window.innerHeight)}(),_u.loadedLiveryJSON=2,void requestAnimationFrame(e);!nd&&Pu.alltexturesloaded&&(nd=!0,su.background=ku.backgroundImage),requestAnimationFrame(e),lu.setAnimationLoop((()=>{Xl||(pu.target=pu.target.lerpVectors(pu.target,Su,.01)),Ru.enabled&&Ru.update(),pu.update(),Fc.update(),Au.finalPass.uniforms.amountBloom.value>0&&Au.timePassing(),Gu?function(){if(cu.layers.enableAll(),cu.layers.disable(3),lu.setRenderTarget(Tu.bufferMapSceneTarget),lu.render(Tu.bufferMapScene,Tu.bufferMapCamera),lu.setRenderTarget(Mu.bufferMapSceneTarget),lu.render(Mu.bufferMapScene,Mu.bufferMapCamera),Lu.theHelmetMaterial.map=Mu.bufferMapSceneTarget.texture,Lu.theHelmetMaterial.needsUpdate=!0,Lu.specialFXMesh){Au.mapUniforms.texture1Base.value=Eu.patternTexture,Au.mapUniforms.layer.value=Cu.currentPage;var e=0;3==Cu.currentPage?e=1:4==Cu.currentPage&&(e=2);const t=Cu.hexToRgb(_u.liveryData.Layers[e].Channels[0].tint),n=Cu.hexToRgb(_u.liveryData.Layers[e].Channels[1].tint),i=Cu.hexToRgb(_u.liveryData.Layers[e].Channels[2].tint);Au.mapUniforms.chan1Colour.value=new de(t.r/=255,t.g/=255,t.b/=255),Au.mapUniforms.chan2Colour.value=new de(n.r/=255,n.g/=255,n.b/=255),Au.mapUniforms.chan3Colour.value=new de(i.r/=255,i.g/=255,i.b/=255),Au.mapUniforms.fTime.value=Au.finalPass.uniforms.amountBloom.value,lu.setRenderTarget(Au.bufferMapSceneTarget),lu.render(Au.bufferMapScene,Au.bufferMapCamera),Au.plainMat.map=Au.bufferMapSceneTarget.texture,Lu.specialFXMesh.material=Au.plainMat,au||(Lu.baseFXMesh.material=Au.blackMat),Lu.specialFXMesh.material.map=Au.bufferMapSceneTarget.texture}su.background=new Lt(0),cu.layers.disable(1),Au.fxComposer.render(),Lu.specialFXMesh&&(au||(Lu.baseFXMesh.material=Au.blackMat),Lu.specialFXMesh.material=Au.blackMat,Ru.enabled&&cu.layers.enable(3),Au.fxRibbonComposer.render(),cu.layers.disable(3)),cu.layers.enable(1),0!=ku.backgroundImage?su.background=ku.backgroundImage:su.background=new Lt(5592405),Lu.specialFXMesh&&(au||(Lu.baseFXMesh.material=Lu.theBaseMaterial),Lu.specialFXMesh.material=Lu.theHelmetMaterial),cu.layers.enableAll(),cu.layers.disable(3),Au.finalComposer.render()}():(cu.layers.enableAll(),Ru.enabled||cu.layers.disable(3),lu.setRenderTarget(Tu.bufferMapSceneTarget),lu.render(Tu.bufferMapScene,Tu.bufferMapCamera),lu.setRenderTarget(Mu.bufferMapSceneTarget),lu.render(Mu.bufferMapScene,Mu.bufferMapCamera),Lu.theHelmetMaterial.map=Mu.bufferMapSceneTarget.texture,Lu.theHelmetMaterial.needsUpdate=!0,lu.setRenderTarget(null),lu.render(su,cu))})),0!=Du&&function(){if(Cu.currentPage,Cu.currentPage,4==Du){(function(){lu.readRenderTargetPixels(Mu.bufferMapSceneTarget,0,0,uu,uu,Ou);const e=new Yo(Ou,uu,uu);e.flipY=!0,e.needsUpdate=!0,e.encoding=L})(),function(){lu.readRenderTargetPixels(Tu.bufferMapSceneTarget,0,0,uu,uu,Fu);const e=new Yo(Fu,uu,uu);e.flipY=!0,e.needsUpdate=!0,e.encoding=L}(),Du=0;const o=function(){const e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r=e.getHours(),o=e.getMinutes();var a=t;return n<10&&(a+="0"),a+=n,i<10&&(a+="0"),a=a+i+"_",r<10&&(a+="0"),a+=r,o<10&&(a+="0"),a+o}();_u.liveryData.timestamp=o,Qu(Ou,"_"+o+"_map.png"),Qu(Fu,"_"+o+"_roughmetal.png");var e=ql+"_"+o+"_livery.json",t=JSON.stringify(_u.liveryData),n=new Blob([t],{type:"text/plain;charset=utf-8"});pd(n,e);const a="https://solarflarestudio.8thwall.app/f1-fanzone-ar-v2/?u="+ql+"&d="+o;console.log(">> AR url('"+a+"')"),document.getElementById("launchbuttonlink").href=new URL(a);var i=new Date;i.setTime(i.getTime()+31536e6);var r="expires="+i.toUTCString();t=JSON.stringify(_u.liveryData),document.cookie="F1Livery="+t+"; "+r+"; path=/",Cu.showPage(6)}}()}else requestAnimationFrame(e)}();const md="iframeControls",fd="startBtn",gd="poweredByLogo";window.toggleFullscreen=()=>{document.getElementById(nu).classList.toggle("fullscreen-iframe"),document.getElementById(md).classList.toggle("fullscreen-iframeControls"),document.getElementById(EXPAND_BTN_ID).classList.toggle("fullscreen-btn"),document.getElementById("stopBtn").classList.toggle("hidden")},window.startAR=()=>{document.getElementById(nu);const e=document.getElementById(md),t=document.getElementById(fd);t.classList.add("fade-out");const n=document.getElementById(gd);n.classList.add("fade-out"),window.addEventListener("message",(i=>{if("acceptedCamera"!==i.data)return;e.style.opacity=0;const r=setTimeout((()=>{t.style.display="none",n.style.display="none",e.style.display="block"}),300),o=setTimeout((()=>{e.classList.add("fade-in")}),800);setTimeout((()=>{clearTimeout(r),clearTimeout(o)}),900)}))},window.stopAR=()=>{const e=document.getElementById(md);e.style.opacity=1,e.classList.remove("fade-in"),e.classList.add("fade-out");const t=document.getElementById(fd);t.style.opacity=0,t.style.display="block",t.classList.remove("fade-out"),t.classList.add("fade-in");const n=document.getElementById(gd);n.style.opacity=0,n.style.display="block",n.classList.remove("fade-out"),n.classList.add("fade-in"),document.getElementById(nu).setAttribute("src","");const i=setTimeout((()=>{t.style.opacity=1,t.classList.remove("fade-in"),n.style.opacity=1,n.classList.remove("fade-in"),e.style.display="none",e.style.opacity=0,e.classList.remove("fade-out")}),300);setTimeout((()=>{clearTimeout(i)}),900)}},4287:()=>{}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(6163)})();